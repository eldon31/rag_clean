[
  {
    "text": "Search Operations | qdrant/qdrant-client | DeepWiki\n\n[Index your code with Devin](private-repo.md)\n\n[DeepWiki](https://deepwiki.com)\n\n[DeepWiki](.md)\n\n[qdrant/qdrant-client](https://github.com/qdrant/qdrant-client \"Open repository\")\n\n[Index your code with](private-repo.md)\n\n[Devin](private-repo.md)\n\nShare\n\nLast indexed: 9 July 2025 ([ac6f6c](https://github.com/qdrant/qdrant-client/commits/ac6f6cd2))\n\n- [Overview](qdrant/qdrant-client/1-overview.md)\n- [Client Architecture](qdrant/qdrant-client/2-client-architecture.md)\n- [Client Interface](qdrant/qdrant-client/2.1-client-interface.md)\n- [Local Mode](qdrant/qdrant-client/2.2-local-mode.md)\n- [Remote Mode](qdrant/qdrant-client/2.3-remote-mode.md)\n- [Protocol Handling](qdrant/qdrant-client/2.4-protocol-handling.md)\n- [Core Operations](qdrant/qdrant-client/3-core-operations.md)\n- [Search Operations](qdrant/qdrant-client/3.1-search-operations.md)\n- [Collection Management](qdrant/qdrant-client/3.2-collection-management.md)\n- [Point Operations](qdrant/qdrant-client/3.3-point-operations.md)\n- [Advanced Features](qdrant/qdrant-client/4-advanced-features.md)\n- [FastEmbed Integration](qdrant/qdrant-client/4.1-fastembed-integration.md)\n- [Batch Operations](qdrant/qdrant-client/4.2-batch-operations.md)\n- [Hybrid Search](qdrant/qdrant-client/4.3-hybrid-search.md)\n- [Local Inference](qdrant/qdrant-client/4.4-local-inference.md)\n- [Implementation Details](qdrant/qdrant-client/5-implementation-details.md)\n- [Payload Filtering](qdrant/qdrant-client/5.1-payload-filtering.md)\n- [Type Inspector System](qdrant/qdrant-client/5.2-type-inspector-system.md)\n- [Expression Evaluation](qdrant/qdrant-client/5.3-expression-evaluation.md)\n- [Development & Testing](qdrant/qdrant-client/6-development-and-testing.md)\n- [Project Setup](qdrant/qdrant-client/6.1-project-setup.md)\n- [Testing Framework](qdrant/qdrant-client/6.2-testing-framework.md)\n- [Documentation System](qdrant/qdrant-client/6.3-documentation-system.md)\n\nMenu\n\n# Search Operations\n\nRelevant source files",
    "metadata": {
      "chunk_id": 0,
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_3.1-search-operations.md",
      "input_type": "qdrant",
      "chunking_strategy": "platform_documentation",
      "token_count": 608,
      "character_count": 2016,
      "created_at": "2025-10-16T17:42:32.383442",
      "parent_context": null,
      "semantic_type": "qdrant",
      "collection_name": "Qdrant",
      "subfolder_name": "qdrant_qdrant-client",
      "collection_strategy": "platform_documentation",
      "chunk_index_in_file": 0,
      "file_relative_path": "Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_3.1-search-operations.md",
      "collection_context": "Qdrant/qdrant_qdrant-client"
    }
  },
  {
    "text": "- [qdrant\\_client/async\\_qdrant\\_client.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/async_qdrant_client.py)\n- [qdrant\\_client/async\\_qdrant\\_remote.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/async_qdrant_remote.py)\n- [qdrant\\_client/conversions/common\\_types.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/conversions/common_types.py)\n- [qdrant\\_client/local/async\\_qdrant\\_local.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/async_qdrant_local.py)\n- [qdrant\\_client/local/local\\_collection.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py)\n- [qdrant\\_client/local/qdrant\\_local.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/qdrant_local.py)\n- [qdrant\\_client/qdrant\\_client.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_client.py)\n- [qdrant\\_client/qdrant\\_remote.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_remote.py)\n- [tests/congruence\\_tests/test\\_common.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/tests/congruence_tests/test_common.py)\n- [tests/congruence\\_tests/test\\_query.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/tests/congruence_tests/test_query.py)\n\nSearch operations are the core functionality of the qdrant-client library, enabling vector similarity search, recommendations, discovery, and hybrid queries across both local and remote Qdrant instances. This document covers the search architecture, query types, and execution flows for all search operations in the client.\n\nFor collection management operations, see [Collection Management](qdrant/qdrant-client/3.2-collection-management.md). For embedding integration during search, see [FastEmbed Integration](qdrant/qdrant-client/4.1-fastembed-integration.md). For hybrid search algorithms, see [Hybrid Search](qdrant/qdrant-client/4.3-hybrid-search.md).\n\n## Search Architecture Overview\n\nThe search system follows a unified architecture where all search operations flow through a consistent interface regardless of the backend implementation.\n\n```\n```\n\nSources: [qdrant\\_client/qdrant\\_client.py437-610](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_client.py#L437-L610) [qdrant\\_client/qdrant\\_remote.py543-682](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_remote.py#L543-L682) [qdrant\\_client/local/qdrant\\_local.py174-224](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/qdrant_local.py#L174-L224)\n\n## Search Methods\n\n### Universal Query Interface\n\nThe `query_points()` method serves as the universal endpoint for all search operations, supporting vector search, recommendations, discovery, context search, and hybrid queries.\n\n```\n```\n\nSources: [qdrant\\_client/qdrant\\_client.py437-610](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_client.py#L437-L610) [qdrant\\_client/qdrant\\_client.py554-592](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_client.py#L554-L592)\n\n### Legacy Search Methods\n\nThe `search()` and `search_batch()` methods are deprecated but maintained for backward compatibility. They internally convert to `query_points()` calls.\n\n| Method            | Status     | Replacement             | Purpose                         |\n| ----------------- | ---------- | ----------------------- | ------------------------------- |\n| `search()`        | Deprecated | `query_points()`        | Single vector similarity search |\n| `search_batch()`  | Deprecated | `query_batch_points()`  | Batch vector searches           |\n| `search_groups()` | Deprecated | `query_points_groups()` | Grouped search results          |",
    "metadata": {
      "chunk_id": 1,
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_3.1-search-operations.md",
      "input_type": "qdrant",
      "chunking_strategy": "platform_documentation",
      "token_count": 1019,
      "character_count": 3826,
      "created_at": "2025-10-16T17:42:32.388610",
      "parent_context": null,
      "semantic_type": "qdrant",
      "collection_name": "Qdrant",
      "subfolder_name": "qdrant_qdrant-client",
      "collection_strategy": "platform_documentation",
      "chunk_index_in_file": 1,
      "file_relative_path": "Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_3.1-search-operations.md",
      "collection_context": "Qdrant/qdrant_qdrant-client"
    }
  },
  {
    "text": "Sources: [qdrant\\_client/qdrant\\_client.py277-391](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_client.py#L277-L391) [qdrant\\_client/qdrant\\_client.py236-275](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_client.py#L236-L275)\n\n## Query Types and Resolution\n\n### Dense Vector Queries\n\nDense vector queries use numerical vectors for similarity search with various distance metrics.\n\n```\n```\n\nSources: [qdrant\\_client/local/local\\_collection.py533-701](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L533-L701) [qdrant\\_client/local/local\\_collection.py282-332](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L282-L332)\n\n### Sparse Vector Queries\n\nSparse vectors use index-value pairs for high-dimensional sparse data with optional IDF rescoring.\n\n```\n```\n\nSources: [qdrant\\_client/local/local\\_collection.py639-646](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L639-L646) [qdrant\\_client/local/local\\_collection.py190-202](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L190-L202)\n\n### Advanced Query Types\n\n#### Recommendation Queries\n\nRecommendation queries use positive and negative examples to find similar vectors.\n\n```\n```\n\nSources: [qdrant\\_client/local/local\\_collection.py591-622](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L591-L622) [qdrant\\_client/local/qdrant\\_local.py353-361](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/qdrant_local.py#L353-L361)\n\n#### Discovery and Context Queries\n\nDiscovery queries find vectors that distinguish between target and context, while context queries use positive-negative pairs.\n\n```\n```\n\nSources: [qdrant\\_client/local/local\\_collection.py623-638](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L623-L638) [qdrant\\_client/local/qdrant\\_local.py363-385](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/qdrant_local.py#L363-L385)\n\n## Search Execution Pipeline\n\n### Local Collection Search\n\nThe `LocalCollection` class implements the complete search pipeline for local execution.\n\n```\n```\n\nSources: [qdrant\\_client/local/local\\_collection.py533-701](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L533-L701) [qdrant\\_client/local/local\\_collection.py499-523](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L499-L523)\n\n### Remote Search Execution\n\nRemote searches are handled by `QdrantRemote` with automatic protocol conversion between REST and gRPC.\n\n```\n```\n\nSources: [qdrant\\_client/qdrant\\_remote.py543-682](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_remote.py#L543-L682) [qdrant\\_client/qdrant\\_remote.py573-629](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_remote.py#L573-L629)\n\n## Hybrid Search and Prefetch\n\n### Prefetch Pipeline\n\nPrefetch operations enable multi-stage search with rescoring and fusion algorithms.\n\n```\n```\n\nSources: [qdrant\\_client/local/local\\_collection.py703-755](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L703-L755) [qdrant\\_client/local/local\\_collection.py792-842](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L792-L842)\n\n### Fusion Query Processing\n\n```\n```",
    "metadata": {
      "chunk_id": 2,
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_3.1-search-operations.md",
      "input_type": "qdrant",
      "chunking_strategy": "platform_documentation",
      "token_count": 992,
      "character_count": 3593,
      "created_at": "2025-10-16T17:42:32.395991",
      "parent_context": null,
      "semantic_type": "qdrant",
      "collection_name": "Qdrant",
      "subfolder_name": "qdrant_qdrant-client",
      "collection_strategy": "platform_documentation",
      "chunk_index_in_file": 2,
      "file_relative_path": "Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_3.1-search-operations.md",
      "collection_context": "Qdrant/qdrant_qdrant-client"
    }
  },
  {
    "text": "Sources: [qdrant\\_client/local/local\\_collection.py804-842](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L804-L842) [qdrant\\_client/hybrid/fusion.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/hybrid/fusion.py)\n\n## Performance Considerations\n\n### Vector Type Performance\n\n| Vector Type | Storage              | Search Performance              | Memory Usage              |\n| ----------- | -------------------- | ------------------------------- | ------------------------- |\n| Dense       | `np.ndarray`         | Fast with vectorized operations | High for large dimensions |\n| Sparse      | `list[SparseVector]` | Efficient for high sparsity     | Low for sparse data       |\n| Multi       | `list[np.ndarray]`   | Variable by comparator          | Highest memory usage      |\n\n### Search Optimizations\n\nThe local collection implements several optimizations for search performance:\n\n- **Early termination** with score thresholds\n- **Vectorized distance calculations** using NumPy operations\n- **Payload filtering masks** to avoid unnecessary computations\n- **Result ordering** based on distance metrics\n- **IDF rescoring** for sparse vectors when configured\n\nSources: [qdrant\\_client/local/local\\_collection.py649-701](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L649-L701) [qdrant\\_client/local/local\\_collection.py175-202](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L175-L202)\n\n### Batch Processing\n\nBatch operations reduce network overhead for multiple queries:\n\n```\n```\n\nSources: [qdrant\\_client/qdrant\\_client.py393-435](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_client.py#L393-L435) [qdrant\\_client/qdrant\\_remote.py684-750](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_remote.py#L684-L750)\n\nDismiss\n\nRefresh this wiki\n\nEnter email to refresh\n\n### On this page\n\n- [Search Operations](#search-operations.md)\n- [Search Architecture Overview](#search-architecture-overview.md)\n- [Search Methods](#search-methods.md)\n- [Universal Query Interface](#universal-query-interface.md)\n- [Legacy Search Methods](#legacy-search-methods.md)\n- [Query Types and Resolution](#query-types-and-resolution.md)\n- [Dense Vector Queries](#dense-vector-queries.md)\n- [Sparse Vector Queries](#sparse-vector-queries.md)\n- [Advanced Query Types](#advanced-query-types.md)\n- [Recommendation Queries](#recommendation-queries.md)\n- [Discovery and Context Queries](#discovery-and-context-queries.md)\n- [Search Execution Pipeline](#search-execution-pipeline.md)\n- [Local Collection Search](#local-collection-search.md)\n- [Remote Search Execution](#remote-search-execution.md)\n- [Hybrid Search and Prefetch](#hybrid-search-and-prefetch.md)\n- [Prefetch Pipeline](#prefetch-pipeline.md)\n- [Fusion Query Processing](#fusion-query-processing.md)\n- [Performance Considerations](#performance-considerations.md)\n- [Vector Type Performance](#vector-type-performance.md)\n- [Search Optimizations](#search-optimizations.md)\n- [Batch Processing](#batch-processing.md)",
    "metadata": {
      "chunk_id": 3,
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_3.1-search-operations.md",
      "input_type": "qdrant",
      "chunking_strategy": "platform_documentation",
      "token_count": 767,
      "character_count": 3166,
      "created_at": "2025-10-16T17:42:32.398552",
      "parent_context": null,
      "semantic_type": "qdrant",
      "collection_name": "Qdrant",
      "subfolder_name": "qdrant_qdrant-client",
      "collection_strategy": "platform_documentation",
      "chunk_index_in_file": 3,
      "file_relative_path": "Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_3.1-search-operations.md",
      "collection_context": "Qdrant/qdrant_qdrant-client"
    }
  }
]