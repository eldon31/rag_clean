[
  {
    "text": "FastMCP Client System | jlowin/fastmcp | DeepWiki\n\n[Index your code with Devin](private-repo.md)\n\n[DeepWiki](https://deepwiki.com)\n\n[DeepWiki](.md)\n\n[jlowin/fastmcp](https://github.com/jlowin/fastmcp \"Open repository\")\n\n[Index your code with](private-repo.md)\n\n[Devin](private-repo.md)\n\nShare\n\nLast indexed: 30 September 2025 ([66221e](https://github.com/jlowin/fastmcp/commits/66221ed3))\n\n- [FastMCP Overview](jlowin/fastmcp/1-fastmcp-overview.md)\n- [Installation and Setup](jlowin/fastmcp/1.1-installation-and-setup.md)\n- [FastMCP Server Core](jlowin/fastmcp/2-fastmcp-server-core.md)\n- [Component System Architecture](jlowin/fastmcp/2.1-component-system-architecture.md)\n- [Context System and Dependencies](jlowin/fastmcp/2.2-context-system-and-dependencies.md)\n- [Server Composition and Proxying](jlowin/fastmcp/2.3-server-composition-and-proxying.md)\n- [FastMCP Client System](jlowin/fastmcp/3-fastmcp-client-system.md)\n- [Transport Mechanisms](jlowin/fastmcp/3.1-transport-mechanisms.md)\n- [Client Authentication](jlowin/fastmcp/3.2-client-authentication.md)\n- [HTTP Server and Deployment](jlowin/fastmcp/4-http-server-and-deployment.md)\n- [Authentication and Security](jlowin/fastmcp/4.1-authentication-and-security.md)\n- [Middleware System](jlowin/fastmcp/4.2-middleware-system.md)\n- [Command Line Interface](jlowin/fastmcp/5-command-line-interface.md)\n- [OpenAPI Integration](jlowin/fastmcp/6-openapi-integration.md)\n- [Configuration Management](jlowin/fastmcp/7-configuration-management.md)\n- [Testing and Development Framework](jlowin/fastmcp/8-testing-and-development-framework.md)\n- [Project Infrastructure](jlowin/fastmcp/9-project-infrastructure.md)\n- [Documentation and Updates](jlowin/fastmcp/10-documentation-and-updates.md)\n\nMenu\n\n# FastMCP Client System\n\nRelevant source files\n\n- [docs/clients/client.mdx](https://github.com/jlowin/fastmcp/blob/66221ed3/docs/clients/client.mdx)\n- [docs/clients/transports.mdx](https://github.com/jlowin/fastmcp/blob/66221ed3/docs/clients/transports.mdx)\n- [docs/servers/composition.mdx](https://github.com/jlowin/fastmcp/blob/66221ed3/docs/servers/composition.mdx)\n- [docs/servers/proxy.mdx](https://github.com/jlowin/fastmcp/blob/66221ed3/docs/servers/proxy.mdx)\n- [examples/in\\_memory\\_proxy\\_example.py](https://github.com/jlowin/fastmcp/blob/66221ed3/examples/in_memory_proxy_example.py)\n- [src/fastmcp/client/client.py](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/client.py)\n- [src/fastmcp/client/transports.py](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/transports.py)\n- [src/fastmcp/mcp\\_config.py](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/mcp_config.py)\n- [src/fastmcp/server/proxy.py](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/server/proxy.py)\n- [src/fastmcp/utilities/mcp\\_config.py](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/utilities/mcp_config.py)\n- [tests/client/test\\_client.py](https://github.com/jlowin/fastmcp/blob/66221ed3/tests/client/test_client.py)\n- [tests/client/test\\_stdio.py](https://github.com/jlowin/fastmcp/blob/66221ed3/tests/client/test_stdio.py)\n\nThe FastMCP Client System provides a programmatic interface for interacting with Model Context Protocol (MCP) servers through a well-typed, Pythonic API. This system handles protocol operations, connection management, and session lifecycle while abstracting away transport-specific implementation details.",
    "metadata": {
      "chunk_id": 0,
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_3-fastmcp-client-system.md",
      "input_type": "fast_docs",
      "chunking_strategy": "api_documentation",
      "token_count": 988,
      "character_count": 3441,
      "created_at": "2025-10-16T17:42:18.886945",
      "parent_context": null,
      "semantic_type": "fast_docs",
      "collection_name": "FAST_DOCS",
      "subfolder_name": "jlowin_fastmcp",
      "collection_strategy": "api_documentation",
      "chunk_index_in_file": 0,
      "file_relative_path": "FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_3-fastmcp-client-system.md",
      "collection_context": "FAST_DOCS/jlowin_fastmcp"
    }
  },
  {
    "text": "For information about creating and configuring MCP servers, see [FastMCP Server Core](jlowin/fastmcp/2-fastmcp-server-core.md). For details about HTTP server deployment and authentication, see [HTTP Server and Deployment](jlowin/fastmcp/6-openapi-integration.md).\n\n## Core Architecture\n\nThe FastMCP Client System implements a separation of concerns between protocol handling and connection management through two primary components:\n\n| Component     | Responsibility                                                 | Key Classes                                                                                        |\n| ------------- | -------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- |\n| **Client**    | MCP protocol operations, session management, callback handling | `Client`                                                                                           |\n| **Transport** | Connection establishment, communication channel management     | `ClientTransport`, `SSETransport`, `StreamableHttpTransport`, `StdioTransport`, `FastMCPTransport` |\n\n### Client-Transport Relationship\n\n```\n```\n\n**Sources**: [src/fastmcp/client/client.py90-149](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/client.py#L90-L149) [src/fastmcp/client/transports.py71-115](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/transports.py#L71-L115)\n\nThe `Client` class uses generic typing to preserve specific transport types, enabling transport-specific configuration while maintaining a consistent protocol interface.\n\n### Transport Inference\n\nThe client automatically selects appropriate transports based on input type:\n\n```\n```\n\n**Sources**: [src/fastmcp/client/transports.py888-924](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/transports.py#L888-L924) [src/fastmcp/client/client.py150-221](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/client.py#L150-L221)\n\n## Client Session Management\n\nThe `Client` implements a sophisticated session management system supporting reentrant context managers and concurrent usage patterns.\n\n### Session State Architecture\n\n```\n```\n\n**Sources**: [src/fastmcp/client/client.py73-88](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/client.py#L73-L88) [src/fastmcp/client/client.py451-474](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/client.py#L451-L474)\n\n### Connection Lifecycle\n\nThe client manages connection lifecycle through reference counting and background session management:\n\n```\n```\n\n**Sources**: [src/fastmcp/client/client.py367-411](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/client.py#L367-L411) [src/fastmcp/client/client.py413-449](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/client.py#L413-L449)\n\n## Transport System\n\n### Transport Interface\n\nAll transports implement the `ClientTransport` abstract base class:\n\n```\n```\n\n**Sources**: [src/fastmcp/client/transports.py71-115](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/transports.py#L71-L115) [src/fastmcp/client/transports.py301-417](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/transports.py#L301-L417)\n\n### STDIO Transport Environment Management\n\nSTDIO transports implement environment isolation for security:\n\n```\n```\n\n**Sources**: [src/fastmcp/client/transports.py301-417](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/transports.py#L301-L417) [src/fastmcp/client/transports.py465-508](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/transports.py#L465-L508)\n\n## Client Protocol Operations\n\nThe `Client` class provides methods for all MCP protocol operations, with both raw protocol and convenience variants:\n\n### Tool Operations\n\n| Method             | Return Type                 | Description                       |\n| ------------------ | --------------------------- | --------------------------------- |\n| `list_tools()`     | `list[mcp.types.Tool]`      | List available tools              |\n| `list_tools_mcp()` | `mcp.types.ListToolsResult` | Raw MCP protocol result           |\n| `call_tool()`      | `CallToolResult`            | Execute tool with type conversion |\n| `call_tool_mcp()`  | `mcp.types.CallToolResult`  | Raw MCP tool execution            |",
    "metadata": {
      "chunk_id": 1,
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_3-fastmcp-client-system.md",
      "input_type": "fast_docs",
      "chunking_strategy": "api_documentation",
      "token_count": 987,
      "character_count": 4422,
      "created_at": "2025-10-16T17:42:18.897302",
      "parent_context": null,
      "semantic_type": "fast_docs",
      "collection_name": "FAST_DOCS",
      "subfolder_name": "jlowin_fastmcp",
      "collection_strategy": "api_documentation",
      "chunk_index_in_file": 1,
      "file_relative_path": "FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_3-fastmcp-client-system.md",
      "collection_context": "FAST_DOCS/jlowin_fastmcp"
    }
  },
  {
    "text": "**Sources**: [src/fastmcp/client/client.py763-895](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/client.py#L763-L895)\n\n### Resource Operations\n\n| Method                      | Return Type                                                    | Description              |\n| --------------------------- | -------------------------------------------------------------- | ------------------------ |\n| `list_resources()`          | `list[mcp.types.Resource]`                                     | List available resources |\n| `list_resource_templates()` | `list[mcp.types.ResourceTemplate]`                             | List URI templates       |\n| `read_resource()`           | `list[mcp.types.TextResourceContents \\| BlobResourceContents]` | Read resource contents   |\n\n**Sources**: [src/fastmcp/client/client.py525-636](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/client.py#L525-L636)\n\n### Prompt Operations\n\n| Method           | Return Type                 | Description                  |\n| ---------------- | --------------------------- | ---------------------------- |\n| `list_prompts()` | `list[mcp.types.Prompt]`    | List available prompts       |\n| `get_prompt()`   | `mcp.types.GetPromptResult` | Render prompt with arguments |\n\n**Sources**: [src/fastmcp/client/client.py639-716](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/client.py#L639-L716)\n\n### Tool Result Processing\n\nThe client provides structured result handling through the `CallToolResult` dataclass:\n\n```\n```\n\n**Sources**: [src/fastmcp/client/client.py826-894](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/client.py#L826-L894) [src/fastmcp/client/client.py897-903](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/client.py#L897-L903)\n\n## Client Configuration and Handlers\n\n### Handler System\n\nThe client supports multiple callback handlers for server interactions:\n\n| Handler Type      | Purpose                          | Interface                                  |\n| ----------------- | -------------------------------- | ------------------------------------------ |\n| `LogHandler`      | Process server log messages      | `(LogMessage) -> Awaitable[None]`          |\n| `ProgressHandler` | Monitor operation progress       | `(float, float?, str?) -> Awaitable[None]` |\n| `SamplingHandler` | Respond to LLM sampling requests | Complex sampling interface                 |\n| `RootsHandler`    | Provide filesystem roots         | `() -> RootsList`                          |\n\n**Sources**: [src/fastmcp/client/client.py210-267](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/client.py#L210-L267)\n\n### Client Factory Pattern\n\nThe client constructor uses overloaded signatures to support transport inference while maintaining type safety:\n\n```\n```\n\n**Sources**: [src/fastmcp/client/client.py150-221](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/client.py#L150-L221) [src/fastmcp/client/transports.py888-924](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/transports.py#L888-L924)\n\n## Integration with Server Composition\n\nThe client system integrates with FastMCP's server composition patterns through several mechanisms:\n\n### Proxy Client Usage\n\n```\n```\n\n**Sources**: [docs/servers/proxy.mdx278-329](https://github.com/jlowin/fastmcp/blob/66221ed3/docs/servers/proxy.mdx#L278-L329) [examples/in\\_memory\\_proxy\\_example.py40-50](https://github.com/jlowin/fastmcp/blob/66221ed3/examples/in_memory_proxy_example.py#L40-L50)\n\n### Multi-Server Configuration\n\nThe `MCPConfigTransport` enables single-client access to multiple servers through automatic composition:\n\n```\n```\n\n**Sources**: [src/fastmcp/client/transports.py817-887](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/client/transports.py#L817-L887) [docs/clients/client.mdx124-142](https://github.com/jlowin/fastmcp/blob/66221ed3/docs/clients/client.mdx#L124-L142)\n\nDismiss\n\nRefresh this wiki\n\nEnter email to refresh\n\n### On this page",
    "metadata": {
      "chunk_id": 2,
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_3-fastmcp-client-system.md",
      "input_type": "fast_docs",
      "chunking_strategy": "api_documentation",
      "token_count": 937,
      "character_count": 4037,
      "created_at": "2025-10-16T17:42:18.908640",
      "parent_context": null,
      "semantic_type": "fast_docs",
      "collection_name": "FAST_DOCS",
      "subfolder_name": "jlowin_fastmcp",
      "collection_strategy": "api_documentation",
      "chunk_index_in_file": 2,
      "file_relative_path": "FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_3-fastmcp-client-system.md",
      "collection_context": "FAST_DOCS/jlowin_fastmcp"
    }
  },
  {
    "text": "- [FastMCP Client System](#fastmcp-client-system.md)\n- [Core Architecture](#core-architecture.md)\n- [Client-Transport Relationship](#client-transport-relationship.md)\n- [Transport Inference](#transport-inference.md)\n- [Client Session Management](#client-session-management.md)\n- [Session State Architecture](#session-state-architecture.md)\n- [Connection Lifecycle](#connection-lifecycle.md)\n- [Transport System](#transport-system.md)\n- [Transport Interface](#transport-interface.md)\n- [STDIO Transport Environment Management](#stdio-transport-environment-management.md)\n- [Client Protocol Operations](#client-protocol-operations.md)\n- [Tool Operations](#tool-operations.md)\n- [Resource Operations](#resource-operations.md)\n- [Prompt Operations](#prompt-operations.md)\n- [Tool Result Processing](#tool-result-processing.md)\n- [Client Configuration and Handlers](#client-configuration-and-handlers.md)\n- [Handler System](#handler-system.md)\n- [Client Factory Pattern](#client-factory-pattern.md)\n- [Integration with Server Composition](#integration-with-server-composition.md)\n- [Proxy Client Usage](#proxy-client-usage.md)\n- [Multi-Server Configuration](#multi-server-configuration.md)",
    "metadata": {
      "chunk_id": 3,
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_3-fastmcp-client-system.md",
      "input_type": "fast_docs",
      "chunking_strategy": "api_documentation",
      "token_count": 267,
      "character_count": 1184,
      "created_at": "2025-10-16T17:42:18.908786",
      "parent_context": null,
      "semantic_type": "fast_docs",
      "collection_name": "FAST_DOCS",
      "subfolder_name": "jlowin_fastmcp",
      "collection_strategy": "api_documentation",
      "chunk_index_in_file": 3,
      "file_relative_path": "FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_3-fastmcp-client-system.md",
      "collection_context": "FAST_DOCS/jlowin_fastmcp"
    }
  }
]