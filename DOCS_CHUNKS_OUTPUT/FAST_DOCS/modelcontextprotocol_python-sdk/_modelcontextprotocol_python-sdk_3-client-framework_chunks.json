[
  {
    "text": "Client Framework | modelcontextprotocol/python-sdk | DeepWiki\n\n[Index your code with Devin](private-repo.md)\n\n[DeepWiki](https://deepwiki.com)\n\n[DeepWiki](.md)\n\n[modelcontextprotocol/python-sdk](https://github.com/modelcontextprotocol/python-sdk \"Open repository\")\n\n[Index your code with](private-repo.md)\n\n[Devin](private-repo.md)\n\nShare\n\nLast indexed: 27 September 2025 ([146d7e](https://github.com/modelcontextprotocol/python-sdk/commits/146d7efb))\n\n- [Overview](modelcontextprotocol/python-sdk/1-overview.md)\n- [Installation & Dependencies](modelcontextprotocol/python-sdk/1.1-installation-and-dependencies.md)\n- [Key Concepts](modelcontextprotocol/python-sdk/1.2-key-concepts.md)\n- [FastMCP Server Framework](modelcontextprotocol/python-sdk/2-fastmcp-server-framework.md)\n- [FastMCP Server Architecture](modelcontextprotocol/python-sdk/2.1-fastmcp-server-architecture.md)\n- [Tool Management](modelcontextprotocol/python-sdk/2.2-tool-management.md)\n- [Resource & Prompt Management](modelcontextprotocol/python-sdk/2.3-resource-and-prompt-management.md)\n- [Function Introspection & Structured Output](modelcontextprotocol/python-sdk/2.4-function-introspection-and-structured-output.md)\n- [Client Framework](modelcontextprotocol/python-sdk/3-client-framework.md)\n- [ClientSession Core](modelcontextprotocol/python-sdk/3.1-clientsession-core.md)\n- [Client Transports](modelcontextprotocol/python-sdk/3.2-client-transports.md)\n- [Client Authentication](modelcontextprotocol/python-sdk/3.3-client-authentication.md)\n- [Protocol & Message System](modelcontextprotocol/python-sdk/4-protocol-and-message-system.md)\n- [Protocol Types & JSON-RPC](modelcontextprotocol/python-sdk/4.1-protocol-types-and-json-rpc.md)\n- [Session Management](modelcontextprotocol/python-sdk/4.2-session-management.md)\n- [Context & Progress Reporting](modelcontextprotocol/python-sdk/4.3-context-and-progress-reporting.md)\n- [Transport Layer](modelcontextprotocol/python-sdk/5-transport-layer.md)\n- [StreamableHTTP Transport](modelcontextprotocol/python-sdk/5.1-streamablehttp-transport.md)\n- [Server-Sent Events (SSE) Transport](modelcontextprotocol/python-sdk/5.2-server-sent-events-\\(sse\\)-transport.md)\n- [STDIO Transport](modelcontextprotocol/python-sdk/5.3-stdio-transport.md)\n- [Transport Security](modelcontextprotocol/python-sdk/5.4-transport-security.md)\n- [Low-Level Server Implementation](modelcontextprotocol/python-sdk/6-low-level-server-implementation.md)\n- [Low-Level Server Architecture](modelcontextprotocol/python-sdk/6.1-low-level-server-architecture.md)\n- [ServerSession Implementation](modelcontextprotocol/python-sdk/6.2-serversession-implementation.md)\n- [Authentication & Security](modelcontextprotocol/python-sdk/7-authentication-and-security.md)\n- [OAuth 2.0 System](modelcontextprotocol/python-sdk/7.1-oauth-2.0-system.md)\n- [Development Tools & CLI](modelcontextprotocol/python-sdk/8-development-tools-and-cli.md)\n- [MCP CLI Commands](modelcontextprotocol/python-sdk/8.1-mcp-cli-commands.md)\n- [Development Environment](modelcontextprotocol/python-sdk/8.2-development-environment.md)\n- [Claude Desktop Integration](modelcontextprotocol/python-sdk/8.3-claude-desktop-integration.md)\n- [Examples & Tutorials](modelcontextprotocol/python-sdk/9-examples-and-tutorials.md)\n- [Server Examples](modelcontextprotocol/python-sdk/9.1-server-examples.md)\n- [Client Examples](modelcontextprotocol/python-sdk/9.2-client-examples.md)\n\nMenu\n\n# Client Framework\n\nRelevant source files",
    "metadata": {
      "chunk_id": 0,
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3-client-framework.md",
      "input_type": "fast_docs",
      "chunking_strategy": "api_documentation",
      "token_count": 833,
      "character_count": 3469,
      "created_at": "2025-10-16T17:42:19.330081",
      "parent_context": null,
      "semantic_type": "fast_docs",
      "collection_name": "FAST_DOCS",
      "subfolder_name": "modelcontextprotocol_python-sdk",
      "collection_strategy": "api_documentation",
      "chunk_index_in_file": 0,
      "file_relative_path": "FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3-client-framework.md",
      "collection_context": "FAST_DOCS/modelcontextprotocol_python-sdk"
    }
  },
  {
    "text": "- [src/mcp/client/\\_\\_main\\_\\_.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/__main__.py)\n- [src/mcp/client/session.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/session.py)\n- [src/mcp/shared/memory.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/shared/memory.py)\n- [src/mcp/shared/session.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/shared/session.py)\n- [tests/client/test\\_logging\\_callback.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/tests/client/test_logging_callback.py)\n- [tests/client/test\\_session.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/tests/client/test_session.py)\n\nThe Client Framework provides the core client-side components for connecting to and interacting with MCP servers. This framework handles session management, protocol communication, request/response patterns, and server capability discovery. It abstracts the underlying transport mechanisms while providing a high-level API for MCP operations.\n\nFor information about server-side implementations, see [FastMCP Server Framework](modelcontextprotocol/python-sdk/2-fastmcp-server-framework.md) and [Low-Level Server Implementation](modelcontextprotocol/python-sdk/6-low-level-server-implementation.md). For transport-specific client implementations, see [Client Transports](modelcontextprotocol/python-sdk/3.2-client-transports.md). For authentication details, see [Client Authentication](modelcontextprotocol/python-sdk/3.3-client-authentication.md).\n\n## ClientSession Architecture\n\nThe `ClientSession` class serves as the primary interface for MCP client applications, built on top of the `BaseSession` foundation for session management and message handling.\n\n```\n```\n\n**Sources:** [src/mcp/client/session.py101-136](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/session.py#L101-L136) [src/mcp/shared/session.py159-200](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/shared/session.py#L159-L200)\n\n## Session Lifecycle and Initialization\n\nThe client session follows a structured initialization process to establish protocol compatibility and exchange capability information with the server.\n\n```\n```\n\n**Sources:** [src/mcp/client/session.py137-174](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/session.py#L137-L174) [tests/client/test\\_session.py30-114](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/tests/client/test_session.py#L30-L114)\n\n## Request and Response Handling\n\nThe framework implements a sophisticated request/response system with progress tracking, timeout management, and structured validation.\n\n### Core Request Methods\n\n| Method             | Purpose                      | Request Type           | Response Type         |\n| ------------------ | ---------------------------- | ---------------------- | --------------------- |\n| `call_tool()`      | Execute server tools         | `CallToolRequest`      | `CallToolResult`      |\n| `list_tools()`     | Discover available tools     | `ListToolsRequest`     | `ListToolsResult`     |\n| `read_resource()`  | Access server resources      | `ReadResourceRequest`  | `ReadResourceResult`  |\n| `list_resources()` | Discover available resources | `ListResourcesRequest` | `ListResourcesResult` |\n| `get_prompt()`     | Retrieve prompt templates    | `GetPromptRequest`     | `GetPromptResult`     |\n| `complete()`       | Get completion suggestions   | `CompleteRequest`      | `CompleteResult`      |\n\n**Sources:** [src/mcp/client/session.py270-297](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/session.py#L270-L297) [src/mcp/client/session.py366-383](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/session.py#L366-L383)\n\n### Tool Output Validation\n\nThe client automatically validates structured tool outputs against server-provided schemas:\n\n```\n```\n\n**Sources:** [src/mcp/client/session.py298-319](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/session.py#L298-L319) [src/mcp/client/session.py377-381](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/session.py#L377-L381)\n\n## Progress and Notification System\n\nThe client framework supports bidirectional progress reporting and server-initiated notifications through callback functions and progress tokens.\n\n### Progress Callback Integration\n\n```\n```",
    "metadata": {
      "chunk_id": 1,
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3-client-framework.md",
      "input_type": "fast_docs",
      "chunking_strategy": "api_documentation",
      "token_count": 1011,
      "character_count": 4574,
      "created_at": "2025-10-16T17:42:19.337683",
      "parent_context": null,
      "semantic_type": "fast_docs",
      "collection_name": "FAST_DOCS",
      "subfolder_name": "modelcontextprotocol_python-sdk",
      "collection_strategy": "api_documentation",
      "chunk_index_in_file": 1,
      "file_relative_path": "FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3-client-framework.md",
      "collection_context": "FAST_DOCS/modelcontextprotocol_python-sdk"
    }
  },
  {
    "text": "**Sources:** [src/mcp/shared/session.py242-253](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/shared/session.py#L242-L253) [src/mcp/shared/session.py389-399](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/shared/session.py#L389-L399)\n\n### Server Request Handling\n\nThe client can handle server-initiated requests through configurable callback functions:\n\n| Callback Type       | Purpose                       | Default Behavior              |\n| ------------------- | ----------------------------- | ----------------------------- |\n| `SamplingFnT`       | Handle LLM sampling requests  | Returns \"not supported\" error |\n| `ElicitationFnT`    | Handle content elicitation    | Returns \"not supported\" error |\n| `ListRootsFnT`      | Handle root directory listing | Returns \"not supported\" error |\n| `LoggingFnT`        | Handle server log messages    | No-op (silent)                |\n| `MessageHandlerFnT` | Handle all incoming messages  | No-op checkpoint              |\n\n**Sources:** [src/mcp/client/session.py21-96](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/session.py#L21-L96) [src/mcp/client/session.py388-434](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/session.py#L388-L434)\n\n## Transport Integration\n\nThe client framework abstracts transport details through stream-based interfaces, allowing it to work with various transport mechanisms.\n\n```\n```\n\n**Sources:** [src/mcp/client/session.py110-128](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/session.py#L110-L128) [src/mcp/client/\\_\\_main\\_\\_.py36-64](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/__main__.py#L36-L64)\n\n## Testing and Development Utilities\n\nThe framework includes memory-based transport utilities for testing and development scenarios.\n\n### Memory Transport Factory\n\nThe `create_connected_server_and_client_session()` function provides a complete testing environment with in-memory communication:\n\n```\n```\n\n**Sources:** [src/mcp/shared/memory.py28-50](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/shared/memory.py#L28-L50) [src/mcp/shared/memory.py53-99](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/shared/memory.py#L53-L99)\n\n### Error Handling and Exception Management\n\nThe client framework provides comprehensive error handling for various failure scenarios:\n\n| Error Type                  | Source                    | Handling                                     |\n| --------------------------- | ------------------------- | -------------------------------------------- |\n| `TimeoutError`              | Request timeout           | Converted to `McpError` with timeout details |\n| `JSONRPCError`              | Server error response     | Converted to `McpError` with server error    |\n| `ValidationError`           | Tool output validation    | Runtime error with validation details        |\n| `anyio.ClosedResourceError` | Transport closure         | Graceful session termination                 |\n| `RuntimeError`              | Protocol version mismatch | Immediate session failure                    |\n\n**Sources:** [src/mcp/shared/session.py273-283](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/shared/session.py#L273-L283) [src/mcp/shared/session.py416-436](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/shared/session.py#L416-L436) [src/mcp/client/session.py314-318](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/session.py#L314-L318)\n\nDismiss\n\nRefresh this wiki\n\nEnter email to refresh\n\n### On this page\n\n- [Client Framework](#client-framework.md)\n- [ClientSession Architecture](#clientsession-architecture.md)\n- [Session Lifecycle and Initialization](#session-lifecycle-and-initialization.md)\n- [Request and Response Handling](#request-and-response-handling.md)\n- [Core Request Methods](#core-request-methods.md)\n- [Tool Output Validation](#tool-output-validation.md)\n- [Progress and Notification System](#progress-and-notification-system.md)\n- [Progress Callback Integration](#progress-callback-integration.md)\n- [Server Request Handling](#server-request-handling.md)\n- [Transport Integration](#transport-integration.md)\n- [Testing and Development Utilities](#testing-and-development-utilities.md)\n- [Memory Transport Factory](#memory-transport-factory.md)\n- [Error Handling and Exception Management](#error-handling-and-exception-management.md)",
    "metadata": {
      "chunk_id": 2,
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3-client-framework.md",
      "input_type": "fast_docs",
      "chunking_strategy": "api_documentation",
      "token_count": 1010,
      "character_count": 4574,
      "created_at": "2025-10-16T17:42:19.343630",
      "parent_context": null,
      "semantic_type": "fast_docs",
      "collection_name": "FAST_DOCS",
      "subfolder_name": "modelcontextprotocol_python-sdk",
      "collection_strategy": "api_documentation",
      "chunk_index_in_file": 2,
      "file_relative_path": "FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3-client-framework.md",
      "collection_context": "FAST_DOCS/modelcontextprotocol_python-sdk"
    }
  }
]