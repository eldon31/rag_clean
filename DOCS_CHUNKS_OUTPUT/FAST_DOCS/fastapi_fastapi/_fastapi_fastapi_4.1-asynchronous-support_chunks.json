[
  {
    "text": "Asynchronous Support | fastapi/fastapi | DeepWiki\n\n[Index your code with Devin](private-repo.md)\n\n[DeepWiki](https://deepwiki.com)\n\n[DeepWiki](.md)\n\n[fastapi/fastapi](https://github.com/fastapi/fastapi \"Open repository\")\n\n[Index your code with](private-repo.md)\n\n[Devin](private-repo.md)\n\nShare\n\nLast indexed: 5 September 2025 ([3e2dbf](https://github.com/fastapi/fastapi/commits/3e2dbf91))\n\n- [FastAPI Overview](fastapi/fastapi/1-fastapi-overview.md)\n- [Core Architecture](fastapi/fastapi/2-core-architecture.md)\n- [Application and Routing System](fastapi/fastapi/2.1-application-and-routing-system.md)\n- [Dependency Injection](fastapi/fastapi/2.2-dependency-injection.md)\n- [Parameter Validation and Handling](fastapi/fastapi/2.3-parameter-validation-and-handling.md)\n- [Response Handling](fastapi/fastapi/2.4-response-handling.md)\n- [Security Components](fastapi/fastapi/2.5-security-components.md)\n- [Settings Management](fastapi/fastapi/2.6-settings-management.md)\n- [Error Handling](fastapi/fastapi/2.7-error-handling.md)\n- [API Documentation System](fastapi/fastapi/3-api-documentation-system.md)\n- [OpenAPI Schema Generation](fastapi/fastapi/3.1-openapi-schema-generation.md)\n- [Customizing API Documentation UI](fastapi/fastapi/3.2-customizing-api-documentation-ui.md)\n- [Advanced Features](fastapi/fastapi/4-advanced-features.md)\n- [Asynchronous Support](fastapi/fastapi/4.1-asynchronous-support.md)\n- [Database Integration](fastapi/fastapi/4.2-database-integration.md)\n- [Background Tasks](fastapi/fastapi/4.3-background-tasks.md)\n- [Deployment and Production Considerations](fastapi/fastapi/4.4-deployment-and-production-considerations.md)\n- [Testing Infrastructure](fastapi/fastapi/5-testing-infrastructure.md)\n- [Test Framework and Tools](fastapi/fastapi/5.1-test-framework-and-tools.md)\n- [Code Quality and Pre-commit](fastapi/fastapi/5.2-code-quality-and-pre-commit.md)\n- [Project Infrastructure](fastapi/fastapi/6-project-infrastructure.md)\n- [Documentation System](fastapi/fastapi/6.1-documentation-system.md)\n- [CI/CD Pipeline](fastapi/fastapi/6.2-cicd-pipeline.md)\n- [Development Workflow](fastapi/fastapi/6.3-development-workflow.md)\n- [Community Ecosystem](fastapi/fastapi/7-community-ecosystem.md)\n- [Contributors and Experts Management](fastapi/fastapi/7.1-contributors-and-experts-management.md)\n- [Translation Management](fastapi/fastapi/7.2-translation-management.md)\n- [External Resources and Sponsorship](fastapi/fastapi/7.3-external-resources-and-sponsorship.md)\n- [Community Automation](fastapi/fastapi/7.4-community-automation.md)\n\nMenu\n\n# Asynchronous Support\n\nRelevant source files",
    "metadata": {
      "chunk_id": 0,
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\FAST_DOCS\\fastapi_fastapi\\_fastapi_fastapi_4.1-asynchronous-support.md",
      "input_type": "fast_docs",
      "chunking_strategy": "api_documentation",
      "token_count": 690,
      "character_count": 2615,
      "created_at": "2025-10-16T17:42:18.312470",
      "parent_context": null,
      "semantic_type": "fast_docs",
      "collection_name": "FAST_DOCS",
      "subfolder_name": "fastapi_fastapi",
      "collection_strategy": "api_documentation",
      "chunk_index_in_file": 0,
      "file_relative_path": "FAST_DOCS\\fastapi_fastapi\\_fastapi_fastapi_4.1-asynchronous-support.md",
      "collection_context": "FAST_DOCS/fastapi_fastapi"
    }
  },
  {
    "text": "- [docs/de/docs/async.md](https://github.com/fastapi/fastapi/blob/3e2dbf91/docs/de/docs/async.md)\n- [docs/em/docs/async.md](https://github.com/fastapi/fastapi/blob/3e2dbf91/docs/em/docs/async.md)\n- [docs/en/docs/async.md](https://github.com/fastapi/fastapi/blob/3e2dbf91/docs/en/docs/async.md)\n- [docs/es/docs/async.md](https://github.com/fastapi/fastapi/blob/3e2dbf91/docs/es/docs/async.md)\n- [docs/fa/docs/async.md](https://github.com/fastapi/fastapi/blob/3e2dbf91/docs/fa/docs/async.md)\n- [docs/fr/docs/async.md](https://github.com/fastapi/fastapi/blob/3e2dbf91/docs/fr/docs/async.md)\n- [docs/ja/docs/async.md](https://github.com/fastapi/fastapi/blob/3e2dbf91/docs/ja/docs/async.md)\n- [docs/ko/docs/async.md](https://github.com/fastapi/fastapi/blob/3e2dbf91/docs/ko/docs/async.md)\n- [docs/pt/docs/async.md](https://github.com/fastapi/fastapi/blob/3e2dbf91/docs/pt/docs/async.md)\n- [docs/ru/docs/async.md](https://github.com/fastapi/fastapi/blob/3e2dbf91/docs/ru/docs/async.md)\n- [docs/tr/docs/async.md](https://github.com/fastapi/fastapi/blob/3e2dbf91/docs/tr/docs/async.md)\n- [docs/zh/docs/async.md](https://github.com/fastapi/fastapi/blob/3e2dbf91/docs/zh/docs/async.md)\n\nThis document explains how FastAPI handles asynchronous code execution, including the use of `async def` functions, concurrency patterns, and the differences between synchronous and asynchronous path operation functions.\n\n## Purpose and Scope\n\nThis page covers:\n\n- How FastAPI supports both synchronous and asynchronous code\n- When to use `async def` vs regular `def` functions\n- How FastAPI handles different function types internally\n- Performance considerations for I/O-bound vs CPU-bound operations\n\n## Overview of Asynchronous Support in FastAPI\n\nFastAPI provides native asynchronous support through Python's `async`/`await` syntax, built on top of Starlette's ASGI foundation. This architecture enables efficient handling of concurrent requests, particularly for I/O-bound operations such as database queries, API calls, and file operations.\n\n### FastAPI Async Architecture\n\n```\n```\n\n### Request Processing Flow\n\n```\n```\n\nSources: \\[docs/en/docs/async.md:1-55], \\[docs/en/docs/async.md:366-372], \\[docs/en/docs/async.md:415-423]\n\n## When to Use Async Functions\n\nThe decision to use `async def` or regular `def` for your path operation functions depends on what your function does:\n\n| Use `async def` when...                    | Use `def` when...                                     |\n| ------------------------------------------ | ----------------------------------------------------- |\n| Calling other async functions with `await` | Using synchronous libraries (most database libraries) |\n| Making async network calls                 | Performing CPU-intensive operations                   |\n| Using async database drivers               | Not making any I/O operations                         |\n| Not doing CPU-intensive work               | Not sure what to use                                  |\n\nFastAPI will handle both types correctly, but following these guidelines allows for performance optimizations.\n\n```\n```\n\nSources: \\[docs/en/docs/async.md:5-55]\n\n## How FastAPI Handles Async and Sync Functions\n\n### Path Operation Function Execution\n\nFastAPI's handling of path operation functions depends on their declaration:\n\n```\n```\n\n**For `async def` path operations:**\n\n- FastAPI calls the function directly using `await`\n- Execution remains in the main event loop\n- Can use `await` for other async operations\n- Example: [docs/en/docs/async.md17-22](https://github.com/fastapi/fastapi/blob/3e2dbf91/docs/en/docs/async.md#L17-L22)\n\n**For `def` path operations:**\n\n- FastAPI wraps the call in `run_in_threadpool()`\n- Execution moves to an external thread\n- Cannot use `await` inside the function\n- Example: [docs/en/docs/async.md34-39](https://github.com/fastapi/fastapi/blob/3e2dbf91/docs/en/docs/async.md#L34-L39)\n\n### Dependencies and Sub-dependencies\n\nThe same execution model applies to the dependency injection system:",
    "metadata": {
      "chunk_id": 1,
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\FAST_DOCS\\fastapi_fastapi\\_fastapi_fastapi_4.1-asynchronous-support.md",
      "input_type": "fast_docs",
      "chunking_strategy": "api_documentation",
      "token_count": 984,
      "character_count": 4010,
      "created_at": "2025-10-16T17:42:18.322029",
      "parent_context": null,
      "semantic_type": "fast_docs",
      "collection_name": "FAST_DOCS",
      "subfolder_name": "fastapi_fastapi",
      "collection_strategy": "api_documentation",
      "chunk_index_in_file": 1,
      "file_relative_path": "FAST_DOCS\\fastapi_fastapi\\_fastapi_fastapi_4.1-asynchronous-support.md",
      "collection_context": "FAST_DOCS/fastapi_fastapi"
    }
  },
  {
    "text": "| Dependency Type      | Execution Method | Can Use `await`? |\n| -------------------- | ---------------- | ---------------- |\n| `async def get_db()` | Direct await     | ✅ Yes            |\n| `def get_db()`       | ThreadPool       | ❌ No             |\n\nDependencies can be mixed freely - FastAPI handles each according to its type. Sub-dependencies follow the same pattern, allowing complex dependency trees with mixed execution models.\n\nSources: \\[docs/en/docs/async.md:415-423], \\[docs/en/docs/async.md:424-431]\n\n## Concurrency vs Parallelism\n\nFastAPI's asynchronous support is based on concurrency, which is different from parallelism:\n\n```\n```\n\n- **Concurrency**: Handling multiple tasks by switching between them when waiting occurs\n- **Parallelism**: Executing multiple tasks simultaneously on different processors\n\nFastAPI excels at concurrency, which is ideal for web applications that spend most of their time waiting for I/O operations.\n\nSources: \\[docs/en/docs/async.md:96-261]\n\n## I/O-Bound vs CPU-Bound Operations\n\nUnderstanding the difference between I/O-bound and CPU-bound operations helps in choosing the right approach:\n\n| I/O-Bound Operations             | CPU-Bound Operations       |\n| -------------------------------- | -------------------------- |\n| Network requests                 | Complex calculations       |\n| Database queries                 | Image/audio processing     |\n| File system operations           | Machine learning           |\n| API calls                        | Data transformations       |\n| **Best with**: Async/concurrency | **Best with**: Parallelism |\n\nFor web APIs, most operations are I/O-bound, making async a good default choice.\n\nSources: \\[docs/en/docs/async.md:77-89], \\[docs/en/docs/async.md:262-301]\n\n## Technical Implementation Details\n\nFastAPI's asynchronous capabilities are built on a carefully designed stack that provides compatibility and performance:\n\n### Async Stack Architecture\n\n```\n```\n\n### Coroutine and ThreadPool Management\n\nFastAPI uses different execution strategies based on function signatures:\n\n```\n```\n\n### AnyIO Integration\n\nFastAPI leverages AnyIO's structured concurrency features:\n\n- Compatible with both `asyncio` and `trio` backends\n- Provides unified async abstraction layer\n- Enables advanced concurrency patterns\n- Supports context managers and cancellation\n\nThe `run_in_threadpool()` function prevents blocking the main event loop when executing synchronous code, ensuring the server remains responsive to other requests.\n\nSources: \\[docs/en/docs/async.md:366-372], \\[docs/en/docs/async.md:415-423], \\[docs/en/docs/async.md:418-420]\n\n## Performance Considerations\n\nChoosing the right function type directly impacts FastAPI application performance:\n\n### Performance Matrix\n\n| Operation Type     | Library Support       | Recommended Function Type | Execution Method | Performance Impact |\n| ------------------ | --------------------- | ------------------------- | ---------------- | ------------------ |\n| Database queries   | `asyncpg`, `motor`    | `async def`               | Direct await     | ⚡ Optimal          |\n| Database queries   | `psycopg2`, `pymongo` | `def`                     | ThreadPool       | ✅ Good             |\n| HTTP requests      | `httpx`, `aiohttp`    | `async def`               | Direct await     | ⚡ Optimal          |\n| HTTP requests      | `requests`            | `def`                     | ThreadPool       | ✅ Good             |\n| File I/O           | `aiofiles`            | `async def`               | Direct await     | ⚡ Optimal          |\n| File I/O           | Built-in `open()`     | `def`                     | ThreadPool       | ✅ Good             |\n| CPU computation    | Any                   | `def`                     | ThreadPool       | ⚠️ Limited         |\n| Trivial operations | N/A                   | `async def`               | Direct           | ⚡ Optimal          |\n\n### ThreadPool Behavior\n\nWhen FastAPI encounters a `def` function, it automatically:\n\n```\n```\n\n### FastAPI-Specific Optimizations\n\nUnlike some other async frameworks, FastAPI optimizations include:\n\n- **Automatic threadpool management**: No need to manually configure thread pools\n- **Smart function detection**: Analyzes function signatures at startup\n- **Mixed execution support**: Seamlessly combines async and sync dependencies\n- **Zero-copy where possible**: Minimal overhead for async operations\n\nFor compute-only operations (no I/O), `async def` performs better in FastAPI due to reduced threadpool overhead - approximately 100 nanoseconds saved per call compared to other frameworks.\n\nSources: \\[docs/en/docs/async.md:415-423], \\[docs/en/docs/async.md:418-420]\n\n## Writing Your Own Async Code\n\nIf you need to write custom asynchronous code beyond FastAPI's built-in functionality, you can use:",
    "metadata": {
      "chunk_id": 2,
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\FAST_DOCS\\fastapi_fastapi\\_fastapi_fastapi_4.1-asynchronous-support.md",
      "input_type": "fast_docs",
      "chunking_strategy": "api_documentation",
      "token_count": 998,
      "character_count": 4814,
      "created_at": "2025-10-16T17:42:18.334018",
      "parent_context": null,
      "semantic_type": "fast_docs",
      "collection_name": "FAST_DOCS",
      "subfolder_name": "fastapi_fastapi",
      "collection_strategy": "api_documentation",
      "chunk_index_in_file": 2,
      "file_relative_path": "FAST_DOCS\\fastapi_fastapi\\_fastapi_fastapi_4.1-asynchronous-support.md",
      "collection_context": "FAST_DOCS/fastapi_fastapi"
    }
  },
  {
    "text": "1. **AnyIO**: The library that powers Starlette and FastAPI\n2. **Asyncer**: A thin layer on top of AnyIO with improved type annotations\n3. **Standard asyncio**: Python's built-in asynchronous library\n\nThese tools can help you implement more advanced concurrency patterns in your FastAPI applications.\n\nSources: \\[docs/en/docs/async.md:366-372]\n\n## Conclusion\n\nFastAPI's support for both synchronous and asynchronous code provides flexibility while maintaining high performance. By understanding when to use each approach, you can optimize your application for different types of operations.\n\nRemember:\n\n- Use `async def` when working with other async code or I/O-bound operations\n- Use regular `def` when working with synchronous libraries or CPU-bound tasks\n- FastAPI will handle both correctly, but following these guidelines allows for better performance\n\nThe asynchronous capabilities of FastAPI, powered by Starlette and AnyIO, contribute significantly to its impressive performance compared to other Python web frameworks.\n\nSources: \\[docs/en/docs/async.md:394-403]\n\nDismiss\n\nRefresh this wiki\n\nEnter email to refresh\n\n### On this page\n\n- [Asynchronous Support](#asynchronous-support.md)\n- [Purpose and Scope](#purpose-and-scope.md)\n- [Overview of Asynchronous Support in FastAPI](#overview-of-asynchronous-support-in-fastapi.md)\n- [FastAPI Async Architecture](#fastapi-async-architecture.md)\n- [Request Processing Flow](#request-processing-flow.md)\n- [When to Use Async Functions](#when-to-use-async-functions.md)\n- [How FastAPI Handles Async and Sync Functions](#how-fastapi-handles-async-and-sync-functions.md)\n- [Path Operation Function Execution](#path-operation-function-execution.md)\n- [Dependencies and Sub-dependencies](#dependencies-and-sub-dependencies.md)\n- [Concurrency vs Parallelism](#concurrency-vs-parallelism.md)\n- [I/O-Bound vs CPU-Bound Operations](#io-bound-vs-cpu-bound-operations.md)\n- [Technical Implementation Details](#technical-implementation-details.md)\n- [Async Stack Architecture](#async-stack-architecture.md)\n- [Coroutine and ThreadPool Management](#coroutine-and-threadpool-management.md)\n- [AnyIO Integration](#anyio-integration.md)\n- [Performance Considerations](#performance-considerations.md)\n- [Performance Matrix](#performance-matrix.md)\n- [ThreadPool Behavior](#threadpool-behavior.md)\n- [FastAPI-Specific Optimizations](#fastapi-specific-optimizations.md)\n- [Writing Your Own Async Code](#writing-your-own-async-code.md)\n- [Conclusion](#conclusion.md)",
    "metadata": {
      "chunk_id": 3,
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\FAST_DOCS\\fastapi_fastapi\\_fastapi_fastapi_4.1-asynchronous-support.md",
      "input_type": "fast_docs",
      "chunking_strategy": "api_documentation",
      "token_count": 553,
      "character_count": 2498,
      "created_at": "2025-10-16T17:42:18.335615",
      "parent_context": null,
      "semantic_type": "fast_docs",
      "collection_name": "FAST_DOCS",
      "subfolder_name": "fastapi_fastapi",
      "collection_strategy": "api_documentation",
      "chunk_index_in_file": 3,
      "file_relative_path": "FAST_DOCS\\fastapi_fastapi\\_fastapi_fastapi_4.1-asynchronous-support.md",
      "collection_context": "FAST_DOCS/fastapi_fastapi"
    }
  }
]