[
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:0",
    "content": "Document Conversion Flow | docling-project/docling | DeepWiki\n\n[Index your code with Devin](private-repo.md)\n\n[DeepWiki](https://deepwiki.com)\n\n[DeepWiki](.md)\n\n[docling-project/docling](https://github.com/docling-project/docling \"Open repository\")\n\n[Index your code with](private-repo.md)\n\n[Devin](private-repo.md)\n\nShare\n\nLast indexed: 12 October 2025 ([f7244a](https://github.com/docling-project/docling/commits/f7244a43))\n\n- [Overview](docling-project/docling/1-overview.md)\n- [Installation](docling-project/docling/1.1-installation.md)\n- [Quick Start](docling-project/docling/1.2-quick-start.md)\n- [Core Architecture](docling-project/docling/2-core-architecture.md)\n- [Document Conversion Flow](docling-project/docling/2.1-document-conversion-flow.md)\n- [DoclingDocument Data Model](docling-project/docling/2.2-doclingdocument-data-model.md)\n- [Configuration and Pipeline Options](docling-project/docling/2.3-configuration-and-pipeline-options.md)\n- [Format Detection and Routing](docling-project/docling/2.",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 0,
      "token_count": 275,
      "char_count": 1012,
      "start_char": 0,
      "end_char": 1012
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:1",
    "content": "3-configuration-and-pipeline-options.md)\n- [Format Detection and Routing](docling-project/docling/2.4-format-detection-and-routing.md)\n- [Document Backends](docling-project/docling/3-document-backends.md)\n- [PDF Processing Backends](docling-project/docling/3.1-pdf-processing-backends.md)\n- [Office Document Backends](docling-project/docling/3.2-office-document-backends.md)\n- [Web and Markup Backends](docling-project/docling/3.3-web-and-markup-backends.md)\n- [AI/ML Models](docling-project/docling/4-aiml-models.md)\n- [OCR Models](docling-project/docling/4.1-ocr-models.md)\n- [Layout and Table Structure Models](docling-project/docling/4.2-layout-and-table-structure-models.md)\n- [Vision Language Models](docling-project/docling/4.3-vision-language-models.md)\n- [Inline VLM Models](docling-project/docling/4.3.1-inline-vlm-models.md)\n- [API-Based VLM Models](docling-project/docling/4.3.2-api-based-vlm-models.md)\n- [Enrichment Models](docling-project/docling/4.4-enrichment-models.md)",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 1,
      "token_count": 283,
      "char_count": 987,
      "start_char": 912,
      "end_char": 1900
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:2",
    "content": ".2-api-based-vlm-models.md)\n- [Enrichment Models](docling-project/docling/4.4-enrichment-models.md)\n- [Processing Pipelines](docling-project/docling/5-processing-pipelines.md)\n- [Standard PDF Pipeline](docling-project/docling/5.1-standard-pdf-pipeline.md)\n- [Threaded PDF Pipeline](docling-project/docling/5.2-threaded-pdf-pipeline.md)\n- [VLM Pipeline](docling-project/docling/5.3-vlm-pipeline.md)\n- [Extraction Pipeline](docling-project/docling/5.4-extraction-pipeline.md)\n- [ASR Pipeline](docling-project/docling/5.5-asr-pipeline.md)\n- [Base Pipeline Architecture](docling-project/docling/5.6-base-pipeline-architecture.md)\n- [Command Line Interface](docling-project/docling/6-command-line-interface.md)\n- [Document Conversion CLI](docling-project/docling/6.1-document-conversion-cli.md)\n- [Model Management CLI](docling-project/docling/6.2-model-management-cli.md)\n- [Python SDK](docling-project/docling/7-python-sdk.md)\n- [DocumentConverter API](docling-project/docling/7.1-documentconverter-api.md)",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 2,
      "token_count": 275,
      "char_count": 1003,
      "start_char": 1800,
      "end_char": 2804
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:3",
    "content": "ng/7-python-sdk.md)\n- [DocumentConverter API](docling-project/docling/7.1-documentconverter-api.md)\n- [DocumentExtractor API](docling-project/docling/7.2-documentextractor-api.md)\n- [Usage Examples](docling-project/docling/7.3-usage-examples.md)\n- [Output and Integration](docling-project/docling/8-output-and-integration.md)\n- [Export Formats](docling-project/docling/8.1-export-formats.md)\n- [Document Chunking](docling-project/docling/8.2-document-chunking.md)\n- [Framework Integrations](docling-project/docling/8.3-framework-integrations.md)\n- [Development and Testing](docling-project/docling/9-development-and-testing.md)\n- [Testing Framework](docling-project/docling/9.1-testing-framework.md)\n- [Ground Truth Data](docling-project/docling/9.2-ground-truth-data.md)\n- [CI/CD and Development Workflow](docling-project/docling/9.3-cicd-and-development-workflow.md)\n- [Deployment](docling-project/docling/10-deployment.md)\n- [Docker Deployment](docling-project/docling/10.1-docker-deployment.md)",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 3,
      "token_count": 270,
      "char_count": 998,
      "start_char": 2704,
      "end_char": 3703
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:4",
    "content": "/docling/10-deployment.md)\n- [Docker Deployment](docling-project/docling/10.1-docker-deployment.md)\n- [Model Artifacts Management](docling-project/docling/10.2-model-artifacts-management.md)\n\nMenu\n\n# Document Conversion Flow\n\nRelevant source files\n\n- [docling/cli/main.py](https://github.com/docling-project/docling/blob/f7244a43/docling/cli/main.py)\n- [docling/datamodel/base\\_models.py](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/base_models.py)\n- [docling/datamodel/document.py](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py)\n- [docling/datamodel/extraction.py](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/extraction.py)\n- [docling/datamodel/pipeline\\_options.py](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/pipeline_options.py)\n- [docling/document\\_converter.py](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py)\n- [docling/document\\_extractor.",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 4,
      "token_count": 286,
      "char_count": 1021,
      "start_char": 3603,
      "end_char": 4624
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:5",
    "content": "docling-project/docling/blob/f7244a43/docling/document_converter.py)\n- [docling/document\\_extractor.py](https://github.com/docling-project/docling/blob/f7244a43/docling/document_extractor.py)\n- [docling/models/vlm\\_models\\_inline/nuextract\\_transformers\\_model.py](https://github.com/docling-project/docling/blob/f7244a43/docling/models/vlm_models_inline/nuextract_transformers_model.py)\n- [docling/pipeline/asr\\_pipeline.py](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/asr_pipeline.py)\n- [docling/pipeline/base\\_extraction\\_pipeline.py](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_extraction_pipeline.py)\n- [docling/pipeline/base\\_pipeline.py](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py)\n- [docling/pipeline/extraction\\_vlm\\_pipeline.py](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/extraction_vlm_pipeline.py)\n- [docling/pipeline/simple\\_pipeline.py](https://github.",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 5,
      "token_count": 284,
      "char_count": 1010,
      "start_char": 4524,
      "end_char": 5534
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:6",
    "content": "ocling/pipeline/extraction_vlm_pipeline.py)\n- [docling/pipeline/simple\\_pipeline.py](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/simple_pipeline.py)\n- [docling/pipeline/threaded\\_standard\\_pdf\\_pipeline.py](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/threaded_standard_pdf_pipeline.py)\n- [docling/pipeline/vlm\\_pipeline.py](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/vlm_pipeline.py)\n\nThis document describes the end-to-end process of converting an input document to a structured `DoclingDocument` representation. It covers format detection, backend/pipeline routing, the three-phase execution model, and output generation.\n\nFor configuration of pipeline options and format-specific settings, see [Configuration and Pipeline Options](docling-project/docling/2.3-configuration-and-pipeline-options.md). For details on the `DoclingDocument` data structure, see [DoclingDocument Data Model](docling-project/docling/2.",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 6,
      "token_count": 237,
      "char_count": 1005,
      "start_char": 5434,
      "end_char": 6439
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:7",
    "content": "on the `DoclingDocument` data structure, see [DoclingDocument Data Model](docling-project/docling/2.2-doclingdocument-data-model.md). For backend implementations, see [Document Backends](docling-project/docling/3-document-backends.md).\n\n---\n\n## Overview\n\nThe document conversion flow orchestrates multiple components to transform raw documents (PDF, DOCX, HTML, etc.) into structured `DoclingDocument` objects. The process follows these stages:\n\n1. **Input Processing**: Format detection and `InputDocument` creation\n2. **Routing**: Backend and pipeline selection based on format\n3. **Pipeline Execution**: Three-phase processing (build, assemble, enrich)\n4. **Output Generation**: `ConversionResult` with embedded `DoclingDocument`\n\nThe central orchestrator is `DocumentConverter`, which manages format-to-pipeline mappings, pipeline caching, and execution.\n\n---\n\n## Entry Points and Initialization\n\n### DocumentConverter Initialization",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 7,
      "token_count": 193,
      "char_count": 937,
      "start_char": 6339,
      "end_char": 7278
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:8",
    "content": "ing, and execution.\n\n---\n\n## Entry Points and Initialization\n\n### DocumentConverter Initialization\n\nThe `DocumentConverter` class serves as the primary entry point for document conversion:\n\n```\n```\n\n**Key responsibilities:**\n\n- Maintain `format_to_options` mapping: `Dict[InputFormat, FormatOption]`\n- Cache initialized pipelines: `Dict[Tuple[Type[BasePipeline], str], BasePipeline]`\n- Coordinate batch processing with concurrency control\n\n**Entry Point Diagram**\n\n```\n```\n\n**Sources:** [docling/document\\_converter.py184-205](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L184-L205) [docling/cli/main.py299-816](https://github.com/docling-project/docling/blob/f7244a43/docling/cli/main.py#L299-L816)\n\n### Conversion Methods\n\nThe API provides two methods:\n\n| Method                | Description                | Return Type                  |\n| --------------------- | -------------------------- | ---------------------------- |",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 8,
      "token_count": 228,
      "char_count": 969,
      "start_char": 7178,
      "end_char": 8148
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:9",
    "content": "|\n| --------------------- | -------------------------- | ---------------------------- |\n| `convert(source)`     | Convert single document    | `ConversionResult`           |\n| `convert_all(source)` | Convert multiple documents | `Iterator[ConversionResult]` |\n\nBoth methods accept:\n\n- `source`: `Path`, `str` (URL), or `DocumentStream` (BytesIO)\n- `headers`: Optional HTTP headers for URL sources\n- `raises_on_error`: Control error propagation\n- `max_num_pages`, `max_file_size`: Document limits\n- `page_range`: Tuple of (start\\_page, end\\_page)\n\n**Sources:** [docling/document\\_converter.py228-283](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L228-L283)\n\n---\n\n## Format Detection and Input Processing\n\n### Format Detection Mechanism\n\nFormat detection is handled by `_DocumentConversionInput._guess_format()`, which uses a three-tier strategy:\n\n#### Format Detection Strategy\n\n```\n```\n\n**Sources:** [docling/datamodel/document.py280-489](https://github.",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 9,
      "token_count": 243,
      "char_count": 996,
      "start_char": 8048,
      "end_char": 9056
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:10",
    "content": "mat Detection Strategy\n\n```\n```\n\n**Sources:** [docling/datamodel/document.py280-489](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py#L280-L489)\n\n#### Tier 1: MIME Type Detection\n\nUses `filetype.guess_mime()` on file path or first 8KB of stream:\n\n- For `Path`: Reads file signature\n- For `DocumentStream`: Reads first 8KB, seeks back to 0\n\nSpecial cases:\n\n- `application/zip` → Infer DOCX/XLSX/PPTX from file extension\n- `application/gzip` → Check for METS metadata via `_detect_mets_gbs()`\n\n**Sources:** [docling/datamodel/document.py285-323](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py#L285-L323)\n\n#### Tier 2: Extension Mapping\n\nIf MIME detection fails, use extension-based lookup:\n\n```\n```\n\nMappings defined in `FormatToMimeType` dictionary.\n\n**Sources:** [docling/datamodel/document.py376-400](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py#L376-L400) [docling/datamodel/base\\_models.",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 10,
      "token_count": 304,
      "char_count": 1010,
      "start_char": 8956,
      "end_char": 9966
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:11",
    "content": "ject/docling/blob/f7244a43/docling/datamodel/document.py#L376-L400) [docling/datamodel/base\\_models.py101-133](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/base_models.py#L101-L133)\n\n#### Tier 3: Content Analysis\n\nFor ambiguous formats (e.g., `application/xml`), parse DOCTYPE declarations:\n\n| DOCTYPE Pattern                            | Format                  |\n| ------------------------------------------ | ----------------------- |\n| `us-patent-application-v4`, `us-grant-025` | `InputFormat.XML_USPTO` |\n| `JATS-journalpublishing`, `JATS-archive`   | `InputFormat.XML_JATS`  |\n| `PATN\\r\\n` (plain text)                    | `InputFormat.XML_USPTO` |\n\n**Sources:** [docling/datamodel/document.py341-374](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py#L341-L374)\n\n### InputDocument Creation\n\nOnce format is detected, `_DocumentConversionInput.docs()` creates `InputDocument` instances:\n\n**InputDocument Creation Flow**\n\n```\n```",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 11,
      "token_count": 282,
      "char_count": 1002,
      "start_char": 9866,
      "end_char": 10870
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:12",
    "content": "nversionInput.docs()` creates `InputDocument` instances:\n\n**InputDocument Creation Flow**\n\n```\n```\n\n**Key validation checks:**\n\n- File size ≤ `limits.max_file_size`\n- Page count ≤ `limits.max_num_pages`\n- Page range within bounds: `limits.page_range`\n- Backend validity: `backend.is_valid()`\n\nIf any check fails, `InputDocument.valid = False`.\n\n**Sources:** [docling/datamodel/document.py104-191](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py#L104-L191) [docling/datamodel/document.py236-278](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py#L236-L278)\n\n---\n\n## Backend and Pipeline Routing\n\n### FormatOption Mapping\n\nThe routing mechanism uses `FormatOption` objects that pair formats with pipelines and backends:\n\n**FormatOption Structure**\n\n```\n```\n\n**Sources:** [docling/document\\_converter.py62-130](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L62-L130)\n\n### Default Format Options",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 12,
      "token_count": 275,
      "char_count": 1008,
      "start_char": 10770,
      "end_char": 11780
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:13",
    "content": "-project/docling/blob/f7244a43/docling/document_converter.py#L62-L130)\n\n### Default Format Options\n\nDefault mappings are defined in `_get_default_option()`:\n\n| InputFormat | Pipeline              | Backend                         |\n| ----------- | --------------------- | ------------------------------- |\n| `PDF`       | `StandardPdfPipeline` | `DoclingParseV4DocumentBackend` |\n| `IMAGE`     | `StandardPdfPipeline` | `DoclingParseV4DocumentBackend` |\n| `DOCX`      | `SimplePipeline`      | `MsWordDocumentBackend`         |\n| `XLSX`      | `SimplePipeline`      | `MsExcelDocumentBackend`        |\n| `PPTX`      | `SimplePipeline`      | `MsPowerpointDocumentBackend`   |\n| `HTML`      | `SimplePipeline`      | `HTMLDocumentBackend`           |\n| `MD`        | `SimplePipeline`      | `MarkdownDocumentBackend`       |\n| `AUDIO`     | `AsrPipeline`         | `NoOpBackend`                   |\n\n**Sources:** [docling/document\\_converter.py132-182](https://github.",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 13,
      "token_count": 251,
      "char_count": 967,
      "start_char": 11680,
      "end_char": 12647
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:14",
    "content": "OpBackend`                   |\n\n**Sources:** [docling/document\\_converter.py132-182](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L132-L182)\n\n### Pipeline Selection and Caching\n\nPipelines are cached by `(pipeline_class, options_hash)` to avoid redundant initialization:\n\n**Pipeline Caching Flow**\n\n```\n```\n\n**Cache key construction:**\n\n1. Serialize `pipeline_options.model_dump()` to string\n2. Compute MD5 hash: `hashlib.md5(options_str.encode(\"utf-8\"))`\n3. Create tuple: `(pipeline_class, options_hash)`\n\nThis ensures:\n\n- Same pipeline class + options → Same pipeline instance\n- Thread-safe via `_PIPELINE_CACHE_LOCK`\n- Models loaded only once per unique configuration\n\n**Sources:** [docling/document\\_converter.py207-378](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L207-L378)\n\n---\n\n## Pipeline Execution Phases\n\nAll pipelines inherit from `BasePipeline` and implement a three-phase execution model:\n\n**Three-Phase Execution Model**\n\n```",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 14,
      "token_count": 258,
      "char_count": 1024,
      "start_char": 12547,
      "end_char": 13572
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:15",
    "content": "m `BasePipeline` and implement a three-phase execution model:\n\n**Three-Phase Execution Model**\n\n```\n```\n\n**Sources:** [docling/pipeline/base\\_pipeline.py62-123](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L62-L123)\n\n### Phase 1: Build Document (\\_build\\_document)\n\nAbstract method implemented by each pipeline. Responsibilities:\n\n- Load document pages/content from backend\n- Apply models (OCR, layout, tables) to extract structure\n- Populate `ConversionResult.pages` with predictions\n\n**Examples:**\n\n- **PaginatedPipeline**: Iterate pages, apply sequential models via `build_pipe`\n- **SimplePipeline**: Call `backend.convert()` directly to get `DoclingDocument`\n- **VlmPipeline**: Generate page images, run VLM model for predictions\n- **AsrPipeline**: Transcribe audio, create text-based document\n\n**Sources:** [docling/pipeline/base\\_pipeline.py86-88](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 15,
      "token_count": 245,
      "char_count": 988,
      "start_char": 13472,
      "end_char": 14460
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:16",
    "content": "ne.py86-88](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L86-L88) [docling/pipeline/simple\\_pipeline.py26-41](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/simple_pipeline.py#L26-L41)\n\n### Phase 2: Assemble Document (\\_assemble\\_document)\n\nConstructs the hierarchical `DoclingDocument` from page-level predictions:\n\n**Assembly Process (PaginatedPipeline Example)**\n\n```\n```\n\n**Key operations:**\n\n- Convert page-level `Cluster`, `Table`, `FigureElement` to `DocItem` hierarchy\n- Assign provenance metadata (page numbers, bounding boxes)\n- Generate cropped images for `PictureItem`, `TableItem` if requested\n- Clear page backends/caches if not needed downstream\n\n**Sources:** [docling/pipeline/base\\_pipeline.py90-91](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L90-L91)\n\n### Phase 3: Enrich Document (\\_enrich\\_document)",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 16,
      "token_count": 263,
      "char_count": 940,
      "start_char": 14360,
      "end_char": 15302
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:17",
    "content": "4a43/docling/pipeline/base_pipeline.py#L90-L91)\n\n### Phase 3: Enrich Document (\\_enrich\\_document)\n\nApplies enrichment models to individual `NodeItem` elements in the `DoclingDocument`:\n\n**Enrichment Pipeline Flow**\n\n```\n```\n\n**Common enrichment models:**\n\n- `CodeFormulaModel`: Extract LaTeX from code/formula images\n- `DocumentPictureClassifier`: Classify picture types\n- `PictureDescriptionVlmModel`: Generate image captions\n\n**Sources:** [docling/pipeline/base\\_pipeline.py93-115](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L93-L115) [docling/pipeline/base\\_pipeline.py135-177](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L135-L177)\n\n---\n\n## Complete Conversion Flow Sequence\n\nThe following diagram shows the complete end-to-end flow with all components:\n\n**End-to-End Document Conversion Sequence**\n\n```\n```\n\n**Sources:** [docling/document\\_converter.py313-432](https://github.",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 17,
      "token_count": 268,
      "char_count": 977,
      "start_char": 15202,
      "end_char": 16179
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:18",
    "content": "Conversion Sequence**\n\n```\n```\n\n**Sources:** [docling/document\\_converter.py313-432](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L313-L432) [docling/pipeline/base\\_pipeline.py62-123](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L62-L123)\n\n---\n\n## Output Generation\n\n### ConversionResult Structure\n\nThe `ConversionResult` object encapsulates all conversion outputs:\n\n| Field        | Type                       | Description                                     |\n| ------------ | -------------------------- | ----------------------------------------------- |\n| `input`      | `InputDocument`            | Original input metadata                         |\n| `status`     | `ConversionStatus`         | `SUCCESS`, `FAILURE`, `PARTIAL_SUCCESS`         |\n| `errors`     | `List[ErrorItem]`          | Error details per component                     |",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 18,
      "token_count": 212,
      "char_count": 934,
      "start_char": 16079,
      "end_char": 17014
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:19",
    "content": "|\n| `errors`     | `List[ErrorItem]`          | Error details per component                     |\n| `pages`      | `List[Page]`               | Page-level data (may be cleared after assembly) |\n| `document`   | `DoclingDocument`          | Final structured document                       |\n| `timings`    | `Dict[str, ProfilingItem]` | Performance metrics                             |\n| `confidence` | `ConfidenceReport`         | Quality scores per page/model                   |\n\n**Sources:** [docling/datamodel/document.py198-215](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py#L198-L215)\n\n### Export Formats\n\nThe `DoclingDocument` can be exported to multiple formats:\n\n**Export Method Overview**\n\n```\n```\n\n**Export options:**\n\n- `image_mode`: `PLACEHOLDER`, `EMBEDDED` (base64), `REFERENCED` (separate PNG files)\n- `strict_text`: Strip all formatting (for Markdown)\n- `split_page_view`: Separate HTML page per document page\n\n**Sources:** [docling/cli/main.",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 19,
      "token_count": 252,
      "char_count": 1001,
      "start_char": 16914,
      "end_char": 17917
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:20",
    "content": "Markdown)\n- `split_page_view`: Separate HTML page per document page\n\n**Sources:** [docling/cli/main.py191-289](https://github.com/docling-project/docling/blob/f7244a43/docling/cli/main.py#L191-L289)\n\n### Status Determination\n\nThe `_determine_status()` method evaluates conversion success:\n\n**Status Resolution Logic**\n\n```\n```\n\n**Implementation varies by pipeline:**\n\n- **PaginatedPipeline**: Check each page backend validity\n- **SimplePipeline**: Return `SUCCESS` if no exceptions raised\n- **AsrPipeline**: Check transcription success\n\n**Sources:** [docling/pipeline/base\\_pipeline.py118-119](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L118-L119) [docling/pipeline/base\\_pipeline.py295-314](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L295-L314)\n\n---\n\n## Batch Processing and Concurrency\n\nThe `DocumentConverter` supports concurrent document processing:\n\n**Batch Processing Configuration**",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 20,
      "token_count": 263,
      "char_count": 985,
      "start_char": 17817,
      "end_char": 18804
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:21",
    "content": "e `DocumentConverter` supports concurrent document processing:\n\n**Batch Processing Configuration**\n\n| Setting                 | Environment Variable            | Default | Description              |\n| ----------------------- | ------------------------------- | ------- | ------------------------ |\n| `doc_batch_size`        | `DOCLING_DOC_BATCH_SIZE`        | 10      | Documents per batch      |\n| `doc_batch_concurrency` | `DOCLING_DOC_BATCH_CONCURRENCY` | 1       | Worker threads           |\n| `page_batch_size`       | `DOCLING_PAGE_BATCH_SIZE`       | 10      | Pages processed together |\n\n**Concurrency Flow**\n\n```\n```\n\n**Key design points:**\n\n- Each document processes independently (no shared mutable state)\n- Pipeline instances are cached and reused (thread-safe)\n- Models are initialized once per pipeline (read-only access from workers)\n- ThreadPoolExecutor manages worker threads automatically\n\n**Sources:** [docling/document\\_converter.py313-349](https://github.",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 21,
      "token_count": 202,
      "char_count": 976,
      "start_char": 18704,
      "end_char": 19680
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:22",
    "content": "s worker threads automatically\n\n**Sources:** [docling/document\\_converter.py313-349](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L313-L349) [docling/datamodel/settings.py1-82](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/settings.py#L1-L82)\n\n---\n\n## Error Handling and Recovery\n\n### Error Capture\n\nErrors are captured at multiple levels and stored in `ConversionResult.errors`:\n\n| Component Type     | Module Examples                      | Typical Errors                 |\n| ------------------ | ------------------------------------ | ------------------------------ |\n| `DOCUMENT_BACKEND` | `DoclingParseV4DocumentBackend`      | Corrupt PDF, invalid format    |\n| `MODEL`            | `LayoutModel`, `TableStructureModel` | Model inference failure        |\n| `DOC_ASSEMBLER`    | `PageAssembleModel`                  | Hierarchy construction error   |\n| `USER_INPUT`       | `DocumentConverter`                  | Invalid format, file not found |",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 22,
      "token_count": 237,
      "char_count": 1021,
      "start_char": 19580,
      "end_char": 20603
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:23",
    "content": "|\n| `USER_INPUT`       | `DocumentConverter`                  | Invalid format, file not found |\n\n**Error Item Structure:**\n\n```\n```\n\n**Sources:** [docling/datamodel/base\\_models.py147-158](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/base_models.py#L147-L158)\n\n### Raises vs Non-Raises Mode\n\nConversion behavior controlled by `raises_on_error` parameter:\n\n**Error Handling Modes**\n\n```\n```\n\n**Non-raises mode allows:**\n\n- Processing multiple documents even if some fail\n- Collecting all errors for batch analysis\n- Partial success scenarios (some pages succeed)\n\n**Sources:** [docling/document\\_converter.py380-432](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L380-L432) [docling/pipeline/base\\_pipeline.py62-84](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L62-L84)\n\n---\n\n## Summary\n\nThe document conversion flow implements a clean separation of concerns:\n\n1.",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 23,
      "token_count": 266,
      "char_count": 980,
      "start_char": 20503,
      "end_char": 21485
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:24",
    "content": "2-L84)\n\n---\n\n## Summary\n\nThe document conversion flow implements a clean separation of concerns:\n\n1. **Format Detection**: Multi-tier strategy (MIME → Extension → Content)\n2. **Routing**: `FormatOption` maps formats to pipeline/backend pairs\n3. **Caching**: Pipelines reused via `(class, options_hash)` keys\n4. **Execution**: Three-phase model (build → assemble → enrich)\n5. **Output**: Unified `DoclingDocument` with multiple export formats\n\nThe architecture enables:\n\n- **Extensibility**: New formats add backend + pipeline + `FormatOption`\n- **Performance**: Pipeline/model caching, batch processing, concurrency\n- **Reliability**: Isolated execution, comprehensive error capture\n- **Flexibility**: Per-format configuration, multiple output formats\n\n**Key Code Entities:**\n\n| Entity                     | Location                                                                                                                  | Role                              |",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 24,
      "token_count": 179,
      "char_count": 967,
      "start_char": 21385,
      "end_char": 22353
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:25",
    "content": "| Role                              |\n| -------------------------- | ------------------------------------------------------------------------------------------------------------------------- | --------------------------------- |\n| `DocumentConverter`        | [document\\_converter.py184-433](https://github.com/docling-project/docling/blob/f7244a43/document_converter.py#L184-L433) | Orchestrator                      |\n| `_DocumentConversionInput` | [document.py236-489](https://github.com/docling-project/docling/blob/f7244a43/document.py#L236-L489)                      | Format detection, input parsing   |\n| `InputDocument`            | [document.py104-191](https://github.com/docling-project/docling/blob/f7244a43/document.py#L104-L191)                      | Document metadata + backend       |\n| `FormatOption`             | [document\\_converter.py62-130](https://github.com/docling-project/docling/blob/f7244a43/document_converter.",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 25,
      "token_count": 225,
      "char_count": 940,
      "start_char": 22253,
      "end_char": 23255
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:26",
    "content": "nt\\_converter.py62-130](https://github.com/docling-project/docling/blob/f7244a43/document_converter.py#L62-L130)   | Format → pipeline/backend mapping |\n| `BasePipeline`             | [base\\_pipeline.py43-133](https://github.com/docling-project/docling/blob/f7244a43/base_pipeline.py#L43-L133)             | Three-phase execution model       |\n| `ConversionResult`         | [document.py198-215](https://github.com/docling-project/docling/blob/f7244a43/document.py#L198-L215)                      | Output container                  |\n\nDismiss\n\nRefresh this wiki\n\nThis wiki was recently refreshed. Please wait 4 days to refresh again.\n\n### On this page\n\n- [Document Conversion Flow](#document-conversion-flow.md)\n- [Overview](#overview.md)\n- [Entry Points and Initialization](#entry-points-and-initialization.md)\n- [DocumentConverter Initialization](#documentconverter-initialization.md)\n- [Conversion Methods](#conversion-methods.md)\n- [Format Detection and Input Processing](#format-detection-and-input-processing.md)",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 26,
      "token_count": 263,
      "char_count": 1019,
      "start_char": 23155,
      "end_char": 24175
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:27",
    "content": "on-methods.md)\n- [Format Detection and Input Processing](#format-detection-and-input-processing.md)\n- [Format Detection Mechanism](#format-detection-mechanism.md)\n- [Format Detection Strategy](#format-detection-strategy.md)\n- [Tier 1: MIME Type Detection](#tier-1-mime-type-detection.md)\n- [Tier 2: Extension Mapping](#tier-2-extension-mapping.md)\n- [Tier 3: Content Analysis](#tier-3-content-analysis.md)\n- [InputDocument Creation](#inputdocument-creation.md)\n- [Backend and Pipeline Routing](#backend-and-pipeline-routing.md)\n- [FormatOption Mapping](#formatoption-mapping.md)\n- [Default Format Options](#default-format-options.md)\n- [Pipeline Selection and Caching](#pipeline-selection-and-caching.md)\n- [Pipeline Execution Phases](#pipeline-execution-phases.md)\n- [Phase 1: Build Document (\\_build\\_document)](#phase-1-build-document-_build_document.md)\n- [Phase 2: Assemble Document (\\_assemble\\_document)](#phase-2-assemble-document-_assemble_document.md)",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 27,
      "token_count": 244,
      "char_count": 961,
      "start_char": 24075,
      "end_char": 25037
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2.1-document-conversion-flow.md:chunk:28",
    "content": "hase 2: Assemble Document (\\_assemble\\_document)](#phase-2-assemble-document-_assemble_document.md)\n- [Phase 3: Enrich Document (\\_enrich\\_document)](#phase-3-enrich-document-_enrich_document.md)\n- [Complete Conversion Flow Sequence](#complete-conversion-flow-sequence.md)\n- [Output Generation](#output-generation.md)\n- [ConversionResult Structure](#conversionresult-structure.md)\n- [Export Formats](#export-formats.md)\n- [Status Determination](#status-determination.md)\n- [Batch Processing and Concurrency](#batch-processing-and-concurrency.md)\n- [Error Handling and Recovery](#error-handling-and-recovery.md)\n- [Error Capture](#error-capture.md)\n- [Raises vs Non-Raises Mode](#raises-vs-non-raises-mode.md)\n- [Summary](#summary.md)",
    "metadata": {
      "source_file": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 28,
      "token_count": 186,
      "char_count": 733,
      "start_char": 24937,
      "end_char": 25961
    }
  }
]