[
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:0",
    "content": "Core Architecture | docling-project/docling | DeepWiki\n\n[Index your code with Devin](private-repo.md)\n\n[DeepWiki](https://deepwiki.com)\n\n[DeepWiki](.md)\n\n[docling-project/docling](https://github.com/docling-project/docling \"Open repository\")\n\n[Index your code with](private-repo.md)\n\n[Devin](private-repo.md)\n\nShare\n\nLast indexed: 12 October 2025 ([f7244a](https://github.com/docling-project/docling/commits/f7244a43))\n\n- [Overview](docling-project/docling/1-overview.md)\n- [Installation](docling-project/docling/1.1-installation.md)\n- [Quick Start](docling-project/docling/1.2-quick-start.md)\n- [Core Architecture](docling-project/docling/2-core-architecture.md)\n- [Document Conversion Flow](docling-project/docling/2.1-document-conversion-flow.md)\n- [DoclingDocument Data Model](docling-project/docling/2.2-doclingdocument-data-model.md)\n- [Configuration and Pipeline Options](docling-project/docling/2.3-configuration-and-pipeline-options.md)\n- [Format Detection and Routing](docling-project/docling/2.",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 0,
      "token_count": 274,
      "char_count": 1005,
      "start_char": 0,
      "end_char": 1005
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:1",
    "content": "3-configuration-and-pipeline-options.md)\n- [Format Detection and Routing](docling-project/docling/2.4-format-detection-and-routing.md)\n- [Document Backends](docling-project/docling/3-document-backends.md)\n- [PDF Processing Backends](docling-project/docling/3.1-pdf-processing-backends.md)\n- [Office Document Backends](docling-project/docling/3.2-office-document-backends.md)\n- [Web and Markup Backends](docling-project/docling/3.3-web-and-markup-backends.md)\n- [AI/ML Models](docling-project/docling/4-aiml-models.md)\n- [OCR Models](docling-project/docling/4.1-ocr-models.md)\n- [Layout and Table Structure Models](docling-project/docling/4.2-layout-and-table-structure-models.md)\n- [Vision Language Models](docling-project/docling/4.3-vision-language-models.md)\n- [Inline VLM Models](docling-project/docling/4.3.1-inline-vlm-models.md)\n- [API-Based VLM Models](docling-project/docling/4.3.2-api-based-vlm-models.md)\n- [Enrichment Models](docling-project/docling/4.4-enrichment-models.md)",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 1,
      "token_count": 283,
      "char_count": 987,
      "start_char": 905,
      "end_char": 1893
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:2",
    "content": ".2-api-based-vlm-models.md)\n- [Enrichment Models](docling-project/docling/4.4-enrichment-models.md)\n- [Processing Pipelines](docling-project/docling/5-processing-pipelines.md)\n- [Standard PDF Pipeline](docling-project/docling/5.1-standard-pdf-pipeline.md)\n- [Threaded PDF Pipeline](docling-project/docling/5.2-threaded-pdf-pipeline.md)\n- [VLM Pipeline](docling-project/docling/5.3-vlm-pipeline.md)\n- [Extraction Pipeline](docling-project/docling/5.4-extraction-pipeline.md)\n- [ASR Pipeline](docling-project/docling/5.5-asr-pipeline.md)\n- [Base Pipeline Architecture](docling-project/docling/5.6-base-pipeline-architecture.md)\n- [Command Line Interface](docling-project/docling/6-command-line-interface.md)\n- [Document Conversion CLI](docling-project/docling/6.1-document-conversion-cli.md)\n- [Model Management CLI](docling-project/docling/6.2-model-management-cli.md)\n- [Python SDK](docling-project/docling/7-python-sdk.md)\n- [DocumentConverter API](docling-project/docling/7.1-documentconverter-api.md)",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 2,
      "token_count": 275,
      "char_count": 1003,
      "start_char": 1793,
      "end_char": 2797
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:3",
    "content": "ng/7-python-sdk.md)\n- [DocumentConverter API](docling-project/docling/7.1-documentconverter-api.md)\n- [DocumentExtractor API](docling-project/docling/7.2-documentextractor-api.md)\n- [Usage Examples](docling-project/docling/7.3-usage-examples.md)\n- [Output and Integration](docling-project/docling/8-output-and-integration.md)\n- [Export Formats](docling-project/docling/8.1-export-formats.md)\n- [Document Chunking](docling-project/docling/8.2-document-chunking.md)\n- [Framework Integrations](docling-project/docling/8.3-framework-integrations.md)\n- [Development and Testing](docling-project/docling/9-development-and-testing.md)\n- [Testing Framework](docling-project/docling/9.1-testing-framework.md)\n- [Ground Truth Data](docling-project/docling/9.2-ground-truth-data.md)\n- [CI/CD and Development Workflow](docling-project/docling/9.3-cicd-and-development-workflow.md)\n- [Deployment](docling-project/docling/10-deployment.md)\n- [Docker Deployment](docling-project/docling/10.1-docker-deployment.md)",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 3,
      "token_count": 270,
      "char_count": 998,
      "start_char": 2697,
      "end_char": 3696
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:4",
    "content": "/docling/10-deployment.md)\n- [Docker Deployment](docling-project/docling/10.1-docker-deployment.md)\n- [Model Artifacts Management](docling-project/docling/10.2-model-artifacts-management.md)\n\nMenu\n\n# Core Architecture\n\nRelevant source files\n\n- [docling/cli/main.py](https://github.com/docling-project/docling/blob/f7244a43/docling/cli/main.py)\n- [docling/datamodel/base\\_models.py](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/base_models.py)\n- [docling/datamodel/document.py](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py)\n- [docling/datamodel/extraction.py](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/extraction.py)\n- [docling/datamodel/pipeline\\_options.py](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/pipeline_options.py)\n- [docling/document\\_converter.py](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py)\n- [docling/document\\_extractor.",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 4,
      "token_count": 285,
      "char_count": 1014,
      "start_char": 3596,
      "end_char": 4610
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:5",
    "content": "docling-project/docling/blob/f7244a43/docling/document_converter.py)\n- [docling/document\\_extractor.py](https://github.com/docling-project/docling/blob/f7244a43/docling/document_extractor.py)\n- [docling/models/vlm\\_models\\_inline/nuextract\\_transformers\\_model.py](https://github.com/docling-project/docling/blob/f7244a43/docling/models/vlm_models_inline/nuextract_transformers_model.py)\n- [docling/pipeline/asr\\_pipeline.py](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/asr_pipeline.py)\n- [docling/pipeline/base\\_extraction\\_pipeline.py](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_extraction_pipeline.py)\n- [docling/pipeline/base\\_pipeline.py](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py)\n- [docling/pipeline/extraction\\_vlm\\_pipeline.py](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/extraction_vlm_pipeline.py)\n- [docling/pipeline/simple\\_pipeline.py](https://github.",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 5,
      "token_count": 284,
      "char_count": 1010,
      "start_char": 4510,
      "end_char": 5520
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:6",
    "content": "ocling/pipeline/extraction_vlm_pipeline.py)\n- [docling/pipeline/simple\\_pipeline.py](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/simple_pipeline.py)\n- [docling/pipeline/threaded\\_standard\\_pdf\\_pipeline.py](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/threaded_standard_pdf_pipeline.py)\n- [docling/pipeline/vlm\\_pipeline.py](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/vlm_pipeline.py)\n\nThis document provides an architectural overview of Docling's core system design, including its three-layer architecture, key abstractions, and how components interact during document processing. For details on specific subsystems, see [Document Conversion Flow](docling-project/docling/2.1-document-conversion-flow.md), [DoclingDocument Data Model](docling-project/docling/2.2-doclingdocument-data-model.md), [Configuration and Pipeline Options](docling-project/docling/2.3-configuration-and-pipeline-options.",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 6,
      "token_count": 237,
      "char_count": 986,
      "start_char": 5420,
      "end_char": 6406
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:7",
    "content": "[Configuration and Pipeline Options](docling-project/docling/2.3-configuration-and-pipeline-options.md), and [Format Detection and Routing](docling-project/docling/2.4-format-detection-and-routing.md).\n\n## System Overview\n\nDocling implements a three-layer architecture that separates user interfaces, orchestration logic, and processing pipelines:\n\n### Three-Layer Architecture\n\n```\n```\n\n**Sources:** [docling/document\\_converter.py184-433](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L184-L433) [docling/document\\_extractor.py88-326](https://github.com/docling-project/docling/blob/f7244a43/docling/document_extractor.py#L88-L326) [docling/cli/main.py298-816](https://github.com/docling-project/docling/blob/f7244a43/docling/cli/main.py#L298-L816) [docling/pipeline/base\\_pipeline.py43-133](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L43-L133)\n\n### Layer Responsibilities",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 7,
      "token_count": 279,
      "char_count": 963,
      "start_char": 6306,
      "end_char": 7271
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:8",
    "content": "ject/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L43-L133)\n\n### Layer Responsibilities\n\n| Layer                    | Components                               | Responsibility                                                      |\n| ------------------------ | ---------------------------------------- | ------------------------------------------------------------------- |\n| **User Interfaces**      | CLI, SDK, MCP                            | Accept user input, parse arguments, invoke core APIs                |\n| **Core Orchestration**   | `DocumentConverter`, `DocumentExtractor` | Route documents to appropriate pipelines, manage pipeline lifecycle |\n| **Processing Pipelines** | `BasePipeline` subclasses                | Execute multi-stage document processing (build, assemble, enrich)   |\n| **Document Backends**    | `AbstractDocumentBackend` subclasses     | Provide format-specific document reading and parsing                |",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 8,
      "token_count": 159,
      "char_count": 951,
      "start_char": 7171,
      "end_char": 8123
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:9",
    "content": "mentBackend` subclasses     | Provide format-specific document reading and parsing                |\n| **Output**               | `DoclingDocument`                        | Unified document representation with export capabilities            |\n\n**Sources:** [docling/document\\_converter.py184-206](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L184-L206) [docling/pipeline/base\\_pipeline.py43-85](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L43-L85)\n\n## Key Abstractions\n\n### DocumentConverter and DocumentExtractor\n\nThe system provides two primary entry points for different use cases:\n\n```\n```\n\n- **`DocumentConverter`** ([document\\_converter.py184-433](https://github.com/docling-project/docling/blob/f7244a43/document_converter.py#L184-L433)): Converts documents to `DoclingDocument` format for downstream processing, search, or archival\n- **`DocumentExtractor`** ([document\\_extractor.py88-326](https://github.",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 9,
      "token_count": 256,
      "char_count": 1001,
      "start_char": 8023,
      "end_char": 9024
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:10",
    "content": "ssing, search, or archival\n- **`DocumentExtractor`** ([document\\_extractor.py88-326](https://github.com/docling-project/docling/blob/f7244a43/document_extractor.py#L88-L326)): Extracts structured data from documents according to a template (experimental feature)\n\nBoth classes share a similar architecture with format routing and pipeline caching but serve different end goals.\n\n**Sources:** [docling/document\\_converter.py184-206](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L184-L206) [docling/document\\_extractor.py88-120](https://github.com/docling-project/docling/blob/f7244a43/docling/document_extractor.py#L88-L120)\n\n### FormatOption: The Routing Mechanism\n\nThe `FormatOption` class pairs each `InputFormat` with its appropriate pipeline and backend:\n\n```\n```\n\nThe `DocumentConverter` maintains a `format_to_options: Dict[InputFormat, FormatOption]` mapping that determines how each format is processed.",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 10,
      "token_count": 250,
      "char_count": 953,
      "start_char": 8924,
      "end_char": 9877
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:11",
    "content": "t_to_options: Dict[InputFormat, FormatOption]` mapping that determines how each format is processed. This is configured during initialization and can be customized per format.\n\n**Sources:** [docling/document\\_converter.py62-131](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L62-L131) [docling/datamodel/base\\_models.py36-42](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/base_models.py#L36-L42)\n\n### Pipeline Hierarchy\n\nPipelines implement the `BasePipeline` abstract class, which defines a three-phase processing model:\n\n```\n```\n\n**Key Methods:**\n\n- `execute()` ([base\\_pipeline.py62-84](https://github.com/docling-project/docling/blob/f7244a43/base_pipeline.py#L62-L84)): Entry point that orchestrates the three-phase processing\n- `_build_document()`: Extract raw structure from the document backend\n- `_assemble_document()`: Construct hierarchical document structure",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 11,
      "token_count": 243,
      "char_count": 940,
      "start_char": 9777,
      "end_char": 10718
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:12",
    "content": "cture from the document backend\n- `_assemble_document()`: Construct hierarchical document structure\n- `_enrich_document()`: Apply enrichment models (code detection, picture classification, etc.)\n\n**Sources:** [docling/pipeline/base\\_pipeline.py43-133](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L43-L133) [docling/pipeline/base\\_pipeline.py135-182](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L135-L182) [docling/pipeline/base\\_pipeline.py184-320](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L184-L320)\n\n### Backend System\n\nBackends provide format-specific document reading capabilities:\n\n```\n```\n\n- **`PaginatedDocumentBackend`** ([backend/abstract\\_backend.py58-88](https://github.com/docling-project/docling/blob/f7244a43/backend/abstract_backend.py#L58-L88)): Supports page-by-page iteration, used by PDF/image formats",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 12,
      "token_count": 276,
      "char_count": 964,
      "start_char": 10618,
      "end_char": 11583
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:13",
    "content": "3/backend/abstract_backend.py#L58-L88)): Supports page-by-page iteration, used by PDF/image formats\n- **`DeclarativeDocumentBackend`** ([backend/abstract\\_backend.py91-101](https://github.com/docling-project/docling/blob/f7244a43/backend/abstract_backend.py#L91-L101)): Directly outputs `DoclingDocument`, used by DOCX/HTML/Markdown formats\n\n**Sources:** [docling/backend/abstract\\_backend.py13-101](https://github.com/docling-project/docling/blob/f7244a43/docling/backend/abstract_backend.py#L13-L101) [docling/backend/pdf\\_backend.py1-100](https://github.com/docling-project/docling/blob/f7244a43/docling/backend/pdf_backend.py#L1-L100)\n\n## Conversion Flow Architecture\n\nThe document conversion process follows a consistent pattern across all pipelines:\n\n```\n```\n\n**Sources:** [docling/document\\_converter.py227-284](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L227-L284) [docling/document\\_converter.py351-378](https://github.",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 13,
      "token_count": 290,
      "char_count": 972,
      "start_char": 11483,
      "end_char": 12455
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:14",
    "content": "a43/docling/document_converter.py#L227-L284) [docling/document\\_converter.py351-378](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L351-L378) [docling/pipeline/base\\_pipeline.py62-84](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L62-L84)\n\n### Pipeline Caching Mechanism\n\nThe `DocumentConverter` caches pipeline instances to avoid redundant model loading:\n\n```\n```\n\n**Caching Logic** ([document\\_converter.py212-217](https://github.com/docling-project/docling/blob/f7244a43/document_converter.py#L212-L217) [document\\_converter.py351-378](https://github.com/docling-project/docling/blob/f7244a43/document_converter.py#L351-L378)):\n\n1. Compute MD5 hash of `pipeline_options.model_dump()`\n2. Create composite key: `(pipeline_cls, options_hash)`\n3. Check cache with thread lock (`_PIPELINE_CACHE_LOCK`)\n4. Initialize and store if not found\n5. Return cached instance if found",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 14,
      "token_count": 291,
      "char_count": 957,
      "start_char": 12355,
      "end_char": 13314
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:15",
    "content": "k (`_PIPELINE_CACHE_LOCK`)\n4. Initialize and store if not found\n5. Return cached instance if found\n\nThis optimization is critical for performance when processing multiple documents with identical configurations, as it prevents re-initialization of heavy ML models.\n\n**Sources:** [docling/document\\_converter.py203-217](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L203-L217) [docling/document\\_converter.py351-378](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L351-L378)\n\n## Pipeline Processing Phases\n\nAll pipelines inherit the three-phase processing model from `BasePipeline`:\n\n### Phase 1: Build Document\n\n```\n```\n\n- **StandardPdfPipeline**: Sequential model execution for PDF/image processing\n- **SimplePipeline**: Direct backend conversion for structured formats (DOCX, HTML)\n- **VlmPipeline**: Vision-language model inference for end-to-end processing\n\n**Sources:** [docling/pipeline/base\\_pipeline.py86-91](https://github.",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 15,
      "token_count": 250,
      "char_count": 1013,
      "start_char": 13214,
      "end_char": 14227
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:16",
    "content": "ce for end-to-end processing\n\n**Sources:** [docling/pipeline/base\\_pipeline.py86-91](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L86-L91) [docling/pipeline/simple\\_pipeline.py26-41](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/simple_pipeline.py#L26-L41) [docling/pipeline/vlm\\_pipeline.py136-186](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/vlm_pipeline.py#L136-L186)\n\n### Phase 2: Assemble Document\n\nThis phase constructs the hierarchical `DoclingDocument` structure from extracted elements. The implementation varies by pipeline:\n\n- **StandardPdfPipeline**: Combines page-level elements into document structure\n- **VlmPipeline**: Converts VLM output (DOCTAGS/Markdown/HTML) into `DoclingDocument`\n- **SimplePipeline**: Uses pre-assembled structure from backend\n\n**Sources:** [docling/pipeline/base\\_pipeline.py90-91](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 16,
      "token_count": 287,
      "char_count": 1014,
      "start_char": 14127,
      "end_char": 15141
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:17",
    "content": "ne.py90-91](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L90-L91) [docling/pipeline/vlm\\_pipeline.py136-186](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/vlm_pipeline.py#L136-L186)\n\n### Phase 3: Enrich Document\n\nEnrichment models operate on the assembled `DoclingDocument` to add additional information:\n\n```\n```\n\nEach enrichment model:\n\n1. Calls `prepare_element()` to filter relevant document items\n2. Processes items in batches\n3. Updates the `DoclingDocument` in-place\n\n**Sources:** [docling/pipeline/base\\_pipeline.py93-115](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L93-L115) [docling/pipeline/base\\_pipeline.py136-176](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L136-L176)\n\n## Configuration Architecture\n\nThe configuration system is hierarchical, with options cascading from top-level `PipelineOptions` to model-specific configurations:\n\n```\n```",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 17,
      "token_count": 297,
      "char_count": 1024,
      "start_char": 15041,
      "end_char": 16066
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:18",
    "content": "with options cascading from top-level `PipelineOptions` to model-specific configurations:\n\n```\n```\n\nFor detailed configuration information, see [Configuration and Pipeline Options](docling-project/docling/2.3-configuration-and-pipeline-options.md).\n\n**Sources:** [docling/datamodel/pipeline\\_options.py273-384](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/pipeline_options.py#L273-L384)\n\n## Input Document and Backend Lifecycle\n\nThe `InputDocument` class manages document validation and backend initialization:\n\n```\n```\n\n**Key Lifecycle Points:**\n\n1. **Validation** ([datamodel/document.py131-182](https://github.com/docling-project/docling/blob/f7244a43/datamodel/document.py#L131-L182)): Check file size and page count against `DocumentLimits`\n2. **Backend Initialization** ([datamodel/document.py183-191](https://github.com/docling-project/docling/blob/f7244a43/datamodel/document.py#L183-L191)): Create backend instance with document reference\n3.",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 18,
      "token_count": 257,
      "char_count": 980,
      "start_char": 15966,
      "end_char": 16947
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:19",
    "content": "/blob/f7244a43/datamodel/document.py#L183-L191)): Create backend instance with document reference\n3. **Page Loading** (in pipelines): Lazy page loading via `backend.load_page(page_no)`\n4. **Resource Cleanup** ([pipeline/base\\_pipeline.py285-293](https://github.com/docling-project/docling/blob/f7244a43/pipeline/base_pipeline.py#L285-L293)): Unload backends after processing\n\n**Sources:** [docling/datamodel/document.py104-191](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py#L104-L191) [docling/pipeline/base\\_pipeline.py285-293](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L285-L293)\n\n## ThreadedStandardPdfPipeline Architecture\n\nFor high-performance PDF processing, `ThreadedStandardPdfPipeline` implements a multi-threaded stage graph:\n\n```\n```\n\n**Key Features:**\n\n- **ThreadedQueue** ([threaded\\_standard\\_pdf\\_pipeline.py96-163](https://github.com/docling-project/docling/blob/f7244a43/threaded_standard_pdf_pipeline.",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 19,
      "token_count": 300,
      "char_count": 1009,
      "start_char": 16847,
      "end_char": 17856
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:20",
    "content": "e.py96-163](https://github.com/docling-project/docling/blob/f7244a43/threaded_standard_pdf_pipeline.py#L96-L163)): Bounded queue with blocking `put()`/`get_batch()` and explicit `close()` semantics\n- **ThreadedPipelineStage** ([threaded\\_standard\\_pdf\\_pipeline.py165-280](https://github.com/docling-project/docling/blob/f7244a43/threaded_standard_pdf_pipeline.py#L165-L280)): Each stage runs in its own thread, processes batches, and handles errors\n- **Backpressure Control**: Queue size limits prevent memory overflow from fast producers\n- **Deterministic Shutdown**: `close()` propagates downstream so stages terminate cleanly\n\n**Sources:** [docling/pipeline/threaded\\_standard\\_pdf\\_pipeline.py1-296](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/threaded_standard_pdf_pipeline.py#L1-L296) [docling/pipeline/threaded\\_standard\\_pdf\\_pipeline.py379-427](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/threaded_standard_pdf_pipeline.py#L379-L427)",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 20,
      "token_count": 288,
      "char_count": 1003,
      "start_char": 17756,
      "end_char": 18761
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:21",
    "content": "ocling-project/docling/blob/f7244a43/docling/pipeline/threaded_standard_pdf_pipeline.py#L379-L427)\n\n## Document Format Detection\n\nFormat detection uses a multi-strategy approach implemented in `_DocumentConversionInput._guess_format()`:\n\n```\n```\n\nFor detailed format detection logic, see [Format Detection and Routing](docling-project/docling/2.4-format-detection-and-routing.md).\n\n**Sources:** [docling/datamodel/document.py280-374](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py#L280-L374)\n\n## Output and Export\n\nAll pipelines converge on `DoclingDocument` as the unified representation:\n\n```\n```\n\nThe `DoclingDocument` class (from `docling-core`) provides:\n\n- Hierarchical document structure with provenance tracking\n- Multiple export formats with configurable image handling\n- Item iteration with `iterate_items()` for traversal\n\nFor details on the data model, see [DoclingDocument Data Model](docling-project/docling/2.2-doclingdocument-data-model.md).",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 21,
      "token_count": 243,
      "char_count": 997,
      "start_char": 18661,
      "end_char": 19658
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:22",
    "content": "model, see [DoclingDocument Data Model](docling-project/docling/2.2-doclingdocument-data-model.md). For export format details, see [Export Formats](docling-project/docling/8.1-export-formats.md).\n\n**Sources:** [docling/cli/main.py191-290](https://github.com/docling-project/docling/blob/f7244a43/docling/cli/main.py#L191-L290) [docling/datamodel/document.py198-215](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py#L198-L215)\n\n## Summary\n\nDocling's architecture achieves separation of concerns through:\n\n1. **Clear layer boundaries**: User interfaces, orchestration, pipelines, backends, and output\n2. **Pluggable components**: Pipeline and backend selection via `FormatOption` mappings\n3. **Performance optimization**: Pipeline caching prevents redundant model initialization\n4. **Consistent processing model**: Three-phase execution (build, assemble, enrich) across all pipelines\n5. **Unified output**: All pipelines produce `DoclingDocument` for consistent downstream processing",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 22,
      "token_count": 256,
      "char_count": 1019,
      "start_char": 19558,
      "end_char": 20580
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:23",
    "content": ". **Unified output**: All pipelines produce `DoclingDocument` for consistent downstream processing\n\nThis design allows Docling to handle diverse document formats with format-specific optimizations while maintaining a consistent external API.\n\n**Sources:** [docling/document\\_converter.py184-433](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L184-L433) [docling/pipeline/base\\_pipeline.py43-133](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L43-L133) [docling/datamodel/document.py104-191](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py#L104-L191)\n\nDismiss\n\nRefresh this wiki\n\nThis wiki was recently refreshed. Please wait 4 days to refresh again.\n\n### On this page\n\n- [Core Architecture](#core-architecture.md)\n- [System Overview](#system-overview.md)\n- [Three-Layer Architecture](#three-layer-architecture.md)\n- [Layer Responsibilities](#layer-responsibilities.md)",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 23,
      "token_count": 263,
      "char_count": 993,
      "start_char": 20480,
      "end_char": 21474
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:24",
    "content": "Architecture](#three-layer-architecture.md)\n- [Layer Responsibilities](#layer-responsibilities.md)\n- [Key Abstractions](#key-abstractions.md)\n- [DocumentConverter and DocumentExtractor](#documentconverter-and-documentextractor.md)\n- [FormatOption: The Routing Mechanism](#formatoption-the-routing-mechanism.md)\n- [Pipeline Hierarchy](#pipeline-hierarchy.md)\n- [Backend System](#backend-system.md)\n- [Conversion Flow Architecture](#conversion-flow-architecture.md)\n- [Pipeline Caching Mechanism](#pipeline-caching-mechanism.md)\n- [Pipeline Processing Phases](#pipeline-processing-phases.md)\n- [Phase 1: Build Document](#phase-1-build-document.md)\n- [Phase 2: Assemble Document](#phase-2-assemble-document.md)\n- [Phase 3: Enrich Document](#phase-3-enrich-document.md)\n- [Configuration Architecture](#configuration-architecture.md)\n- [Input Document and Backend Lifecycle](#input-document-and-backend-lifecycle.md)\n- [ThreadedStandardPdfPipeline Architecture](#threadedstandardpdfpipeline-architecture.md)",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 24,
      "token_count": 238,
      "char_count": 1002,
      "start_char": 21374,
      "end_char": 22378
    }
  },
  {
    "chunk_id": "docling-project_docling:_docling-project_docling_2-core-architecture.md:chunk:25",
    "content": "ycle.md)\n- [ThreadedStandardPdfPipeline Architecture](#threadedstandardpdfpipeline-architecture.md)\n- [Document Format Detection](#document-format-detection.md)\n- [Output and Export](#output-and-export.md)\n- [Summary](#summary.md)",
    "metadata": {
      "source_file": "_docling-project_docling_2-core-architecture.md",
      "source_collection": "docling-project_docling",
      "subdirectory": "root",
      "filename": "_docling-project_docling_2-core-architecture.md",
      "file_extension": ".md",
      "chunk_index": 25,
      "token_count": 55,
      "char_count": 230,
      "start_char": 22278,
      "end_char": 23302
    }
  }
]