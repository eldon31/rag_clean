Create & Restore Snapshots - Qdrant

[](https://qdrant.tech/)

- [Qdrant](https://qdrant.tech/documentation/)
- [Cloud](https://qdrant.tech/documentation/cloud-intro/)
- [Build](https://qdrant.tech/documentation/build/)
- [Learn](https://qdrant.tech/articles/)
- [API Reference](https://api.qdrant.tech/api-reference)

Search

[Log in](https://cloud.qdrant.io/login) [Start Free](https://cloud.qdrant.io/signup)

Search

- [Qdrant](https://qdrant.tech/documentation/)
- [Cloud](https://qdrant.tech/documentation/cloud-intro/)
- [Build](https://qdrant.tech/documentation/build/)
- [Learn](https://qdrant.tech/articles/)
- [API Reference](https://api.qdrant.tech/api-reference)

### Getting Started

[What is Qdrant?](https://qdrant.tech/documentation/overview/)

- [Understanding Vector Search in Qdrant](https://qdrant.tech/documentation/overview/vector-search/)

[Local Quickstart](https://qdrant.tech/documentation/quickstart/)

[API & SDKs](https://qdrant.tech/documentation/interfaces/)

[Qdrant Web UI](https://qdrant.tech/documentation/web-ui/)

### User Manual

[Concepts](https://qdrant.tech/documentation/concepts/)

- [Collections](https://qdrant.tech/documentation/concepts/collections/)
- [Points](https://qdrant.tech/documentation/concepts/points/)
- [Vectors](https://qdrant.tech/documentation/concepts/vectors/)
- [Payload](https://qdrant.tech/documentation/concepts/payload/)
- [Search](https://qdrant.tech/documentation/concepts/search/)
- [Explore](https://qdrant.tech/documentation/concepts/explore/)
- [Hybrid Queries](https://qdrant.tech/documentation/concepts/hybrid-queries/)
- [Filtering](https://qdrant.tech/documentation/concepts/filtering/)
- [Optimizer](https://qdrant.tech/documentation/concepts/optimizer/)
- [Storage](https://qdrant.tech/documentation/concepts/storage/)
- [Indexing](https://qdrant.tech/documentation/concepts/indexing/)
- [Snapshots](https://qdrant.tech/documentation/concepts/snapshots/)

[Guides](https://qdrant.tech/documentation/guides/installation/)

- [Installation](https://qdrant.tech/documentation/guides/installation/)
- [Administration](https://qdrant.tech/documentation/guides/administration/)
- [Running with GPU](https://qdrant.tech/documentation/guides/running-with-gpu/)
- [Capacity Planning](https://qdrant.tech/documentation/guides/capacity-planning/)
- [Optimize Performance](https://qdrant.tech/documentation/guides/optimize/)
- [Multitenancy](https://qdrant.tech/documentation/guides/multiple-partitions/)
- [Distributed Deployment](https://qdrant.tech/documentation/guides/distributed_deployment/)
- [Quantization](https://qdrant.tech/documentation/guides/quantization/)
- [Monitoring & Telemetry](https://qdrant.tech/documentation/guides/monitoring/)
- [Configuration](https://qdrant.tech/documentation/guides/configuration/)
- [Security](https://qdrant.tech/documentation/guides/security/)
- [Usage Statistics](https://qdrant.tech/documentation/guides/usage-statistics/)
- [Troubleshooting](https://qdrant.tech/documentation/guides/common-errors/)

### Ecosystem

[FastEmbed](https://qdrant.tech/documentation/fastembed/)

- [Quickstart](https://qdrant.tech/documentation/fastembed/fastembed-quickstart/)
- [FastEmbed & Qdrant](https://qdrant.tech/documentation/fastembed/fastembed-semantic-search/)
- [Working with miniCOIL](https://qdrant.tech/documentation/fastembed/fastembed-minicoil/)
- [Working with SPLADE](https://qdrant.tech/documentation/fastembed/fastembed-splade/)
- [Working with ColBERT](https://qdrant.tech/documentation/fastembed/fastembed-colbert/)
- [Reranking with FastEmbed](https://qdrant.tech/documentation/fastembed/fastembed-rerankers/)

[Qdrant MCP Server](https://github.com/qdrant/mcp-server-qdrant)

### Tutorials

[Vector Search Basics](https://qdrant.tech/documentation/beginner-tutorials/)

- [Semantic Search 101](https://qdrant.tech/documentation/beginner-tutorials/search-beginners/)
- [Build a Neural Search Service](https://qdrant.tech/documentation/beginner-tutorials/neural-search/)
- [Setup Hybrid Search with FastEmbed](https://qdrant.tech/documentation/beginner-tutorials/hybrid-search-fastembed/)
- [Measure Search Quality](https://qdrant.tech/documentation/beginner-tutorials/retrieval-quality/)

[Advanced Retrieval](https://qdrant.tech/documentation/advanced-tutorials/)

- [How to Use Multivector Representations with Qdrant Effectively](https://qdrant.tech/documentation/advanced-tutorials/using-multivector-representations/)
- [Reranking in Hybrid Search](https://qdrant.tech/documentation/advanced-tutorials/reranking-hybrid-search/)
- [Search Through Your Codebase](https://qdrant.tech/documentation/advanced-tutorials/code-search/)
- [Build a Recommendation System with Collaborative Filtering](https://qdrant.tech/documentation/advanced-tutorials/collaborative-filtering/)
- [Scaling PDF Retrieval with Qdrant](https://qdrant.tech/documentation/advanced-tutorials/pdf-retrieval-at-scale/)

[Using the Database](https://qdrant.tech/documentation/database-tutorials/)

- [Bulk Upload Vectors](https://qdrant.tech/documentation/database-tutorials/bulk-upload/)
- [Create & Restore Snapshots](https://qdrant.tech/documentation/database-tutorials/create-snapshot/)
- [Large Scale Search](https://qdrant.tech/documentation/database-tutorials/large-scale-search/)
- [Load a HuggingFace Dataset](https://qdrant.tech/documentation/database-tutorials/huggingface-datasets/)
- [Build With Async API](https://qdrant.tech/documentation/database-tutorials/async-api/)
- [Migration to Qdrant](https://qdrant.tech/documentation/database-tutorials/migration/)
- [Static Embeddings. Should you pay attention?](https://qdrant.tech/documentation/database-tutorials/static-embeddings/)

### Support

[FAQ](https://qdrant.tech/documentation/faq/qdrant-fundamentals/)

- [Qdrant Fundamentals](https://qdrant.tech/documentation/faq/qdrant-fundamentals/)
- [Database Optimization](https://qdrant.tech/documentation/faq/database-optimization/)

[Release Notes](https://github.com/qdrant/qdrant/releases)

### Getting Started

[What is Qdrant?](https://qdrant.tech/documentation/overview/)

- [Understanding Vector Search in Qdrant](https://qdrant.tech/documentation/overview/vector-search/)

[Local Quickstart](https://qdrant.tech/documentation/quickstart/)

[API & SDKs](https://qdrant.tech/documentation/interfaces/)

[Qdrant Web UI](https://qdrant.tech/documentation/web-ui/)

### User Manual

[Concepts](https://qdrant.tech/documentation/concepts/)

- [Collections](https://qdrant.tech/documentation/concepts/collections/)
- [Points](https://qdrant.tech/documentation/concepts/points/)
- [Vectors](https://qdrant.tech/documentation/concepts/vectors/)
- [Payload](https://qdrant.tech/documentation/concepts/payload/)
- [Search](https://qdrant.tech/documentation/concepts/search/)
- [Explore](https://qdrant.tech/documentation/concepts/explore/)
- [Hybrid Queries](https://qdrant.tech/documentation/concepts/hybrid-queries/)
- [Filtering](https://qdrant.tech/documentation/concepts/filtering/)
- [Optimizer](https://qdrant.tech/documentation/concepts/optimizer/)
- [Storage](https://qdrant.tech/documentation/concepts/storage/)
- [Indexing](https://qdrant.tech/documentation/concepts/indexing/)
- [Snapshots](https://qdrant.tech/documentation/concepts/snapshots/)

[Guides](https://qdrant.tech/documentation/guides/installation/)

- [Installation](https://qdrant.tech/documentation/guides/installation/)
- [Administration](https://qdrant.tech/documentation/guides/administration/)
- [Running with GPU](https://qdrant.tech/documentation/guides/running-with-gpu/)
- [Capacity Planning](https://qdrant.tech/documentation/guides/capacity-planning/)
- [Optimize Performance](https://qdrant.tech/documentation/guides/optimize/)
- [Multitenancy](https://qdrant.tech/documentation/guides/multiple-partitions/)
- [Distributed Deployment](https://qdrant.tech/documentation/guides/distributed_deployment/)
- [Quantization](https://qdrant.tech/documentation/guides/quantization/)
- [Monitoring & Telemetry](https://qdrant.tech/documentation/guides/monitoring/)
- [Configuration](https://qdrant.tech/documentation/guides/configuration/)
- [Security](https://qdrant.tech/documentation/guides/security/)
- [Usage Statistics](https://qdrant.tech/documentation/guides/usage-statistics/)
- [Troubleshooting](https://qdrant.tech/documentation/guides/common-errors/)

### Ecosystem

[FastEmbed](https://qdrant.tech/documentation/fastembed/)

- [Quickstart](https://qdrant.tech/documentation/fastembed/fastembed-quickstart/)
- [FastEmbed & Qdrant](https://qdrant.tech/documentation/fastembed/fastembed-semantic-search/)
- [Working with miniCOIL](https://qdrant.tech/documentation/fastembed/fastembed-minicoil/)
- [Working with SPLADE](https://qdrant.tech/documentation/fastembed/fastembed-splade/)
- [Working with ColBERT](https://qdrant.tech/documentation/fastembed/fastembed-colbert/)
- [Reranking with FastEmbed](https://qdrant.tech/documentation/fastembed/fastembed-rerankers/)

[Qdrant MCP Server](https://github.com/qdrant/mcp-server-qdrant)

### Tutorials

[Vector Search Basics](https://qdrant.tech/documentation/beginner-tutorials/)

- [Semantic Search 101](https://qdrant.tech/documentation/beginner-tutorials/search-beginners/)
- [Build a Neural Search Service](https://qdrant.tech/documentation/beginner-tutorials/neural-search/)
- [Setup Hybrid Search with FastEmbed](https://qdrant.tech/documentation/beginner-tutorials/hybrid-search-fastembed/)
- [Measure Search Quality](https://qdrant.tech/documentation/beginner-tutorials/retrieval-quality/)

[Advanced Retrieval](https://qdrant.tech/documentation/advanced-tutorials/)

- [How to Use Multivector Representations with Qdrant Effectively](https://qdrant.tech/documentation/advanced-tutorials/using-multivector-representations/)
- [Reranking in Hybrid Search](https://qdrant.tech/documentation/advanced-tutorials/reranking-hybrid-search/)
- [Search Through Your Codebase](https://qdrant.tech/documentation/advanced-tutorials/code-search/)
- [Build a Recommendation System with Collaborative Filtering](https://qdrant.tech/documentation/advanced-tutorials/collaborative-filtering/)
- [Scaling PDF Retrieval with Qdrant](https://qdrant.tech/documentation/advanced-tutorials/pdf-retrieval-at-scale/)

[Using the Database](https://qdrant.tech/documentation/database-tutorials/)

- [Bulk Upload Vectors](https://qdrant.tech/documentation/database-tutorials/bulk-upload/)
- [Create & Restore Snapshots](https://qdrant.tech/documentation/database-tutorials/create-snapshot/)
- [Large Scale Search](https://qdrant.tech/documentation/database-tutorials/large-scale-search/)
- [Load a HuggingFace Dataset](https://qdrant.tech/documentation/database-tutorials/huggingface-datasets/)
- [Build With Async API](https://qdrant.tech/documentation/database-tutorials/async-api/)
- [Migration to Qdrant](https://qdrant.tech/documentation/database-tutorials/migration/)
- [Static Embeddings. Should you pay attention?](https://qdrant.tech/documentation/database-tutorials/static-embeddings/)

### Support

[FAQ](https://qdrant.tech/documentation/faq/qdrant-fundamentals/)

- [Qdrant Fundamentals](https://qdrant.tech/documentation/faq/qdrant-fundamentals/)
- [Database Optimization](https://qdrant.tech/documentation/faq/database-optimization/)

[Release Notes](https://github.com/qdrant/qdrant/releases)

- [Documentation](https://qdrant.tech/documentation/)
-
- [Database tutorials](https://qdrant.tech/documentation/database-tutorials/)
-
- Create & Restore Snapshots

# Backup and Restore Qdrant Collections Using Snapshots

| Time: 20 min | Level: Beginner |   |   |
| ------------ | --------------- | - | - |

A collection is a basic unit of data storage in Qdrant. It contains vectors, their IDs, and payloads. However, keeping the search efficient requires additional data structures to be built on top of the data. Building these data structures may take a while, especially for large collections. That‚Äôs why using snapshots is the best way to export and import Qdrant collections, as they contain all the bits and pieces required to restore the entire collection efficiently.

This tutorial will show you how to create a snapshot of a collection and restore it. Since working with snapshots in a distributed environment might be thought to be a bit more complex, we will use a 3-node Qdrant cluster. However, the same approach applies to a single-node setup.

Snapshots cannot be created in local mode of Python SDK. You need to spin up a Qdrant Docker container or use Qdrant Cloud.

You can use the techniques described in this page to migrate a cluster. Follow the instructions in this tutorial to create and download snapshots. When you [Restore from snapshot](#restore-from-snapshot.md), restore your data to the new cluster.

## Prerequisites

Let‚Äôs assume you already have a running Qdrant instance or a cluster. If not, you can follow the [installation guide](https://qdrant.tech/documentation/guides/installation/) to set up a local Qdrant instance or use [Qdrant Cloud](https://cloud.qdrant.io/) to create a cluster in a few clicks.

Once the cluster is running, let‚Äôs install the required dependencies:

```shell
pip install qdrant-client datasets
```

### Establish a connection to Qdrant

We are going to use the Python SDK and raw HTTP calls to interact with Qdrant. Since we are going to use a 3-node cluster, we need to know the URLs of all the nodes. For the simplicity, let‚Äôs keep them all in constants, along with the API key, so we can refer to them later:

```python
QDRANT_MAIN_URL = "https://my-cluster.com:6333"
QDRANT_NODES = (
    "https://node-0.my-cluster.com:6333",
    "https://node-1.my-cluster.com:6333",
    "https://node-2.my-cluster.com:6333",
)
QDRANT_API_KEY = "my-api-key"
```

If you are using Qdrant Cloud, you can find the URL and API key in the [Qdrant Cloud dashboard](https://cloud.qdrant.io/).

We can now create a client instance:

```python
from qdrant_client import QdrantClient

client = QdrantClient(QDRANT_MAIN_URL, api_key=QDRANT_API_KEY)
```

First of all, we are going to create a collection from a precomputed dataset. If you already have a collection, you can skip this step and start by [creating a snapshot](#create-and-download-snapshots.md).

(Optional) Create collection and import data

### Load the dataset

We are going to use a dataset with precomputed embeddings, available on Hugging Face Hub. The dataset is called [Qdrant/arxiv-titles-instructorxl-embeddings](https://huggingface.co/datasets/Qdrant/arxiv-titles-instructorxl-embeddings) and was created using the [InstructorXL](https://huggingface.co/hkunlp/instructor-xl) model. It contains 2.25M embeddings for the titles of the papers from the [arXiv](https://arxiv.org/) dataset.

Loading the dataset is as simple as:

```python
from datasets import load_dataset

dataset = load_dataset(
    "Qdrant/arxiv-titles-instructorxl-embeddings", split="train", streaming=True
)
```

We used the streaming mode, so the dataset is not loaded into memory. Instead, we can iterate through it and extract the id and vector embedding:

```python
for payload in dataset:
    id_ = payload.pop("id")
    vector = payload.pop("vector")
    print(id_, vector, payload)
```

A single payload looks like this:

```json
{
  'title': 'Dynamics of partially localized brane systems',
  'DOI': '1109.1415'
}
```

### Create a collection

First things first, we need to create our collection. We‚Äôre not going to play with the configuration of it, but it makes sense to do it right now. The configuration is also a part of the collection snapshot.

```python
from qdrant_client import models

if not client.collection_exists("test_collection"):
    client.create_collection(
        collection_name="test_collection",
        vectors_config=models.VectorParams(
            size=768,  # Size of the embedding vector generated by the InstructorXL model
            distance=models.Distance.COSINE
        ),
    )
```

### Upload the dataset

Calculating the embeddings is usually a bottleneck of the vector search pipelines, but we are happy to have them in place already. Since the goal of this tutorial is to show how to create a snapshot, **we are going to upload only a small part of the dataset**.

```python
ids, vectors, payloads = [], [], []
for payload in dataset:
    id_ = payload.pop("id")
    vector = payload.pop("vector")

    ids.append(id_)
    vectors.append(vector)
    payloads.append(payload)

    # We are going to upload only 1000 vectors
    if len(ids) == 1000:
        break

client.upsert(
    collection_name="test_collection",
    points=models.Batch(
        ids=ids,
        vectors=vectors,
        payloads=payloads,
    ),
)
```

Our collection is now ready to be used for search. Let‚Äôs create a snapshot of it.

If you already have a collection, you can skip the previous step and start by [creating a snapshot](#create-and-download-snapshots.md).

## Create and download snapshots

Qdrant exposes an HTTP endpoint to request creating a snapshot, but we can also call it with the Python SDK. Our setup consists of 3 nodes, so we need to call the endpoint **on each of them** and create a snapshot on each node. While using Python SDK, that means creating a separate client instance for each node.

You may get a timeout error, if the collection size is big. You can trigger the snapshot process in the background, without awaiting for the result, by using `wait=false` parameter. You can always [list all the snapshots through the API](https://qdrant.tech/documentation/concepts/snapshots/#list-snapshot) later on.

```python
snapshot_urls = []
for node_url in QDRANT_NODES:
    node_client = QdrantClient(node_url, api_key=QDRANT_API_KEY)
    snapshot_info = node_client.create_snapshot(collection_name="test_collection")

    snapshot_url = f"{node_url}/collections/test_collection/snapshots/{snapshot_info.name}"
    snapshot_urls.append(snapshot_url)
```

```http
// for `https://node-0.my-cluster.com:6333`
POST /collections/test_collection/snapshots

// for `https://node-1.my-cluster.com:6333`
POST /collections/test_collection/snapshots

// for `https://node-2.my-cluster.com:6333`
POST /collections/test_collection/snapshots
```

Response

```json
{
  "result": {
    "name": "test_collection-559032209313046-2024-01-03-13-20-11.snapshot",
    "creation_time": "2024-01-03T13:20:11",
    "size": 18956800
  },
  "status": "ok",
  "time": 0.307644965
}
```

Once we have the snapshot URLs, we can download them. Please make sure to include the API key in the request headers. Downloading the snapshot **can be done only through the HTTP API**, so we are going to use the `requests` library.

```python
import requests
import os

# Create a directory to store snapshots
os.makedirs("snapshots", exist_ok=True)

local_snapshot_paths = []
for snapshot_url in snapshot_urls:
    snapshot_name = os.path.basename(snapshot_url)
    local_snapshot_path = os.path.join("snapshots", snapshot_name)

    response = requests.get(
        snapshot_url, headers={"api-key": QDRANT_API_KEY}
    )
    with open(local_snapshot_path, "wb") as f:
        response.raise_for_status()
        f.write(response.content)

    local_snapshot_paths.append(local_snapshot_path)
```

Alternatively, you can use the `wget` command:

```bash
wget https://node-0.my-cluster.com:6333/collections/test_collection/snapshots/test_collection-559032209313046-2024-01-03-13-20-11.snapshot \
    --header="api-key: ${QDRANT_API_KEY}" \
    -O node-0-shapshot.snapshot

wget https://node-1.my-cluster.com:6333/collections/test_collection/snapshots/test_collection-559032209313047-2024-01-03-13-20-12.snapshot \
    --header="api-key: ${QDRANT_API_KEY}" \
    -O node-1-shapshot.snapshot

wget https://node-2.my-cluster.com:6333/collections/test_collection/snapshots/test_collection-559032209313048-2024-01-03-13-20-13.snapshot \
    --header="api-key: ${QDRANT_API_KEY}" \
    -O node-2-shapshot.snapshot
```

The snapshots are now stored locally. We can use them to restore the collection to a different Qdrant instance, or treat them as a backup. We will create another collection using the same data on the same cluster.

## Restore from snapshot

Our brand-new snapshot is ready to be restored. Typically, it is used to move a collection to a different Qdrant instance, but we are going to use it to create a new collection on the same cluster. It is just going to have a different name, `test_collection_import`. We do not need to create a collection first, as it is going to be created automatically.

Restoring collection is also done separately on each node, but our Python SDK does not support it yet. We are going to use the HTTP API instead, and send a request to each node using `requests` library.

```python
for node_url, snapshot_path in zip(QDRANT_NODES, local_snapshot_paths):
    snapshot_name = os.path.basename(snapshot_path)
    requests.post(
        f"{node_url}/collections/test_collection_import/snapshots/upload?priority=snapshot",
        headers={
            "api-key": QDRANT_API_KEY,
        },
        files={"snapshot": (snapshot_name, open(snapshot_path, "rb"))},
    )
```

Alternatively, you can use the `curl` command:

```bash
curl -X POST 'https://node-0.my-cluster.com:6333/collections/test_collection_import/snapshots/upload?priority=snapshot' \
    -H 'api-key: ${QDRANT_API_KEY}' \
    -H 'Content-Type:multipart/form-data' \
    -F 'snapshot=@node-0-shapshot.snapshot'

curl -X POST 'https://node-1.my-cluster.com:6333/collections/test_collection_import/snapshots/upload?priority=snapshot' \
    -H 'api-key: ${QDRANT_API_KEY}' \
    -H 'Content-Type:multipart/form-data' \
    -F 'snapshot=@node-1-shapshot.snapshot'

curl -X POST 'https://node-2.my-cluster.com:6333/collections/test_collection_import/snapshots/upload?priority=snapshot' \
    -H 'api-key: ${QDRANT_API_KEY}' \
    -H 'Content-Type:multipart/form-data' \
    -F 'snapshot=@node-2-shapshot.snapshot'
```

**Important:** We selected `priority=snapshot` to make sure that the snapshot is preferred over the data stored on the node. You can read mode about the priority in the [documentation](https://qdrant.tech/documentation/concepts/snapshots/#snapshot-priority).

Apart from Snapshots, Qdrant also provides the [Qdrant Migration Tool](https://github.com/qdrant/migration) that supports:

- Migration between Qdrant Cloud instances.
- Migrating vectors from other providers into Qdrant.
- Migrating from Qdrant OSS to Qdrant Cloud.

Follow our [migration guide](https://qdrant.tech/documentation/database-tutorials/migration/) to learn how to effectively use the Qdrant Migration tool.

##### Was this page useful?

Yes No

Thank you for your feedback! üôè

We are sorry to hear that. üòî You can [edit](https:/github.com/qdrant/landing_page/tree/master/qdrant-landing/content/documentation/database-tutorials/create-snapshot.md) this page on GitHub, or [create](https://github.com/qdrant/landing_page/issues/new/choose) a GitHub issue.

On this page:

- [Backup and Restore Qdrant Collections Using Snapshots](#backup-and-restore-qdrant-collections-using-snapshots.md)

  - [Prerequisites](#prerequisites.md)

    - [Establish a connection to Qdrant](#establish-a-connection-to-qdrant.md)
    - [Load the dataset](#load-the-dataset.md)
    - [Create a collection](#create-a-collection.md)
    - [Upload the dataset](#upload-the-dataset.md)

  - [Create and download snapshots](#create-and-download-snapshots.md)

  - [Restore from snapshot](#restore-from-snapshot.md)

* [Edit on Github](https://github.com/qdrant/landing_page/tree/master/qdrant-landing/content/documentation/database-tutorials/create-snapshot.md)
* [Create an issue](https://github.com/qdrant/landing_page/issues/new/choose)

#### Ready to get started with Qdrant?

[Start Free](https://qdrant.to/cloud/)

¬© 2025 Qdrant.

[Terms](https://qdrant.tech/legal/terms_and_conditions/) [Privacy Policy](https://qdrant.tech/legal/privacy-policy/) [Impressum](https://qdrant.tech/legal/impressum/)
