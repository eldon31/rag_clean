# Story 1.2 Risk Assessment â€” 2025-10-31 (Provenance Closure Review)

## Overview

- Scope: Confirm sparse provenance logging and operator documentation now align with runtime defaults after fixes following the observability sweep.
- Evidence reviewed: `scripts/embed_collections_v6.py`, `processor/ultimate_embedder/summary.py`, `docs/telemetry/rerank_sparse_signals.md`, pytest run (`python -m pytest tests/test_embed_collections_cli.py tests/test_processing_summary.py tests/test_runtime_config.py`).

## Key Risks

| ID  | Risk                                                                                                      | Prob | Impact | Exposure | Notes                                                                                                                                                                                                       | Status |
| --- | --------------------------------------------------------------------------------------------------------- | ---- | ------ | -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ |
| R1  | Sparse provenance misreports CLI overrides when `--disable-sparse` trims models, hiding rollback evidence | L    | M      | Low      | CLI now records `toggle_sources['sparse_models'] = 'cli:disable-sparse-trim'` and processing summaries inherit the updated provenance; guarded by `test_parse_arguments_disable_sparse_records_provenance`. | Closed |
| R2  | Telemetry runbook documents `qdrant-bm25` as sparse default despite runtime `splade` roster               | L    | M      | Low      | Runbook help excerpt refreshed to reference `splade`; doc guard `test_help_mentions_sparse_default` plus `test_runbook_sparse_default_matches_feature_toggle` prevent drift.                                | Closed |

## Mitigation Validation

1. Validated CLI provenance by parsing arguments with `--disable-sparse` and inspecting `toggle_sources` output (see regression unit tests).
2. Inspected `docs/telemetry/rerank_sparse_signals.md` help text to confirm sparse default matches `FeatureToggleConfig`.
3. Executed targeted pytest suite (45 passed) covering CLI parsing, processing summary provenance lines, and runtime toggle resolution.

## Status

- All previously open risks are **Closed**; no new risks identified during this review.
- Story 1.2 risk exposure returns to the monitored baseline (no must-fix actions outstanding).
