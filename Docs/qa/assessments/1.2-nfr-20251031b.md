# Story 1.2 NFR Assessment â€” 2025-10-31 (Observability Sweep)

## Summary

- Focus Areas: Observability (telemetry provenance) and Usability (operator documentation).
- Evidence: CLI provenance logic in `scripts/embed_collections_v6.py`, processing summary builder in `processor/ultimate_embedder/summary.py`, telemetry runbook `docs/telemetry/rerank_sparse_signals.md`, pytest suites (`tests/test_embed_collections_cli.py`, `tests/test_processing_summary.py`, `tests/test_runtime_config.py`).

## NFR Findings

| Domain        | Status   | Notes                                                                                                      | Action Required |
| ------------- | -------- | ---------------------------------------------------------------------------------------------------------- | --------------- |
| Observability | CONCERNS | Processing summaries report `sparse_models` source as `default` when CLI disables sparse, blurring audits. | Yes             |
| Usability     | CONCERNS | Runbook/help excerpt still cites `qdrant-bm25` as default, contradicting live `splade` default.            | Yes             |
| Performance   | PASS     | GPU peak telemetry and latency metrics stable under targeted regression run (43 tests).                    | No              |
| Reliability   | PASS     | Toggle precedence, manifest guards, and warning pathways continue to behave as expected.                   | No              |
| Security      | PASS     | No new sensitive data surfaced; rerank query truncation is unchanged.                                      | No              |

## Recommendations

1. Adjust CLI provenance to flag `sparse_models` overrides when the disable flag is used; add a regression test alongside manifest assertions.
2. Update the telemetry runbook and add a doc guard (snapshot or lint) that validates help text against `FeatureToggleConfig` defaults.

## Verification

- Test Command: `python -m pytest tests/test_embed_collections_cli.py tests/test_processing_summary.py tests/test_runtime_config.py` (43 passed).
- No additional performance or security validation necessary for this pass beyond existing smoke evidence.
