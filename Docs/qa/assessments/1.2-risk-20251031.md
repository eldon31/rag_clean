# Story 1.2 Risk Assessment â€” 2025-10-31

## Overview

- Scope: Re-validate CLI/runtime toggle surfacing for rerank and sparse stages after documentation update.
- Evidence reviewed: scripts/embed_collections_v6.py, processor/ultimate_embedder/runtime_config.py, pytest targeted suite (tests/test_embed_collections_cli.py, tests/test_processing_summary.py, tests/test_runtime_config.py).

## Key Risks

| ID  | Risk                                                                       | Prob | Impact | Exposure | Notes                                                                                                                                                          | Status                 |
| --- | -------------------------------------------------------------------------- | ---- | ------ | -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------- |
| R1  | CLI help text may drift from runtime sparse defaults, confusing operators. | L    | M      | Low      | Help epilog now derives the default label directly from `FeatureToggleConfig`, and `test_help_mentions_sparse_default` enforces the `splade` default snapshot. | Mitigated (2025-10-31) |

## Mitigation Evidence

- Dynamic help epilog now joins the resolved sparse model list from `load_feature_toggles`, ensuring documentation mirrors runtime defaults.
- New unit test `test_help_mentions_sparse_default` breaks if the help output stops advertising `splade`.
- Feature toggle defaults in `FeatureToggleConfig` updated to `splade`, aligning runtime and documentation state.
- Targeted pytest run (`python -m pytest tests/test_embed_collections_cli.py tests/test_processing_summary.py tests/test_runtime_config.py`) passed: 42 tests, 0 failures.

## Status

- Overall gate impact: No blocking risks identified; prior documentation concern mitigated.
