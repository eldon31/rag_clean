# Story 1.2 Risk Assessment â€” 2025-10-31 (Observability Sweep)

## Overview

- Scope: Validate CLI disable pathways, provenance logging, and operator documentation after recent telemetry adjustments.
- Evidence reviewed: `scripts/embed_collections_v6.py`, `processor/ultimate_embedder/summary.py`, `docs/telemetry/rerank_sparse_signals.md`, targeted pytest run (`python -m pytest tests/test_embed_collections_cli.py tests/test_processing_summary.py tests/test_runtime_config.py`).

## Key Risks

| ID  | Risk                                                                                                      | Prob | Impact | Exposure | Notes                                                                                                                                                        | Status |
| --- | --------------------------------------------------------------------------------------------------------- | ---- | ------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------ |
| R1  | Sparse provenance misreports CLI overrides when `--disable-sparse` trims models, hiding rollback evidence | M    | M      | Medium   | `toggle_sources['sparse_models']` stays `'default'` and the activation provenance lines alone must be consulted. Difficult for operators triaging rollbacks. | Open   |
| R2  | Telemetry runbook still states `qdrant-bm25` as the default sparse model                                  | M    | M      | Medium   | Documentation contradicts runtime `splade` default, risking incorrect operator assumptions during incident response.                                         | Open   |

## Mitigation Recommendations

1. Update `scripts/embed_collections_v6.py` to set `toggle_sources['sparse_models'] = 'cli'` (or specific flag label) when `--disable-sparse` is supplied, and add a regression guard covering that scenario.
2. Refresh `docs/telemetry/rerank_sparse_signals.md` (and any derived docs) so the help excerpt mirrors `FeatureToggleConfig`, then introduce a lint/test that fails on drift.

## Status

- Both risks remain **Open**; address mitigations before promoting Story 1.2 back to Done.
