schema: 1
story: '1.2'
story_title: 'CLI and Runtime Toggle Integration'
gate: PASS
status_reason: 'Sparse disable provenance now records cli:disable-sparse-trim and the telemetry runbook reflects the splade default; targeted regression suite passed.'
reviewer: 'Quinn (Test Architect)'
updated: '2025-10-31T23:59:30Z'
waiver: { active: false }
top_issues: []
risk_summary:
  totals: { critical: 0, high: 0, medium: 0, low: 0 }
  recommendations:
    must_fix: []
    monitor:
      - 'Track telemetry dashboard wiring follow-up for rerank/sparse metrics (Story 1.4 backlog).'
quality_score: 98
expires: '2025-11-14T23:59:30Z'
evidence:
  tests_reviewed: 45
  risks_identified: 0
  trace:
    ac_covered: [1, 2, 3]
    ac_gaps: []
  test_runs:
    - python -m pytest tests/test_embed_collections_cli.py tests/test_processing_summary.py tests/test_runtime_config.py
  assessments:
    - docs/qa/assessments/1.2-risk-20251031b.md
    - docs/qa/assessments/1.2-risk-20251031c.md
    - docs/qa/assessments/1.2-nfr-20251031b.md
    - docs/qa/assessments/1.2-nfr-20251031c.md
  story_1_4_consolidation:
    - docs/qa/assessments/1.4-baselines-20251025.md
    - docs/qa/assessments/1.4-telemetry-smoke-20251025.md
    - docs/qa/assessments/1.4-telemetry-smoke-evidence/ (10 artifacts: 5 CLI logs + 5 JSON summaries)
    - docs/qa/assets/ (2 ASCII chart exports: latency timeline + GPU memory by stage)
    - docs/telemetry/rerank_sparse_signals.md
    - tests/test_telemetry_smoke.py
nfr_validation:
  security:
    status: PASS
    notes: 'No new sensitive output; rerank query truncation unchanged.'
  performance:
    status: PASS
    notes: 'GPU alerting and latency telemetry remained stable during regression run.'
  reliability:
    status: PASS
    notes: 'Toggle precedence and manifest guards hold under regression suite.'
  maintainability:
    status: PASS
    notes: 'CLI provenance guard ensures sparse disablement captured for audits.'
  usability:
    status: PASS
    notes: 'Runbook sparse default matches FeatureToggleConfig and has guard tests.'
  observability:
    status: PASS
    notes: 'Processing summary provenance is accurate for sparse disablement after fix.'
recommendations:
  immediate:
    - action: 'Maintain telemetry dashboard wiring follow-up (no longer blocking Story 1.2).'
      refs:
        - docs/telemetry/rerank_sparse_signals.md
  future:
    - action: 'Integrate rerank/sparse metrics emission with dashboards and add CI guardrails for skipped metrics.'
      refs: ['docs/architecture/observability.md']
    - action: 'Monitor GPU alert firing patterns to refine thresholds after 2 weeks production telemetry.'
      refs: ['docs/telemetry/rerank_sparse_signals.md']
