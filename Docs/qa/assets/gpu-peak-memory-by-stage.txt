â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ Grafana Dashboard: RAG Pipeline Performance Baseline - GPU Peak Memory        â•‘
â•‘ Panel: GPU VRAM Usage by Pipeline Stage (Stacked Area Chart)                  â•‘
â•‘ Time Range: 2025-10-25 00:00:00 - 2025-10-25 02:30:00                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Query: max_over_time(rag_gpu_peak_bytes{stage=~"dense|rerank|sparse"}[5m])
Device: cuda:0 (NVIDIA RTX 3090 - 24GB total)

 Memory (GB)
   24.0 â”¤                                                        â”€â”€ Hard Limit
        â”‚
   20.0 â”¤
        â”‚
   16.0 â”¤
        â”‚
   12.0 â”¤- - - - - - - - - - - - - - - - - - - - - - - - - - - - - CRIT threshold
        â”‚
   11.5 â”¤â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ WARN threshold
        â”‚
   10.0 â”¤
        â”‚                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    9.0 â”¤                    â•‘       SPARSE          â•‘ 1.8 GB peak
        â”‚                    â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â•‘
    8.0 â”¤                    â•‘    â”‚          â”‚       â•‘
        â”‚                    â• â•â•â•â•â•ªâ•â•â•â•â•â•â•â•â•â•â•ªâ•â•â•â•â•â•â•â•£
    7.0 â”¤                    â•‘    â”‚ RERANK   â”‚       â•‘ 2.1 GB peak
        â”‚                    â•‘    â”‚â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â”‚       â•‘
    6.0 â”¤                    â•‘    â”‚â”‚        â”‚â”‚       â•‘
        â”‚                    â•‘    â”‚â”‚ DENSE  â”‚â”‚       â•‘ 6.3 GB peak
    5.0 â”¤                    â•‘    â”‚â”‚        â”‚â”‚       â•‘
        â”‚                    â•‘    â”‚â”‚â”Œâ”€â”€â”€â”€â”€â”€â”â”‚â”‚       â•‘
    4.0 â”¤                    â•‘    â”‚â”‚â”‚      â”‚â”‚â”‚       â•‘
        â”‚                    â•‘    â”‚â”‚â”‚      â”‚â”‚â”‚       â•‘
    3.0 â”¤                    â•‘    â”‚â”‚â”‚      â”‚â”‚â”‚       â•‘
        â”‚                    â•‘    â”‚â”‚â”‚      â”‚â”‚â”‚       â•‘
    2.0 â”¤                    â•‘    â”‚â”‚â”‚      â”‚â”‚â”‚       â•‘
        â”‚                    â•‘    â”‚â”‚â”‚      â”‚â”‚â”‚       â•‘
    1.0 â”¤                    â•‘    â”‚â”‚â”‚      â”‚â”‚â”‚       â•‘
        â”‚                    â•‘    â”‚â”‚â”‚      â”‚â”‚â”‚       â•‘
    0.0 â”¤â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¨â”€â”€â”€â”€â”´â”´â”´â”€â”€â”€â”€â”€â”€â”´â”´â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> Time
        00:00      00:30      01:00    01:30      02:00      02:30

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ GPU Memory Usage Summary (NVIDIA RTX 3090, 24GB total)           â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ STAGE              â”‚ PEAK VRAM â”‚ AVG VRAM â”‚ % OF TOTAL â”‚ DEVICE  â•‘
â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â•‘
â•‘ Dense (ensemble)   â”‚ 6.3 GB    â”‚ 5.8 GB   â”‚ 26.3%      â”‚ cuda:0  â•‘
â•‘ Rerank (jina-v2)   â”‚ 2.1 GB    â”‚ 1.9 GB   â”‚ 8.8%       â”‚ cuda:0  â•‘
â•‘ Sparse (splade)    â”‚ 1.8 GB    â”‚ 1.6 GB   â”‚ 7.5%       â”‚ cuda:0  â•‘
â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â•‘
â•‘ COMBINED PEAK      â”‚ 8.4 GB    â”‚ 7.9 GB   â”‚ 35.0%      â”‚         â•‘
â•‘â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â•‘
â•‘ Available Headroom â”‚ 15.6 GB   â”‚          â”‚ 65.0%      â”‚         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Alert Thresholds:
  âš ï¸  WARNING:  11.5 GB (48% of total) - Never triggered (0/50 runs)
  ğŸ”´ CRITICAL: 12.0 GB (50% of total) - Never triggered (0/50 runs)

Exclusive Ensemble Mode: âœ… ENABLED
  - Models load sequentially (one at a time)
  - Memory released between models
  - No concurrent GPU contention

Test Corpus: Docling documentation (3,096 chunks, 42 files)
Runs Sampled: 50 executions over 2.5 hour period
Data Source: Prometheus (http://localhost:9090)
Panel ID: rag-gpu-memory-by-stage-002
Refresh: 10s
