[
  {
    "text": "### User Manual  [Concepts](https://qdrant.tech/documentation/concepts/)  - [Collections](https://qdrant.tech/documentation/concepts/collections/) - [Points](https://qdrant.tech/documentation/concepts/points/) - [Vectors](https://qdrant.tech/documentation/concepts/vectors/) - [Payload](https://qdrant.tech/documentation/concepts/payload/) - [Search](https://qdrant.tech/documentation/concepts/search/) - [Explore](https://qdrant.tech/documentation/concepts/explore/) - [Hybrid Queries](https://qdrant.tech/documentation/concepts/hybrid-queries/) - [Filtering](https://qdrant.tech/documentation/concepts/filtering/) - [Optimizer](https://qdrant.tech/documentation/concepts/optimizer/) - [Storage](https://qdrant.tech/documentation/concepts/storage/) - [Indexing](https://qdrant.tech/documentation/concepts/indexing/) - [Snapshots](https://qdrant.tech/documentation/concepts/snapshots/)  [Guides](https://qdrant.tech/documentation/guides/installation/)  - [Installation](https://qdrant.tech/documentation/guides/installation/) - [Administration](https://qdrant.tech/documentation/guides/administration/) - [Running with GPU](https://qdrant.tech/documentation/guides/running-with-gpu/) - [Capacity Planning](https://qdrant.tech/documentation/guides/capacity-planning/) - [Optimize Performance](https://qdrant.tech/documentation/guides/optimize/) - [Multitenancy](https://qdrant.tech/documentation/guides/multiple-partitions/) - [Distributed Deployment](https://qdrant.tech/documentation/guides/distributed_deployment/) - [Quantization](https://qdrant.tech/documentation/guides/quantization/) - [Monitoring & Telemetry](https://qdrant.tech/documentation/guides/monitoring/) - [Configuration](https://qdrant.tech/documentation/guides/configuration/) - [Security](https://qdrant.tech/documentation/guides/security/) - [Usage Statistics](https://qdrant.tech/documentation/guides/usage-statistics/) - [Troubleshooting](https://qdrant.tech/documentation/guides/common-errors/)",
    "metadata": {
      "chunk_id": "af5f87603a02-0001",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 1,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "User Manual"
      ],
      "heading_text": "User Manual",
      "token_count": 485,
      "char_count": 1968,
      "start_char": 1059,
      "end_char": 3027,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.733,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.052804",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 485,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "User Manual",
      "chunk_hash": "aa99483e94fddd20",
      "content_digest": "aa99483e94fddd20",
      "chunk_length": 1968,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "https",
          "qdrant",
          "tech",
          "documentation",
          "guides",
          "concepts",
          "installation",
          "collections",
          "points",
          "vectors",
          "payload",
          "search",
          "explore",
          "hybrid",
          "queries",
          "filtering",
          "optimizer",
          "storage",
          "indexing",
          "snapshots"
        ],
        "term_weights": [
          {
            "term": "https",
            "tf": 27,
            "weight": 0.131068
          },
          {
            "term": "qdrant",
            "tf": 27,
            "weight": 0.131068
          },
          {
            "term": "tech",
            "tf": 27,
            "weight": 0.131068
          },
          {
            "term": "documentation",
            "tf": 27,
            "weight": 0.131068
          },
          {
            "term": "guides",
            "tf": 15,
            "weight": 0.072816
          },
          {
            "term": "concepts",
            "tf": 14,
            "weight": 0.067961
          },
          {
            "term": "installation",
            "tf": 3,
            "weight": 0.014563
          },
          {
            "term": "collections",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "points",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "vectors",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "payload",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "search",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "explore",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "hybrid",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "queries",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "filtering",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "optimizer",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "storage",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "indexing",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "snapshots",
            "tf": 2,
            "weight": 0.009709
          }
        ],
        "unique_terms": 45,
        "total_terms": 206
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "User Manual",
        "collections",
        "concepts",
        "documentation",
        "guides",
        "https",
        "installation",
        "points",
        "qdrant",
        "tech",
        "vectors"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.733,
      "overall": 0.7776666666666666
    }
  },
  {
    "text": "### Tutorials  [Vector Search Basics](https://qdrant.tech/documentation/beginner-tutorials/)  - [Semantic Search 101](https://qdrant.tech/documentation/beginner-tutorials/search-beginners/) - [Build a Neural Search Service](https://qdrant.tech/documentation/beginner-tutorials/neural-search/) - [Setup Hybrid Search with FastEmbed](https://qdrant.tech/documentation/beginner-tutorials/hybrid-search-fastembed/) - [Measure Search Quality](https://qdrant.tech/documentation/beginner-tutorials/retrieval-quality/)  [Advanced Retrieval](https://qdrant.tech/documentation/advanced-tutorials/)  - [How to Use Multivector Representations with Qdrant Effectively](https://qdrant.tech/documentation/advanced-tutorials/using-multivector-representations/) - [Reranking in Hybrid Search](https://qdrant.tech/documentation/advanced-tutorials/reranking-hybrid-search/) - [Search Through Your Codebase](https://qdrant.tech/documentation/advanced-tutorials/code-search/) - [Build a Recommendation System with Collaborative Filtering](https://qdrant.tech/documentation/advanced-tutorials/collaborative-filtering/) - [Scaling PDF Retrieval with Qdrant](https://qdrant.tech/documentation/advanced-tutorials/pdf-retrieval-at-scale/)  [Using the Database](https://qdrant.tech/documentation/database-tutorials/)  - [Bulk Upload Vectors](https://qdrant.tech/documentation/database-tutorials/bulk-upload/) - [Create & Restore Snapshots](https://qdrant.tech/documentation/database-tutorials/create-snapshot/) - [Large Scale Search](https://qdrant.tech/documentation/database-tutorials/large-scale-search/) - [Load a HuggingFace Dataset](https://qdrant.tech/documentation/database-tutorials/huggingface-datasets/) - [Build With Async API](https://qdrant.tech/documentation/database-tutorials/async-api/) - [Migration to Qdrant](https://qdrant.tech/documentation/database-tutorials/migration/) - [Static Embeddings. Should you pay attention?](https://qdrant.tech/documentation/database-tutorials/static-embeddings/)",
    "metadata": {
      "chunk_id": "af5f87603a02-0003",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 3,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Tutorials"
      ],
      "heading_text": "Tutorials",
      "token_count": 459,
      "char_count": 1988,
      "start_char": 3709,
      "end_char": 5697,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7480092783505154,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.063508",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 459,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Tutorials",
      "chunk_hash": "f480f0283a04b78a",
      "content_digest": "f480f0283a04b78a",
      "chunk_length": 1988,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "tutorials",
          "https",
          "tech",
          "documentation",
          "search",
          "database",
          "advanced",
          "beginner",
          "with",
          "hybrid",
          "retrieval",
          "build",
          "scale",
          "neural",
          "fastembed",
          "quality",
          "multivector",
          "representations",
          "using"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 22,
            "weight": 0.098655
          },
          {
            "term": "tutorials",
            "tf": 20,
            "weight": 0.089686
          },
          {
            "term": "https",
            "tf": 19,
            "weight": 0.085202
          },
          {
            "term": "tech",
            "tf": 19,
            "weight": 0.085202
          },
          {
            "term": "documentation",
            "tf": 19,
            "weight": 0.085202
          },
          {
            "term": "search",
            "tf": 14,
            "weight": 0.06278
          },
          {
            "term": "database",
            "tf": 9,
            "weight": 0.040359
          },
          {
            "term": "advanced",
            "tf": 7,
            "weight": 0.03139
          },
          {
            "term": "beginner",
            "tf": 5,
            "weight": 0.022422
          },
          {
            "term": "with",
            "tf": 5,
            "weight": 0.022422
          },
          {
            "term": "hybrid",
            "tf": 4,
            "weight": 0.017937
          },
          {
            "term": "retrieval",
            "tf": 4,
            "weight": 0.017937
          },
          {
            "term": "build",
            "tf": 3,
            "weight": 0.013453
          },
          {
            "term": "scale",
            "tf": 3,
            "weight": 0.013453
          },
          {
            "term": "neural",
            "tf": 2,
            "weight": 0.008969
          },
          {
            "term": "fastembed",
            "tf": 2,
            "weight": 0.008969
          },
          {
            "term": "quality",
            "tf": 2,
            "weight": 0.008969
          },
          {
            "term": "multivector",
            "tf": 2,
            "weight": 0.008969
          },
          {
            "term": "representations",
            "tf": 2,
            "weight": 0.008969
          },
          {
            "term": "using",
            "tf": 2,
            "weight": 0.008969
          }
        ],
        "unique_terms": 64,
        "total_terms": 223
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Tutorials",
        "advanced",
        "beginner",
        "database",
        "documentation",
        "https",
        "qdrant",
        "search",
        "tech",
        "tutorials",
        "with"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7480092783505154,
      "overall": 0.7826697594501718
    }
  },
  {
    "text": "### Support  [FAQ](https://qdrant.tech/documentation/faq/qdrant-fundamentals/)  - [Qdrant Fundamentals](https://qdrant.tech/documentation/faq/qdrant-fundamentals/) - [Database Optimization](https://qdrant.tech/documentation/faq/database-optimization/)  [Release Notes](https://github.com/qdrant/qdrant/releases)",
    "metadata": {
      "chunk_id": "af5f87603a02-0004",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 4,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Support"
      ],
      "heading_text": "Support",
      "token_count": 83,
      "char_count": 311,
      "start_char": 5699,
      "end_char": 6010,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5627272727272727,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.065621",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 83,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Support",
      "chunk_hash": "f059a5deb61e367d",
      "content_digest": "f059a5deb61e367d",
      "chunk_length": 311,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "faq",
          "https",
          "tech",
          "documentation",
          "fundamentals",
          "database",
          "optimization",
          "support",
          "release",
          "notes",
          "github",
          "com",
          "releases"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 8,
            "weight": 0.228571
          },
          {
            "term": "faq",
            "tf": 4,
            "weight": 0.114286
          },
          {
            "term": "https",
            "tf": 4,
            "weight": 0.114286
          },
          {
            "term": "tech",
            "tf": 3,
            "weight": 0.085714
          },
          {
            "term": "documentation",
            "tf": 3,
            "weight": 0.085714
          },
          {
            "term": "fundamentals",
            "tf": 3,
            "weight": 0.085714
          },
          {
            "term": "database",
            "tf": 2,
            "weight": 0.057143
          },
          {
            "term": "optimization",
            "tf": 2,
            "weight": 0.057143
          },
          {
            "term": "support",
            "tf": 1,
            "weight": 0.028571
          },
          {
            "term": "release",
            "tf": 1,
            "weight": 0.028571
          },
          {
            "term": "notes",
            "tf": 1,
            "weight": 0.028571
          },
          {
            "term": "github",
            "tf": 1,
            "weight": 0.028571
          },
          {
            "term": "com",
            "tf": 1,
            "weight": 0.028571
          },
          {
            "term": "releases",
            "tf": 1,
            "weight": 0.028571
          }
        ],
        "unique_terms": 14,
        "total_terms": 35
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Support",
        "database",
        "documentation",
        "faq",
        "fundamentals",
        "https",
        "optimization",
        "qdrant",
        "release",
        "support",
        "tech"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5627272727272727,
      "overall": 0.7209090909090908
    }
  },
  {
    "text": "### User Manual  [Concepts](https://qdrant.tech/documentation/concepts/)  - [Collections](https://qdrant.tech/documentation/concepts/collections/) - [Points](https://qdrant.tech/documentation/concepts/points/) - [Vectors](https://qdrant.tech/documentation/concepts/vectors/) - [Payload](https://qdrant.tech/documentation/concepts/payload/) - [Search](https://qdrant.tech/documentation/concepts/search/) - [Explore](https://qdrant.tech/documentation/concepts/explore/) - [Hybrid Queries](https://qdrant.tech/documentation/concepts/hybrid-queries/) - [Filtering](https://qdrant.tech/documentation/concepts/filtering/) - [Optimizer](https://qdrant.tech/documentation/concepts/optimizer/) - [Storage](https://qdrant.tech/documentation/concepts/storage/) - [Indexing](https://qdrant.tech/documentation/concepts/indexing/) - [Snapshots](https://qdrant.tech/documentation/concepts/snapshots/)  [Guides](https://qdrant.tech/documentation/guides/installation/)  - [Installation](https://qdrant.tech/documentation/guides/installation/) - [Administration](https://qdrant.tech/documentation/guides/administration/) - [Running with GPU](https://qdrant.tech/documentation/guides/running-with-gpu/) - [Capacity Planning](https://qdrant.tech/documentation/guides/capacity-planning/) - [Optimize Performance](https://qdrant.tech/documentation/guides/optimize/) - [Multitenancy](https://qdrant.tech/documentation/guides/multiple-partitions/) - [Distributed Deployment](https://qdrant.tech/documentation/guides/distributed_deployment/) - [Quantization](https://qdrant.tech/documentation/guides/quantization/) - [Monitoring & Telemetry](https://qdrant.tech/documentation/guides/monitoring/) - [Configuration](https://qdrant.tech/documentation/guides/configuration/) - [Security](https://qdrant.tech/documentation/guides/security/) - [Usage Statistics](https://qdrant.tech/documentation/guides/usage-statistics/) - [Troubleshooting](https://qdrant.tech/documentation/guides/common-errors/)",
    "metadata": {
      "chunk_id": "af5f87603a02-0006",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 6,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "User Manual"
      ],
      "heading_text": "User Manual",
      "token_count": 485,
      "char_count": 1968,
      "start_char": 6387,
      "end_char": 8355,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.733,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.079956",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 485,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "User Manual",
      "chunk_hash": "aa99483e94fddd20",
      "content_digest": "aa99483e94fddd20",
      "chunk_length": 1968,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "https",
          "qdrant",
          "tech",
          "documentation",
          "guides",
          "concepts",
          "installation",
          "collections",
          "points",
          "vectors",
          "payload",
          "search",
          "explore",
          "hybrid",
          "queries",
          "filtering",
          "optimizer",
          "storage",
          "indexing",
          "snapshots"
        ],
        "term_weights": [
          {
            "term": "https",
            "tf": 27,
            "weight": 0.131068
          },
          {
            "term": "qdrant",
            "tf": 27,
            "weight": 0.131068
          },
          {
            "term": "tech",
            "tf": 27,
            "weight": 0.131068
          },
          {
            "term": "documentation",
            "tf": 27,
            "weight": 0.131068
          },
          {
            "term": "guides",
            "tf": 15,
            "weight": 0.072816
          },
          {
            "term": "concepts",
            "tf": 14,
            "weight": 0.067961
          },
          {
            "term": "installation",
            "tf": 3,
            "weight": 0.014563
          },
          {
            "term": "collections",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "points",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "vectors",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "payload",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "search",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "explore",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "hybrid",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "queries",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "filtering",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "optimizer",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "storage",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "indexing",
            "tf": 2,
            "weight": 0.009709
          },
          {
            "term": "snapshots",
            "tf": 2,
            "weight": 0.009709
          }
        ],
        "unique_terms": 45,
        "total_terms": 206
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "User Manual",
        "collections",
        "concepts",
        "documentation",
        "guides",
        "https",
        "installation",
        "points",
        "qdrant",
        "tech",
        "vectors"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.733,
      "overall": 0.7776666666666666
    }
  },
  {
    "text": "### Tutorials  [Vector Search Basics](https://qdrant.tech/documentation/beginner-tutorials/)  - [Semantic Search 101](https://qdrant.tech/documentation/beginner-tutorials/search-beginners/) - [Build a Neural Search Service](https://qdrant.tech/documentation/beginner-tutorials/neural-search/) - [Setup Hybrid Search with FastEmbed](https://qdrant.tech/documentation/beginner-tutorials/hybrid-search-fastembed/) - [Measure Search Quality](https://qdrant.tech/documentation/beginner-tutorials/retrieval-quality/)  [Advanced Retrieval](https://qdrant.tech/documentation/advanced-tutorials/)  - [How to Use Multivector Representations with Qdrant Effectively](https://qdrant.tech/documentation/advanced-tutorials/using-multivector-representations/) - [Reranking in Hybrid Search](https://qdrant.tech/documentation/advanced-tutorials/reranking-hybrid-search/) - [Search Through Your Codebase](https://qdrant.tech/documentation/advanced-tutorials/code-search/) - [Build a Recommendation System with Collaborative Filtering](https://qdrant.tech/documentation/advanced-tutorials/collaborative-filtering/) - [Scaling PDF Retrieval with Qdrant](https://qdrant.tech/documentation/advanced-tutorials/pdf-retrieval-at-scale/)  [Using the Database](https://qdrant.tech/documentation/database-tutorials/)  - [Bulk Upload Vectors](https://qdrant.tech/documentation/database-tutorials/bulk-upload/) - [Create & Restore Snapshots](https://qdrant.tech/documentation/database-tutorials/create-snapshot/) - [Large Scale Search](https://qdrant.tech/documentation/database-tutorials/large-scale-search/) - [Load a HuggingFace Dataset](https://qdrant.tech/documentation/database-tutorials/huggingface-datasets/) - [Build With Async API](https://qdrant.tech/documentation/database-tutorials/async-api/) - [Migration to Qdrant](https://qdrant.tech/documentation/database-tutorials/migration/) - [Static Embeddings. Should you pay attention?](https://qdrant.tech/documentation/database-tutorials/static-embeddings/)",
    "metadata": {
      "chunk_id": "af5f87603a02-0008",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 8,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Tutorials"
      ],
      "heading_text": "Tutorials",
      "token_count": 459,
      "char_count": 1988,
      "start_char": 9037,
      "end_char": 11025,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7480092783505154,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.093000",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 459,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Tutorials",
      "chunk_hash": "f480f0283a04b78a",
      "content_digest": "f480f0283a04b78a",
      "chunk_length": 1988,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "tutorials",
          "https",
          "tech",
          "documentation",
          "search",
          "database",
          "advanced",
          "beginner",
          "with",
          "hybrid",
          "retrieval",
          "build",
          "scale",
          "neural",
          "fastembed",
          "quality",
          "multivector",
          "representations",
          "using"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 22,
            "weight": 0.098655
          },
          {
            "term": "tutorials",
            "tf": 20,
            "weight": 0.089686
          },
          {
            "term": "https",
            "tf": 19,
            "weight": 0.085202
          },
          {
            "term": "tech",
            "tf": 19,
            "weight": 0.085202
          },
          {
            "term": "documentation",
            "tf": 19,
            "weight": 0.085202
          },
          {
            "term": "search",
            "tf": 14,
            "weight": 0.06278
          },
          {
            "term": "database",
            "tf": 9,
            "weight": 0.040359
          },
          {
            "term": "advanced",
            "tf": 7,
            "weight": 0.03139
          },
          {
            "term": "beginner",
            "tf": 5,
            "weight": 0.022422
          },
          {
            "term": "with",
            "tf": 5,
            "weight": 0.022422
          },
          {
            "term": "hybrid",
            "tf": 4,
            "weight": 0.017937
          },
          {
            "term": "retrieval",
            "tf": 4,
            "weight": 0.017937
          },
          {
            "term": "build",
            "tf": 3,
            "weight": 0.013453
          },
          {
            "term": "scale",
            "tf": 3,
            "weight": 0.013453
          },
          {
            "term": "neural",
            "tf": 2,
            "weight": 0.008969
          },
          {
            "term": "fastembed",
            "tf": 2,
            "weight": 0.008969
          },
          {
            "term": "quality",
            "tf": 2,
            "weight": 0.008969
          },
          {
            "term": "multivector",
            "tf": 2,
            "weight": 0.008969
          },
          {
            "term": "representations",
            "tf": 2,
            "weight": 0.008969
          },
          {
            "term": "using",
            "tf": 2,
            "weight": 0.008969
          }
        ],
        "unique_terms": 64,
        "total_terms": 223
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Tutorials",
        "advanced",
        "beginner",
        "database",
        "documentation",
        "https",
        "qdrant",
        "search",
        "tech",
        "tutorials",
        "with"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7480092783505154,
      "overall": 0.7826697594501718
    }
  },
  {
    "text": "### Support  [FAQ](https://qdrant.tech/documentation/faq/qdrant-fundamentals/)  - [Qdrant Fundamentals](https://qdrant.tech/documentation/faq/qdrant-fundamentals/) - [Database Optimization](https://qdrant.tech/documentation/faq/database-optimization/)  [Release Notes](https://github.com/qdrant/qdrant/releases)  - [Documentation](https://qdrant.tech/documentation/) - - [Advanced tutorials](https://qdrant.tech/documentation/advanced-tutorials/) - - Scaling PDF Retrieval with Qdrant",
    "metadata": {
      "chunk_id": "af5f87603a02-0009",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 9,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Support"
      ],
      "heading_text": "Support",
      "token_count": 124,
      "char_count": 484,
      "start_char": 11027,
      "end_char": 11511,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.715,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.108366",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 124,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Support",
      "chunk_hash": "ee648f2ff5f7c5c2",
      "content_digest": "ee648f2ff5f7c5c2",
      "chunk_length": 484,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "https",
          "documentation",
          "tech",
          "faq",
          "fundamentals",
          "database",
          "optimization",
          "advanced",
          "tutorials",
          "support",
          "release",
          "notes",
          "github",
          "com",
          "releases",
          "scaling",
          "pdf",
          "retrieval",
          "with"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 11,
            "weight": 0.207547
          },
          {
            "term": "https",
            "tf": 6,
            "weight": 0.113208
          },
          {
            "term": "documentation",
            "tf": 6,
            "weight": 0.113208
          },
          {
            "term": "tech",
            "tf": 5,
            "weight": 0.09434
          },
          {
            "term": "faq",
            "tf": 4,
            "weight": 0.075472
          },
          {
            "term": "fundamentals",
            "tf": 3,
            "weight": 0.056604
          },
          {
            "term": "database",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "optimization",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "advanced",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "tutorials",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "support",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "release",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "notes",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "github",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "com",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "releases",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "scaling",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "pdf",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "retrieval",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "with",
            "tf": 1,
            "weight": 0.018868
          }
        ],
        "unique_terms": 20,
        "total_terms": 53
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Support",
        "advanced",
        "database",
        "documentation",
        "faq",
        "fundamentals",
        "https",
        "optimization",
        "qdrant",
        "tech",
        "tutorials"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.715,
      "overall": 0.7716666666666666
    }
  },
  {
    "text": "# Scaling PDF Retrieval with Qdrant  | Time: 30 min | Level: Intermediate | Output: [GitHub](https://github.com/qdrant/examples/blob/master/pdf-retrieval-at-scale/ColPali_ColQwen2_Tutorial.ipynb) | [](https://githubtocolab.com/qdrant/examples/blob/master/pdf-retrieval-at-scale/ColPali_ColQwen2_Tutorial.ipynb) | | ------------ | ------------------- | ----------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------- |  Efficient PDF documents retrieval is a common requirement in tasks like **(agentic) retrieval-augmented generation (RAG)** and many other search-based applications. At the same time, setting up PDF documents retrieval is rarely possible without additional challenges. Many traditional PDF retrieval solutions rely on **optical character recognition (OCR)** together with use case-specific heuristics to handle visually complex elements like tables, images and charts. These algorithms are often non-transferable – even within the same domain – with their task-customized parsing and chunking strategies, labor-intensive, prone to errors, and difficult to scale. Recent advancements in **Vision Large Language Models (VLLMs)**, such as [**ColPali**](https://huggingface.co/blog/manu/colpali) and its successor [**ColQwen**](https://huggingface.co/vidore/colqwen2-v0.1), started the transformation of the PDF retrieval. These multimodal models work directly with PDF pages as inputs, no pre-processing required. Anything that can be converted into an **image** (think of PDFs as screenshots of document pages) can be effectively processed by these models. Being far simpler in use, VLLMs achieve state-of-the-art performance in PDF retrieval benchmarks like the [Visual Document Retrieval (ViDoRe) Benchmark](https://huggingface.co/spaces/vidore/vidore-leaderboard).",
    "metadata": {
      "chunk_id": "af5f87603a02-0010",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 10,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Scaling PDF Retrieval with Qdrant"
      ],
      "heading_text": "Scaling PDF Retrieval with Qdrant",
      "token_count": 398,
      "char_count": 1954,
      "start_char": 11513,
      "end_char": 13467,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.737441237113402,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "table_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.110088",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 398,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Scaling PDF Retrieval with Qdrant",
      "chunk_hash": "f817de23c58dc7f8",
      "content_digest": "f817de23c58dc7f8",
      "chunk_length": 1954,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "retrieval",
          "pdf",
          "the",
          "https",
          "and",
          "with",
          "colpali",
          "vidore",
          "qdrant",
          "scale",
          "colqwen2",
          "like",
          "these",
          "models",
          "huggingface",
          "time",
          "github",
          "com",
          "examples",
          "blob"
        ],
        "term_weights": [
          {
            "term": "retrieval",
            "tf": 10,
            "weight": 0.049261
          },
          {
            "term": "pdf",
            "tf": 9,
            "weight": 0.044335
          },
          {
            "term": "the",
            "tf": 6,
            "weight": 0.029557
          },
          {
            "term": "https",
            "tf": 5,
            "weight": 0.024631
          },
          {
            "term": "and",
            "tf": 5,
            "weight": 0.024631
          },
          {
            "term": "with",
            "tf": 4,
            "weight": 0.019704
          },
          {
            "term": "colpali",
            "tf": 4,
            "weight": 0.019704
          },
          {
            "term": "vidore",
            "tf": 4,
            "weight": 0.019704
          },
          {
            "term": "qdrant",
            "tf": 3,
            "weight": 0.014778
          },
          {
            "term": "scale",
            "tf": 3,
            "weight": 0.014778
          },
          {
            "term": "colqwen2",
            "tf": 3,
            "weight": 0.014778
          },
          {
            "term": "like",
            "tf": 3,
            "weight": 0.014778
          },
          {
            "term": "these",
            "tf": 3,
            "weight": 0.014778
          },
          {
            "term": "models",
            "tf": 3,
            "weight": 0.014778
          },
          {
            "term": "huggingface",
            "tf": 3,
            "weight": 0.014778
          },
          {
            "term": "time",
            "tf": 2,
            "weight": 0.009852
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.009852
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.009852
          },
          {
            "term": "examples",
            "tf": 2,
            "weight": 0.009852
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.009852
          }
        ],
        "unique_terms": 134,
        "total_terms": 203
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Scaling PDF Retrieval with Qdrant",
        "and",
        "colpali",
        "https",
        "pdf",
        "qdrant",
        "retrieval",
        "scale",
        "the",
        "vidore",
        "with"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.737441237113402,
      "overall": 0.8124804123711339
    }
  },
  {
    "text": "## How VLLMs Work for PDF Retrieval\n\nVLLMs like **ColPali** and **ColQwen** generate **multivector representations** for each PDF page; the representations are stored and indexed in a vector database. During the retrieval process, models dynamically create multivector representations for (textual) user queries, and precise retrieval – matching between PDF pages and queries – is achieved through [late-interaction mechanism](https://qdrant.tech/blog/qdrant-colpali/#how-colpali-works-under-the-hood).\n\nQdrant supports [multivector representations](https://qdrant.tech/documentation/concepts/vectors/#multivectors), making it well-suited for using embedding models such as ColPali, ColQwen, or [ColBERT](https://qdrant.tech/documentation/fastembed/fastembed-colbert/)",
    "metadata": {
      "chunk_id": "af5f87603a02-0011",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 11,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "How VLLMs Work for PDF Retrieval"
      ],
      "heading_text": "How VLLMs Work for PDF Retrieval",
      "token_count": 178,
      "char_count": 768,
      "start_char": 13471,
      "end_char": 14239,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.7,
      "retrieval_quality": 0.53,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.111429",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 178,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "How VLLMs Work for PDF Retrieval",
      "chunk_hash": "fafe33b9523b2d3f",
      "content_digest": "fafe33b9523b2d3f",
      "chunk_length": 768,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "for",
          "colpali",
          "and",
          "representations",
          "pdf",
          "retrieval",
          "multivector",
          "the",
          "https",
          "tech",
          "how",
          "vllms",
          "colqwen",
          "models",
          "queries",
          "documentation",
          "colbert",
          "fastembed",
          "work"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 5,
            "weight": 0.053191
          },
          {
            "term": "for",
            "tf": 4,
            "weight": 0.042553
          },
          {
            "term": "colpali",
            "tf": 4,
            "weight": 0.042553
          },
          {
            "term": "and",
            "tf": 4,
            "weight": 0.042553
          },
          {
            "term": "representations",
            "tf": 4,
            "weight": 0.042553
          },
          {
            "term": "pdf",
            "tf": 3,
            "weight": 0.031915
          },
          {
            "term": "retrieval",
            "tf": 3,
            "weight": 0.031915
          },
          {
            "term": "multivector",
            "tf": 3,
            "weight": 0.031915
          },
          {
            "term": "the",
            "tf": 3,
            "weight": 0.031915
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.031915
          },
          {
            "term": "tech",
            "tf": 3,
            "weight": 0.031915
          },
          {
            "term": "how",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "vllms",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "colqwen",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "models",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "queries",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "documentation",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "colbert",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "fastembed",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "work",
            "tf": 1,
            "weight": 0.010638
          }
        ],
        "unique_terms": 58,
        "total_terms": 94
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "How VLLMs Work for PDF Retrieval",
        "and",
        "colpali",
        "for",
        "https",
        "multivector",
        "pdf",
        "qdrant",
        "representations",
        "retrieval",
        "the"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.7,
      "retrieval_quality": 0.53,
      "overall": 0.6766666666666667
    }
  },
  {
    "text": "## Challenges of Scaling VLLMs\n\nThe heavy multivector representations produced by VLLMs make PDF retrieval at scale computationally intensive. These models are inefficient for large-scale PDF retrieval tasks if used without optimization.",
    "metadata": {
      "chunk_id": "af5f87603a02-0012",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 12,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Challenges of Scaling VLLMs"
      ],
      "heading_text": "Challenges of Scaling VLLMs",
      "token_count": 43,
      "char_count": 237,
      "start_char": 14241,
      "end_char": 14478,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.561875,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.111735",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 43,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Challenges of Scaling VLLMs",
      "chunk_hash": "eb8786bcc131798a",
      "content_digest": "eb8786bcc131798a",
      "chunk_length": 237,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "vllms",
          "pdf",
          "retrieval",
          "scale",
          "challenges",
          "scaling",
          "the",
          "heavy",
          "multivector",
          "representations",
          "produced",
          "make",
          "computationally",
          "intensive",
          "these",
          "models",
          "are",
          "inefficient",
          "for",
          "large"
        ],
        "term_weights": [
          {
            "term": "vllms",
            "tf": 2,
            "weight": 0.071429
          },
          {
            "term": "pdf",
            "tf": 2,
            "weight": 0.071429
          },
          {
            "term": "retrieval",
            "tf": 2,
            "weight": 0.071429
          },
          {
            "term": "scale",
            "tf": 2,
            "weight": 0.071429
          },
          {
            "term": "challenges",
            "tf": 1,
            "weight": 0.035714
          },
          {
            "term": "scaling",
            "tf": 1,
            "weight": 0.035714
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.035714
          },
          {
            "term": "heavy",
            "tf": 1,
            "weight": 0.035714
          },
          {
            "term": "multivector",
            "tf": 1,
            "weight": 0.035714
          },
          {
            "term": "representations",
            "tf": 1,
            "weight": 0.035714
          },
          {
            "term": "produced",
            "tf": 1,
            "weight": 0.035714
          },
          {
            "term": "make",
            "tf": 1,
            "weight": 0.035714
          },
          {
            "term": "computationally",
            "tf": 1,
            "weight": 0.035714
          },
          {
            "term": "intensive",
            "tf": 1,
            "weight": 0.035714
          },
          {
            "term": "these",
            "tf": 1,
            "weight": 0.035714
          },
          {
            "term": "models",
            "tf": 1,
            "weight": 0.035714
          },
          {
            "term": "are",
            "tf": 1,
            "weight": 0.035714
          },
          {
            "term": "inefficient",
            "tf": 1,
            "weight": 0.035714
          },
          {
            "term": "for",
            "tf": 1,
            "weight": 0.035714
          },
          {
            "term": "large",
            "tf": 1,
            "weight": 0.035714
          }
        ],
        "unique_terms": 24,
        "total_terms": 28
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Challenges of Scaling VLLMs",
        "challenges",
        "heavy",
        "multivector",
        "pdf",
        "representations",
        "retrieval",
        "scale",
        "scaling",
        "the",
        "vllms"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.561875,
      "overall": 0.720625
    }
  },
  {
    "text": "### Math Behind the Scaling  **ColPali** generates over **1,000 vectors per PDF page**, while its successor, **ColQwen**, generates slightly fewer — up to **768 vectors**, dynamically adjusted based on the image size. Typically, ColQwen produces **\\~700 vectors per page**. To understand the impact, consider the construction of an [**HNSW index**](https://qdrant.tech/articles/what-is-a-vector-database/#1-indexing-hnsw-index-and-sending-data-to-qdrant), a common indexing algorithm for vector databases. Let’s roughly estimate the number of comparisons needed to insert a new PDF page into the index. - **Vectors per page:** \\~700 (ColQwen) or \\~1,000 (ColPali) - **[ef\\_construct](https://qdrant.tech/documentation/concepts/indexing/#vector-index):** 100 (default)  The lower bound estimation for the number of vector comparisions comparisons would be:  $$ 700 \\times 700 \\times 100 = 49 \\ \\text{millions} $$  Now imagine how much it will take to build an index on **20,000 pages**! For ColPali, this number doubles. The result is **extremely slow index construction time**.",
    "metadata": {
      "chunk_id": "af5f87603a02-0013",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 13,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Math Behind the Scaling"
      ],
      "heading_text": "Math Behind the Scaling",
      "token_count": 273,
      "char_count": 1077,
      "start_char": 14480,
      "end_char": 15557,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5160869565217391,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.112694",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 273,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Math Behind the Scaling",
      "chunk_hash": "5594eef2dddcc565",
      "content_digest": "5594eef2dddcc565",
      "chunk_length": 1077,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "the",
          "index",
          "vectors",
          "page",
          "700",
          "vector",
          "colpali",
          "000",
          "per",
          "colqwen",
          "qdrant",
          "indexing",
          "for",
          "number",
          "generates",
          "pdf",
          "construction",
          "hnsw",
          "https",
          "tech"
        ],
        "term_weights": [
          {
            "term": "the",
            "tf": 9,
            "weight": 0.067164
          },
          {
            "term": "index",
            "tf": 6,
            "weight": 0.044776
          },
          {
            "term": "vectors",
            "tf": 4,
            "weight": 0.029851
          },
          {
            "term": "page",
            "tf": 4,
            "weight": 0.029851
          },
          {
            "term": "700",
            "tf": 4,
            "weight": 0.029851
          },
          {
            "term": "vector",
            "tf": 4,
            "weight": 0.029851
          },
          {
            "term": "colpali",
            "tf": 3,
            "weight": 0.022388
          },
          {
            "term": "000",
            "tf": 3,
            "weight": 0.022388
          },
          {
            "term": "per",
            "tf": 3,
            "weight": 0.022388
          },
          {
            "term": "colqwen",
            "tf": 3,
            "weight": 0.022388
          },
          {
            "term": "qdrant",
            "tf": 3,
            "weight": 0.022388
          },
          {
            "term": "indexing",
            "tf": 3,
            "weight": 0.022388
          },
          {
            "term": "for",
            "tf": 3,
            "weight": 0.022388
          },
          {
            "term": "number",
            "tf": 3,
            "weight": 0.022388
          },
          {
            "term": "generates",
            "tf": 2,
            "weight": 0.014925
          },
          {
            "term": "pdf",
            "tf": 2,
            "weight": 0.014925
          },
          {
            "term": "construction",
            "tf": 2,
            "weight": 0.014925
          },
          {
            "term": "hnsw",
            "tf": 2,
            "weight": 0.014925
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.014925
          },
          {
            "term": "tech",
            "tf": 2,
            "weight": 0.014925
          }
        ],
        "unique_terms": 84,
        "total_terms": 134
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": true
      },
      "search_keywords": [
        "000",
        "700",
        "Math Behind the Scaling",
        "colpali",
        "colqwen",
        "index",
        "page",
        "per",
        "the",
        "vector",
        "vectors"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5160869565217391,
      "overall": 0.738695652173913
    }
  },
  {
    "text": "### Our Solution  We recommend reducing the number of vectors in a PDF page representation for the **first-stage retrieval**. After the first stage retrieval with a reduced amount of vectors, we propose to **rerank** retrieved subset with the original uncompressed representation. You might consider using **quantization** (e.g., binary quantization) to reduce computational resources. However, as you can see above, quantization does not impact the parameters that determine the number of comparisons, so it will only affect memory consumption. The reduction of vectors can be achieved by applying a **mean pooling operation** to the multivector VLLM-generated outputs. Mean pooling averages the values across all vectors within a selected subgroup, condensing multiple vectors into a single representative vector. If done right, it allows the preservation of important information from the original page while significantly reducing the number of vectors. VLLMs generate vectors corresponding to patches that represent different portions of a PDF page. These patches can be grouped in columns and rows of a PDF page. For example:  - ColPali divides PDF page into **1,024 patches**. - Applying mean pooling by rows (or columns) of this patch matrix reduces the page representation to just **32 vectors**. We tested this approach with the ColPali model, mean pooling its multivectors by PDF page rows. The results showed:  - **Indexing time faster by an order of magnitude** - **Retrieval quality comparable to the original model**  For details of this experiment refer to our [gitHub repository](https://github.com/qdrant/demo-colpali-optimized), [ColPali optimization blog post](https://qdrant.tech/blog/colpali-qdrant-optimization/) or [webinar “PDF Retrieval at Scale”](https://www.youtube.com/watch?v=_h6SN1WwnLs)",
    "metadata": {
      "chunk_id": "af5f87603a02-0014",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 14,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Our Solution"
      ],
      "heading_text": "Our Solution",
      "token_count": 383,
      "char_count": 1818,
      "start_char": 15562,
      "end_char": 17380,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7081,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.114574",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 383,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Our Solution",
      "chunk_hash": "c66dcff33e3e21bb",
      "content_digest": "c66dcff33e3e21bb",
      "chunk_length": 1818,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "the",
          "vectors",
          "page",
          "pdf",
          "colpali",
          "retrieval",
          "mean",
          "pooling",
          "number",
          "representation",
          "for",
          "with",
          "original",
          "quantization",
          "can",
          "patches",
          "rows",
          "this",
          "https",
          "qdrant"
        ],
        "term_weights": [
          {
            "term": "the",
            "tf": 16,
            "weight": 0.072727
          },
          {
            "term": "vectors",
            "tf": 8,
            "weight": 0.036364
          },
          {
            "term": "page",
            "tf": 7,
            "weight": 0.031818
          },
          {
            "term": "pdf",
            "tf": 6,
            "weight": 0.027273
          },
          {
            "term": "colpali",
            "tf": 5,
            "weight": 0.022727
          },
          {
            "term": "retrieval",
            "tf": 4,
            "weight": 0.018182
          },
          {
            "term": "mean",
            "tf": 4,
            "weight": 0.018182
          },
          {
            "term": "pooling",
            "tf": 4,
            "weight": 0.018182
          },
          {
            "term": "number",
            "tf": 3,
            "weight": 0.013636
          },
          {
            "term": "representation",
            "tf": 3,
            "weight": 0.013636
          },
          {
            "term": "for",
            "tf": 3,
            "weight": 0.013636
          },
          {
            "term": "with",
            "tf": 3,
            "weight": 0.013636
          },
          {
            "term": "original",
            "tf": 3,
            "weight": 0.013636
          },
          {
            "term": "quantization",
            "tf": 3,
            "weight": 0.013636
          },
          {
            "term": "can",
            "tf": 3,
            "weight": 0.013636
          },
          {
            "term": "patches",
            "tf": 3,
            "weight": 0.013636
          },
          {
            "term": "rows",
            "tf": 3,
            "weight": 0.013636
          },
          {
            "term": "this",
            "tf": 3,
            "weight": 0.013636
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.013636
          },
          {
            "term": "qdrant",
            "tf": 3,
            "weight": 0.013636
          }
        ],
        "unique_terms": 136,
        "total_terms": 220
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Our Solution",
        "colpali",
        "mean",
        "number",
        "page",
        "pdf",
        "pooling",
        "representation",
        "retrieval",
        "the",
        "vectors"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7081,
      "overall": 0.7693666666666665
    }
  },
  {
    "text": "## Goal of This Tutorial  In this tutorial, we will demonstrate a scalable approach to PDF retrieval using **Qdrant** and **ColPali** & **ColQwen2** VLLMs. The presented approach is **highly recommended** to avoid the common pitfalls of long indexing times and slow retrieval speeds. In the following sections, we will demonstrate an optimized retrieval algorithm born out of our successful experimentation:  **First-Stage Retrieval with Mean-Pooled Vectors:**  - Construct an HNSW index using **only mean-pooled vectors**. - Use them for the first-stage retrieval. **Reranking with Original Model Multivectors:**  - Use the original multivectors from ColPali or ColQwen2 **to rerank** the results retrieved in the first stage.",
    "metadata": {
      "chunk_id": "af5f87603a02-0015",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 15,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Goal of This Tutorial"
      ],
      "heading_text": "Goal of This Tutorial",
      "token_count": 165,
      "char_count": 727,
      "start_char": 17387,
      "end_char": 18114,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7092307692307692,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.118010",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 165,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Goal of This Tutorial",
      "chunk_hash": "222f67108c6a85ae",
      "content_digest": "222f67108c6a85ae",
      "chunk_length": 727,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "the",
          "retrieval",
          "first",
          "stage",
          "this",
          "tutorial",
          "will",
          "demonstrate",
          "approach",
          "using",
          "and",
          "colpali",
          "colqwen2",
          "with",
          "mean",
          "pooled",
          "vectors",
          "use",
          "original",
          "multivectors"
        ],
        "term_weights": [
          {
            "term": "the",
            "tf": 7,
            "weight": 0.08046
          },
          {
            "term": "retrieval",
            "tf": 5,
            "weight": 0.057471
          },
          {
            "term": "first",
            "tf": 3,
            "weight": 0.034483
          },
          {
            "term": "stage",
            "tf": 3,
            "weight": 0.034483
          },
          {
            "term": "this",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "tutorial",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "will",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "demonstrate",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "approach",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "using",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "and",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "colpali",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "colqwen2",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "with",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "mean",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "pooled",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "vectors",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "use",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "original",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "multivectors",
            "tf": 2,
            "weight": 0.022989
          }
        ],
        "unique_terms": 57,
        "total_terms": 87
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Goal of This Tutorial",
        "approach",
        "demonstrate",
        "first",
        "retrieval",
        "stage",
        "the",
        "this",
        "tutorial",
        "using",
        "will"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7092307692307692,
      "overall": 0.8030769230769229
    }
  },
  {
    "text": "# pip install colpali_engine>=0.3.1\nfrom colpali_engine.models import ColPali, ColPaliProcessor",
    "metadata": {
      "chunk_id": "af5f87603a02-0017",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 17,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "pip install colpali_engine>=0.3.1"
      ],
      "heading_text": "pip install colpali_engine>=0.3.1",
      "token_count": 29,
      "char_count": 95,
      "start_char": 18175,
      "end_char": 18270,
      "semantic_score": 0.6,
      "structural_score": 0.7,
      "retrieval_quality": 0.59,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.119820",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 29,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "pip install colpali_engine>=0.3.1",
      "chunk_hash": "9fb7008fac8927c0",
      "content_digest": "9fb7008fac8927c0",
      "chunk_length": 95,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "colpali",
          "engine",
          "pip",
          "install",
          "from",
          "models",
          "import",
          "colpaliprocessor"
        ],
        "term_weights": [
          {
            "term": "colpali",
            "tf": 3,
            "weight": 0.272727
          },
          {
            "term": "engine",
            "tf": 2,
            "weight": 0.181818
          },
          {
            "term": "pip",
            "tf": 1,
            "weight": 0.090909
          },
          {
            "term": "install",
            "tf": 1,
            "weight": 0.090909
          },
          {
            "term": "from",
            "tf": 1,
            "weight": 0.090909
          },
          {
            "term": "models",
            "tf": 1,
            "weight": 0.090909
          },
          {
            "term": "import",
            "tf": 1,
            "weight": 0.090909
          },
          {
            "term": "colpaliprocessor",
            "tf": 1,
            "weight": 0.090909
          }
        ],
        "unique_terms": 8,
        "total_terms": 11
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "colpali",
        "colpaliprocessor",
        "engine",
        "from",
        "import",
        "install",
        "models",
        "pip",
        "pip install colpali_engine>=0.3.1"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.7,
      "retrieval_quality": 0.59,
      "overall": 0.6299999999999999
    }
  },
  {
    "text": "# pip install qdrant-client>=1.12.0 from qdrant_client import QdrantClient, models ``` To run these experiments, we’re using a **Qdrant cluster**. If you’re just getting started, you can set up a **free-tier cluster** for testing and exploration. Follow the instructions in the documentation [“How to Create a Free-Tier Qdrant Cluster”](https://qdrant.tech/documentation/cloud/create-cluster/#free-clusters) ```python client = QdrantClient(     url=<YOUR CLUSTER URL>,     api_key=<YOUR API KEY> ) ``` Download **ColPali** model along with its input processors. Make sure to select the backend that suits your setup. ```python colpali_model = ColPali.from_pretrained(         \"vidore/colpali-v1.3\",         torch_dtype=torch.bfloat16,         device_map=\"mps\",  # Use \"cuda:0\" for GPU, \"cpu\" for CPU, or \"mps\" for Apple Silicon     ).eval()  colpali_processor = ColPaliProcessor.from_pretrained(\"vidore/colpali-v1.3\") ``` For **ColQwen** model ```python from colpali_engine.models import ColQwen2, ColQwen2Processor  colqwen_model = ColQwen2.from_pretrained(         \"vidore/colqwen2-v0.1\",         torch_dtype=torch.bfloat16,         device_map=\"mps\", # Use \"cuda:0\" for GPU, \"cpu\" for CPU, or \"mps\" for Apple Silicon     ).eval()  colqwen_processor = ColQwen2Processor.from_pretrained(\"vidore/colqwen2-v0.1\") ```",
    "metadata": {
      "chunk_id": "af5f87603a02-0018",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 18,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "pip install qdrant-client>=1.12.0"
      ],
      "heading_text": "pip install qdrant-client>=1.12.0",
      "token_count": 369,
      "char_count": 1314,
      "start_char": 18271,
      "end_char": 19585,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7246705882352942,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.125031",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 369,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "pip install qdrant-client>=1.12.0",
      "chunk_hash": "7e22f0b042a933b0",
      "content_digest": "7e22f0b042a933b0",
      "chunk_length": 1314,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "for",
          "colpali",
          "from",
          "qdrant",
          "cluster",
          "model",
          "pretrained",
          "vidore",
          "torch",
          "mps",
          "cpu",
          "colqwen2",
          "client",
          "free",
          "the",
          "python",
          "your",
          "colqwen",
          "import",
          "qdrantclient"
        ],
        "term_weights": [
          {
            "term": "for",
            "tf": 8,
            "weight": 0.050955
          },
          {
            "term": "colpali",
            "tf": 7,
            "weight": 0.044586
          },
          {
            "term": "from",
            "tf": 6,
            "weight": 0.038217
          },
          {
            "term": "qdrant",
            "tf": 5,
            "weight": 0.031847
          },
          {
            "term": "cluster",
            "tf": 5,
            "weight": 0.031847
          },
          {
            "term": "model",
            "tf": 4,
            "weight": 0.025478
          },
          {
            "term": "pretrained",
            "tf": 4,
            "weight": 0.025478
          },
          {
            "term": "vidore",
            "tf": 4,
            "weight": 0.025478
          },
          {
            "term": "torch",
            "tf": 4,
            "weight": 0.025478
          },
          {
            "term": "mps",
            "tf": 4,
            "weight": 0.025478
          },
          {
            "term": "cpu",
            "tf": 4,
            "weight": 0.025478
          },
          {
            "term": "colqwen2",
            "tf": 4,
            "weight": 0.025478
          },
          {
            "term": "client",
            "tf": 3,
            "weight": 0.019108
          },
          {
            "term": "free",
            "tf": 3,
            "weight": 0.019108
          },
          {
            "term": "the",
            "tf": 3,
            "weight": 0.019108
          },
          {
            "term": "python",
            "tf": 3,
            "weight": 0.019108
          },
          {
            "term": "your",
            "tf": 3,
            "weight": 0.019108
          },
          {
            "term": "colqwen",
            "tf": 3,
            "weight": 0.019108
          },
          {
            "term": "import",
            "tf": 2,
            "weight": 0.012739
          },
          {
            "term": "qdrantclient",
            "tf": 2,
            "weight": 0.012739
          }
        ],
        "unique_terms": 76,
        "total_terms": 157
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "cluster",
        "colpali",
        "for",
        "from",
        "model",
        "mps",
        "pip install qdrant-client>=1.12.0",
        "pretrained",
        "qdrant",
        "torch",
        "vidore"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7246705882352942,
      "overall": 0.7748901960784313
    }
  },
  {
    "text": "## Choose a dataset  We’ll use the **UFO Dataset** by Daniel van Strien for this tutorial. It’s available on Hugging Face; you can download it directly from there. ```python from datasets import load_dataset ufo_dataset = \"davanstrien/ufo-ColPali\" dataset = load_dataset(ufo_dataset, split=\"train\") ```",
    "metadata": {
      "chunk_id": "af5f87603a02-0020",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 20,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Choose a dataset"
      ],
      "heading_text": "Choose a dataset",
      "token_count": 74,
      "char_count": 302,
      "start_char": 21141,
      "end_char": 21443,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5680487804878049,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.133647",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 74,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Choose a dataset",
      "chunk_hash": "657ce7cd6063333c",
      "content_digest": "657ce7cd6063333c",
      "chunk_length": 302,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "dataset",
          "ufo",
          "from",
          "load",
          "choose",
          "use",
          "the",
          "daniel",
          "van",
          "strien",
          "for",
          "this",
          "tutorial",
          "available",
          "hugging",
          "face",
          "you",
          "can",
          "download",
          "directly"
        ],
        "term_weights": [
          {
            "term": "dataset",
            "tf": 7,
            "weight": 0.179487
          },
          {
            "term": "ufo",
            "tf": 4,
            "weight": 0.102564
          },
          {
            "term": "from",
            "tf": 2,
            "weight": 0.051282
          },
          {
            "term": "load",
            "tf": 2,
            "weight": 0.051282
          },
          {
            "term": "choose",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "use",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "daniel",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "van",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "strien",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "for",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "this",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "tutorial",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "available",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "hugging",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "face",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "you",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "can",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "download",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "directly",
            "tf": 1,
            "weight": 0.025641
          }
        ],
        "unique_terms": 28,
        "total_terms": 39
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Choose a dataset",
        "choose",
        "daniel",
        "dataset",
        "from",
        "load",
        "strien",
        "the",
        "ufo",
        "use",
        "van"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5680487804878049,
      "overall": 0.7226829268292683
    }
  },
  {
    "text": "## Embedding and Mean Pooling  We’ll use a function that generates multivector representations and their mean pooled versions of each PDF page (aka image) in batches. For complete understanding, it’s important to consider the following specifics of **ColPali** and **ColQwen**:  **ColPali:** In theory, ColPali is designed to generate 1,024 vectors per PDF page, but in practice, it produces 1,030 vectors. This discrepancy is due to ColPali’s pre-processor, which appends the text `<bos>Describe the image.` to each input. This additional text generates an extra 6 multivectors. **ColQwen:** ColQwen dynamically determines the number of patches in “rows and columns” of a PDF page based on its size. Consequently, the number of multivectors can vary between inputs. ColQwen pre-processor prepends `<|im_start|>user<|vision_start|>` and appends `<|vision_end|>Describe the image.<|im_end|><|endoftext|>`. For example, that’s how ColQwen multivector output is formed. The `get_patches` function is to get the number of `x_patches` (rows) and `y_patches` (columns) ColPali/ColQwen2 models will divide a PDF page into. For ColPali, the numbers will always be 32 by 32; ColQwen will define them dynamically based on the PDF page size. ```python x_patches, y_patches = model_processor.get_n_patches(     image_size,      patch_size=model.patch_size ) ``` For **ColQwen** model ```python model_processor.get_n_patches(     image_size,      patch_size=model.patch_size,     spatial_merge_size=model.spatial_merge_size ) ``` We choose to **preserve prefix and postfix multivectors**. Our **pooling** operation compresses the multivectors representing **the image tokens** based on the number of rows and columns determined by the model (static 32x32 for ColPali, dynamic XxY for ColQwen). Function retains and integrates the additional multivectors produced by the model back to pooled representations. Simplified version of pooling for **ColPali** model:  (see the full version – also applicable for **ColQwen** – in the [tutorial notebook](https://githubtocolab.com/qdrant/examples/blob/master/pdf-retrieval-at-scale/ColPali_ColQwen2_Tutorial.ipynb)) ```python processed_images = model_processor.process_images(image_batch)",
    "metadata": {
      "chunk_id": "af5f87603a02-0021",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 21,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Embedding and Mean Pooling"
      ],
      "heading_text": "Embedding and Mean Pooling",
      "token_count": 538,
      "char_count": 2217,
      "start_char": 21446,
      "end_char": 23663,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.8852941176470588,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.149859",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 538,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Embedding and Mean Pooling",
      "chunk_hash": "d8244dc23284b293",
      "content_digest": "d8244dc23284b293",
      "chunk_length": 2217,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "the",
          "size",
          "model",
          "and",
          "colpali",
          "colqwen",
          "for",
          "patches",
          "image",
          "pdf",
          "page",
          "processor",
          "multivectors",
          "number",
          "get",
          "patch",
          "pooling",
          "function",
          "rows",
          "columns"
        ],
        "term_weights": [
          {
            "term": "the",
            "tf": 18,
            "weight": 0.065455
          },
          {
            "term": "size",
            "tf": 10,
            "weight": 0.036364
          },
          {
            "term": "model",
            "tf": 10,
            "weight": 0.036364
          },
          {
            "term": "and",
            "tf": 9,
            "weight": 0.032727
          },
          {
            "term": "colpali",
            "tf": 9,
            "weight": 0.032727
          },
          {
            "term": "colqwen",
            "tf": 9,
            "weight": 0.032727
          },
          {
            "term": "for",
            "tf": 8,
            "weight": 0.029091
          },
          {
            "term": "patches",
            "tf": 8,
            "weight": 0.029091
          },
          {
            "term": "image",
            "tf": 7,
            "weight": 0.025455
          },
          {
            "term": "pdf",
            "tf": 6,
            "weight": 0.021818
          },
          {
            "term": "page",
            "tf": 5,
            "weight": 0.018182
          },
          {
            "term": "processor",
            "tf": 5,
            "weight": 0.018182
          },
          {
            "term": "multivectors",
            "tf": 5,
            "weight": 0.018182
          },
          {
            "term": "number",
            "tf": 4,
            "weight": 0.014545
          },
          {
            "term": "get",
            "tf": 4,
            "weight": 0.014545
          },
          {
            "term": "patch",
            "tf": 4,
            "weight": 0.014545
          },
          {
            "term": "pooling",
            "tf": 3,
            "weight": 0.010909
          },
          {
            "term": "function",
            "tf": 3,
            "weight": 0.010909
          },
          {
            "term": "rows",
            "tf": 3,
            "weight": 0.010909
          },
          {
            "term": "columns",
            "tf": 3,
            "weight": 0.010909
          }
        ],
        "unique_terms": 132,
        "total_terms": 275
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Embedding and Mean Pooling",
        "and",
        "colpali",
        "colqwen",
        "for",
        "image",
        "model",
        "patches",
        "pdf",
        "size",
        "the"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.8852941176470588,
      "overall": 0.8284313725490197
    }
  },
  {
    "text": "# Image embeddings of shape (batch_size, 1030, 128) image_embeddings = model(**processed_images)",
    "metadata": {
      "chunk_id": "af5f87603a02-0022",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 22,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Image embeddings of shape (batch_size, 1030, 128)"
      ],
      "heading_text": "Image embeddings of shape (batch_size, 1030, 128)",
      "token_count": 24,
      "char_count": 96,
      "start_char": 23675,
      "end_char": 23771,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.151169",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 24,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Image embeddings of shape (batch_size, 1030, 128)",
      "chunk_hash": "8d55b5ea620ce352",
      "content_digest": "8d55b5ea620ce352",
      "chunk_length": 96,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "image",
          "embeddings",
          "shape",
          "batch",
          "size",
          "1030",
          "128",
          "model",
          "processed",
          "images"
        ],
        "term_weights": [
          {
            "term": "image",
            "tf": 2,
            "weight": 0.166667
          },
          {
            "term": "embeddings",
            "tf": 2,
            "weight": 0.166667
          },
          {
            "term": "shape",
            "tf": 1,
            "weight": 0.083333
          },
          {
            "term": "batch",
            "tf": 1,
            "weight": 0.083333
          },
          {
            "term": "size",
            "tf": 1,
            "weight": 0.083333
          },
          {
            "term": "1030",
            "tf": 1,
            "weight": 0.083333
          },
          {
            "term": "128",
            "tf": 1,
            "weight": 0.083333
          },
          {
            "term": "model",
            "tf": 1,
            "weight": 0.083333
          },
          {
            "term": "processed",
            "tf": 1,
            "weight": 0.083333
          },
          {
            "term": "images",
            "tf": 1,
            "weight": 0.083333
          }
        ],
        "unique_terms": 10,
        "total_terms": 12
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "1030",
        "128",
        "Image embeddings of shape (batch_size, 1030, 128)",
        "batch",
        "embeddings",
        "image",
        "images",
        "model",
        "processed",
        "shape",
        "size"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "overall": 0.7633333333333333
    }
  },
  {
    "text": "# (1030, ) - boolean mask (for the first element in the batch), True for image tokens  mask = processed_images.input_ids[0] == model_processor.image_token_id",
    "metadata": {
      "chunk_id": "af5f87603a02-0026",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 26,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "(1030, ) - boolean mask (for the first element in the batch), True for image tokens"
      ],
      "heading_text": "(1030, ) - boolean mask (for the first element in the batch), True for image tokens",
      "token_count": 38,
      "char_count": 157,
      "start_char": 24014,
      "end_char": 24171,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5627272727272727,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.152484",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 38,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "(1030, ) - boolean mask (for the first element in the batch), True for image tokens",
      "chunk_hash": "bf3a1fd3e5c6a602",
      "content_digest": "bf3a1fd3e5c6a602",
      "chunk_length": 157,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "mask",
          "for",
          "the",
          "image",
          "1030",
          "boolean",
          "first",
          "element",
          "batch",
          "true",
          "tokens",
          "processed",
          "images",
          "input",
          "ids",
          "model",
          "processor",
          "token"
        ],
        "term_weights": [
          {
            "term": "mask",
            "tf": 2,
            "weight": 0.090909
          },
          {
            "term": "for",
            "tf": 2,
            "weight": 0.090909
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.090909
          },
          {
            "term": "image",
            "tf": 2,
            "weight": 0.090909
          },
          {
            "term": "1030",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "boolean",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "first",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "element",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "batch",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "true",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "tokens",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "processed",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "images",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "input",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "ids",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "model",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "processor",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "token",
            "tf": 1,
            "weight": 0.045455
          }
        ],
        "unique_terms": 18,
        "total_terms": 22
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "(1030, ) - boolean mask (for the first element in the batch), True for image tokens",
        "1030",
        "batch",
        "boolean",
        "element",
        "first",
        "for",
        "image",
        "mask",
        "the",
        "true"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5627272727272727,
      "overall": 0.6875757575757575
    }
  },
  {
    "text": "# (x_patches, y_patches, 128) image_patch_embeddings = image_embedding[mask].view(x_patches, y_patches, model.dim)",
    "metadata": {
      "chunk_id": "af5f87603a02-0029",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 29,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "(x_patches, y_patches, 128)"
      ],
      "heading_text": "(x_patches, y_patches, 128)",
      "token_count": 29,
      "char_count": 114,
      "start_char": 24278,
      "end_char": 24392,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5566666666666666,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.153380",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 29,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "(x_patches, y_patches, 128)",
      "chunk_hash": "869db8b9e4e35bae",
      "content_digest": "869db8b9e4e35bae",
      "chunk_length": 114,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "patches",
          "image",
          "128",
          "patch",
          "embeddings",
          "embedding",
          "mask",
          "view",
          "model",
          "dim"
        ],
        "term_weights": [
          {
            "term": "patches",
            "tf": 4,
            "weight": 0.285714
          },
          {
            "term": "image",
            "tf": 2,
            "weight": 0.142857
          },
          {
            "term": "128",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "patch",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "embeddings",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "embedding",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "mask",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "view",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "model",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "dim",
            "tf": 1,
            "weight": 0.071429
          }
        ],
        "unique_terms": 10,
        "total_terms": 14
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "(x_patches, y_patches, 128)",
        "128",
        "dim",
        "embedding",
        "embeddings",
        "image",
        "mask",
        "model",
        "patch",
        "patches",
        "view"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5566666666666666,
      "overall": 0.6855555555555556
    }
  },
  {
    "text": "## Upload to Qdrant\n\nThe upload process is trivial; the only thing to pay attention to is the compute cost for ColPali and ColQwen2 models. In low-resource environments, it’s recommended to use a smaller batch size for embedding and mean pooling.\n\nFull version of the upload code is available in the [tutorial notebook](https://githubtocolab.com/qdrant/examples/blob/master/pdf-retrieval-at-scale/ColPali_ColQwen2_Tutorial.ipynb)",
    "metadata": {
      "chunk_id": "af5f87603a02-0037",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 37,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Upload to Qdrant"
      ],
      "heading_text": "Upload to Qdrant",
      "token_count": 103,
      "char_count": 429,
      "start_char": 24910,
      "end_char": 25339,
      "semantic_score": 0.7,
      "structural_score": 0.7,
      "retrieval_quality": 0.710754716981132,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.156080",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 103,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Upload to Qdrant",
      "chunk_hash": "7a160ea10e869b4e",
      "content_digest": "7a160ea10e869b4e",
      "chunk_length": 429,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "the",
          "upload",
          "qdrant",
          "for",
          "colpali",
          "and",
          "colqwen2",
          "tutorial",
          "process",
          "trivial",
          "only",
          "thing",
          "pay",
          "attention",
          "compute",
          "cost",
          "models",
          "low",
          "resource",
          "environments"
        ],
        "term_weights": [
          {
            "term": "the",
            "tf": 5,
            "weight": 0.090909
          },
          {
            "term": "upload",
            "tf": 3,
            "weight": 0.054545
          },
          {
            "term": "qdrant",
            "tf": 2,
            "weight": 0.036364
          },
          {
            "term": "for",
            "tf": 2,
            "weight": 0.036364
          },
          {
            "term": "colpali",
            "tf": 2,
            "weight": 0.036364
          },
          {
            "term": "and",
            "tf": 2,
            "weight": 0.036364
          },
          {
            "term": "colqwen2",
            "tf": 2,
            "weight": 0.036364
          },
          {
            "term": "tutorial",
            "tf": 2,
            "weight": 0.036364
          },
          {
            "term": "process",
            "tf": 1,
            "weight": 0.018182
          },
          {
            "term": "trivial",
            "tf": 1,
            "weight": 0.018182
          },
          {
            "term": "only",
            "tf": 1,
            "weight": 0.018182
          },
          {
            "term": "thing",
            "tf": 1,
            "weight": 0.018182
          },
          {
            "term": "pay",
            "tf": 1,
            "weight": 0.018182
          },
          {
            "term": "attention",
            "tf": 1,
            "weight": 0.018182
          },
          {
            "term": "compute",
            "tf": 1,
            "weight": 0.018182
          },
          {
            "term": "cost",
            "tf": 1,
            "weight": 0.018182
          },
          {
            "term": "models",
            "tf": 1,
            "weight": 0.018182
          },
          {
            "term": "low",
            "tf": 1,
            "weight": 0.018182
          },
          {
            "term": "resource",
            "tf": 1,
            "weight": 0.018182
          },
          {
            "term": "environments",
            "tf": 1,
            "weight": 0.018182
          }
        ],
        "unique_terms": 43,
        "total_terms": 55
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Upload to Qdrant",
        "and",
        "colpali",
        "colqwen2",
        "for",
        "process",
        "qdrant",
        "the",
        "trivial",
        "tutorial",
        "upload"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.7,
      "retrieval_quality": 0.710754716981132,
      "overall": 0.7035849056603772
    }
  },
  {
    "text": "## Querying PDFs  After indexing PDF documents, we can move on to querying them using our two-stage retrieval approach. ```python query = \"Lee Harvey Oswald's involvement in the JFK assassination\" processed_queries = model_processor.process_queries([query]).to(model.device)",
    "metadata": {
      "chunk_id": "af5f87603a02-0038",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 38,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Querying PDFs"
      ],
      "heading_text": "Querying PDFs",
      "token_count": 54,
      "char_count": 274,
      "start_char": 25341,
      "end_char": 25615,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5718181818181818,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.157049",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 54,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Querying PDFs",
      "chunk_hash": "d2af0a8218e4c149",
      "content_digest": "d2af0a8218e4c149",
      "chunk_length": 274,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "querying",
          "query",
          "queries",
          "model",
          "pdfs",
          "after",
          "indexing",
          "pdf",
          "documents",
          "can",
          "move",
          "them",
          "using",
          "our",
          "two",
          "stage",
          "retrieval",
          "approach",
          "python",
          "lee"
        ],
        "term_weights": [
          {
            "term": "querying",
            "tf": 2,
            "weight": 0.058824
          },
          {
            "term": "query",
            "tf": 2,
            "weight": 0.058824
          },
          {
            "term": "queries",
            "tf": 2,
            "weight": 0.058824
          },
          {
            "term": "model",
            "tf": 2,
            "weight": 0.058824
          },
          {
            "term": "pdfs",
            "tf": 1,
            "weight": 0.029412
          },
          {
            "term": "after",
            "tf": 1,
            "weight": 0.029412
          },
          {
            "term": "indexing",
            "tf": 1,
            "weight": 0.029412
          },
          {
            "term": "pdf",
            "tf": 1,
            "weight": 0.029412
          },
          {
            "term": "documents",
            "tf": 1,
            "weight": 0.029412
          },
          {
            "term": "can",
            "tf": 1,
            "weight": 0.029412
          },
          {
            "term": "move",
            "tf": 1,
            "weight": 0.029412
          },
          {
            "term": "them",
            "tf": 1,
            "weight": 0.029412
          },
          {
            "term": "using",
            "tf": 1,
            "weight": 0.029412
          },
          {
            "term": "our",
            "tf": 1,
            "weight": 0.029412
          },
          {
            "term": "two",
            "tf": 1,
            "weight": 0.029412
          },
          {
            "term": "stage",
            "tf": 1,
            "weight": 0.029412
          },
          {
            "term": "retrieval",
            "tf": 1,
            "weight": 0.029412
          },
          {
            "term": "approach",
            "tf": 1,
            "weight": 0.029412
          },
          {
            "term": "python",
            "tf": 1,
            "weight": 0.029412
          },
          {
            "term": "lee",
            "tf": 1,
            "weight": 0.029412
          }
        ],
        "unique_terms": 30,
        "total_terms": 34
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Querying PDFs",
        "after",
        "can",
        "documents",
        "indexing",
        "model",
        "pdf",
        "pdfs",
        "queries",
        "query",
        "querying"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5718181818181818,
      "overall": 0.723939393939394
    }
  },
  {
    "text": "# Resulting query embedding is a tensor of shape (22, 128) query_embedding = model(**processed_queries)[0] ``` Now let’s design a function for the two-stage retrieval with multivectors produced by VLLMs:  - **Step 1:** Prefetch results using a compressed multivector representation & HNSW index. - **Step 2:** Re-rank the prefetched results using the original multivector representation. Let’s query our collections using combined mean pooled representations for the first stage of retrieval. ```python",
    "metadata": {
      "chunk_id": "af5f87603a02-0039",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 39,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Resulting query embedding is a tensor of shape (22, 128)"
      ],
      "heading_text": "Resulting query embedding is a tensor of shape (22, 128)",
      "token_count": 111,
      "char_count": 502,
      "start_char": 25618,
      "end_char": 26120,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5257142857142857,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.164310",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 111,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Resulting query embedding is a tensor of shape (22, 128)",
      "chunk_hash": "b3fb17ad80ee6333",
      "content_digest": "b3fb17ad80ee6333",
      "chunk_length": 502,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "the",
          "query",
          "using",
          "embedding",
          "let",
          "for",
          "stage",
          "retrieval",
          "step",
          "results",
          "multivector",
          "representation",
          "resulting",
          "tensor",
          "shape",
          "128",
          "model",
          "processed",
          "queries",
          "now"
        ],
        "term_weights": [
          {
            "term": "the",
            "tf": 4,
            "weight": 0.068966
          },
          {
            "term": "query",
            "tf": 3,
            "weight": 0.051724
          },
          {
            "term": "using",
            "tf": 3,
            "weight": 0.051724
          },
          {
            "term": "embedding",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "let",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "for",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "stage",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "retrieval",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "step",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "results",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "multivector",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "representation",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "resulting",
            "tf": 1,
            "weight": 0.017241
          },
          {
            "term": "tensor",
            "tf": 1,
            "weight": 0.017241
          },
          {
            "term": "shape",
            "tf": 1,
            "weight": 0.017241
          },
          {
            "term": "128",
            "tf": 1,
            "weight": 0.017241
          },
          {
            "term": "model",
            "tf": 1,
            "weight": 0.017241
          },
          {
            "term": "processed",
            "tf": 1,
            "weight": 0.017241
          },
          {
            "term": "queries",
            "tf": 1,
            "weight": 0.017241
          },
          {
            "term": "now",
            "tf": 1,
            "weight": 0.017241
          }
        ],
        "unique_terms": 42,
        "total_terms": 58
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Resulting query embedding is a tensor of shape (22, 128)",
        "embedding",
        "for",
        "let",
        "query",
        "results",
        "retrieval",
        "stage",
        "step",
        "the",
        "using"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5257142857142857,
      "overall": 0.7419047619047618
    }
  },
  {
    "text": "# Amount of results to prefetch for reranking prefetch_limit = 100  response = client.query_points(     collection_name=collection_name,     query=query_embedding,     prefetch=[         models.Prefetch(             query=query_embedding,             limit=prefetch_limit,             using=\"mean_pooling_columns\"         ),         models.Prefetch(             query=query_embedding,             limit=prefetch_limit,             using=\"mean_pooling_rows\"         ),     ],     limit=search_limit,     with_payload=True,     with_vector=False,     using=\"original\" ) ``` And check the top retrieved result to our query *“Lee Harvey Oswald’s involvement in the JFK assassination”*. ```python dataset[response.points[0].payload['index']]['image'] ```",
    "metadata": {
      "chunk_id": "af5f87603a02-0041",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 41,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Amount of results to prefetch for reranking"
      ],
      "heading_text": "Amount of results to prefetch for reranking",
      "token_count": 154,
      "char_count": 749,
      "start_char": 26178,
      "end_char": 26927,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.54,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.166944",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 154,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Amount of results to prefetch for reranking",
      "chunk_hash": "3eccd008d9db30a2",
      "content_digest": "3eccd008d9db30a2",
      "chunk_length": 749,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "query",
          "prefetch",
          "limit",
          "embedding",
          "using",
          "response",
          "points",
          "collection",
          "name",
          "models",
          "mean",
          "pooling",
          "with",
          "payload",
          "the",
          "amount",
          "results",
          "for",
          "reranking",
          "100"
        ],
        "term_weights": [
          {
            "term": "query",
            "tf": 8,
            "weight": 0.103896
          },
          {
            "term": "prefetch",
            "tf": 7,
            "weight": 0.090909
          },
          {
            "term": "limit",
            "tf": 7,
            "weight": 0.090909
          },
          {
            "term": "embedding",
            "tf": 3,
            "weight": 0.038961
          },
          {
            "term": "using",
            "tf": 3,
            "weight": 0.038961
          },
          {
            "term": "response",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "points",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "collection",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "name",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "models",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "mean",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "pooling",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "with",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "payload",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "amount",
            "tf": 1,
            "weight": 0.012987
          },
          {
            "term": "results",
            "tf": 1,
            "weight": 0.012987
          },
          {
            "term": "for",
            "tf": 1,
            "weight": 0.012987
          },
          {
            "term": "reranking",
            "tf": 1,
            "weight": 0.012987
          },
          {
            "term": "100",
            "tf": 1,
            "weight": 0.012987
          }
        ],
        "unique_terms": 44,
        "total_terms": 77
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Amount of results to prefetch for reranking",
        "collection",
        "embedding",
        "limit",
        "models",
        "name",
        "points",
        "prefetch",
        "query",
        "response",
        "using"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.54,
      "overall": 0.7466666666666666
    }
  },
  {
    "text": "## Conclusion\n\nIn this tutorial, we demonstrated an optimized approach using **Qdrant for PDF retrieval at scale** with VLLMs producing **heavy multivector representations** like **ColPali** and **ColQwen2**.\n\nWithout such optimization, the performance of retrieval systems can degrade severely, both in terms of indexing time and query latency, especially as the dataset size grows.\n\nWe **strongly recommend** implementing this approach in your workflows to ensure efficient and scalable PDF retrieval. Neglecting to optimize the retrieval process could result in unacceptably slow performance, hindering the usability of your system.\n\nStart scaling your PDF retrieval today!",
    "metadata": {
      "chunk_id": "af5f87603a02-0042",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 42,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Conclusion"
      ],
      "heading_text": "Conclusion",
      "token_count": 131,
      "char_count": 676,
      "start_char": 26931,
      "end_char": 27607,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7222580645161291,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.168193",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 131,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Conclusion",
      "chunk_hash": "e39184ee85465989",
      "content_digest": "e39184ee85465989",
      "chunk_length": 676,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "retrieval",
          "the",
          "pdf",
          "and",
          "your",
          "this",
          "approach",
          "performance",
          "conclusion",
          "tutorial",
          "demonstrated",
          "optimized",
          "using",
          "qdrant",
          "for",
          "scale",
          "with",
          "vllms",
          "producing",
          "heavy"
        ],
        "term_weights": [
          {
            "term": "retrieval",
            "tf": 5,
            "weight": 0.064103
          },
          {
            "term": "the",
            "tf": 4,
            "weight": 0.051282
          },
          {
            "term": "pdf",
            "tf": 3,
            "weight": 0.038462
          },
          {
            "term": "and",
            "tf": 3,
            "weight": 0.038462
          },
          {
            "term": "your",
            "tf": 3,
            "weight": 0.038462
          },
          {
            "term": "this",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "approach",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "performance",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "conclusion",
            "tf": 1,
            "weight": 0.012821
          },
          {
            "term": "tutorial",
            "tf": 1,
            "weight": 0.012821
          },
          {
            "term": "demonstrated",
            "tf": 1,
            "weight": 0.012821
          },
          {
            "term": "optimized",
            "tf": 1,
            "weight": 0.012821
          },
          {
            "term": "using",
            "tf": 1,
            "weight": 0.012821
          },
          {
            "term": "qdrant",
            "tf": 1,
            "weight": 0.012821
          },
          {
            "term": "for",
            "tf": 1,
            "weight": 0.012821
          },
          {
            "term": "scale",
            "tf": 1,
            "weight": 0.012821
          },
          {
            "term": "with",
            "tf": 1,
            "weight": 0.012821
          },
          {
            "term": "vllms",
            "tf": 1,
            "weight": 0.012821
          },
          {
            "term": "producing",
            "tf": 1,
            "weight": 0.012821
          },
          {
            "term": "heavy",
            "tf": 1,
            "weight": 0.012821
          }
        ],
        "unique_terms": 62,
        "total_terms": 78
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Conclusion",
        "and",
        "approach",
        "conclusion",
        "pdf",
        "performance",
        "retrieval",
        "the",
        "this",
        "tutorial",
        "your"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7222580645161291,
      "overall": 0.8074193548387095
    }
  },
  {
    "text": "##### Was this page useful? Yes No  Thank you for your feedback! 🙏  We are sorry to hear that. 😔 You can [edit](https:/github.com/qdrant/landing_page/tree/master/qdrant-landing/content/documentation/advanced-tutorials/pdf-retrieval-at-scale.md) this page on GitHub, or [create](https://github.com/qdrant/landing_page/issues/new/choose) a GitHub issue. On this page:  - [Scaling PDF Retrieval with Qdrant](#scaling-pdf-retrieval-with-qdrant.md)    - [How VLLMs Work for PDF Retrieval](#how-vllms-work-for-pdf-retrieval.md)    - [Challenges of Scaling VLLMs](#challenges-of-scaling-vllms.md)      - [Math Behind the Scaling](#math-behind-the-scaling.md)     - [Our Solution](#our-solution.md)    - [Goal of This Tutorial](#goal-of-this-tutorial.md)    - [Setup](#setup.md)    - [Create Qdrant Collections](#create-qdrant-collections.md)    - [Choose a dataset](#choose-a-dataset.md)    - [Embedding and Mean Pooling](#embedding-and-mean-pooling.md)    - [Upload to Qdrant](#upload-to-qdrant.md)    - [Querying PDFs](#querying-pdfs.md)    - [Conclusion](#conclusion.md)  * [Edit on Github](https://github.com/qdrant/landing_page/tree/master/qdrant-landing/content/documentation/advanced-tutorials/pdf-retrieval-at-scale.md) * [Create an issue](https://github.com/qdrant/landing_page/issues/new/choose)",
    "metadata": {
      "chunk_id": "af5f87603a02-0043",
      "source_file": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "file_extension": ".md",
      "chunk_index": 43,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Was this page useful?"
      ],
      "heading_text": "Was this page useful?",
      "token_count": 374,
      "char_count": 1298,
      "start_char": 27609,
      "end_char": 28907,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5326081632653061,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:09.174310",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 374,
      "document_id": "af5f87603a02",
      "document_name": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_",
      "source_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_filename": "_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "source_directory": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale",
      "relative_path": "Docs\\Qdrant\\qdrant_documentation\\documentation_advanced-tutorials_pdf-retrieval-at-scale\\_documentation_advanced-tutorials_pdf-retrieval-at-scale_.md",
      "hierarchy_path": "Was this page useful?",
      "chunk_hash": "f394e4edcf2ab4fc",
      "content_digest": "f394e4edcf2ab4fc",
      "chunk_length": 1298,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "page",
          "github",
          "landing",
          "pdf",
          "retrieval",
          "scaling",
          "this",
          "https",
          "com",
          "create",
          "choose",
          "vllms",
          "for",
          "you",
          "edit",
          "tree",
          "master",
          "content",
          "documentation"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 12,
            "weight": 0.076433
          },
          {
            "term": "page",
            "tf": 7,
            "weight": 0.044586
          },
          {
            "term": "github",
            "tf": 7,
            "weight": 0.044586
          },
          {
            "term": "landing",
            "tf": 6,
            "weight": 0.038217
          },
          {
            "term": "pdf",
            "tf": 6,
            "weight": 0.038217
          },
          {
            "term": "retrieval",
            "tf": 6,
            "weight": 0.038217
          },
          {
            "term": "scaling",
            "tf": 6,
            "weight": 0.038217
          },
          {
            "term": "this",
            "tf": 5,
            "weight": 0.031847
          },
          {
            "term": "https",
            "tf": 4,
            "weight": 0.025478
          },
          {
            "term": "com",
            "tf": 4,
            "weight": 0.025478
          },
          {
            "term": "create",
            "tf": 4,
            "weight": 0.025478
          },
          {
            "term": "choose",
            "tf": 4,
            "weight": 0.025478
          },
          {
            "term": "vllms",
            "tf": 4,
            "weight": 0.025478
          },
          {
            "term": "for",
            "tf": 3,
            "weight": 0.019108
          },
          {
            "term": "you",
            "tf": 2,
            "weight": 0.012739
          },
          {
            "term": "edit",
            "tf": 2,
            "weight": 0.012739
          },
          {
            "term": "tree",
            "tf": 2,
            "weight": 0.012739
          },
          {
            "term": "master",
            "tf": 2,
            "weight": 0.012739
          },
          {
            "term": "content",
            "tf": 2,
            "weight": 0.012739
          },
          {
            "term": "documentation",
            "tf": 2,
            "weight": 0.012739
          }
        ],
        "unique_terms": 59,
        "total_terms": 157
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Was this page useful?",
        "com",
        "github",
        "https",
        "landing",
        "page",
        "pdf",
        "qdrant",
        "retrieval",
        "scaling",
        "this"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5326081632653061,
      "overall": 0.6775360544217687
    }
  }
]