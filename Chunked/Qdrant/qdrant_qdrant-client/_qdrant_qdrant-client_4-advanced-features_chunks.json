[
  {
    "text": "# Advanced Features  Relevant source files  - [qdrant\\_client/async\\_qdrant\\_fastembed.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/async_qdrant_fastembed.py) - [qdrant\\_client/qdrant\\_fastembed.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_fastembed.py) - [tests/test\\_fastembed.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/tests/test_fastembed.py) - [tools/async\\_client\\_generator/fastembed\\_generator.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/tools/async_client_generator/fastembed_generator.py)  This document covers the advanced functionality of the qdrant-client Python library, including embedding integration, batch processing, and specialized search capabilities. These features extend the basic client operations to provide higher-level abstractions for common vector database workflows. For basic client operations and collection management, see [Core Operations](qdrant/qdrant-client/3-core-operations.md). For implementation details of filtering and type inspection systems, see [Implementation Details](qdrant/qdrant-client/5-implementation-details.md).",
    "metadata": {
      "chunk_id": "5e226e163264-0000",
      "source_file": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_4-advanced-features.md",
      "filename": "_qdrant_qdrant-client_4-advanced-features.md",
      "file_extension": ".md",
      "chunk_index": 0,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Advanced Features"
      ],
      "heading_text": "Advanced Features",
      "token_count": 280,
      "char_count": 1157,
      "start_char": 1974,
      "end_char": 3131,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5233333333333333,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:48.162813",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 280,
      "document_id": "5e226e163264",
      "document_name": "_qdrant_qdrant-client_4-advanced-features",
      "source_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_4-advanced-features.md",
      "source_filename": "_qdrant_qdrant-client_4-advanced-features.md",
      "source_directory": "Docs\\Qdrant\\qdrant_qdrant-client",
      "relative_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_4-advanced-features.md",
      "hierarchy_path": "Advanced Features",
      "chunk_hash": "7446146436054a8f",
      "content_digest": "7446146436054a8f",
      "chunk_length": 1157,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "client",
          "fastembed",
          "async",
          "https",
          "github",
          "com",
          "blob",
          "ac6f6cd2",
          "generator",
          "operations",
          "the",
          "and",
          "for",
          "implementation",
          "details",
          "advanced",
          "features",
          "tests",
          "test"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 21,
            "weight": 0.15
          },
          {
            "term": "client",
            "tf": 15,
            "weight": 0.107143
          },
          {
            "term": "fastembed",
            "tf": 8,
            "weight": 0.057143
          },
          {
            "term": "async",
            "tf": 4,
            "weight": 0.028571
          },
          {
            "term": "https",
            "tf": 4,
            "weight": 0.028571
          },
          {
            "term": "github",
            "tf": 4,
            "weight": 0.028571
          },
          {
            "term": "com",
            "tf": 4,
            "weight": 0.028571
          },
          {
            "term": "blob",
            "tf": 4,
            "weight": 0.028571
          },
          {
            "term": "ac6f6cd2",
            "tf": 4,
            "weight": 0.028571
          },
          {
            "term": "generator",
            "tf": 4,
            "weight": 0.028571
          },
          {
            "term": "operations",
            "tf": 4,
            "weight": 0.028571
          },
          {
            "term": "the",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "and",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "for",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "implementation",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "details",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "advanced",
            "tf": 2,
            "weight": 0.014286
          },
          {
            "term": "features",
            "tf": 2,
            "weight": 0.014286
          },
          {
            "term": "tests",
            "tf": 2,
            "weight": 0.014286
          },
          {
            "term": "test",
            "tf": 2,
            "weight": 0.014286
          }
        ],
        "unique_terms": 57,
        "total_terms": 140
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Advanced Features",
        "ac6f6cd2",
        "async",
        "blob",
        "client",
        "com",
        "fastembed",
        "generator",
        "github",
        "https",
        "qdrant"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5233333333333333,
      "overall": 0.6744444444444445
    }
  },
  {
    "text": "## Hybrid Search  The client supports hybrid search combining dense and sparse vectors through reciprocal rank fusion (RRF). This is implemented in the `query()` and `query_batch()` methods. ``` ``` The hybrid search process involves:  1. **Dual Embedding**: Query text is embedded using both dense and sparse models 2. **Parallel Search**: Both dense and sparse searches are executed via `search_batch()` 3. **Result Fusion**: Results are combined using `reciprocal_rank_fusion()` from the `qdrant_client.hybrid.fusion` module 4. **Response Formatting**: Results are converted to `QueryResponse` objects  Vector field naming follows a consistent pattern:  - Dense vectors: `\"fast-{model_name}\"` (e.g., `\"fast-bge-small-en\"`) - Sparse vectors: `\"fast-sparse-{model_name}\"` (e.g., `\"fast-sparse-splade_pp_en_v1\"`)  **Sources:** [qdrant\\_client/qdrant\\_fastembed.py612-696](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_fastembed.py#L612-L696) [qdrant\\_client/qdrant\\_fastembed.py18](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_fastembed.py#L18-L18)",
    "metadata": {
      "chunk_id": "5e226e163264-0003",
      "source_file": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_4-advanced-features.md",
      "filename": "_qdrant_qdrant-client_4-advanced-features.md",
      "file_extension": ".md",
      "chunk_index": 3,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Hybrid Search"
      ],
      "heading_text": "Hybrid Search",
      "token_count": 298,
      "char_count": 1107,
      "start_char": 6068,
      "end_char": 7175,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5135294117647059,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:48.177728",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 298,
      "document_id": "5e226e163264",
      "document_name": "_qdrant_qdrant-client_4-advanced-features",
      "source_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_4-advanced-features.md",
      "source_filename": "_qdrant_qdrant-client_4-advanced-features.md",
      "source_directory": "Docs\\Qdrant\\qdrant_qdrant-client",
      "relative_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_4-advanced-features.md",
      "hierarchy_path": "Hybrid Search",
      "chunk_hash": "53c43fa6a9c8bcae",
      "content_digest": "53c43fa6a9c8bcae",
      "chunk_length": 1107,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "client",
          "sparse",
          "search",
          "hybrid",
          "the",
          "dense",
          "and",
          "fusion",
          "fast",
          "fastembed",
          "vectors",
          "query",
          "are",
          "reciprocal",
          "rank",
          "batch",
          "using",
          "both",
          "results"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 13,
            "weight": 0.093525
          },
          {
            "term": "client",
            "tf": 8,
            "weight": 0.057554
          },
          {
            "term": "sparse",
            "tf": 6,
            "weight": 0.043165
          },
          {
            "term": "search",
            "tf": 5,
            "weight": 0.035971
          },
          {
            "term": "hybrid",
            "tf": 4,
            "weight": 0.028777
          },
          {
            "term": "the",
            "tf": 4,
            "weight": 0.028777
          },
          {
            "term": "dense",
            "tf": 4,
            "weight": 0.028777
          },
          {
            "term": "and",
            "tf": 4,
            "weight": 0.028777
          },
          {
            "term": "fusion",
            "tf": 4,
            "weight": 0.028777
          },
          {
            "term": "fast",
            "tf": 4,
            "weight": 0.028777
          },
          {
            "term": "fastembed",
            "tf": 4,
            "weight": 0.028777
          },
          {
            "term": "vectors",
            "tf": 3,
            "weight": 0.021583
          },
          {
            "term": "query",
            "tf": 3,
            "weight": 0.021583
          },
          {
            "term": "are",
            "tf": 3,
            "weight": 0.021583
          },
          {
            "term": "reciprocal",
            "tf": 2,
            "weight": 0.014388
          },
          {
            "term": "rank",
            "tf": 2,
            "weight": 0.014388
          },
          {
            "term": "batch",
            "tf": 2,
            "weight": 0.014388
          },
          {
            "term": "using",
            "tf": 2,
            "weight": 0.014388
          },
          {
            "term": "both",
            "tf": 2,
            "weight": 0.014388
          },
          {
            "term": "results",
            "tf": 2,
            "weight": 0.014388
          }
        ],
        "unique_terms": 70,
        "total_terms": 139
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Hybrid Search",
        "and",
        "client",
        "dense",
        "fast",
        "fusion",
        "hybrid",
        "qdrant",
        "search",
        "sparse",
        "the"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5135294117647059,
      "overall": 0.7045098039215686
    }
  },
  {
    "text": "## Local Inference  The client provides local inference capabilities through the `ModelEmbedder` class and related inference object detection systems. ``` ``` The local inference system provides several key capabilities:  1. **Query Resolution**: The `_resolve_query()` method handles various query types including inference objects 2. **Model Embedding**: The `_embed_models()` and `_embed_models_strict()` methods process Pydantic models with embedded inference objects 3. **Type Detection**: The system uses `INFERENCE_OBJECT_TYPES` to identify objects requiring inference 4. **Schema Parsing**: The `ModelSchemaParser` analyzes model schemas to identify inference fields  Supported inference object types include:  - `models.Document` - Text documents for embedding - `models.Image` - Images for vision model embedding - `models.InferenceObject` - Generic inference objects  The system integrates with both synchronous and asynchronous workflows, with the `AsyncQdrantFastembedMixin` providing the same interface for async operations. **Sources:** [qdrant\\_client/qdrant\\_fastembed.py789-892](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_fastembed.py#L789-L892) [qdrant\\_client/qdrant\\_fastembed.py16](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_fastembed.py#L16-L16) [qdrant\\_client/qdrant\\_fastembed.py36-40](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/qdrant_fastembed.py#L36-L40)  Dismiss  Refresh this wiki  Enter email to refresh",
    "metadata": {
      "chunk_id": "5e226e163264-0004",
      "source_file": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_4-advanced-features.md",
      "filename": "_qdrant_qdrant-client_4-advanced-features.md",
      "file_extension": ".md",
      "chunk_index": 4,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Local Inference"
      ],
      "heading_text": "Local Inference",
      "token_count": 365,
      "char_count": 1524,
      "start_char": 7179,
      "end_char": 8703,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5095000000000001,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:48.181737",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 365,
      "document_id": "5e226e163264",
      "document_name": "_qdrant_qdrant-client_4-advanced-features",
      "source_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_4-advanced-features.md",
      "source_filename": "_qdrant_qdrant-client_4-advanced-features.md",
      "source_directory": "Docs\\Qdrant\\qdrant_qdrant-client",
      "relative_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_4-advanced-features.md",
      "hierarchy_path": "Local Inference",
      "chunk_hash": "d4efc73a4fd4d4ec",
      "content_digest": "d4efc73a4fd4d4ec",
      "chunk_length": 1524,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "inference",
          "the",
          "client",
          "models",
          "fastembed",
          "objects",
          "local",
          "and",
          "object",
          "system",
          "query",
          "types",
          "model",
          "embedding",
          "with",
          "for",
          "https",
          "github",
          "com"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 18,
            "weight": 0.096774
          },
          {
            "term": "inference",
            "tf": 11,
            "weight": 0.05914
          },
          {
            "term": "the",
            "tf": 10,
            "weight": 0.053763
          },
          {
            "term": "client",
            "tf": 10,
            "weight": 0.053763
          },
          {
            "term": "models",
            "tf": 6,
            "weight": 0.032258
          },
          {
            "term": "fastembed",
            "tf": 6,
            "weight": 0.032258
          },
          {
            "term": "objects",
            "tf": 4,
            "weight": 0.021505
          },
          {
            "term": "local",
            "tf": 3,
            "weight": 0.016129
          },
          {
            "term": "and",
            "tf": 3,
            "weight": 0.016129
          },
          {
            "term": "object",
            "tf": 3,
            "weight": 0.016129
          },
          {
            "term": "system",
            "tf": 3,
            "weight": 0.016129
          },
          {
            "term": "query",
            "tf": 3,
            "weight": 0.016129
          },
          {
            "term": "types",
            "tf": 3,
            "weight": 0.016129
          },
          {
            "term": "model",
            "tf": 3,
            "weight": 0.016129
          },
          {
            "term": "embedding",
            "tf": 3,
            "weight": 0.016129
          },
          {
            "term": "with",
            "tf": 3,
            "weight": 0.016129
          },
          {
            "term": "for",
            "tf": 3,
            "weight": 0.016129
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.016129
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.016129
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.016129
          }
        ],
        "unique_terms": 91,
        "total_terms": 186
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Local Inference",
        "and",
        "client",
        "fastembed",
        "inference",
        "local",
        "models",
        "object",
        "objects",
        "qdrant",
        "the"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5095000000000001,
      "overall": 0.7031666666666666
    }
  }
]