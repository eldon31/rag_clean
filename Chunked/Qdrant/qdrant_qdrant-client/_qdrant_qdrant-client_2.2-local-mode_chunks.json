[
  {
    "text": "# Local Mode  Relevant source files  - [qdrant\\_client/local/async\\_qdrant\\_local.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/async_qdrant_local.py) - [qdrant\\_client/local/local\\_collection.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py) - [qdrant\\_client/local/qdrant\\_local.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/qdrant_local.py) - [tests/congruence\\_tests/test\\_common.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/tests/congruence_tests/test_common.py) - [tests/congruence\\_tests/test\\_query.py](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/tests/congruence_tests/test_query.py)  Local Mode provides an in-process implementation of Qdrant functionality through the `QdrantLocal` and `AsyncQdrantLocal` classes. This mode operates entirely within your application process using the `LocalCollection` class for vector storage and search operations. Data can be stored in-memory or persisted to disk using SQLite-based storage. Local Mode is designed for development, testing, and small-scale applications where deploying a separate Qdrant server is unnecessary. For production deployments with larger datasets, see [Remote Mode](qdrant/qdrant-client/2.3-remote-mode.md).",
    "metadata": {
      "chunk_id": "ade92b851199-0000",
      "source_file": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "file_extension": ".md",
      "chunk_index": 0,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Local Mode"
      ],
      "heading_text": "Local Mode",
      "token_count": 345,
      "char_count": 1318,
      "start_char": 1967,
      "end_char": 3285,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5455454545454546,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:47.581899",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 345,
      "document_id": "ade92b851199",
      "document_name": "_qdrant_qdrant-client_2.2-local-mode",
      "source_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "source_filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "source_directory": "Docs\\Qdrant\\qdrant_qdrant-client",
      "relative_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "hierarchy_path": "Local Mode",
      "chunk_hash": "0ef7e55d8c48be83",
      "content_digest": "0ef7e55d8c48be83",
      "chunk_length": 1318,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "local",
          "client",
          "tests",
          "mode",
          "https",
          "github",
          "com",
          "blob",
          "ac6f6cd2",
          "congruence",
          "test",
          "and",
          "for",
          "async",
          "collection",
          "common",
          "query",
          "process",
          "the"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 24,
            "weight": 0.142857
          },
          {
            "term": "local",
            "tf": 15,
            "weight": 0.089286
          },
          {
            "term": "client",
            "tf": 12,
            "weight": 0.071429
          },
          {
            "term": "tests",
            "tf": 8,
            "weight": 0.047619
          },
          {
            "term": "mode",
            "tf": 6,
            "weight": 0.035714
          },
          {
            "term": "https",
            "tf": 5,
            "weight": 0.029762
          },
          {
            "term": "github",
            "tf": 5,
            "weight": 0.029762
          },
          {
            "term": "com",
            "tf": 5,
            "weight": 0.029762
          },
          {
            "term": "blob",
            "tf": 5,
            "weight": 0.029762
          },
          {
            "term": "ac6f6cd2",
            "tf": 5,
            "weight": 0.029762
          },
          {
            "term": "congruence",
            "tf": 4,
            "weight": 0.02381
          },
          {
            "term": "test",
            "tf": 4,
            "weight": 0.02381
          },
          {
            "term": "and",
            "tf": 3,
            "weight": 0.017857
          },
          {
            "term": "for",
            "tf": 3,
            "weight": 0.017857
          },
          {
            "term": "async",
            "tf": 2,
            "weight": 0.011905
          },
          {
            "term": "collection",
            "tf": 2,
            "weight": 0.011905
          },
          {
            "term": "common",
            "tf": 2,
            "weight": 0.011905
          },
          {
            "term": "query",
            "tf": 2,
            "weight": 0.011905
          },
          {
            "term": "process",
            "tf": 2,
            "weight": 0.011905
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.011905
          }
        ],
        "unique_terms": 69,
        "total_terms": 168
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Local Mode",
        "ac6f6cd2",
        "blob",
        "client",
        "com",
        "github",
        "https",
        "local",
        "mode",
        "qdrant",
        "tests"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5455454545454546,
      "overall": 0.6818484848484848
    }
  },
  {
    "text": "## Initialization  Local Mode initialization creates either `QdrantLocal` or `AsyncQdrantLocal` instances based on the provided location parameter:  **QdrantLocal Constructor** ``` ``` **Storage Modes:**  - **In-memory**: `location=\":memory:\"` - Data exists only during application lifetime - **Persistent**: `location=\"path/to/directory\"` - Data persisted to disk with SQLite storage  **Initialization Process:**  1. Set `persistent = location != \":memory:\"` 2. Initialize empty collections dictionary: `self.collections: dict[str, LocalCollection] = {}` 3. If persistent, load metadata from `meta.json` and create `LocalCollection` instances 4. Acquire file lock to prevent concurrent access 5. Load existing vector data into memory  Sources: [qdrant\\_client/local/qdrant\\_local.py51-67](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/qdrant_local.py#L51-L67) [qdrant\\_client/local/qdrant\\_local.py94-141](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/qdrant_local.py#L94-L141)",
    "metadata": {
      "chunk_id": "ade92b851199-0002",
      "source_file": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "file_extension": ".md",
      "chunk_index": 2,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Initialization"
      ],
      "heading_text": "Initialization",
      "token_count": 269,
      "char_count": 1034,
      "start_char": 3820,
      "end_char": 4854,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5508695652173913,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:47.588453",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 269,
      "document_id": "ade92b851199",
      "document_name": "_qdrant_qdrant-client_2.2-local-mode",
      "source_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "source_filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "source_directory": "Docs\\Qdrant\\qdrant_qdrant-client",
      "relative_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "hierarchy_path": "Initialization",
      "chunk_hash": "5f9bb2a3006c50ed",
      "content_digest": "5f9bb2a3006c50ed",
      "chunk_length": 1034,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "local",
          "client",
          "location",
          "memory",
          "initialization",
          "data",
          "persistent",
          "qdrantlocal",
          "instances",
          "storage",
          "collections",
          "localcollection",
          "load",
          "https",
          "github",
          "com",
          "blob",
          "ac6f6cd2",
          "mode"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 12,
            "weight": 0.101695
          },
          {
            "term": "local",
            "tf": 9,
            "weight": 0.076271
          },
          {
            "term": "client",
            "tf": 6,
            "weight": 0.050847
          },
          {
            "term": "location",
            "tf": 4,
            "weight": 0.033898
          },
          {
            "term": "memory",
            "tf": 4,
            "weight": 0.033898
          },
          {
            "term": "initialization",
            "tf": 3,
            "weight": 0.025424
          },
          {
            "term": "data",
            "tf": 3,
            "weight": 0.025424
          },
          {
            "term": "persistent",
            "tf": 3,
            "weight": 0.025424
          },
          {
            "term": "qdrantlocal",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "instances",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "storage",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "collections",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "localcollection",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "load",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "ac6f6cd2",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "mode",
            "tf": 1,
            "weight": 0.008475
          }
        ],
        "unique_terms": 71,
        "total_terms": 118
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Initialization",
        "client",
        "data",
        "initialization",
        "instances",
        "local",
        "location",
        "memory",
        "persistent",
        "qdrant",
        "qdrantlocal"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5508695652173913,
      "overall": 0.7169565217391304
    }
  },
  {
    "text": "## Storage Architecture  **QdrantLocal Data Structures** ``` ``` **LocalCollection Vector Storage:**  - `vectors: dict[str, NumpyArray]` - Dense vectors indexed by name - `sparse_vectors: dict[str, list[SparseVector]]` - Sparse vectors with indices/values - `multivectors: dict[str, list[NumpyArray]]` - Multi-vector collections - `payload: list[models.Payload]` - Point payloads indexed by internal ID - `ids: dict[ExtendedPointId, int]` - External ID to internal index mapping - `deleted: NumpyArray` - Boolean array tracking deleted points  Sources: [qdrant\\_client/local/qdrant\\_local.py51-67](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/qdrant_local.py#L51-L67) [qdrant\\_client/local/local\\_collection.py100-148](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L100-L148)",
    "metadata": {
      "chunk_id": "ade92b851199-0003",
      "source_file": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "file_extension": ".md",
      "chunk_index": 3,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Storage Architecture"
      ],
      "heading_text": "Storage Architecture",
      "token_count": 231,
      "char_count": 852,
      "start_char": 4858,
      "end_char": 5710,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5085714285714286,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:47.592348",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 231,
      "document_id": "ade92b851199",
      "document_name": "_qdrant_qdrant-client_2.2-local-mode",
      "source_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "source_filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "source_directory": "Docs\\Qdrant\\qdrant_qdrant-client",
      "relative_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "hierarchy_path": "Storage Architecture",
      "chunk_hash": "dc3c4e63f4a85a47",
      "content_digest": "dc3c4e63f4a85a47",
      "chunk_length": 852,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "local",
          "client",
          "vectors",
          "dict",
          "str",
          "numpyarray",
          "list",
          "storage",
          "vector",
          "indexed",
          "sparse",
          "payload",
          "internal",
          "deleted",
          "https",
          "github",
          "com",
          "blob",
          "ac6f6cd2"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 10,
            "weight": 0.098039
          },
          {
            "term": "local",
            "tf": 8,
            "weight": 0.078431
          },
          {
            "term": "client",
            "tf": 6,
            "weight": 0.058824
          },
          {
            "term": "vectors",
            "tf": 4,
            "weight": 0.039216
          },
          {
            "term": "dict",
            "tf": 4,
            "weight": 0.039216
          },
          {
            "term": "str",
            "tf": 3,
            "weight": 0.029412
          },
          {
            "term": "numpyarray",
            "tf": 3,
            "weight": 0.029412
          },
          {
            "term": "list",
            "tf": 3,
            "weight": 0.029412
          },
          {
            "term": "storage",
            "tf": 2,
            "weight": 0.019608
          },
          {
            "term": "vector",
            "tf": 2,
            "weight": 0.019608
          },
          {
            "term": "indexed",
            "tf": 2,
            "weight": 0.019608
          },
          {
            "term": "sparse",
            "tf": 2,
            "weight": 0.019608
          },
          {
            "term": "payload",
            "tf": 2,
            "weight": 0.019608
          },
          {
            "term": "internal",
            "tf": 2,
            "weight": 0.019608
          },
          {
            "term": "deleted",
            "tf": 2,
            "weight": 0.019608
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.019608
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.019608
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.019608
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.019608
          },
          {
            "term": "ac6f6cd2",
            "tf": 2,
            "weight": 0.019608
          }
        ],
        "unique_terms": 56,
        "total_terms": 102
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Storage Architecture",
        "client",
        "dict",
        "list",
        "local",
        "numpyarray",
        "qdrant",
        "storage",
        "str",
        "vector",
        "vectors"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5085714285714286,
      "overall": 0.7028571428571428
    }
  },
  {
    "text": "## Vector Storage Implementation  **LocalCollection Vector Type Resolution** ``` ``` **Vector Storage Details:**  - **Dense vectors**: `np.zeros((0, params.size), dtype=np.float32)` initialized per vector name - **Sparse vectors**: `list[SparseVector]` with `indices` and `values` arrays - **Multivectors**: `list[NumpyArray]` where each point can have multiple vectors - **Deleted tracking**: `deleted_per_vector: dict[str, NumpyArray]` tracks deletions per vector type  **Vector Name Resolution:**  - `DEFAULT_VECTOR_NAME = \"\"` used for anonymous vectors - `_all_vectors_keys` combines all vector type names for unified access  Sources: [qdrant\\_client/local/local\\_collection.py112-140](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L112-L140) [qdrant\\_client/local/local\\_collection.py150-169](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L150-L169) [qdrant\\_client/local/local\\_collection.py81](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L81-L81)",
    "metadata": {
      "chunk_id": "ade92b851199-0004",
      "source_file": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "file_extension": ".md",
      "chunk_index": 4,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Vector Storage Implementation"
      ],
      "heading_text": "Vector Storage Implementation",
      "token_count": 284,
      "char_count": 1099,
      "start_char": 5714,
      "end_char": 6813,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5169230769230769,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:47.599776",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 284,
      "document_id": "ade92b851199",
      "document_name": "_qdrant_qdrant-client_2.2-local-mode",
      "source_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "source_filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "source_directory": "Docs\\Qdrant\\qdrant_qdrant-client",
      "relative_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "hierarchy_path": "Vector Storage Implementation",
      "chunk_hash": "f2f5b4722d9eb4c3",
      "content_digest": "f2f5b4722d9eb4c3",
      "chunk_length": 1099,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "local",
          "vector",
          "client",
          "collection",
          "vectors",
          "type",
          "per",
          "name",
          "https",
          "github",
          "com",
          "blob",
          "ac6f6cd2",
          "storage",
          "resolution",
          "list",
          "numpyarray",
          "deleted",
          "for"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 12,
            "weight": 0.085714
          },
          {
            "term": "local",
            "tf": 12,
            "weight": 0.085714
          },
          {
            "term": "vector",
            "tf": 9,
            "weight": 0.064286
          },
          {
            "term": "client",
            "tf": 9,
            "weight": 0.064286
          },
          {
            "term": "collection",
            "tf": 6,
            "weight": 0.042857
          },
          {
            "term": "vectors",
            "tf": 5,
            "weight": 0.035714
          },
          {
            "term": "type",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "per",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "name",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "ac6f6cd2",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "storage",
            "tf": 2,
            "weight": 0.014286
          },
          {
            "term": "resolution",
            "tf": 2,
            "weight": 0.014286
          },
          {
            "term": "list",
            "tf": 2,
            "weight": 0.014286
          },
          {
            "term": "numpyarray",
            "tf": 2,
            "weight": 0.014286
          },
          {
            "term": "deleted",
            "tf": 2,
            "weight": 0.014286
          },
          {
            "term": "for",
            "tf": 2,
            "weight": 0.014286
          }
        ],
        "unique_terms": 69,
        "total_terms": 140
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Vector Storage Implementation",
        "client",
        "collection",
        "https",
        "local",
        "name",
        "per",
        "qdrant",
        "type",
        "vector",
        "vectors"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5169230769230769,
      "overall": 0.7056410256410256
    }
  },
  {
    "text": "## Storage Persistence  **File-based Persistence Architecture** ``` ``` **Persistence Components:**  - **meta.json**: Contains collection configurations and aliases - **Collection directories**: `{location}/collection/{collection_name}/` - **File locking**: Uses `portalocker` with `EXCLUSIVE|NON_BLOCKING` flags - **CollectionPersistence**: Handles SQLite-based storage per collection  **Lock File Management:** ``` ``` Sources: [qdrant\\_client/local/qdrant\\_local.py94-141](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/qdrant_local.py#L94-L141) [qdrant\\_client/local/local\\_collection.py143-148](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L143-L148) [qdrant\\_client/local/local\\_collection.py204-280](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L204-L280)  **Data Loading Process:**  1. `_load()` reads `meta.json` and creates collections 2. `load_vectors()` populates in-memory data structures from disk 3. Vector data organized by type: dense, sparse, and multivectors 4. Payload and ID mappings loaded into list and dictionary structures",
    "metadata": {
      "chunk_id": "ade92b851199-0005",
      "source_file": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "file_extension": ".md",
      "chunk_index": 5,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Storage Persistence"
      ],
      "heading_text": "Storage Persistence",
      "token_count": 293,
      "char_count": 1172,
      "start_char": 6817,
      "end_char": 7989,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5364285714285714,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:47.607126",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 293,
      "document_id": "ade92b851199",
      "document_name": "_qdrant_qdrant-client_2.2-local-mode",
      "source_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "source_filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "source_directory": "Docs\\Qdrant\\qdrant_qdrant-client",
      "relative_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "hierarchy_path": "Storage Persistence",
      "chunk_hash": "b982ff47e825c7c7",
      "content_digest": "b982ff47e825c7c7",
      "chunk_length": 1172,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "local",
          "collection",
          "client",
          "and",
          "persistence",
          "file",
          "https",
          "github",
          "com",
          "blob",
          "ac6f6cd2",
          "data",
          "storage",
          "based",
          "meta",
          "json",
          "load",
          "structures",
          "architecture"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 14,
            "weight": 0.098592
          },
          {
            "term": "local",
            "tf": 12,
            "weight": 0.084507
          },
          {
            "term": "collection",
            "tf": 9,
            "weight": 0.06338
          },
          {
            "term": "client",
            "tf": 9,
            "weight": 0.06338
          },
          {
            "term": "and",
            "tf": 5,
            "weight": 0.035211
          },
          {
            "term": "persistence",
            "tf": 3,
            "weight": 0.021127
          },
          {
            "term": "file",
            "tf": 3,
            "weight": 0.021127
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.021127
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.021127
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.021127
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.021127
          },
          {
            "term": "ac6f6cd2",
            "tf": 3,
            "weight": 0.021127
          },
          {
            "term": "data",
            "tf": 3,
            "weight": 0.021127
          },
          {
            "term": "storage",
            "tf": 2,
            "weight": 0.014085
          },
          {
            "term": "based",
            "tf": 2,
            "weight": 0.014085
          },
          {
            "term": "meta",
            "tf": 2,
            "weight": 0.014085
          },
          {
            "term": "json",
            "tf": 2,
            "weight": 0.014085
          },
          {
            "term": "load",
            "tf": 2,
            "weight": 0.014085
          },
          {
            "term": "structures",
            "tf": 2,
            "weight": 0.014085
          },
          {
            "term": "architecture",
            "tf": 1,
            "weight": 0.007042
          }
        ],
        "unique_terms": 76,
        "total_terms": 142
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Storage Persistence",
        "and",
        "client",
        "collection",
        "com",
        "file",
        "github",
        "https",
        "local",
        "persistence",
        "qdrant"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5364285714285714,
      "overall": 0.7121428571428571
    }
  },
  {
    "text": "## Performance Considerations  **Size Thresholds:**  - `LARGE_DATA_THRESHOLD = 20_000` points triggers performance warnings - `LocalCollection.LARGE_DATA_THRESHOLD = 20_000` used for collection-level warnings  **Warning Implementation:** ``` ``` **Performance Characteristics:**  - All data stored in memory for fast access - No indexing structures (HNSW, etc.) - uses brute force search - Suitable for development, testing, and small datasets - Payload filtering uses `calculate_payload_mask()` for each query  Sources: [qdrant\\_client/local/qdrant\\_local.py49](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/qdrant_local.py#L49-L49) [qdrant\\_client/local/qdrant\\_local.py114-123](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/qdrant_local.py#L114-L123) [qdrant\\_client/local/local\\_collection.py98](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L98-L98)",
    "metadata": {
      "chunk_id": "ade92b851199-0006",
      "source_file": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "file_extension": ".md",
      "chunk_index": 6,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Performance Considerations"
      ],
      "heading_text": "Performance Considerations",
      "token_count": 253,
      "char_count": 958,
      "start_char": 7995,
      "end_char": 8953,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5228358208955224,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:47.613647",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 253,
      "document_id": "ade92b851199",
      "document_name": "_qdrant_qdrant-client_2.2-local-mode",
      "source_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "source_filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "source_directory": "Docs\\Qdrant\\qdrant_qdrant-client",
      "relative_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "hierarchy_path": "Performance Considerations",
      "chunk_hash": "ff92aed7c2b37123",
      "content_digest": "ff92aed7c2b37123",
      "chunk_length": 958,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "local",
          "client",
          "for",
          "performance",
          "data",
          "collection",
          "https",
          "github",
          "com",
          "blob",
          "ac6f6cd2",
          "large",
          "threshold",
          "000",
          "warnings",
          "uses",
          "payload",
          "l49",
          "l98"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 16,
            "weight": 0.131148
          },
          {
            "term": "local",
            "tf": 12,
            "weight": 0.098361
          },
          {
            "term": "client",
            "tf": 9,
            "weight": 0.07377
          },
          {
            "term": "for",
            "tf": 4,
            "weight": 0.032787
          },
          {
            "term": "performance",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "data",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "collection",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "ac6f6cd2",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "large",
            "tf": 2,
            "weight": 0.016393
          },
          {
            "term": "threshold",
            "tf": 2,
            "weight": 0.016393
          },
          {
            "term": "000",
            "tf": 2,
            "weight": 0.016393
          },
          {
            "term": "warnings",
            "tf": 2,
            "weight": 0.016393
          },
          {
            "term": "uses",
            "tf": 2,
            "weight": 0.016393
          },
          {
            "term": "payload",
            "tf": 2,
            "weight": 0.016393
          },
          {
            "term": "l49",
            "tf": 2,
            "weight": 0.016393
          },
          {
            "term": "l98",
            "tf": 2,
            "weight": 0.016393
          }
        ],
        "unique_terms": 61,
        "total_terms": 122
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Performance Considerations",
        "client",
        "collection",
        "com",
        "data",
        "for",
        "github",
        "https",
        "local",
        "performance",
        "qdrant"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5228358208955224,
      "overall": 0.7076119402985075
    }
  },
  {
    "text": "## Search and Retrieval  **LocalCollection Search Implementation** ``` ``` **Search Method Signature:** ``` ``` **Query Processing Flow:**  1. `_resolve_query_vector_name()` determines vector type and name 2. Distance calculation based on vector type (dense/sparse/multi) 3. `_payload_and_non_deleted_mask()` applies filters 4. Results sorted by score and limited 5. `ScoredPoint` objects constructed with payload and vectors  Sources: [qdrant\\_client/local/local\\_collection.py533-701](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L533-L701) [qdrant\\_client/local/local\\_collection.py282-332](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L282-L332) [qdrant\\_client/local/local\\_collection.py499-523](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/local_collection.py#L499-L523)",
    "metadata": {
      "chunk_id": "ade92b851199-0007",
      "source_file": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "file_extension": ".md",
      "chunk_index": 7,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Search and Retrieval"
      ],
      "heading_text": "Search and Retrieval",
      "token_count": 236,
      "char_count": 903,
      "start_char": 8957,
      "end_char": 9860,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5409090909090909,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:47.617727",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 236,
      "document_id": "ade92b851199",
      "document_name": "_qdrant_qdrant-client_2.2-local-mode",
      "source_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "source_filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "source_directory": "Docs\\Qdrant\\qdrant_qdrant-client",
      "relative_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "hierarchy_path": "Search and Retrieval",
      "chunk_hash": "25fc22f844a9e849",
      "content_digest": "25fc22f844a9e849",
      "chunk_length": 903,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "local",
          "client",
          "collection",
          "and",
          "search",
          "vector",
          "https",
          "github",
          "com",
          "blob",
          "ac6f6cd2",
          "query",
          "name",
          "type",
          "payload",
          "retrieval",
          "localcollection",
          "implementation",
          "method"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 12,
            "weight": 0.104348
          },
          {
            "term": "local",
            "tf": 12,
            "weight": 0.104348
          },
          {
            "term": "client",
            "tf": 9,
            "weight": 0.078261
          },
          {
            "term": "collection",
            "tf": 6,
            "weight": 0.052174
          },
          {
            "term": "and",
            "tf": 5,
            "weight": 0.043478
          },
          {
            "term": "search",
            "tf": 3,
            "weight": 0.026087
          },
          {
            "term": "vector",
            "tf": 3,
            "weight": 0.026087
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.026087
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.026087
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.026087
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.026087
          },
          {
            "term": "ac6f6cd2",
            "tf": 3,
            "weight": 0.026087
          },
          {
            "term": "query",
            "tf": 2,
            "weight": 0.017391
          },
          {
            "term": "name",
            "tf": 2,
            "weight": 0.017391
          },
          {
            "term": "type",
            "tf": 2,
            "weight": 0.017391
          },
          {
            "term": "payload",
            "tf": 2,
            "weight": 0.017391
          },
          {
            "term": "retrieval",
            "tf": 1,
            "weight": 0.008696
          },
          {
            "term": "localcollection",
            "tf": 1,
            "weight": 0.008696
          },
          {
            "term": "implementation",
            "tf": 1,
            "weight": 0.008696
          },
          {
            "term": "method",
            "tf": 1,
            "weight": 0.008696
          }
        ],
        "unique_terms": 58,
        "total_terms": 115
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Search and Retrieval",
        "and",
        "client",
        "collection",
        "com",
        "github",
        "https",
        "local",
        "qdrant",
        "search",
        "vector"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5409090909090909,
      "overall": 0.6803030303030303
    }
  },
  {
    "text": "## Feature Parity with Remote Mode  **Implemented Operations in QdrantLocal:**  | Operation Category    | Methods                                                                                                        | Implementation Status | | --------------------- | -------------------------------------------------------------------------------------------------------------- | --------------------- | | Collection Management | `create_collection()`, `delete_collection()`, `get_collection()`, `collection_exists()`, `update_collection()` | ✅ Full                | | Point Operations      | `upsert()`, `delete()`, `retrieve()`, `update_vectors()`, `delete_vectors()`                                   | ✅ Full                | | Search Operations     | `search()`, `search_batch()`, `search_groups()`, `search_matrix_*()`                                           | ✅ Full                | | Advanced Search       | `query_points()`, `query_batch_points()`, `query_points_groups()`                                              | ✅ Full                | | Recommendation        | `recommend()`, `recommend_batch()`, `recommend_groups()`                                                       | ✅ Full                | | Discovery             | `discover()`, `discover_batch()`                                                                               | ✅ Full                | | Payload Operations    | `set_payload()`, `overwrite_payload()`, `delete_payload()`, `clear_payload()`                                  | ✅ Full                | | Aliases               | `update_collection_aliases()`, `get_aliases()`, `get_collection_aliases()`                                     | ✅ Full                | | Pagination            | `scroll()`, `count()`, `facet()`                                                                               | ✅ Full                | | Batch Operations      | `batch_update_points()`                                                                                        | ✅ Full                |  **Unsupported Operations:**  - Payload indexes: `create_payload_index()`, `delete_payload_index()` (warnings only) - Snapshots: All snapshot operations raise `NotImplementedError` - Sharding: `create_shard_key()`, `delete_shard_key()` raise `NotImplementedError` - Locks: `lock_storage()`, `unlock_storage()` raise `NotImplementedError`  **Congruence Testing:** Tests in `test_query.py` verify identical behavior between local and remote modes using `compare_client_results()` function. Sources: [qdrant\\_client/local/qdrant\\_local.py773-1165](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/qdrant_local.py#L773-L1165) [tests/congruence\\_tests/test\\_query.py804-826](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/tests/congruence_tests/test_query.py#L804-L826)",
    "metadata": {
      "chunk_id": "ade92b851199-0008",
      "source_file": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "file_extension": ".md",
      "chunk_index": 8,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Feature Parity with Remote Mode"
      ],
      "heading_text": "Feature Parity with Remote Mode",
      "token_count": 522,
      "char_count": 2832,
      "start_char": 9866,
      "end_char": 12698,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.6648351648351649,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:47.635907",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 522,
      "document_id": "ade92b851199",
      "document_name": "_qdrant_qdrant-client_2.2-local-mode",
      "source_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "source_filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "source_directory": "Docs\\Qdrant\\qdrant_qdrant-client",
      "relative_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "hierarchy_path": "Feature Parity with Remote Mode",
      "chunk_hash": "6b0aef0b0d40b58f",
      "content_digest": "6b0aef0b0d40b58f",
      "chunk_length": 2832,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "full",
          "collection",
          "payload",
          "qdrant",
          "operations",
          "delete",
          "search",
          "batch",
          "query",
          "tests",
          "local",
          "client",
          "update",
          "points",
          "aliases",
          "create",
          "get",
          "groups",
          "recommend",
          "raise"
        ],
        "term_weights": [
          {
            "term": "full",
            "tf": 10,
            "weight": 0.050505
          },
          {
            "term": "collection",
            "tf": 8,
            "weight": 0.040404
          },
          {
            "term": "payload",
            "tf": 8,
            "weight": 0.040404
          },
          {
            "term": "qdrant",
            "tf": 8,
            "weight": 0.040404
          },
          {
            "term": "operations",
            "tf": 7,
            "weight": 0.035354
          },
          {
            "term": "delete",
            "tf": 6,
            "weight": 0.030303
          },
          {
            "term": "search",
            "tf": 6,
            "weight": 0.030303
          },
          {
            "term": "batch",
            "tf": 6,
            "weight": 0.030303
          },
          {
            "term": "query",
            "tf": 6,
            "weight": 0.030303
          },
          {
            "term": "tests",
            "tf": 5,
            "weight": 0.025253
          },
          {
            "term": "local",
            "tf": 5,
            "weight": 0.025253
          },
          {
            "term": "client",
            "tf": 5,
            "weight": 0.025253
          },
          {
            "term": "update",
            "tf": 4,
            "weight": 0.020202
          },
          {
            "term": "points",
            "tf": 4,
            "weight": 0.020202
          },
          {
            "term": "aliases",
            "tf": 4,
            "weight": 0.020202
          },
          {
            "term": "create",
            "tf": 3,
            "weight": 0.015152
          },
          {
            "term": "get",
            "tf": 3,
            "weight": 0.015152
          },
          {
            "term": "groups",
            "tf": 3,
            "weight": 0.015152
          },
          {
            "term": "recommend",
            "tf": 3,
            "weight": 0.015152
          },
          {
            "term": "raise",
            "tf": 3,
            "weight": 0.015152
          }
        ],
        "unique_terms": 93,
        "total_terms": 198
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Feature Parity with Remote Mode",
        "batch",
        "collection",
        "delete",
        "full",
        "operations",
        "payload",
        "qdrant",
        "query",
        "search",
        "tests"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.6648351648351649,
      "overall": 0.7882783882783881
    }
  },
  {
    "text": "## Concurrency and Threading  **File Locking Mechanism:** ``` ``` **SQLite Thread Safety:**  - Default: SQLite connections use `check_same_thread=True` - Override: `force_disable_check_same_thread=True` parameter - Passed to: `CollectionPersistence(location, force_disable_check_same_thread)`  **Concurrency Limitations:**  - **Process-level**: File locking prevents multiple processes from accessing same directory - **Thread-level**: Single SQLite connection per collection, optional thread check bypass - **Recommended**: Use Qdrant server for multi-user/multi-process scenarios  **Error Handling:** ``` ``` Sources: [qdrant\\_client/local/qdrant\\_local.py126-141](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/qdrant_local.py#L126-L141) [qdrant\\_client/local/qdrant\\_local.py51-67](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/qdrant_local.py#L51-L67)",
    "metadata": {
      "chunk_id": "ade92b851199-0009",
      "source_file": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "file_extension": ".md",
      "chunk_index": 9,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Concurrency and Threading"
      ],
      "heading_text": "Concurrency and Threading",
      "token_count": 224,
      "char_count": 911,
      "start_char": 12701,
      "end_char": 13612,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5354545454545454,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:47.643446",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 224,
      "document_id": "ade92b851199",
      "document_name": "_qdrant_qdrant-client_2.2-local-mode",
      "source_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "source_filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "source_directory": "Docs\\Qdrant\\qdrant_qdrant-client",
      "relative_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "hierarchy_path": "Concurrency and Threading",
      "chunk_hash": "02392f2cc9896d77",
      "content_digest": "02392f2cc9896d77",
      "chunk_length": 911,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "local",
          "thread",
          "client",
          "check",
          "same",
          "sqlite",
          "concurrency",
          "file",
          "locking",
          "use",
          "true",
          "force",
          "disable",
          "process",
          "level",
          "multi",
          "https",
          "github",
          "com"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 13,
            "weight": 0.115044
          },
          {
            "term": "local",
            "tf": 8,
            "weight": 0.070796
          },
          {
            "term": "thread",
            "tf": 6,
            "weight": 0.053097
          },
          {
            "term": "client",
            "tf": 6,
            "weight": 0.053097
          },
          {
            "term": "check",
            "tf": 4,
            "weight": 0.035398
          },
          {
            "term": "same",
            "tf": 4,
            "weight": 0.035398
          },
          {
            "term": "sqlite",
            "tf": 3,
            "weight": 0.026549
          },
          {
            "term": "concurrency",
            "tf": 2,
            "weight": 0.017699
          },
          {
            "term": "file",
            "tf": 2,
            "weight": 0.017699
          },
          {
            "term": "locking",
            "tf": 2,
            "weight": 0.017699
          },
          {
            "term": "use",
            "tf": 2,
            "weight": 0.017699
          },
          {
            "term": "true",
            "tf": 2,
            "weight": 0.017699
          },
          {
            "term": "force",
            "tf": 2,
            "weight": 0.017699
          },
          {
            "term": "disable",
            "tf": 2,
            "weight": 0.017699
          },
          {
            "term": "process",
            "tf": 2,
            "weight": 0.017699
          },
          {
            "term": "level",
            "tf": 2,
            "weight": 0.017699
          },
          {
            "term": "multi",
            "tf": 2,
            "weight": 0.017699
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.017699
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.017699
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.017699
          }
        ],
        "unique_terms": 61,
        "total_terms": 113
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Concurrency and Threading",
        "check",
        "client",
        "concurrency",
        "file",
        "local",
        "locking",
        "qdrant",
        "same",
        "sqlite",
        "thread"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5354545454545454,
      "overall": 0.7451515151515151
    }
  },
  {
    "text": "## Async Implementation  **AsyncQdrantLocal Class:** ``` ``` **Async vs Sync Implementation:**  - **Shared**: Both use the same `LocalCollection` class for actual operations - **Difference**: Async methods have `async def` signatures and `await` keywords - **Persistence**: Same file locking and SQLite mechanisms - **Performance**: No actual async I/O benefits since operations are in-memory  **Method Signatures:** ``` ``` **Usage Pattern:** ``` ``` Sources: [qdrant\\_client/local/async\\_qdrant\\_local.py38-67](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/async_qdrant_local.py#L38-L67) [qdrant\\_client/local/async\\_qdrant\\_local.py179-207](https://github.com/qdrant/qdrant-client/blob/ac6f6cd2/qdrant_client/local/async_qdrant_local.py#L179-L207)",
    "metadata": {
      "chunk_id": "ade92b851199-0010",
      "source_file": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "file_extension": ".md",
      "chunk_index": 10,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Async Implementation"
      ],
      "heading_text": "Async Implementation",
      "token_count": 207,
      "char_count": 778,
      "start_char": 13618,
      "end_char": 14396,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5233333333333333,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:47.648250",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 207,
      "document_id": "ade92b851199",
      "document_name": "_qdrant_qdrant-client_2.2-local-mode",
      "source_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "source_filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "source_directory": "Docs\\Qdrant\\qdrant_qdrant-client",
      "relative_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "hierarchy_path": "Async Implementation",
      "chunk_hash": "74535929ad73f1e9",
      "content_digest": "74535929ad73f1e9",
      "chunk_length": 778,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "qdrant",
          "async",
          "local",
          "client",
          "implementation",
          "class",
          "same",
          "actual",
          "operations",
          "signatures",
          "and",
          "https",
          "github",
          "com",
          "blob",
          "ac6f6cd2",
          "asyncqdrantlocal",
          "sync",
          "shared",
          "both"
        ],
        "term_weights": [
          {
            "term": "qdrant",
            "tf": 12,
            "weight": 0.12766
          },
          {
            "term": "async",
            "tf": 9,
            "weight": 0.095745
          },
          {
            "term": "local",
            "tf": 8,
            "weight": 0.085106
          },
          {
            "term": "client",
            "tf": 6,
            "weight": 0.06383
          },
          {
            "term": "implementation",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "class",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "same",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "actual",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "operations",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "signatures",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "and",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "ac6f6cd2",
            "tf": 2,
            "weight": 0.021277
          },
          {
            "term": "asyncqdrantlocal",
            "tf": 1,
            "weight": 0.010638
          },
          {
            "term": "sync",
            "tf": 1,
            "weight": 0.010638
          },
          {
            "term": "shared",
            "tf": 1,
            "weight": 0.010638
          },
          {
            "term": "both",
            "tf": 1,
            "weight": 0.010638
          }
        ],
        "unique_terms": 51,
        "total_terms": 94
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Async Implementation",
        "actual",
        "async",
        "class",
        "client",
        "implementation",
        "local",
        "operations",
        "qdrant",
        "same",
        "signatures"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5233333333333333,
      "overall": 0.7077777777777777
    }
  },
  {
    "text": "### On this page  - [Local Mode](#local-mode.md) - [Architecture Overview](#architecture-overview.md) - [Initialization](#initialization.md) - [Storage Architecture](#storage-architecture.md) - [Vector Storage Implementation](#vector-storage-implementation.md) - [Storage Persistence](#storage-persistence.md) - [Performance Considerations](#performance-considerations.md) - [Search and Retrieval](#search-and-retrieval.md) - [Feature Parity with Remote Mode](#feature-parity-with-remote-mode.md) - [Concurrency and Threading](#concurrency-and-threading.md) - [Async Implementation](#async-implementation.md) - [When to Use Local Mode vs Remote Mode](#when-to-use-local-mode-vs-remote-mode.md) - [Conclusion](#conclusion.md)",
    "metadata": {
      "chunk_id": "ade92b851199-0013",
      "source_file": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "file_extension": ".md",
      "chunk_index": 13,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "On this page"
      ],
      "heading_text": "On this page",
      "token_count": 175,
      "char_count": 724,
      "start_char": 15679,
      "end_char": 16403,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5050943396226415,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:47.654338",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 175,
      "document_id": "ade92b851199",
      "document_name": "_qdrant_qdrant-client_2.2-local-mode",
      "source_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "source_filename": "_qdrant_qdrant-client_2.2-local-mode.md",
      "source_directory": "Docs\\Qdrant\\qdrant_qdrant-client",
      "relative_path": "Docs\\Qdrant\\qdrant_qdrant-client\\_qdrant_qdrant-client_2.2-local-mode.md",
      "hierarchy_path": "On this page",
      "chunk_hash": "8841923b38b4f026",
      "content_digest": "8841923b38b4f026",
      "chunk_length": 724,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "mode",
          "storage",
          "local",
          "architecture",
          "implementation",
          "and",
          "remote",
          "overview",
          "initialization",
          "vector",
          "persistence",
          "performance",
          "considerations",
          "search",
          "retrieval",
          "feature",
          "parity",
          "with",
          "concurrency",
          "threading"
        ],
        "term_weights": [
          {
            "term": "mode",
            "tf": 8,
            "weight": 0.114286
          },
          {
            "term": "storage",
            "tf": 6,
            "weight": 0.085714
          },
          {
            "term": "local",
            "tf": 4,
            "weight": 0.057143
          },
          {
            "term": "architecture",
            "tf": 4,
            "weight": 0.057143
          },
          {
            "term": "implementation",
            "tf": 4,
            "weight": 0.057143
          },
          {
            "term": "and",
            "tf": 4,
            "weight": 0.057143
          },
          {
            "term": "remote",
            "tf": 4,
            "weight": 0.057143
          },
          {
            "term": "overview",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "initialization",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "vector",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "persistence",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "performance",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "considerations",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "search",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "retrieval",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "feature",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "parity",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "with",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "concurrency",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "threading",
            "tf": 2,
            "weight": 0.028571
          }
        ],
        "unique_terms": 26,
        "total_terms": 70
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "On this page",
        "and",
        "architecture",
        "implementation",
        "initialization",
        "local",
        "mode",
        "overview",
        "remote",
        "storage",
        "vector"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5050943396226415,
      "overall": 0.6683647798742139
    }
  }
]