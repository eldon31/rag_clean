[
  {
    "text": "# Late Interaction Models  Relevant source files  - [fastembed/late\\_interaction/colbert.py](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py) - [fastembed/late\\_interaction/jina\\_colbert.py](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/jina_colbert.py) - [fastembed/late\\_interaction/late\\_interaction\\_embedding\\_base.py](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/late_interaction_embedding_base.py) - [fastembed/late\\_interaction/late\\_interaction\\_text\\_embedding.py](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/late_interaction_text_embedding.py) - [fastembed/sparse/utils/tokenizer.py](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/utils/tokenizer.py)  This page documents the Late Interaction Models in FastEmbed, which provide a specialized approach to text embeddings that differs from the standard dense embedding methods covered in [Dense Text Embeddings](qdrant/fastembed/5.1-dense-text-embeddings.md) and sparse embeddings described in [Sparse Text Embeddings](qdrant/fastembed/5.2-sparse-text-embeddings.md). Late interaction models generate token-level embeddings rather than a single vector per document, preserving word-level semantics for more precise matching during retrieval. This approach enables a finer-grained comparison between queries and documents at search time.",
    "metadata": {
      "chunk_id": "fbbf4fbc1db4-0000",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "file_extension": ".md",
      "chunk_index": 0,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Late Interaction Models"
      ],
      "heading_text": "Late Interaction Models",
      "token_count": 332,
      "char_count": 1451,
      "start_char": 2287,
      "end_char": 3738,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5229333333333334,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.367646",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 332,
      "document_id": "fbbf4fbc1db4",
      "document_name": "_qdrant_fastembed_5.3-late-interaction-models",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "hierarchy_path": "Late Interaction Models",
      "chunk_hash": "a2b5e4950d79b9b5",
      "content_digest": "a2b5e4950d79b9b5",
      "chunk_length": 1451,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "fastembed",
          "late",
          "interaction",
          "qdrant",
          "text",
          "embeddings",
          "https",
          "github",
          "com",
          "blob",
          "b785640b",
          "embedding",
          "sparse",
          "colbert",
          "models",
          "dense",
          "jina",
          "base",
          "utils",
          "tokenizer"
        ],
        "term_weights": [
          {
            "term": "fastembed",
            "tf": 18,
            "weight": 0.104046
          },
          {
            "term": "late",
            "tf": 15,
            "weight": 0.086705
          },
          {
            "term": "interaction",
            "tf": 15,
            "weight": 0.086705
          },
          {
            "term": "qdrant",
            "tf": 7,
            "weight": 0.040462
          },
          {
            "term": "text",
            "tf": 7,
            "weight": 0.040462
          },
          {
            "term": "embeddings",
            "tf": 7,
            "weight": 0.040462
          },
          {
            "term": "https",
            "tf": 5,
            "weight": 0.028902
          },
          {
            "term": "github",
            "tf": 5,
            "weight": 0.028902
          },
          {
            "term": "com",
            "tf": 5,
            "weight": 0.028902
          },
          {
            "term": "blob",
            "tf": 5,
            "weight": 0.028902
          },
          {
            "term": "b785640b",
            "tf": 5,
            "weight": 0.028902
          },
          {
            "term": "embedding",
            "tf": 5,
            "weight": 0.028902
          },
          {
            "term": "sparse",
            "tf": 5,
            "weight": 0.028902
          },
          {
            "term": "colbert",
            "tf": 4,
            "weight": 0.023121
          },
          {
            "term": "models",
            "tf": 3,
            "weight": 0.017341
          },
          {
            "term": "dense",
            "tf": 3,
            "weight": 0.017341
          },
          {
            "term": "jina",
            "tf": 2,
            "weight": 0.011561
          },
          {
            "term": "base",
            "tf": 2,
            "weight": 0.011561
          },
          {
            "term": "utils",
            "tf": 2,
            "weight": 0.011561
          },
          {
            "term": "tokenizer",
            "tf": 2,
            "weight": 0.011561
          }
        ],
        "unique_terms": 65,
        "total_terms": 173
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Late Interaction Models",
        "blob",
        "com",
        "embeddings",
        "fastembed",
        "github",
        "https",
        "interaction",
        "late",
        "qdrant",
        "text"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5229333333333334,
      "overall": 0.6743111111111112
    }
  },
  {
    "text": "## Overview of Late Interaction Models  Late interaction models, like ColBERT, create separate embeddings for each token in a document or query rather than pooling them into a single vector. This approach allows the model to perform \"late interaction\" - comparing query and document token embeddings at retrieval time rather than comparing single document/query vectors. ``` ``` Sources: [fastembed/late\\_interaction/late\\_interaction\\_embedding\\_base.py8-60](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/late_interaction_embedding_base.py#L8-L60) [fastembed/late\\_interaction/colbert.py39-65](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py#L39-L65)",
    "metadata": {
      "chunk_id": "fbbf4fbc1db4-0001",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "file_extension": ".md",
      "chunk_index": 1,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Overview of Late Interaction Models"
      ],
      "heading_text": "Overview of Late Interaction Models",
      "token_count": 163,
      "char_count": 722,
      "start_char": 3741,
      "end_char": 4463,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.53,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.369575",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 163,
      "document_id": "fbbf4fbc1db4",
      "document_name": "_qdrant_fastembed_5.3-late-interaction-models",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "hierarchy_path": "Overview of Late Interaction Models",
      "chunk_hash": "f70dd3438ade54a0",
      "content_digest": "f70dd3438ade54a0",
      "chunk_length": 722,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "late",
          "interaction",
          "fastembed",
          "colbert",
          "document",
          "query",
          "models",
          "embeddings",
          "token",
          "rather",
          "than",
          "single",
          "comparing",
          "embedding",
          "base",
          "https",
          "github",
          "com",
          "qdrant",
          "blob"
        ],
        "term_weights": [
          {
            "term": "late",
            "tf": 9,
            "weight": 0.101124
          },
          {
            "term": "interaction",
            "tf": 9,
            "weight": 0.101124
          },
          {
            "term": "fastembed",
            "tf": 6,
            "weight": 0.067416
          },
          {
            "term": "colbert",
            "tf": 3,
            "weight": 0.033708
          },
          {
            "term": "document",
            "tf": 3,
            "weight": 0.033708
          },
          {
            "term": "query",
            "tf": 3,
            "weight": 0.033708
          },
          {
            "term": "models",
            "tf": 2,
            "weight": 0.022472
          },
          {
            "term": "embeddings",
            "tf": 2,
            "weight": 0.022472
          },
          {
            "term": "token",
            "tf": 2,
            "weight": 0.022472
          },
          {
            "term": "rather",
            "tf": 2,
            "weight": 0.022472
          },
          {
            "term": "than",
            "tf": 2,
            "weight": 0.022472
          },
          {
            "term": "single",
            "tf": 2,
            "weight": 0.022472
          },
          {
            "term": "comparing",
            "tf": 2,
            "weight": 0.022472
          },
          {
            "term": "embedding",
            "tf": 2,
            "weight": 0.022472
          },
          {
            "term": "base",
            "tf": 2,
            "weight": 0.022472
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.022472
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.022472
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.022472
          },
          {
            "term": "qdrant",
            "tf": 2,
            "weight": 0.022472
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.022472
          }
        ],
        "unique_terms": 47,
        "total_terms": 89
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Overview of Late Interaction Models",
        "colbert",
        "document",
        "embeddings",
        "fastembed",
        "interaction",
        "late",
        "models",
        "query",
        "rather",
        "token"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.53,
      "overall": 0.71
    }
  },
  {
    "text": "## Architecture  The late interaction models in FastEmbed are organized in a hierarchical structure: ``` ``` Sources: [fastembed/late\\_interaction/late\\_interaction\\_embedding\\_base.py8-60](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/late_interaction_embedding_base.py#L8-L60) [fastembed/late\\_interaction/late\\_interaction\\_text\\_embedding.py14-119](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/late_interaction_text_embedding.py#L14-L119) [fastembed/late\\_interaction/colbert.py39-255](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py#L39-L255) [fastembed/late\\_interaction/jina\\_colbert.py21-58](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/jina_colbert.py#L21-L58)  The main classes are:  1. **LateInteractionTextEmbeddingBase**: The abstract base class that defines the interface for late interaction models. 2. **LateInteractionTextEmbedding**: A facade class that selects the appropriate implementation based on the model name. 3. **Colbert**: Implementation of the ColBERT model. 4. **JinaColbert**: Extension of the ColBERT model with Jina-specific enhancements.",
    "metadata": {
      "chunk_id": "fbbf4fbc1db4-0002",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "file_extension": ".md",
      "chunk_index": 2,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Architecture"
      ],
      "heading_text": "Architecture",
      "token_count": 304,
      "char_count": 1207,
      "start_char": 4467,
      "end_char": 5674,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.515143661971831,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.371727",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 304,
      "document_id": "fbbf4fbc1db4",
      "document_name": "_qdrant_fastembed_5.3-late-interaction-models",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "hierarchy_path": "Architecture",
      "chunk_hash": "20b4e3d73cc0e0cf",
      "content_digest": "20b4e3d73cc0e0cf",
      "chunk_length": 1207,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "late",
          "interaction",
          "fastembed",
          "the",
          "colbert",
          "embedding",
          "https",
          "github",
          "com",
          "qdrant",
          "blob",
          "b785640b",
          "base",
          "jina",
          "model",
          "models",
          "are",
          "text",
          "class",
          "that"
        ],
        "term_weights": [
          {
            "term": "late",
            "tf": 14,
            "weight": 0.099291
          },
          {
            "term": "interaction",
            "tf": 14,
            "weight": 0.099291
          },
          {
            "term": "fastembed",
            "tf": 13,
            "weight": 0.092199
          },
          {
            "term": "the",
            "tf": 8,
            "weight": 0.056738
          },
          {
            "term": "colbert",
            "tf": 7,
            "weight": 0.049645
          },
          {
            "term": "embedding",
            "tf": 4,
            "weight": 0.028369
          },
          {
            "term": "https",
            "tf": 4,
            "weight": 0.028369
          },
          {
            "term": "github",
            "tf": 4,
            "weight": 0.028369
          },
          {
            "term": "com",
            "tf": 4,
            "weight": 0.028369
          },
          {
            "term": "qdrant",
            "tf": 4,
            "weight": 0.028369
          },
          {
            "term": "blob",
            "tf": 4,
            "weight": 0.028369
          },
          {
            "term": "b785640b",
            "tf": 4,
            "weight": 0.028369
          },
          {
            "term": "base",
            "tf": 3,
            "weight": 0.021277
          },
          {
            "term": "jina",
            "tf": 3,
            "weight": 0.021277
          },
          {
            "term": "model",
            "tf": 3,
            "weight": 0.021277
          },
          {
            "term": "models",
            "tf": 2,
            "weight": 0.014184
          },
          {
            "term": "are",
            "tf": 2,
            "weight": 0.014184
          },
          {
            "term": "text",
            "tf": 2,
            "weight": 0.014184
          },
          {
            "term": "class",
            "tf": 2,
            "weight": 0.014184
          },
          {
            "term": "that",
            "tf": 2,
            "weight": 0.014184
          }
        ],
        "unique_terms": 57,
        "total_terms": 141
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Architecture",
        "colbert",
        "com",
        "embedding",
        "fastembed",
        "github",
        "https",
        "interaction",
        "late",
        "qdrant",
        "the"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.515143661971831,
      "overall": 0.7050478873239436
    }
  },
  {
    "text": "## Implementation Details",
    "metadata": {
      "chunk_id": "fbbf4fbc1db4-0004",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "file_extension": ".md",
      "chunk_index": 4,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Implementation Details"
      ],
      "heading_text": "Implementation Details",
      "token_count": 3,
      "char_count": 25,
      "start_char": 6949,
      "end_char": 6974,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.373123",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 3,
      "document_id": "fbbf4fbc1db4",
      "document_name": "_qdrant_fastembed_5.3-late-interaction-models",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "hierarchy_path": "Implementation Details",
      "chunk_hash": "812a10c977ea5550",
      "content_digest": "812a10c977ea5550",
      "chunk_length": 25,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "implementation",
          "details"
        ],
        "term_weights": [
          {
            "term": "implementation",
            "tf": 1,
            "weight": 0.5
          },
          {
            "term": "details",
            "tf": 1,
            "weight": 0.5
          }
        ],
        "unique_terms": 2,
        "total_terms": 2
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Implementation Details",
        "details",
        "implementation"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "overall": 0.7633333333333333
    }
  },
  {
    "text": "### ColBERT Processing Flow  The ColBERT and JinaColBERT models implement a specific processing flow for queries and documents: ``` ``` Sources: [fastembed/late\\_interaction/colbert.py45-65](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py#L45-L65) [fastembed/late\\_interaction/colbert.py67-77](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py#L67-L77) [fastembed/late\\_interaction/colbert.py79-108](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py#L79-L108)",
    "metadata": {
      "chunk_id": "fbbf4fbc1db4-0005",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "file_extension": ".md",
      "chunk_index": 5,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "ColBERT Processing Flow"
      ],
      "heading_text": "ColBERT Processing Flow",
      "token_count": 161,
      "char_count": 575,
      "start_char": 6976,
      "end_char": 7551,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5275,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.373953",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 161,
      "document_id": "fbbf4fbc1db4",
      "document_name": "_qdrant_fastembed_5.3-late-interaction-models",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "hierarchy_path": "ColBERT Processing Flow",
      "chunk_hash": "0d985a7b937e78a4",
      "content_digest": "0d985a7b937e78a4",
      "chunk_length": 575,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "fastembed",
          "colbert",
          "late",
          "interaction",
          "https",
          "github",
          "com",
          "qdrant",
          "blob",
          "b785640b",
          "processing",
          "flow",
          "and",
          "the",
          "jinacolbert",
          "models",
          "implement",
          "specific",
          "for",
          "queries"
        ],
        "term_weights": [
          {
            "term": "fastembed",
            "tf": 9,
            "weight": 0.125
          },
          {
            "term": "colbert",
            "tf": 8,
            "weight": 0.111111
          },
          {
            "term": "late",
            "tf": 6,
            "weight": 0.083333
          },
          {
            "term": "interaction",
            "tf": 6,
            "weight": 0.083333
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.041667
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.041667
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.041667
          },
          {
            "term": "qdrant",
            "tf": 3,
            "weight": 0.041667
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.041667
          },
          {
            "term": "b785640b",
            "tf": 3,
            "weight": 0.041667
          },
          {
            "term": "processing",
            "tf": 2,
            "weight": 0.027778
          },
          {
            "term": "flow",
            "tf": 2,
            "weight": 0.027778
          },
          {
            "term": "and",
            "tf": 2,
            "weight": 0.027778
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.013889
          },
          {
            "term": "jinacolbert",
            "tf": 1,
            "weight": 0.013889
          },
          {
            "term": "models",
            "tf": 1,
            "weight": 0.013889
          },
          {
            "term": "implement",
            "tf": 1,
            "weight": 0.013889
          },
          {
            "term": "specific",
            "tf": 1,
            "weight": 0.013889
          },
          {
            "term": "for",
            "tf": 1,
            "weight": 0.013889
          },
          {
            "term": "queries",
            "tf": 1,
            "weight": 0.013889
          }
        ],
        "unique_terms": 32,
        "total_terms": 72
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "ColBERT Processing Flow",
        "b785640b",
        "blob",
        "colbert",
        "com",
        "fastembed",
        "github",
        "https",
        "interaction",
        "late",
        "qdrant"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5275,
      "overall": 0.6758333333333333
    }
  },
  {
    "text": "### Key Implementation Features  1. **Different Marker Tokens for Queries and Documents**:     - Colbert uses `QUERY_MARKER_TOKEN_ID = 1` for queries and `DOCUMENT_MARKER_TOKEN_ID = 2` for documents    - JinaColbert uses `QUERY_MARKER_TOKEN_ID = 250002` for queries and `DOCUMENT_MARKER_TOKEN_ID = 250003` for documents  2. **Query Augmentation**:     - Queries are padded with mask tokens to a minimum length (`MIN_QUERY_LENGTH = 31`) to improve performance  3. **Document Token Processing**:     - Punctuation tokens are masked out (`skip_list`)    - Remaining token embeddings are L2-normalized  4. **Worker Classes for Parallel Processing**:     - `ColbertEmbeddingWorker` and `JinaColbertEmbeddingWorker` enable parallel embedding generation  Sources: [fastembed/late\\_interaction/colbert.py39-44](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py#L39-L44) [fastembed/late\\_interaction/jina\\_colbert.py22-25](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/jina_colbert.py#L22-L25) [fastembed/late\\_interaction/colbert.py86-104](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py#L86-L104) [fastembed/late\\_interaction/colbert.py45-65](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py#L45-L65) [fastembed/late\\_interaction/colbert.py256-263](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py#L256-L263)",
    "metadata": {
      "chunk_id": "fbbf4fbc1db4-0006",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "file_extension": ".md",
      "chunk_index": 6,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Key Implementation Features"
      ],
      "heading_text": "Key Implementation Features",
      "token_count": 399,
      "char_count": 1488,
      "start_char": 7555,
      "end_char": 9043,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5207309278350516,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.374759",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 399,
      "document_id": "fbbf4fbc1db4",
      "document_name": "_qdrant_fastembed_5.3-late-interaction-models",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "hierarchy_path": "Key Implementation Features",
      "chunk_hash": "f2c39eafec71dca1",
      "content_digest": "f2c39eafec71dca1",
      "chunk_length": 1488,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "fastembed",
          "colbert",
          "late",
          "interaction",
          "for",
          "token",
          "marker",
          "https",
          "github",
          "com",
          "qdrant",
          "blob",
          "b785640b",
          "queries",
          "and",
          "query",
          "tokens",
          "documents",
          "document",
          "are"
        ],
        "term_weights": [
          {
            "term": "fastembed",
            "tf": 15,
            "weight": 0.085714
          },
          {
            "term": "colbert",
            "tf": 11,
            "weight": 0.062857
          },
          {
            "term": "late",
            "tf": 10,
            "weight": 0.057143
          },
          {
            "term": "interaction",
            "tf": 10,
            "weight": 0.057143
          },
          {
            "term": "for",
            "tf": 6,
            "weight": 0.034286
          },
          {
            "term": "token",
            "tf": 6,
            "weight": 0.034286
          },
          {
            "term": "marker",
            "tf": 5,
            "weight": 0.028571
          },
          {
            "term": "https",
            "tf": 5,
            "weight": 0.028571
          },
          {
            "term": "github",
            "tf": 5,
            "weight": 0.028571
          },
          {
            "term": "com",
            "tf": 5,
            "weight": 0.028571
          },
          {
            "term": "qdrant",
            "tf": 5,
            "weight": 0.028571
          },
          {
            "term": "blob",
            "tf": 5,
            "weight": 0.028571
          },
          {
            "term": "b785640b",
            "tf": 5,
            "weight": 0.028571
          },
          {
            "term": "queries",
            "tf": 4,
            "weight": 0.022857
          },
          {
            "term": "and",
            "tf": 4,
            "weight": 0.022857
          },
          {
            "term": "query",
            "tf": 4,
            "weight": 0.022857
          },
          {
            "term": "tokens",
            "tf": 3,
            "weight": 0.017143
          },
          {
            "term": "documents",
            "tf": 3,
            "weight": 0.017143
          },
          {
            "term": "document",
            "tf": 3,
            "weight": 0.017143
          },
          {
            "term": "are",
            "tf": 3,
            "weight": 0.017143
          }
        ],
        "unique_terms": 73,
        "total_terms": 175
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Key Implementation Features",
        "colbert",
        "com",
        "fastembed",
        "for",
        "github",
        "https",
        "interaction",
        "late",
        "marker",
        "token"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5207309278350516,
      "overall": 0.7069103092783505
    }
  },
  {
    "text": "## Usage Example  The late interaction models can be used through the `LateInteractionTextEmbedding` class. The key difference from regular embedding models is the separate methods for query and document embedding: ``` ``` The model provides:  1. **embed()** - For embedding documents 2. **query\\_embed()** - For embedding queries 3. **passage\\_embed()** - Alternative name for embed() to maintain API consistency  Sources: [fastembed/late\\_interaction/late\\_interaction\\_text\\_embedding.py83-119](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/late_interaction_text_embedding.py#L83-L119) [fastembed/late\\_interaction/late\\_interaction\\_embedding\\_base.py21-60](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/late_interaction_embedding_base.py#L21-L60)",
    "metadata": {
      "chunk_id": "fbbf4fbc1db4-0007",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "file_extension": ".md",
      "chunk_index": 7,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Usage Example"
      ],
      "heading_text": "Usage Example",
      "token_count": 195,
      "char_count": 813,
      "start_char": 9045,
      "end_char": 9858,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7260655737704919,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.376705",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 195,
      "document_id": "fbbf4fbc1db4",
      "document_name": "_qdrant_fastembed_5.3-late-interaction-models",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "hierarchy_path": "Usage Example",
      "chunk_hash": "c95e725712d44052",
      "content_digest": "c95e725712d44052",
      "chunk_length": 813,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "late",
          "interaction",
          "embedding",
          "fastembed",
          "the",
          "for",
          "embed",
          "models",
          "query",
          "text",
          "https",
          "github",
          "com",
          "qdrant",
          "blob",
          "b785640b",
          "base",
          "usage",
          "example",
          "can"
        ],
        "term_weights": [
          {
            "term": "late",
            "tf": 9,
            "weight": 0.091837
          },
          {
            "term": "interaction",
            "tf": 9,
            "weight": 0.091837
          },
          {
            "term": "embedding",
            "tf": 8,
            "weight": 0.081633
          },
          {
            "term": "fastembed",
            "tf": 6,
            "weight": 0.061224
          },
          {
            "term": "the",
            "tf": 5,
            "weight": 0.05102
          },
          {
            "term": "for",
            "tf": 4,
            "weight": 0.040816
          },
          {
            "term": "embed",
            "tf": 4,
            "weight": 0.040816
          },
          {
            "term": "models",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "query",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "text",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "qdrant",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "b785640b",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "base",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "usage",
            "tf": 1,
            "weight": 0.010204
          },
          {
            "term": "example",
            "tf": 1,
            "weight": 0.010204
          },
          {
            "term": "can",
            "tf": 1,
            "weight": 0.010204
          }
        ],
        "unique_terms": 50,
        "total_terms": 98
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Usage Example",
        "embed",
        "embedding",
        "fastembed",
        "for",
        "interaction",
        "late",
        "models",
        "query",
        "text",
        "the"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7260655737704919,
      "overall": 0.7753551912568306
    }
  },
  {
    "text": "## Implementation Details: Colbert Class  The `Colbert` class is the central implementation of the ColBERT model in FastEmbed: ``` ``` Sources: [fastembed/late\\_interaction/colbert.py39-255](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py#L39-L255) [fastembed/late\\_interaction/colbert.py45-65](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py#L45-L65) [fastembed/late\\_interaction/colbert.py67-77](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py#L67-L77) [fastembed/late\\_interaction/colbert.py79-108](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py#L79-L108) [fastembed/late\\_interaction/colbert.py239-249](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py#L239-L249)  Key methods in the `Colbert` class:  1. **\\_post\\_process\\_onnx\\_output()**: Different processing for documents (with masking and normalization) and queries 2. **\\_preprocess\\_onnx\\_input()**: Adds marker tokens based on whether the input is a document or query 3. **tokenize()**: Handles tokenization differently for documents and queries 4. **\\_tokenize\\_query()**: Pads shorter queries with mask tokens for query augmentation 5. **load\\_onnx\\_model()**: Initializes the ONNX model and sets up tokenization parameters 6. **embed()** and **query\\_embed()**: Public interface methods for embedding documents and queries",
    "metadata": {
      "chunk_id": "fbbf4fbc1db4-0008",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "file_extension": ".md",
      "chunk_index": 8,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Implementation Details: Colbert Class"
      ],
      "heading_text": "Implementation Details: Colbert Class",
      "token_count": 398,
      "char_count": 1487,
      "start_char": 9862,
      "end_char": 11349,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.531164705882353,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.379935",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 398,
      "document_id": "fbbf4fbc1db4",
      "document_name": "_qdrant_fastembed_5.3-late-interaction-models",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "hierarchy_path": "Implementation Details: Colbert Class",
      "chunk_hash": "9bd31b7c1e93efae",
      "content_digest": "9bd31b7c1e93efae",
      "chunk_length": 1487,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "fastembed",
          "colbert",
          "late",
          "interaction",
          "the",
          "and",
          "https",
          "github",
          "com",
          "qdrant",
          "blob",
          "b785640b",
          "onnx",
          "for",
          "queries",
          "query",
          "class",
          "model",
          "documents",
          "implementation"
        ],
        "term_weights": [
          {
            "term": "fastembed",
            "tf": 16,
            "weight": 0.088398
          },
          {
            "term": "colbert",
            "tf": 14,
            "weight": 0.077348
          },
          {
            "term": "late",
            "tf": 10,
            "weight": 0.055249
          },
          {
            "term": "interaction",
            "tf": 10,
            "weight": 0.055249
          },
          {
            "term": "the",
            "tf": 6,
            "weight": 0.033149
          },
          {
            "term": "and",
            "tf": 6,
            "weight": 0.033149
          },
          {
            "term": "https",
            "tf": 5,
            "weight": 0.027624
          },
          {
            "term": "github",
            "tf": 5,
            "weight": 0.027624
          },
          {
            "term": "com",
            "tf": 5,
            "weight": 0.027624
          },
          {
            "term": "qdrant",
            "tf": 5,
            "weight": 0.027624
          },
          {
            "term": "blob",
            "tf": 5,
            "weight": 0.027624
          },
          {
            "term": "b785640b",
            "tf": 5,
            "weight": 0.027624
          },
          {
            "term": "onnx",
            "tf": 4,
            "weight": 0.022099
          },
          {
            "term": "for",
            "tf": 4,
            "weight": 0.022099
          },
          {
            "term": "queries",
            "tf": 4,
            "weight": 0.022099
          },
          {
            "term": "query",
            "tf": 4,
            "weight": 0.022099
          },
          {
            "term": "class",
            "tf": 3,
            "weight": 0.016575
          },
          {
            "term": "model",
            "tf": 3,
            "weight": 0.016575
          },
          {
            "term": "documents",
            "tf": 3,
            "weight": 0.016575
          },
          {
            "term": "implementation",
            "tf": 2,
            "weight": 0.01105
          }
        ],
        "unique_terms": 75,
        "total_terms": 181
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Implementation Details: Colbert Class",
        "and",
        "colbert",
        "com",
        "fastembed",
        "github",
        "https",
        "interaction",
        "late",
        "qdrant",
        "the"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.531164705882353,
      "overall": 0.7103882352941175
    }
  },
  {
    "text": "## JinaColbert Extensions  `JinaColbert` extends the base `Colbert` class with specific enhancements:  1. Different special token IDs:     - `QUERY_MARKER_TOKEN_ID = 250002`    - `DOCUMENT_MARKER_TOKEN_ID = 250003`    - `MASK_TOKEN = \"<mask>\"` (vs. \"\\[MASK]\" in Colbert)  2. Modified preprocessing for queries:     - Sets all attention mask values to 1 for queries  3. Support for longer contexts:     - Context length up to 8192 tokens (vs. the standard 512)  4. Multilingual capabilities:     - Support for multiple languages vs. primarily English in the original ColBERT  Sources: [fastembed/late\\_interaction/jina\\_colbert.py21-48](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/jina_colbert.py#L21-L48)",
    "metadata": {
      "chunk_id": "fbbf4fbc1db4-0009",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "file_extension": ".md",
      "chunk_index": 9,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "JinaColbert Extensions"
      ],
      "heading_text": "JinaColbert Extensions",
      "token_count": 199,
      "char_count": 737,
      "start_char": 11353,
      "end_char": 12090,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5307407407407407,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.382049",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 199,
      "document_id": "fbbf4fbc1db4",
      "document_name": "_qdrant_fastembed_5.3-late-interaction-models",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "hierarchy_path": "JinaColbert Extensions",
      "chunk_hash": "253e52081e361584",
      "content_digest": "253e52081e361584",
      "chunk_length": 737,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "colbert",
          "token",
          "mask",
          "for",
          "the",
          "fastembed",
          "jinacolbert",
          "marker",
          "queries",
          "support",
          "late",
          "interaction",
          "jina",
          "extensions",
          "extends",
          "base",
          "class",
          "with",
          "specific",
          "enhancements"
        ],
        "term_weights": [
          {
            "term": "colbert",
            "tf": 5,
            "weight": 0.060976
          },
          {
            "term": "token",
            "tf": 4,
            "weight": 0.04878
          },
          {
            "term": "mask",
            "tf": 4,
            "weight": 0.04878
          },
          {
            "term": "for",
            "tf": 4,
            "weight": 0.04878
          },
          {
            "term": "the",
            "tf": 3,
            "weight": 0.036585
          },
          {
            "term": "fastembed",
            "tf": 3,
            "weight": 0.036585
          },
          {
            "term": "jinacolbert",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "marker",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "queries",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "support",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "late",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "interaction",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "jina",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "extensions",
            "tf": 1,
            "weight": 0.012195
          },
          {
            "term": "extends",
            "tf": 1,
            "weight": 0.012195
          },
          {
            "term": "base",
            "tf": 1,
            "weight": 0.012195
          },
          {
            "term": "class",
            "tf": 1,
            "weight": 0.012195
          },
          {
            "term": "with",
            "tf": 1,
            "weight": 0.012195
          },
          {
            "term": "specific",
            "tf": 1,
            "weight": 0.012195
          },
          {
            "term": "enhancements",
            "tf": 1,
            "weight": 0.012195
          }
        ],
        "unique_terms": 58,
        "total_terms": 82
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "JinaColbert Extensions",
        "colbert",
        "fastembed",
        "for",
        "jinacolbert",
        "marker",
        "mask",
        "queries",
        "support",
        "the",
        "token"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5307407407407407,
      "overall": 0.7102469135802468
    }
  },
  {
    "text": "## Parallel Processing Support  Late interaction models in FastEmbed support parallel processing for efficient embedding generation: ``` ``` Sources: [fastembed/late\\_interaction/colbert.py211-237](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py#L211-L237) [fastembed/late\\_interaction/colbert.py256-263](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/colbert.py#L256-L263) [fastembed/late\\_interaction/jina\\_colbert.py51-58](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/late_interaction/jina_colbert.py#L51-L58)  The worker classes (`ColbertEmbeddingWorker` and `JinaColbertEmbeddingWorker`) handle embedding generation in separate processes, allowing for efficient utilization of multiple CPU cores or GPUs.",
    "metadata": {
      "chunk_id": "fbbf4fbc1db4-0010",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "file_extension": ".md",
      "chunk_index": 10,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Parallel Processing Support"
      ],
      "heading_text": "Parallel Processing Support",
      "token_count": 197,
      "char_count": 794,
      "start_char": 12092,
      "end_char": 12886,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5354545454545454,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.383417",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 197,
      "document_id": "fbbf4fbc1db4",
      "document_name": "_qdrant_fastembed_5.3-late-interaction-models",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "hierarchy_path": "Parallel Processing Support",
      "chunk_hash": "0d10d7de2888fb6c",
      "content_digest": "0d10d7de2888fb6c",
      "chunk_length": 794,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "fastembed",
          "late",
          "interaction",
          "colbert",
          "https",
          "github",
          "com",
          "qdrant",
          "blob",
          "b785640b",
          "parallel",
          "processing",
          "support",
          "for",
          "efficient",
          "embedding",
          "generation",
          "jina",
          "models",
          "sources"
        ],
        "term_weights": [
          {
            "term": "fastembed",
            "tf": 10,
            "weight": 0.108696
          },
          {
            "term": "late",
            "tf": 7,
            "weight": 0.076087
          },
          {
            "term": "interaction",
            "tf": 7,
            "weight": 0.076087
          },
          {
            "term": "colbert",
            "tf": 6,
            "weight": 0.065217
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.032609
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.032609
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.032609
          },
          {
            "term": "qdrant",
            "tf": 3,
            "weight": 0.032609
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.032609
          },
          {
            "term": "b785640b",
            "tf": 3,
            "weight": 0.032609
          },
          {
            "term": "parallel",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "processing",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "support",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "for",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "efficient",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "embedding",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "generation",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "jina",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "models",
            "tf": 1,
            "weight": 0.01087
          },
          {
            "term": "sources",
            "tf": 1,
            "weight": 0.01087
          }
        ],
        "unique_terms": 46,
        "total_terms": 92
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Parallel Processing Support",
        "b785640b",
        "blob",
        "colbert",
        "com",
        "fastembed",
        "github",
        "https",
        "interaction",
        "late",
        "qdrant"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5354545454545454,
      "overall": 0.7118181818181818
    }
  },
  {
    "text": "## Conclusion\n\nLate interaction models in FastEmbed provide a powerful alternative to traditional dense embeddings. By generating token-level representations and postponing the interaction between query and document until search time, these models enable more precise matching and retrieval.\n\nThe implementation in FastEmbed offers efficient processing through ONNX runtime integration and parallel processing capabilities, making it suitable for production environments where performance is critical.\n\nDismiss\n\nRefresh this wiki\n\nEnter email to refresh",
    "metadata": {
      "chunk_id": "fbbf4fbc1db4-0011",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "file_extension": ".md",
      "chunk_index": 11,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Conclusion"
      ],
      "heading_text": "Conclusion",
      "token_count": 84,
      "char_count": 553,
      "start_char": 12890,
      "end_char": 13443,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.7,
      "retrieval_quality": 0.5435211267605634,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.383858",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 84,
      "document_id": "fbbf4fbc1db4",
      "document_name": "_qdrant_fastembed_5.3-late-interaction-models",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "hierarchy_path": "Conclusion",
      "chunk_hash": "f5bca91193025810",
      "content_digest": "f5bca91193025810",
      "chunk_length": 553,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "and",
          "interaction",
          "models",
          "fastembed",
          "the",
          "processing",
          "refresh",
          "conclusion",
          "late",
          "provide",
          "powerful",
          "alternative",
          "traditional",
          "dense",
          "embeddings",
          "generating",
          "token",
          "level",
          "representations",
          "postponing"
        ],
        "term_weights": [
          {
            "term": "and",
            "tf": 4,
            "weight": 0.063492
          },
          {
            "term": "interaction",
            "tf": 2,
            "weight": 0.031746
          },
          {
            "term": "models",
            "tf": 2,
            "weight": 0.031746
          },
          {
            "term": "fastembed",
            "tf": 2,
            "weight": 0.031746
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.031746
          },
          {
            "term": "processing",
            "tf": 2,
            "weight": 0.031746
          },
          {
            "term": "refresh",
            "tf": 2,
            "weight": 0.031746
          },
          {
            "term": "conclusion",
            "tf": 1,
            "weight": 0.015873
          },
          {
            "term": "late",
            "tf": 1,
            "weight": 0.015873
          },
          {
            "term": "provide",
            "tf": 1,
            "weight": 0.015873
          },
          {
            "term": "powerful",
            "tf": 1,
            "weight": 0.015873
          },
          {
            "term": "alternative",
            "tf": 1,
            "weight": 0.015873
          },
          {
            "term": "traditional",
            "tf": 1,
            "weight": 0.015873
          },
          {
            "term": "dense",
            "tf": 1,
            "weight": 0.015873
          },
          {
            "term": "embeddings",
            "tf": 1,
            "weight": 0.015873
          },
          {
            "term": "generating",
            "tf": 1,
            "weight": 0.015873
          },
          {
            "term": "token",
            "tf": 1,
            "weight": 0.015873
          },
          {
            "term": "level",
            "tf": 1,
            "weight": 0.015873
          },
          {
            "term": "representations",
            "tf": 1,
            "weight": 0.015873
          },
          {
            "term": "postponing",
            "tf": 1,
            "weight": 0.015873
          }
        ],
        "unique_terms": 54,
        "total_terms": 63
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Conclusion",
        "and",
        "conclusion",
        "fastembed",
        "interaction",
        "late",
        "models",
        "processing",
        "provide",
        "refresh",
        "the"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.7,
      "retrieval_quality": 0.5435211267605634,
      "overall": 0.6811737089201878
    }
  },
  {
    "text": "### On this page  - [Late Interaction Models](#late-interaction-models.md) - [Overview of Late Interaction Models](#overview-of-late-interaction-models.md) - [Architecture](#architecture.md) - [Supported Models](#supported-models.md) - [Implementation Details](#implementation-details.md) - [ColBERT Processing Flow](#colbert-processing-flow.md) - [Key Implementation Features](#key-implementation-features.md) - [Usage Example](#usage-example.md) - [Implementation Details: Colbert Class](#implementation-details-colbert-class.md) - [JinaColbert Extensions](#jinacolbert-extensions.md) - [Parallel Processing Support](#parallel-processing-support.md) - [Conclusion](#conclusion.md)",
    "metadata": {
      "chunk_id": "fbbf4fbc1db4-0012",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "file_extension": ".md",
      "chunk_index": 12,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "On this page"
      ],
      "heading_text": "On this page",
      "token_count": 159,
      "char_count": 682,
      "start_char": 13445,
      "end_char": 14127,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7006382978723403,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.384600",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 159,
      "document_id": "fbbf4fbc1db4",
      "document_name": "_qdrant_fastembed_5.3-late-interaction-models",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_filename": "_qdrant_fastembed_5.3-late-interaction-models.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.3-late-interaction-models.md",
      "hierarchy_path": "On this page",
      "chunk_hash": "92cea0eb347a2328",
      "content_digest": "92cea0eb347a2328",
      "chunk_length": 682,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "models",
          "implementation",
          "late",
          "interaction",
          "details",
          "colbert",
          "processing",
          "overview",
          "architecture",
          "supported",
          "flow",
          "key",
          "features",
          "usage",
          "example",
          "class",
          "jinacolbert",
          "extensions",
          "parallel",
          "support"
        ],
        "term_weights": [
          {
            "term": "models",
            "tf": 6,
            "weight": 0.096774
          },
          {
            "term": "implementation",
            "tf": 6,
            "weight": 0.096774
          },
          {
            "term": "late",
            "tf": 4,
            "weight": 0.064516
          },
          {
            "term": "interaction",
            "tf": 4,
            "weight": 0.064516
          },
          {
            "term": "details",
            "tf": 4,
            "weight": 0.064516
          },
          {
            "term": "colbert",
            "tf": 4,
            "weight": 0.064516
          },
          {
            "term": "processing",
            "tf": 4,
            "weight": 0.064516
          },
          {
            "term": "overview",
            "tf": 2,
            "weight": 0.032258
          },
          {
            "term": "architecture",
            "tf": 2,
            "weight": 0.032258
          },
          {
            "term": "supported",
            "tf": 2,
            "weight": 0.032258
          },
          {
            "term": "flow",
            "tf": 2,
            "weight": 0.032258
          },
          {
            "term": "key",
            "tf": 2,
            "weight": 0.032258
          },
          {
            "term": "features",
            "tf": 2,
            "weight": 0.032258
          },
          {
            "term": "usage",
            "tf": 2,
            "weight": 0.032258
          },
          {
            "term": "example",
            "tf": 2,
            "weight": 0.032258
          },
          {
            "term": "class",
            "tf": 2,
            "weight": 0.032258
          },
          {
            "term": "jinacolbert",
            "tf": 2,
            "weight": 0.032258
          },
          {
            "term": "extensions",
            "tf": 2,
            "weight": 0.032258
          },
          {
            "term": "parallel",
            "tf": 2,
            "weight": 0.032258
          },
          {
            "term": "support",
            "tf": 2,
            "weight": 0.032258
          }
        ],
        "unique_terms": 23,
        "total_terms": 62
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "On this page",
        "architecture",
        "colbert",
        "details",
        "implementation",
        "interaction",
        "late",
        "models",
        "overview",
        "processing",
        "supported"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7006382978723403,
      "overall": 0.7335460992907801
    }
  }
]