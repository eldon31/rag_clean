[
  {
    "text": "## Core Architecture  The `SparseTextEmbedding` class serves as the main entry point for generating sparse embeddings. It maintains a registry of implementation classes and delegates to the appropriate implementation based on the provided model name. ``` ``` Sources: [fastembed/sparse/sparse\\_text\\_embedding.py16-18](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/sparse_text_embedding.py#L16-L18) [fastembed/sparse/splade\\_pp.py36](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/splade_pp.py#L36-L36) [fastembed/sparse/bm25.py61](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/bm25.py#L61-L61) [fastembed/sparse/bm42.py39](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/bm42.py#L39-L39)",
    "metadata": {
      "chunk_id": "8143f8a95abc-0002",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "file_extension": ".md",
      "chunk_index": 2,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Core Architecture"
      ],
      "heading_text": "Core Architecture",
      "token_count": 212,
      "char_count": 769,
      "start_char": 4178,
      "end_char": 4947,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5542857142857143,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.335509",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 212,
      "document_id": "8143f8a95abc",
      "document_name": "_qdrant_fastembed_5.2-sparse-text-embeddings",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "hierarchy_path": "Core Architecture",
      "chunk_hash": "a516265103a96a22",
      "content_digest": "a516265103a96a22",
      "chunk_length": 769,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "fastembed",
          "sparse",
          "the",
          "https",
          "github",
          "com",
          "qdrant",
          "blob",
          "b785640b",
          "implementation",
          "text",
          "embedding",
          "splade",
          "l36",
          "bm25",
          "l61",
          "bm42",
          "l39",
          "core",
          "architecture"
        ],
        "term_weights": [
          {
            "term": "fastembed",
            "tf": 12,
            "weight": 0.123711
          },
          {
            "term": "sparse",
            "tf": 11,
            "weight": 0.113402
          },
          {
            "term": "the",
            "tf": 4,
            "weight": 0.041237
          },
          {
            "term": "https",
            "tf": 4,
            "weight": 0.041237
          },
          {
            "term": "github",
            "tf": 4,
            "weight": 0.041237
          },
          {
            "term": "com",
            "tf": 4,
            "weight": 0.041237
          },
          {
            "term": "qdrant",
            "tf": 4,
            "weight": 0.041237
          },
          {
            "term": "blob",
            "tf": 4,
            "weight": 0.041237
          },
          {
            "term": "b785640b",
            "tf": 4,
            "weight": 0.041237
          },
          {
            "term": "implementation",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "text",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "embedding",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "splade",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "l36",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "bm25",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "l61",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "bm42",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "l39",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "core",
            "tf": 1,
            "weight": 0.010309
          },
          {
            "term": "architecture",
            "tf": 1,
            "weight": 0.010309
          }
        ],
        "unique_terms": 46,
        "total_terms": 97
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Core Architecture",
        "b785640b",
        "blob",
        "com",
        "fastembed",
        "github",
        "https",
        "implementation",
        "qdrant",
        "sparse",
        "the"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5542857142857143,
      "overall": 0.6847619047619048
    }
  },
  {
    "text": "## Implemented Models\n\nFastEmbed offers three sparse embedding implementations with different characteristics:",
    "metadata": {
      "chunk_id": "8143f8a95abc-0003",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "file_extension": ".md",
      "chunk_index": 3,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Implemented Models"
      ],
      "heading_text": "Implemented Models",
      "token_count": 15,
      "char_count": 110,
      "start_char": 4951,
      "end_char": 5061,
      "semantic_score": 0.8,
      "structural_score": 0.7,
      "retrieval_quality": 0.59,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.335887",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 15,
      "document_id": "8143f8a95abc",
      "document_name": "_qdrant_fastembed_5.2-sparse-text-embeddings",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "hierarchy_path": "Implemented Models",
      "chunk_hash": "e8d5bda368a421d9",
      "content_digest": "e8d5bda368a421d9",
      "chunk_length": 110,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "implemented",
          "models",
          "fastembed",
          "offers",
          "three",
          "sparse",
          "embedding",
          "implementations",
          "with",
          "different",
          "characteristics"
        ],
        "term_weights": [
          {
            "term": "implemented",
            "tf": 1,
            "weight": 0.090909
          },
          {
            "term": "models",
            "tf": 1,
            "weight": 0.090909
          },
          {
            "term": "fastembed",
            "tf": 1,
            "weight": 0.090909
          },
          {
            "term": "offers",
            "tf": 1,
            "weight": 0.090909
          },
          {
            "term": "three",
            "tf": 1,
            "weight": 0.090909
          },
          {
            "term": "sparse",
            "tf": 1,
            "weight": 0.090909
          },
          {
            "term": "embedding",
            "tf": 1,
            "weight": 0.090909
          },
          {
            "term": "implementations",
            "tf": 1,
            "weight": 0.090909
          },
          {
            "term": "with",
            "tf": 1,
            "weight": 0.090909
          },
          {
            "term": "different",
            "tf": 1,
            "weight": 0.090909
          },
          {
            "term": "characteristics",
            "tf": 1,
            "weight": 0.090909
          }
        ],
        "unique_terms": 11,
        "total_terms": 11
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Implemented Models",
        "different",
        "embedding",
        "fastembed",
        "implementations",
        "implemented",
        "models",
        "offers",
        "sparse",
        "three",
        "with"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.7,
      "retrieval_quality": 0.59,
      "overall": 0.6966666666666667
    }
  },
  {
    "text": "### 1. SpladePP  SPLADE++ (SParse Lexical AnD Expansion) uses a transformer model to generate sparse embeddings that capture contextual meaning. It applies a log operation on ReLU-activated outputs to emphasize important tokens. Key features:  - Neural-based approach using transformer models - Learns weights through contextual understanding of text - Creates high-quality sparse representations - Requires an ONNX model for inference  Implementation highlights: ``` ``` Sources: [fastembed/sparse/splade\\_pp.py36-52](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/splade_pp.py#L36-L52)",
    "metadata": {
      "chunk_id": "8143f8a95abc-0004",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "file_extension": ".md",
      "chunk_index": 4,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "1. SpladePP"
      ],
      "heading_text": "1. SpladePP",
      "token_count": 135,
      "char_count": 607,
      "start_char": 5063,
      "end_char": 5670,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5445454545454546,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.337797",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 135,
      "document_id": "8143f8a95abc",
      "document_name": "_qdrant_fastembed_5.2-sparse-text-embeddings",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "hierarchy_path": "1. SpladePP",
      "chunk_hash": "50cf25746b363596",
      "content_digest": "50cf25746b363596",
      "chunk_length": 607,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "sparse",
          "splade",
          "fastembed",
          "transformer",
          "model",
          "contextual",
          "spladepp",
          "lexical",
          "and",
          "expansion",
          "uses",
          "generate",
          "embeddings",
          "that",
          "capture",
          "meaning",
          "applies",
          "log",
          "operation",
          "relu"
        ],
        "term_weights": [
          {
            "term": "sparse",
            "tf": 5,
            "weight": 0.073529
          },
          {
            "term": "splade",
            "tf": 3,
            "weight": 0.044118
          },
          {
            "term": "fastembed",
            "tf": 3,
            "weight": 0.044118
          },
          {
            "term": "transformer",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "model",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "contextual",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "spladepp",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "lexical",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "and",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "expansion",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "uses",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "generate",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "embeddings",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "that",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "capture",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "meaning",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "applies",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "log",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "operation",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "relu",
            "tf": 1,
            "weight": 0.014706
          }
        ],
        "unique_terms": 57,
        "total_terms": 68
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "1. SpladePP",
        "and",
        "contextual",
        "expansion",
        "fastembed",
        "lexical",
        "model",
        "sparse",
        "splade",
        "spladepp",
        "transformer"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5445454545454546,
      "overall": 0.7148484848484848
    }
  },
  {
    "text": "### 2. BM25  BM25 (Best Matching 25) is a classic information retrieval algorithm implemented as sparse embeddings. It evaluates token importance based on term frequency and document length. Key features:  - Traditional bag-of-words IR approach - Applies stemming and stopword removal - Language-aware with support for 18 languages - Requires no model weights (lightweight)  The BM25 formula used is: ``` score(q, d) = SUM[ IDF(q_i) * (f(q_i, d) * (k + 1)) / (f(q_i, d) + k * (1 - b + b * (|d| / avg_len))) ] ``` Implementation highlights: ``` ``` Sources: [fastembed/sparse/bm25.py61-266](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/bm25.py#L61-L266) [fastembed/sparse/bm25.py25-44](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/bm25.py#L25-L44)",
    "metadata": {
      "chunk_id": "8143f8a95abc-0005",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "file_extension": ".md",
      "chunk_index": 5,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "2. BM25"
      ],
      "heading_text": "2. BM25",
      "token_count": 228,
      "char_count": 790,
      "start_char": 5675,
      "end_char": 6465,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5275,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.340271",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 228,
      "document_id": "8143f8a95abc",
      "document_name": "_qdrant_fastembed_5.2-sparse-text-embeddings",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "hierarchy_path": "2. BM25",
      "chunk_hash": "f7aceebf6f19804f",
      "content_digest": "f7aceebf6f19804f",
      "chunk_length": 790,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "bm25",
          "fastembed",
          "sparse",
          "and",
          "https",
          "github",
          "com",
          "qdrant",
          "blob",
          "b785640b",
          "best",
          "matching",
          "classic",
          "information",
          "retrieval",
          "algorithm",
          "implemented",
          "embeddings",
          "evaluates",
          "token"
        ],
        "term_weights": [
          {
            "term": "bm25",
            "tf": 7,
            "weight": 0.081395
          },
          {
            "term": "fastembed",
            "tf": 6,
            "weight": 0.069767
          },
          {
            "term": "sparse",
            "tf": 5,
            "weight": 0.05814
          },
          {
            "term": "and",
            "tf": 2,
            "weight": 0.023256
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.023256
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.023256
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.023256
          },
          {
            "term": "qdrant",
            "tf": 2,
            "weight": 0.023256
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.023256
          },
          {
            "term": "b785640b",
            "tf": 2,
            "weight": 0.023256
          },
          {
            "term": "best",
            "tf": 1,
            "weight": 0.011628
          },
          {
            "term": "matching",
            "tf": 1,
            "weight": 0.011628
          },
          {
            "term": "classic",
            "tf": 1,
            "weight": 0.011628
          },
          {
            "term": "information",
            "tf": 1,
            "weight": 0.011628
          },
          {
            "term": "retrieval",
            "tf": 1,
            "weight": 0.011628
          },
          {
            "term": "algorithm",
            "tf": 1,
            "weight": 0.011628
          },
          {
            "term": "implemented",
            "tf": 1,
            "weight": 0.011628
          },
          {
            "term": "embeddings",
            "tf": 1,
            "weight": 0.011628
          },
          {
            "term": "evaluates",
            "tf": 1,
            "weight": 0.011628
          },
          {
            "term": "token",
            "tf": 1,
            "weight": 0.011628
          }
        ],
        "unique_terms": 64,
        "total_terms": 86
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "2. BM25",
        "and",
        "b785640b",
        "blob",
        "bm25",
        "com",
        "fastembed",
        "github",
        "https",
        "qdrant",
        "sparse"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5275,
      "overall": 0.7091666666666666
    }
  },
  {
    "text": "### 3. BM42  BM42 is an extension of BM25 that addresses limitations with short documents by using transformer attention weights instead of token counts. Key features:  - Hybrid approach combining BM25 with neural attention - Better handles short documents and rare tokens - Applies stemming and stopword removal - Named \"42\" as a reference to \"The Hitchhiker's Guide to the Galaxy\"  Implementation highlights: ``` ``` Sources: [fastembed/sparse/bm42.py39-218](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/bm42.py#L39-L218)",
    "metadata": {
      "chunk_id": "8143f8a95abc-0006",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "file_extension": ".md",
      "chunk_index": 6,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "3. BM42"
      ],
      "heading_text": "3. BM42",
      "token_count": 128,
      "char_count": 545,
      "start_char": 6472,
      "end_char": 7017,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7317910447761194,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.342286",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 128,
      "document_id": "8143f8a95abc",
      "document_name": "_qdrant_fastembed_5.2-sparse-text-embeddings",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "hierarchy_path": "3. BM42",
      "chunk_hash": "72d557ea72788db9",
      "content_digest": "72d557ea72788db9",
      "chunk_length": 545,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "bm42",
          "fastembed",
          "bm25",
          "with",
          "short",
          "documents",
          "attention",
          "and",
          "the",
          "sparse",
          "extension",
          "that",
          "addresses",
          "limitations",
          "using",
          "transformer",
          "weights",
          "instead",
          "token",
          "counts"
        ],
        "term_weights": [
          {
            "term": "bm42",
            "tf": 4,
            "weight": 0.061538
          },
          {
            "term": "fastembed",
            "tf": 3,
            "weight": 0.046154
          },
          {
            "term": "bm25",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "with",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "short",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "documents",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "attention",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "and",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "sparse",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "extension",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "that",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "addresses",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "limitations",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "using",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "transformer",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "weights",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "instead",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "token",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "counts",
            "tf": 1,
            "weight": 0.015385
          }
        ],
        "unique_terms": 52,
        "total_terms": 65
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "3. BM42",
        "and",
        "attention",
        "bm25",
        "bm42",
        "documents",
        "fastembed",
        "short",
        "sparse",
        "the",
        "with"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7317910447761194,
      "overall": 0.7772636815920397
    }
  },
  {
    "text": "## Embedding Process Flow  The process of generating sparse embeddings differs between the three implementations, but follows a general pattern: ``` ``` Sources: [fastembed/sparse/splade\\_pp.py37-52](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/splade_pp.py#L37-L52) [fastembed/sparse/bm25.py251-262](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/bm25.py#L251-L262) [fastembed/sparse/bm42.py220-250](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/bm42.py#L220-L250)",
    "metadata": {
      "chunk_id": "8143f8a95abc-0007",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "file_extension": ".md",
      "chunk_index": 7,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Embedding Process Flow"
      ],
      "heading_text": "Embedding Process Flow",
      "token_count": 154,
      "char_count": 528,
      "start_char": 7022,
      "end_char": 7550,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5553846153846154,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.343316",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 154,
      "document_id": "8143f8a95abc",
      "document_name": "_qdrant_fastembed_5.2-sparse-text-embeddings",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "hierarchy_path": "Embedding Process Flow",
      "chunk_hash": "c19da5fc5891c586",
      "content_digest": "c19da5fc5891c586",
      "chunk_length": 528,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "fastembed",
          "sparse",
          "https",
          "github",
          "com",
          "qdrant",
          "blob",
          "b785640b",
          "process",
          "the",
          "splade",
          "bm25",
          "bm42",
          "embedding",
          "flow",
          "generating",
          "embeddings",
          "differs",
          "between",
          "three"
        ],
        "term_weights": [
          {
            "term": "fastembed",
            "tf": 9,
            "weight": 0.132353
          },
          {
            "term": "sparse",
            "tf": 7,
            "weight": 0.102941
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.044118
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.044118
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.044118
          },
          {
            "term": "qdrant",
            "tf": 3,
            "weight": 0.044118
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.044118
          },
          {
            "term": "b785640b",
            "tf": 3,
            "weight": 0.044118
          },
          {
            "term": "process",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "splade",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "bm25",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "bm42",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "embedding",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "flow",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "generating",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "embeddings",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "differs",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "between",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "three",
            "tf": 1,
            "weight": 0.014706
          }
        ],
        "unique_terms": 37,
        "total_terms": 68
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Embedding Process Flow",
        "b785640b",
        "blob",
        "com",
        "fastembed",
        "github",
        "https",
        "process",
        "qdrant",
        "sparse",
        "the"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5553846153846154,
      "overall": 0.6851282051282052
    }
  },
  {
    "text": "## IDF Requirement  All sparse embedding models in FastEmbed are designed to be used with inverse document frequency (IDF) weighting applied during search. When used with Qdrant vector database, this requires setting `\"modifier\": \"idf\"` in the sparse vector index configuration. IDF weights terms based on their rarity across the entire corpus, giving more importance to uncommon terms: ``` IDF(term) = log(N / df(term)) ``` Where N is the total number of documents and df(term) is the number of documents containing the term. Sources: [fastembed/sparse/bm25.py65-66](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/bm25.py#L65-L66) [fastembed/sparse/bm42.py52-53](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/bm42.py#L52-L53)",
    "metadata": {
      "chunk_id": "8143f8a95abc-0010",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "file_extension": ".md",
      "chunk_index": 10,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "IDF Requirement"
      ],
      "heading_text": "IDF Requirement",
      "token_count": 190,
      "char_count": 767,
      "start_char": 9267,
      "end_char": 10034,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5335294117647059,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.347427",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 190,
      "document_id": "8143f8a95abc",
      "document_name": "_qdrant_fastembed_5.2-sparse-text-embeddings",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "hierarchy_path": "IDF Requirement",
      "chunk_hash": "cb8e81a51e63606a",
      "content_digest": "cb8e81a51e63606a",
      "chunk_length": 767,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "fastembed",
          "sparse",
          "idf",
          "the",
          "term",
          "qdrant",
          "used",
          "with",
          "vector",
          "terms",
          "number",
          "documents",
          "bm25",
          "https",
          "github",
          "com",
          "blob",
          "b785640b",
          "bm42",
          "requirement"
        ],
        "term_weights": [
          {
            "term": "fastembed",
            "tf": 7,
            "weight": 0.07
          },
          {
            "term": "sparse",
            "tf": 6,
            "weight": 0.06
          },
          {
            "term": "idf",
            "tf": 5,
            "weight": 0.05
          },
          {
            "term": "the",
            "tf": 5,
            "weight": 0.05
          },
          {
            "term": "term",
            "tf": 4,
            "weight": 0.04
          },
          {
            "term": "qdrant",
            "tf": 3,
            "weight": 0.03
          },
          {
            "term": "used",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "with",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "vector",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "terms",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "number",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "documents",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "bm25",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "b785640b",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "bm42",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "requirement",
            "tf": 1,
            "weight": 0.01
          }
        ],
        "unique_terms": 63,
        "total_terms": 100
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "IDF Requirement",
        "fastembed",
        "idf",
        "qdrant",
        "sparse",
        "term",
        "terms",
        "the",
        "used",
        "vector",
        "with"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5335294117647059,
      "overall": 0.7111764705882352
    }
  },
  {
    "text": "## Implementation Details",
    "metadata": {
      "chunk_id": "8143f8a95abc-0011",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "file_extension": ".md",
      "chunk_index": 11,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Implementation Details"
      ],
      "heading_text": "Implementation Details",
      "token_count": 3,
      "char_count": 25,
      "start_char": 10040,
      "end_char": 10065,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.347743",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 3,
      "document_id": "8143f8a95abc",
      "document_name": "_qdrant_fastembed_5.2-sparse-text-embeddings",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "hierarchy_path": "Implementation Details",
      "chunk_hash": "812a10c977ea5550",
      "content_digest": "812a10c977ea5550",
      "chunk_length": 25,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "implementation",
          "details"
        ],
        "term_weights": [
          {
            "term": "implementation",
            "tf": 1,
            "weight": 0.5
          },
          {
            "term": "details",
            "tf": 1,
            "weight": 0.5
          }
        ],
        "unique_terms": 2,
        "total_terms": 2
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Implementation Details",
        "details",
        "implementation"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "overall": 0.7633333333333333
    }
  },
  {
    "text": "### SparseEmbedding Structure  All sparse embedding implementations produce objects of type `SparseEmbedding`, which contains:  - `indices`: An array of token IDs (integers) - `values`: An array of weights corresponding to each token ID  This representation is compact and efficient for vector databases like Qdrant.",
    "metadata": {
      "chunk_id": "8143f8a95abc-0012",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "file_extension": ".md",
      "chunk_index": 12,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "SparseEmbedding Structure"
      ],
      "heading_text": "SparseEmbedding Structure",
      "token_count": 64,
      "char_count": 316,
      "start_char": 10067,
      "end_char": 10383,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5490909090909091,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.347949",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 64,
      "document_id": "8143f8a95abc",
      "document_name": "_qdrant_fastembed_5.2-sparse-text-embeddings",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "hierarchy_path": "SparseEmbedding Structure",
      "chunk_hash": "840cd9d8212bf685",
      "content_digest": "840cd9d8212bf685",
      "chunk_length": 316,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "sparseembedding",
          "array",
          "token",
          "structure",
          "all",
          "sparse",
          "embedding",
          "implementations",
          "produce",
          "objects",
          "type",
          "which",
          "contains",
          "indices",
          "ids",
          "integers",
          "values",
          "weights",
          "corresponding",
          "each"
        ],
        "term_weights": [
          {
            "term": "sparseembedding",
            "tf": 2,
            "weight": 0.060606
          },
          {
            "term": "array",
            "tf": 2,
            "weight": 0.060606
          },
          {
            "term": "token",
            "tf": 2,
            "weight": 0.060606
          },
          {
            "term": "structure",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "all",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "sparse",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "embedding",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "implementations",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "produce",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "objects",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "type",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "which",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "contains",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "indices",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "ids",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "integers",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "values",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "weights",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "corresponding",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "each",
            "tf": 1,
            "weight": 0.030303
          }
        ],
        "unique_terms": 30,
        "total_terms": 33
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "SparseEmbedding Structure",
        "all",
        "array",
        "embedding",
        "implementations",
        "objects",
        "produce",
        "sparse",
        "sparseembedding",
        "structure",
        "token"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5490909090909091,
      "overall": 0.7496969696969696
    }
  },
  {
    "text": "### Parallel Processing  All sparse embedding implementations support parallel processing for faster document embedding. The `parallel` parameter in the `embed` method controls this behavior:  - `None`: Uses single-process embedding with ONNX threading - `0`: Uses all available CPU cores - `> 1`: Uses the specified number of worker processes  Sources: [fastembed/sparse/splade\\_pp.py135-167](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/splade_pp.py#L135-L167) [fastembed/sparse/bm25.py156-198](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/bm25.py#L156-L198) [fastembed/sparse/bm42.py270-302](https://github.com/qdrant/fastembed/blob/b785640b/fastembed/sparse/bm42.py#L270-L302)",
    "metadata": {
      "chunk_id": "8143f8a95abc-0014",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "file_extension": ".md",
      "chunk_index": 14,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Parallel Processing"
      ],
      "heading_text": "Parallel Processing",
      "token_count": 195,
      "char_count": 724,
      "start_char": 10688,
      "end_char": 11412,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5333962264150943,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.349130",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 195,
      "document_id": "8143f8a95abc",
      "document_name": "_qdrant_fastembed_5.2-sparse-text-embeddings",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "hierarchy_path": "Parallel Processing",
      "chunk_hash": "387bc75eabfe5206",
      "content_digest": "387bc75eabfe5206",
      "chunk_length": 724,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "fastembed",
          "sparse",
          "parallel",
          "embedding",
          "the",
          "uses",
          "https",
          "github",
          "com",
          "qdrant",
          "blob",
          "b785640b",
          "processing",
          "all",
          "splade",
          "bm25",
          "bm42",
          "implementations",
          "support",
          "for"
        ],
        "term_weights": [
          {
            "term": "fastembed",
            "tf": 9,
            "weight": 0.096774
          },
          {
            "term": "sparse",
            "tf": 7,
            "weight": 0.075269
          },
          {
            "term": "parallel",
            "tf": 3,
            "weight": 0.032258
          },
          {
            "term": "embedding",
            "tf": 3,
            "weight": 0.032258
          },
          {
            "term": "the",
            "tf": 3,
            "weight": 0.032258
          },
          {
            "term": "uses",
            "tf": 3,
            "weight": 0.032258
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.032258
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.032258
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.032258
          },
          {
            "term": "qdrant",
            "tf": 3,
            "weight": 0.032258
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.032258
          },
          {
            "term": "b785640b",
            "tf": 3,
            "weight": 0.032258
          },
          {
            "term": "processing",
            "tf": 2,
            "weight": 0.021505
          },
          {
            "term": "all",
            "tf": 2,
            "weight": 0.021505
          },
          {
            "term": "splade",
            "tf": 2,
            "weight": 0.021505
          },
          {
            "term": "bm25",
            "tf": 2,
            "weight": 0.021505
          },
          {
            "term": "bm42",
            "tf": 2,
            "weight": 0.021505
          },
          {
            "term": "implementations",
            "tf": 1,
            "weight": 0.010753
          },
          {
            "term": "support",
            "tf": 1,
            "weight": 0.010753
          },
          {
            "term": "for",
            "tf": 1,
            "weight": 0.010753
          }
        ],
        "unique_terms": 54,
        "total_terms": 93
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Parallel Processing",
        "com",
        "embedding",
        "fastembed",
        "github",
        "https",
        "parallel",
        "qdrant",
        "sparse",
        "the",
        "uses"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5333962264150943,
      "overall": 0.711132075471698
    }
  },
  {
    "text": "## Common Use Cases\n\n1. **Hybrid Search**: Combining sparse and dense embeddings for both keyword and semantic matching\n2. **Exact Keyword Matching**: When precise term matching is required\n3. **Specialized Domain Search**: When specific terminology must be precisely matched\n4. **Long Document Search**: Sparse embeddings can better handle specific terms in very long documents\n\nFor hybrid search examples, see [Sparse and Hybrid Search](qdrant/fastembed/7.2-sparse-and-hybrid-search.md).\n\nDismiss\n\nRefresh this wiki\n\nEnter email to refresh",
    "metadata": {
      "chunk_id": "8143f8a95abc-0015",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "file_extension": ".md",
      "chunk_index": 15,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Common Use Cases"
      ],
      "heading_text": "Common Use Cases",
      "token_count": 113,
      "char_count": 541,
      "start_char": 11414,
      "end_char": 11955,
      "semantic_score": 0.7,
      "structural_score": 0.7,
      "retrieval_quality": 0.5350704225352113,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.349634",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 113,
      "document_id": "8143f8a95abc",
      "document_name": "_qdrant_fastembed_5.2-sparse-text-embeddings",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "hierarchy_path": "Common Use Cases",
      "chunk_hash": "e7d189cd26150248",
      "content_digest": "e7d189cd26150248",
      "chunk_length": 541,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "search",
          "hybrid",
          "sparse",
          "and",
          "matching",
          "embeddings",
          "for",
          "keyword",
          "when",
          "specific",
          "long",
          "refresh",
          "common",
          "use",
          "cases",
          "combining",
          "dense",
          "both",
          "semantic",
          "exact"
        ],
        "term_weights": [
          {
            "term": "search",
            "tf": 6,
            "weight": 0.088235
          },
          {
            "term": "hybrid",
            "tf": 4,
            "weight": 0.058824
          },
          {
            "term": "sparse",
            "tf": 4,
            "weight": 0.058824
          },
          {
            "term": "and",
            "tf": 4,
            "weight": 0.058824
          },
          {
            "term": "matching",
            "tf": 3,
            "weight": 0.044118
          },
          {
            "term": "embeddings",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "for",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "keyword",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "when",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "specific",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "long",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "refresh",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "common",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "use",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "cases",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "combining",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "dense",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "both",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "semantic",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "exact",
            "tf": 1,
            "weight": 0.014706
          }
        ],
        "unique_terms": 45,
        "total_terms": 68
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Common Use Cases",
        "and",
        "embeddings",
        "for",
        "hybrid",
        "keyword",
        "matching",
        "search",
        "sparse",
        "specific",
        "when"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.7,
      "retrieval_quality": 0.5350704225352113,
      "overall": 0.6450234741784038
    }
  },
  {
    "text": "### On this page  - [Sparse Text Embeddings](#sparse-text-embeddings.md) - [Introduction to Sparse Embeddings](#introduction-to-sparse-embeddings.md) - [Core Architecture](#core-architecture.md) - [Implemented Models](#implemented-models.md) - [1. SpladePP](#1-spladepp.md) - [2. BM25](#2-bm25.md) - [3. BM42](#3-bm42.md) - [Embedding Process Flow](#embedding-process-flow.md) - [Model Comparison](#model-comparison.md) - [Usage](#usage.md) - [IDF Requirement](#idf-requirement.md) - [Implementation Details](#implementation-details.md) - [SparseEmbedding Structure](#sparseembedding-structure.md) - [Model Selection](#model-selection.md) - [Parallel Processing](#parallel-processing.md) - [Common Use Cases](#common-use-cases.md)",
    "metadata": {
      "chunk_id": "8143f8a95abc-0016",
      "source_file": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "file_extension": ".md",
      "chunk_index": 16,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "On this page"
      ],
      "heading_text": "On this page",
      "token_count": 207,
      "char_count": 730,
      "start_char": 11957,
      "end_char": 12687,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5042857142857142,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:42.350767",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 207,
      "document_id": "8143f8a95abc",
      "document_name": "_qdrant_fastembed_5.2-sparse-text-embeddings",
      "source_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_filename": "_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "source_directory": "Docs\\Qdrant\\qdrant_fastembed",
      "relative_path": "Docs\\Qdrant\\qdrant_fastembed\\_qdrant_fastembed_5.2-sparse-text-embeddings.md",
      "hierarchy_path": "On this page",
      "chunk_hash": "144551e418da813b",
      "content_digest": "144551e418da813b",
      "chunk_length": 730,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "sparse",
          "embeddings",
          "model",
          "text",
          "introduction",
          "core",
          "architecture",
          "implemented",
          "models",
          "spladepp",
          "bm25",
          "bm42",
          "embedding",
          "process",
          "flow",
          "comparison",
          "usage",
          "idf",
          "requirement",
          "implementation"
        ],
        "term_weights": [
          {
            "term": "sparse",
            "tf": 4,
            "weight": 0.060606
          },
          {
            "term": "embeddings",
            "tf": 4,
            "weight": 0.060606
          },
          {
            "term": "model",
            "tf": 4,
            "weight": 0.060606
          },
          {
            "term": "text",
            "tf": 2,
            "weight": 0.030303
          },
          {
            "term": "introduction",
            "tf": 2,
            "weight": 0.030303
          },
          {
            "term": "core",
            "tf": 2,
            "weight": 0.030303
          },
          {
            "term": "architecture",
            "tf": 2,
            "weight": 0.030303
          },
          {
            "term": "implemented",
            "tf": 2,
            "weight": 0.030303
          },
          {
            "term": "models",
            "tf": 2,
            "weight": 0.030303
          },
          {
            "term": "spladepp",
            "tf": 2,
            "weight": 0.030303
          },
          {
            "term": "bm25",
            "tf": 2,
            "weight": 0.030303
          },
          {
            "term": "bm42",
            "tf": 2,
            "weight": 0.030303
          },
          {
            "term": "embedding",
            "tf": 2,
            "weight": 0.030303
          },
          {
            "term": "process",
            "tf": 2,
            "weight": 0.030303
          },
          {
            "term": "flow",
            "tf": 2,
            "weight": 0.030303
          },
          {
            "term": "comparison",
            "tf": 2,
            "weight": 0.030303
          },
          {
            "term": "usage",
            "tf": 2,
            "weight": 0.030303
          },
          {
            "term": "idf",
            "tf": 2,
            "weight": 0.030303
          },
          {
            "term": "requirement",
            "tf": 2,
            "weight": 0.030303
          },
          {
            "term": "implementation",
            "tf": 2,
            "weight": 0.030303
          }
        ],
        "unique_terms": 31,
        "total_terms": 66
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "On this page",
        "architecture",
        "core",
        "embeddings",
        "implemented",
        "introduction",
        "model",
        "models",
        "sparse",
        "spladepp",
        "text"
      ],
      "collection_name": "Qdrant"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5042857142857142,
      "overall": 0.6680952380952382
    }
  }
]