[
  {
    "text": "# Context System and Dependencies  Relevant source files  - [examples/get\\_file.py](https://github.com/jlowin/fastmcp/blob/66221ed3/examples/get_file.py) - [src/fastmcp/server/context.py](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/server/context.py) - [src/fastmcp/utilities/types.py](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/utilities/types.py) - [tests/server/test\\_context.py](https://github.com/jlowin/fastmcp/blob/66221ed3/tests/server/test_context.py) - [tests/utilities/test\\_types.py](https://github.com/jlowin/fastmcp/blob/66221ed3/tests/utilities/test_types.py)  This section covers the Context object system and dependency injection mechanisms in FastMCP. The `Context` class provides tools and resources with access to MCP protocol capabilities like logging, sampling, and resource reading, while the dependency injection system automatically provides these capabilities to user functions based on type annotations. For information about how components (tools, resources, prompts) are created and managed, see [Component System Architecture](jlowin/fastmcp/2.1-component-system-architecture.md). For details about server composition and mounting, see [Server Composition and Proxying](jlowin/fastmcp/2.3-server-composition-and-proxying.md).",
    "metadata": {
      "chunk_id": "ba620d1d51a9-0000",
      "source_file": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "filename": "_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "file_extension": ".md",
      "chunk_index": 0,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Context System and Dependencies"
      ],
      "heading_text": "Context System and Dependencies",
      "token_count": 304,
      "char_count": 1288,
      "start_char": 1760,
      "end_char": 3048,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7114127659574468,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:09.726523",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 304,
      "document_id": "ba620d1d51a9",
      "document_name": "_jlowin_fastmcp_2.2-context-system-and-dependencies",
      "source_path": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "source_filename": "_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "source_directory": "Docs\\FAST_DOCS\\jlowin_fastmcp",
      "relative_path": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "hierarchy_path": "Context System and Dependencies",
      "chunk_hash": "45d648a7a8b52c2c",
      "content_digest": "45d648a7a8b52c2c",
      "chunk_length": 1288,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "fastmcp",
          "and",
          "context",
          "jlowin",
          "server",
          "system",
          "https",
          "github",
          "com",
          "blob",
          "66221ed3",
          "src",
          "utilities",
          "types",
          "tests",
          "test",
          "the",
          "composition",
          "examples",
          "get"
        ],
        "term_weights": [
          {
            "term": "fastmcp",
            "tf": 12,
            "weight": 0.07362
          },
          {
            "term": "and",
            "tf": 8,
            "weight": 0.04908
          },
          {
            "term": "context",
            "tf": 7,
            "weight": 0.042945
          },
          {
            "term": "jlowin",
            "tf": 7,
            "weight": 0.042945
          },
          {
            "term": "server",
            "tf": 7,
            "weight": 0.042945
          },
          {
            "term": "system",
            "tf": 5,
            "weight": 0.030675
          },
          {
            "term": "https",
            "tf": 5,
            "weight": 0.030675
          },
          {
            "term": "github",
            "tf": 5,
            "weight": 0.030675
          },
          {
            "term": "com",
            "tf": 5,
            "weight": 0.030675
          },
          {
            "term": "blob",
            "tf": 5,
            "weight": 0.030675
          },
          {
            "term": "66221ed3",
            "tf": 5,
            "weight": 0.030675
          },
          {
            "term": "src",
            "tf": 4,
            "weight": 0.02454
          },
          {
            "term": "utilities",
            "tf": 4,
            "weight": 0.02454
          },
          {
            "term": "types",
            "tf": 4,
            "weight": 0.02454
          },
          {
            "term": "tests",
            "tf": 4,
            "weight": 0.02454
          },
          {
            "term": "test",
            "tf": 4,
            "weight": 0.02454
          },
          {
            "term": "the",
            "tf": 3,
            "weight": 0.018405
          },
          {
            "term": "composition",
            "tf": 3,
            "weight": 0.018405
          },
          {
            "term": "examples",
            "tf": 2,
            "weight": 0.01227
          },
          {
            "term": "get",
            "tf": 2,
            "weight": 0.01227
          }
        ],
        "unique_terms": 69,
        "total_terms": 163
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Context System and Dependencies",
        "and",
        "blob",
        "com",
        "context",
        "fastmcp",
        "github",
        "https",
        "jlowin",
        "server",
        "system"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7114127659574468,
      "overall": 0.7371375886524824
    }
  },
  {
    "text": "## Context Object Architecture  The `Context` class serves as the primary interface between user-defined tools/resources and the underlying MCP protocol capabilities. It provides a clean, Pythonic API for accessing server session functionality. ``` ``` **Sources:** [src/fastmcp/server/context.py79-123](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/server/context.py#L79-L123) [src/fastmcp/server/context.py159-169](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/server/context.py#L159-L169)",
    "metadata": {
      "chunk_id": "ba620d1d51a9-0001",
      "source_file": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "filename": "_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "file_extension": ".md",
      "chunk_index": 1,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Context Object Architecture"
      ],
      "heading_text": "Context Object Architecture",
      "token_count": 128,
      "char_count": 519,
      "start_char": 3051,
      "end_char": 3570,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5656756756756757,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:09.729047",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 128,
      "document_id": "ba620d1d51a9",
      "document_name": "_jlowin_fastmcp_2.2-context-system-and-dependencies",
      "source_path": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "source_filename": "_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "source_directory": "Docs\\FAST_DOCS\\jlowin_fastmcp",
      "relative_path": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "hierarchy_path": "Context Object Architecture",
      "chunk_hash": "57ffb04ff60a5583",
      "content_digest": "57ffb04ff60a5583",
      "chunk_length": 519,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "context",
          "fastmcp",
          "server",
          "src",
          "the",
          "https",
          "github",
          "com",
          "jlowin",
          "blob",
          "66221ed3",
          "object",
          "architecture",
          "class",
          "serves",
          "primary",
          "interface",
          "between",
          "user",
          "defined"
        ],
        "term_weights": [
          {
            "term": "context",
            "tf": 6,
            "weight": 0.086957
          },
          {
            "term": "fastmcp",
            "tf": 6,
            "weight": 0.086957
          },
          {
            "term": "server",
            "tf": 5,
            "weight": 0.072464
          },
          {
            "term": "src",
            "tf": 4,
            "weight": 0.057971
          },
          {
            "term": "the",
            "tf": 3,
            "weight": 0.043478
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.028986
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.028986
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.028986
          },
          {
            "term": "jlowin",
            "tf": 2,
            "weight": 0.028986
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.028986
          },
          {
            "term": "66221ed3",
            "tf": 2,
            "weight": 0.028986
          },
          {
            "term": "object",
            "tf": 1,
            "weight": 0.014493
          },
          {
            "term": "architecture",
            "tf": 1,
            "weight": 0.014493
          },
          {
            "term": "class",
            "tf": 1,
            "weight": 0.014493
          },
          {
            "term": "serves",
            "tf": 1,
            "weight": 0.014493
          },
          {
            "term": "primary",
            "tf": 1,
            "weight": 0.014493
          },
          {
            "term": "interface",
            "tf": 1,
            "weight": 0.014493
          },
          {
            "term": "between",
            "tf": 1,
            "weight": 0.014493
          },
          {
            "term": "user",
            "tf": 1,
            "weight": 0.014493
          },
          {
            "term": "defined",
            "tf": 1,
            "weight": 0.014493
          }
        ],
        "unique_terms": 44,
        "total_terms": 69
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Context Object Architecture",
        "blob",
        "com",
        "context",
        "fastmcp",
        "github",
        "https",
        "jlowin",
        "server",
        "src",
        "the"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5656756756756757,
      "overall": 0.6885585585585585
    }
  },
  {
    "text": "## Dependency Injection System  FastMCP uses type annotation-based dependency injection to automatically provide `Context` objects and other dependencies to user functions. ``` ``` **Sources:** [src/fastmcp/utilities/types.py152-176](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/utilities/types.py#L152-L176) [src/fastmcp/utilities/types.py130-149](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/utilities/types.py#L130-L149)",
    "metadata": {
      "chunk_id": "ba620d1d51a9-0003",
      "source_file": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "filename": "_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "file_extension": ".md",
      "chunk_index": 3,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Dependency Injection System"
      ],
      "heading_text": "Dependency Injection System",
      "token_count": 119,
      "char_count": 453,
      "start_char": 4114,
      "end_char": 4567,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5438461538461539,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:09.731353",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 119,
      "document_id": "ba620d1d51a9",
      "document_name": "_jlowin_fastmcp_2.2-context-system-and-dependencies",
      "source_path": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "source_filename": "_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "source_directory": "Docs\\FAST_DOCS\\jlowin_fastmcp",
      "relative_path": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "hierarchy_path": "Dependency Injection System",
      "chunk_hash": "4bde8041efcd355b",
      "content_digest": "4bde8041efcd355b",
      "chunk_length": 453,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "fastmcp",
          "src",
          "utilities",
          "types",
          "dependency",
          "injection",
          "https",
          "github",
          "com",
          "jlowin",
          "blob",
          "66221ed3",
          "system",
          "uses",
          "type",
          "annotation",
          "based",
          "automatically",
          "provide",
          "context"
        ],
        "term_weights": [
          {
            "term": "fastmcp",
            "tf": 7,
            "weight": 0.12069
          },
          {
            "term": "src",
            "tf": 4,
            "weight": 0.068966
          },
          {
            "term": "utilities",
            "tf": 4,
            "weight": 0.068966
          },
          {
            "term": "types",
            "tf": 4,
            "weight": 0.068966
          },
          {
            "term": "dependency",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "injection",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "jlowin",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "66221ed3",
            "tf": 2,
            "weight": 0.034483
          },
          {
            "term": "system",
            "tf": 1,
            "weight": 0.017241
          },
          {
            "term": "uses",
            "tf": 1,
            "weight": 0.017241
          },
          {
            "term": "type",
            "tf": 1,
            "weight": 0.017241
          },
          {
            "term": "annotation",
            "tf": 1,
            "weight": 0.017241
          },
          {
            "term": "based",
            "tf": 1,
            "weight": 0.017241
          },
          {
            "term": "automatically",
            "tf": 1,
            "weight": 0.017241
          },
          {
            "term": "provide",
            "tf": 1,
            "weight": 0.017241
          },
          {
            "term": "context",
            "tf": 1,
            "weight": 0.017241
          }
        ],
        "unique_terms": 35,
        "total_terms": 58
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Dependency Injection System",
        "com",
        "dependency",
        "fastmcp",
        "github",
        "https",
        "injection",
        "jlowin",
        "src",
        "types",
        "utilities"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5438461538461539,
      "overall": 0.6812820512820513
    }
  },
  {
    "text": "### Type Annotation Processing  The system handles complex type annotations including unions, forward references, and `Annotated` types:  | Type Pattern      | Example                                  | Processing                            | | ----------------- | ---------------------------------------- | ------------------------------------- | | Direct Type       | `ctx: Context`                           | Direct match via `issubclass_safe()`  | | Union Type        | `ctx: Context \\| None`                   | Check each union member               | | Annotated Type    | `ctx: Annotated[Context, \"description\"]` | Extract base type from first argument | | Forward Reference | `ctx: \"Context\"`                         | Resolve via `get_type_hints()`        |  **Sources:** [src/fastmcp/utilities/types.py120-128](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/utilities/types.py#L120-L128) [src/fastmcp/utilities/types.py54-117](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/utilities/types.py#L54-L117)",
    "metadata": {
      "chunk_id": "ba620d1d51a9-0004",
      "source_file": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "filename": "_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "file_extension": ".md",
      "chunk_index": 4,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Type Annotation Processing"
      ],
      "heading_text": "Type Annotation Processing",
      "token_count": 227,
      "char_count": 1039,
      "start_char": 4571,
      "end_char": 5610,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.6624137931034483,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "table_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:09.732125",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 227,
      "document_id": "ba620d1d51a9",
      "document_name": "_jlowin_fastmcp_2.2-context-system-and-dependencies",
      "source_path": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "source_filename": "_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "source_directory": "Docs\\FAST_DOCS\\jlowin_fastmcp",
      "relative_path": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "hierarchy_path": "Type Annotation Processing",
      "chunk_hash": "9df30bb20dfba6e3",
      "content_digest": "9df30bb20dfba6e3",
      "chunk_length": 1039,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "type",
          "fastmcp",
          "types",
          "ctx",
          "context",
          "src",
          "utilities",
          "annotated",
          "processing",
          "forward",
          "direct",
          "via",
          "union",
          "https",
          "github",
          "com",
          "jlowin",
          "blob",
          "66221ed3",
          "annotation"
        ],
        "term_weights": [
          {
            "term": "type",
            "tf": 8,
            "weight": 0.081633
          },
          {
            "term": "fastmcp",
            "tf": 6,
            "weight": 0.061224
          },
          {
            "term": "types",
            "tf": 5,
            "weight": 0.05102
          },
          {
            "term": "ctx",
            "tf": 4,
            "weight": 0.040816
          },
          {
            "term": "context",
            "tf": 4,
            "weight": 0.040816
          },
          {
            "term": "src",
            "tf": 4,
            "weight": 0.040816
          },
          {
            "term": "utilities",
            "tf": 4,
            "weight": 0.040816
          },
          {
            "term": "annotated",
            "tf": 3,
            "weight": 0.030612
          },
          {
            "term": "processing",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "forward",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "direct",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "via",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "union",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "jlowin",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "66221ed3",
            "tf": 2,
            "weight": 0.020408
          },
          {
            "term": "annotation",
            "tf": 1,
            "weight": 0.010204
          }
        ],
        "unique_terms": 57,
        "total_terms": 98
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Type Annotation Processing",
        "annotated",
        "context",
        "ctx",
        "fastmcp",
        "forward",
        "processing",
        "src",
        "type",
        "types",
        "utilities"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.6624137931034483,
      "overall": 0.787471264367816
    }
  },
  {
    "text": "## State Management  The Context system provides request-scoped state management with inheritance semantics: ``` ``` **Sources:** [src/fastmcp/server/context.py113-117](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/server/context.py#L113-L117) [src/fastmcp/server/context.py140-144](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/server/context.py#L140-L144) [tests/server/test\\_context.py134-180](https://github.com/jlowin/fastmcp/blob/66221ed3/tests/server/test_context.py#L134-L180)",
    "metadata": {
      "chunk_id": "ba620d1d51a9-0009",
      "source_file": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "filename": "_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "file_extension": ".md",
      "chunk_index": 9,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "State Management"
      ],
      "heading_text": "State Management",
      "token_count": 142,
      "char_count": 512,
      "start_char": 6924,
      "end_char": 7436,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5426315789473684,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:09.736275",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 142,
      "document_id": "ba620d1d51a9",
      "document_name": "_jlowin_fastmcp_2.2-context-system-and-dependencies",
      "source_path": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "source_filename": "_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "source_directory": "Docs\\FAST_DOCS\\jlowin_fastmcp",
      "relative_path": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "hierarchy_path": "State Management",
      "chunk_hash": "e1882e991069cd59",
      "content_digest": "e1882e991069cd59",
      "chunk_length": 512,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "context",
          "fastmcp",
          "server",
          "src",
          "https",
          "github",
          "com",
          "jlowin",
          "blob",
          "66221ed3",
          "state",
          "management",
          "tests",
          "test",
          "the",
          "system",
          "provides",
          "request",
          "scoped",
          "with"
        ],
        "term_weights": [
          {
            "term": "context",
            "tf": 7,
            "weight": 0.098592
          },
          {
            "term": "fastmcp",
            "tf": 7,
            "weight": 0.098592
          },
          {
            "term": "server",
            "tf": 6,
            "weight": 0.084507
          },
          {
            "term": "src",
            "tf": 4,
            "weight": 0.056338
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.042254
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.042254
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.042254
          },
          {
            "term": "jlowin",
            "tf": 3,
            "weight": 0.042254
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.042254
          },
          {
            "term": "66221ed3",
            "tf": 3,
            "weight": 0.042254
          },
          {
            "term": "state",
            "tf": 2,
            "weight": 0.028169
          },
          {
            "term": "management",
            "tf": 2,
            "weight": 0.028169
          },
          {
            "term": "tests",
            "tf": 2,
            "weight": 0.028169
          },
          {
            "term": "test",
            "tf": 2,
            "weight": 0.028169
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.014085
          },
          {
            "term": "system",
            "tf": 1,
            "weight": 0.014085
          },
          {
            "term": "provides",
            "tf": 1,
            "weight": 0.014085
          },
          {
            "term": "request",
            "tf": 1,
            "weight": 0.014085
          },
          {
            "term": "scoped",
            "tf": 1,
            "weight": 0.014085
          },
          {
            "term": "with",
            "tf": 1,
            "weight": 0.014085
          }
        ],
        "unique_terms": 35,
        "total_terms": 71
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "66221ed3",
        "State Management",
        "blob",
        "com",
        "context",
        "fastmcp",
        "github",
        "https",
        "jlowin",
        "server",
        "src"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5426315789473684,
      "overall": 0.6808771929824561
    }
  },
  {
    "text": "## Type System Integration\n\nFastMCP's type system supports the Context dependency injection through several utility functions:",
    "metadata": {
      "chunk_id": "ba620d1d51a9-0010",
      "source_file": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "filename": "_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "file_extension": ".md",
      "chunk_index": 10,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Type System Integration"
      ],
      "heading_text": "Type System Integration",
      "token_count": 21,
      "char_count": 126,
      "start_char": 7440,
      "end_char": 7566,
      "semantic_score": 0.8,
      "structural_score": 0.7,
      "retrieval_quality": 0.5525,
      "chunking_strategy": "hybrid_adaptive_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:09.736621",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 21,
      "document_id": "ba620d1d51a9",
      "document_name": "_jlowin_fastmcp_2.2-context-system-and-dependencies",
      "source_path": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "source_filename": "_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "source_directory": "Docs\\FAST_DOCS\\jlowin_fastmcp",
      "relative_path": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "hierarchy_path": "Type System Integration",
      "chunk_hash": "3c483bd0f91409a2",
      "content_digest": "3c483bd0f91409a2",
      "chunk_length": 126,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "type",
          "system",
          "integration",
          "fastmcp",
          "supports",
          "the",
          "context",
          "dependency",
          "injection",
          "through",
          "several",
          "utility",
          "functions"
        ],
        "term_weights": [
          {
            "term": "type",
            "tf": 2,
            "weight": 0.133333
          },
          {
            "term": "system",
            "tf": 2,
            "weight": 0.133333
          },
          {
            "term": "integration",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "fastmcp",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "supports",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "context",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "dependency",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "injection",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "through",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "several",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "utility",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "functions",
            "tf": 1,
            "weight": 0.066667
          }
        ],
        "unique_terms": 13,
        "total_terms": 15
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Type System Integration",
        "context",
        "dependency",
        "fastmcp",
        "injection",
        "integration",
        "supports",
        "system",
        "the",
        "through",
        "type"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.7,
      "retrieval_quality": 0.5525,
      "overall": 0.6841666666666667
    }
  },
  {
    "text": "### Helper Type Classes  FastMCP provides helper classes for common content types that integrate with the Context system:  | Class   | Purpose                | Key Methods                                  | | ------- | ---------------------- | -------------------------------------------- | | `Image` | Image content handling | `to_image_content()` → `ImageContent`        | | `Audio` | Audio content handling | `to_audio_content()` → `AudioContent`        | | `File`  | File resource handling | `to_resource_content()` → `EmbeddedResource` |  **Sources:** [src/fastmcp/utilities/types.py178-379](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/utilities/types.py#L178-L379) [examples/get\\_file.py4](https://github.com/jlowin/fastmcp/blob/66221ed3/examples/get_file.py#L4-L4) [examples/get\\_file.py15](https://github.com/jlowin/fastmcp/blob/66221ed3/examples/get_file.py#L15-L15) [examples/get\\_file.py27](https://github.com/jlowin/fastmcp/blob/66221ed3/examples/get_file.py#L27-L27)",
    "metadata": {
      "chunk_id": "ba620d1d51a9-0012",
      "source_file": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "filename": "_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "file_extension": ".md",
      "chunk_index": 12,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Helper Type Classes"
      ],
      "heading_text": "Helper Type Classes",
      "token_count": 255,
      "char_count": 995,
      "start_char": 7874,
      "end_char": 8869,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.6759154929577464,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "table_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:09.738006",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 255,
      "document_id": "ba620d1d51a9",
      "document_name": "_jlowin_fastmcp_2.2-context-system-and-dependencies",
      "source_path": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "source_filename": "_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "source_directory": "Docs\\FAST_DOCS\\jlowin_fastmcp",
      "relative_path": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "hierarchy_path": "Helper Type Classes",
      "chunk_hash": "040984ff01da83e8",
      "content_digest": "040984ff01da83e8",
      "chunk_length": 995,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "file",
          "fastmcp",
          "content",
          "examples",
          "get",
          "https",
          "github",
          "com",
          "jlowin",
          "blob",
          "66221ed3",
          "types",
          "image",
          "handling",
          "audio",
          "helper",
          "classes",
          "resource",
          "src",
          "utilities"
        ],
        "term_weights": [
          {
            "term": "file",
            "tf": 8,
            "weight": 0.074074
          },
          {
            "term": "fastmcp",
            "tf": 7,
            "weight": 0.064815
          },
          {
            "term": "content",
            "tf": 6,
            "weight": 0.055556
          },
          {
            "term": "examples",
            "tf": 6,
            "weight": 0.055556
          },
          {
            "term": "get",
            "tf": 6,
            "weight": 0.055556
          },
          {
            "term": "https",
            "tf": 4,
            "weight": 0.037037
          },
          {
            "term": "github",
            "tf": 4,
            "weight": 0.037037
          },
          {
            "term": "com",
            "tf": 4,
            "weight": 0.037037
          },
          {
            "term": "jlowin",
            "tf": 4,
            "weight": 0.037037
          },
          {
            "term": "blob",
            "tf": 4,
            "weight": 0.037037
          },
          {
            "term": "66221ed3",
            "tf": 4,
            "weight": 0.037037
          },
          {
            "term": "types",
            "tf": 3,
            "weight": 0.027778
          },
          {
            "term": "image",
            "tf": 3,
            "weight": 0.027778
          },
          {
            "term": "handling",
            "tf": 3,
            "weight": 0.027778
          },
          {
            "term": "audio",
            "tf": 3,
            "weight": 0.027778
          },
          {
            "term": "helper",
            "tf": 2,
            "weight": 0.018519
          },
          {
            "term": "classes",
            "tf": 2,
            "weight": 0.018519
          },
          {
            "term": "resource",
            "tf": 2,
            "weight": 0.018519
          },
          {
            "term": "src",
            "tf": 2,
            "weight": 0.018519
          },
          {
            "term": "utilities",
            "tf": 2,
            "weight": 0.018519
          }
        ],
        "unique_terms": 47,
        "total_terms": 108
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Helper Type Classes",
        "blob",
        "com",
        "content",
        "examples",
        "fastmcp",
        "file",
        "get",
        "github",
        "https",
        "jlowin"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.6759154929577464,
      "overall": 0.7586384976525821
    }
  },
  {
    "text": "### Type Replacement System ``` ``` **Sources:** [src/fastmcp/utilities/types.py381-415](https://github.com/jlowin/fastmcp/blob/66221ed3/src/fastmcp/utilities/types.py#L381-L415) [tests/utilities/test\\_types.py598-622](https://github.com/jlowin/fastmcp/blob/66221ed3/tests/utilities/test_types.py#L598-L622)  Dismiss  Refresh this wiki  Enter email to refresh",
    "metadata": {
      "chunk_id": "ba620d1d51a9-0013",
      "source_file": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "filename": "_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "file_extension": ".md",
      "chunk_index": 13,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Type Replacement System"
      ],
      "heading_text": "Type Replacement System",
      "token_count": 104,
      "char_count": 359,
      "start_char": 8871,
      "end_char": 9230,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5547058823529412,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:09.739073",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 104,
      "document_id": "ba620d1d51a9",
      "document_name": "_jlowin_fastmcp_2.2-context-system-and-dependencies",
      "source_path": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "source_filename": "_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "source_directory": "Docs\\FAST_DOCS\\jlowin_fastmcp",
      "relative_path": "Docs\\FAST_DOCS\\jlowin_fastmcp\\_jlowin_fastmcp_2.2-context-system-and-dependencies.md",
      "hierarchy_path": "Type Replacement System",
      "chunk_hash": "7461f7ee27978515",
      "content_digest": "7461f7ee27978515",
      "chunk_length": 359,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "fastmcp",
          "utilities",
          "types",
          "src",
          "https",
          "github",
          "com",
          "jlowin",
          "blob",
          "66221ed3",
          "tests",
          "test",
          "refresh",
          "type",
          "replacement",
          "system",
          "sources",
          "py381",
          "415",
          "l381"
        ],
        "term_weights": [
          {
            "term": "fastmcp",
            "tf": 4,
            "weight": 0.081633
          },
          {
            "term": "utilities",
            "tf": 4,
            "weight": 0.081633
          },
          {
            "term": "types",
            "tf": 4,
            "weight": 0.081633
          },
          {
            "term": "src",
            "tf": 2,
            "weight": 0.040816
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.040816
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.040816
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.040816
          },
          {
            "term": "jlowin",
            "tf": 2,
            "weight": 0.040816
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.040816
          },
          {
            "term": "66221ed3",
            "tf": 2,
            "weight": 0.040816
          },
          {
            "term": "tests",
            "tf": 2,
            "weight": 0.040816
          },
          {
            "term": "test",
            "tf": 2,
            "weight": 0.040816
          },
          {
            "term": "refresh",
            "tf": 2,
            "weight": 0.040816
          },
          {
            "term": "type",
            "tf": 1,
            "weight": 0.020408
          },
          {
            "term": "replacement",
            "tf": 1,
            "weight": 0.020408
          },
          {
            "term": "system",
            "tf": 1,
            "weight": 0.020408
          },
          {
            "term": "sources",
            "tf": 1,
            "weight": 0.020408
          },
          {
            "term": "py381",
            "tf": 1,
            "weight": 0.020408
          },
          {
            "term": "415",
            "tf": 1,
            "weight": 0.020408
          },
          {
            "term": "l381",
            "tf": 1,
            "weight": 0.020408
          }
        ],
        "unique_terms": 30,
        "total_terms": 49
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "66221ed3",
        "Type Replacement System",
        "blob",
        "com",
        "fastmcp",
        "github",
        "https",
        "jlowin",
        "src",
        "types",
        "utilities"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5547058823529412,
      "overall": 0.6849019607843138
    }
  }
]