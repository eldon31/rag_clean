[
  {
    "text": "## Overview  The client authentication system implements OAuth 2.0 Authorization Code flow with PKCE (Proof Key for Code Exchange) for secure authentication with MCP servers. It supports both modern RFC 9728 protected resource architecture and legacy authorization server patterns for backwards compatibility. **Key Components:**  - `OAuthClientProvider` - Main authentication provider implementing `httpx.Auth` - `OAuthContext` - Stateful context managing OAuth flow data - `PKCEParameters` - PKCE parameter generation and validation - `TokenStorage` - Protocol for persistent token storage  Sources: [src/mcp/client/auth.py1-552](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L1-L552) [tests/client/test\\_auth.py1-900](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/tests/client/test_auth.py#L1-L900)",
    "metadata": {
      "chunk_id": "e5e48abff6e7-0001",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "file_extension": ".md",
      "chunk_index": 1,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Overview"
      ],
      "heading_text": "Overview",
      "token_count": 191,
      "char_count": 862,
      "start_char": 4676,
      "end_char": 5538,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5187499999999999,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:04.798575",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 191,
      "document_id": "e5e48abff6e7",
      "document_name": "_modelcontextprotocol_python-sdk_3.3-client-authentication",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "hierarchy_path": "Overview",
      "chunk_hash": "fe4d1b45c63c8b39",
      "content_digest": "fe4d1b45c63c8b39",
      "chunk_length": 862,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "client",
          "auth",
          "for",
          "authentication",
          "mcp",
          "oauth",
          "authorization",
          "code",
          "flow",
          "with",
          "pkce",
          "key",
          "and",
          "src",
          "py1",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python"
        ],
        "term_weights": [
          {
            "term": "client",
            "tf": 5,
            "weight": 0.04717
          },
          {
            "term": "auth",
            "tf": 5,
            "weight": 0.04717
          },
          {
            "term": "for",
            "tf": 4,
            "weight": 0.037736
          },
          {
            "term": "authentication",
            "tf": 3,
            "weight": 0.028302
          },
          {
            "term": "mcp",
            "tf": 3,
            "weight": 0.028302
          },
          {
            "term": "oauth",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "authorization",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "code",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "flow",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "with",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "pkce",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "key",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "and",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "src",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "py1",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "modelcontextprotocol",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "python",
            "tf": 2,
            "weight": 0.018868
          }
        ],
        "unique_terms": 71,
        "total_terms": 106
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Overview",
        "auth",
        "authentication",
        "authorization",
        "client",
        "code",
        "flow",
        "for",
        "mcp",
        "oauth",
        "with"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5187499999999999,
      "overall": 0.7062499999999999
    }
  },
  {
    "text": "## Architecture Overview ``` ``` Sources: [src/mcp/client/auth.py179-552](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L179-L552) [src/mcp/client/auth.py84-177](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L84-L177)",
    "metadata": {
      "chunk_id": "e5e48abff6e7-0002",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "file_extension": ".md",
      "chunk_index": 2,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Architecture Overview"
      ],
      "heading_text": "Architecture Overview",
      "token_count": 85,
      "char_count": 301,
      "start_char": 5541,
      "end_char": 5842,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5525,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:04.799914",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 85,
      "document_id": "e5e48abff6e7",
      "document_name": "_modelcontextprotocol_python-sdk_3.3-client-authentication",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "hierarchy_path": "Architecture Overview",
      "chunk_hash": "4d1fc48e18fc31c6",
      "content_digest": "4d1fc48e18fc31c6",
      "chunk_length": 301,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "src",
          "mcp",
          "client",
          "auth",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "architecture",
          "overview",
          "sources",
          "py179",
          "552",
          "l179",
          "l552",
          "py84"
        ],
        "term_weights": [
          {
            "term": "src",
            "tf": 4,
            "weight": 0.093023
          },
          {
            "term": "mcp",
            "tf": 4,
            "weight": 0.093023
          },
          {
            "term": "client",
            "tf": 4,
            "weight": 0.093023
          },
          {
            "term": "auth",
            "tf": 4,
            "weight": 0.093023
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.046512
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.046512
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.046512
          },
          {
            "term": "modelcontextprotocol",
            "tf": 2,
            "weight": 0.046512
          },
          {
            "term": "python",
            "tf": 2,
            "weight": 0.046512
          },
          {
            "term": "sdk",
            "tf": 2,
            "weight": 0.046512
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.046512
          },
          {
            "term": "146d7efb",
            "tf": 2,
            "weight": 0.046512
          },
          {
            "term": "architecture",
            "tf": 1,
            "weight": 0.023256
          },
          {
            "term": "overview",
            "tf": 1,
            "weight": 0.023256
          },
          {
            "term": "sources",
            "tf": 1,
            "weight": 0.023256
          },
          {
            "term": "py179",
            "tf": 1,
            "weight": 0.023256
          },
          {
            "term": "552",
            "tf": 1,
            "weight": 0.023256
          },
          {
            "term": "l179",
            "tf": 1,
            "weight": 0.023256
          },
          {
            "term": "l552",
            "tf": 1,
            "weight": 0.023256
          },
          {
            "term": "py84",
            "tf": 1,
            "weight": 0.023256
          }
        ],
        "unique_terms": 23,
        "total_terms": 43
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Architecture Overview",
        "auth",
        "client",
        "com",
        "github",
        "https",
        "mcp",
        "modelcontextprotocol",
        "python",
        "sdk",
        "src"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5525,
      "overall": 0.6841666666666667
    }
  },
  {
    "text": "### OAuthContext  The `OAuthContext` dataclass maintains all state during the OAuth flow, including discovered metadata, client information, and current tokens. **State Management:**  - **Discovery metadata**: `protected_resource_metadata`, `oauth_metadata` - **Client registration**: `client_info` - **Token state**: `current_tokens`, `token_expiry_time` - **Thread safety**: `lock` (anyio.Lock)  **Key Methods:**  - `is_token_valid()` - Check token validity and expiration - `can_refresh_token()` - Determine if refresh is possible - `get_resource_url()` - Calculate RFC 8707 resource parameter - `should_include_resource_param()` - Protocol version-aware parameter inclusion  Sources: [src/mcp/client/auth.py84-177](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L84-L177)",
    "metadata": {
      "chunk_id": "e5e48abff6e7-0005",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "file_extension": ".md",
      "chunk_index": 5,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "OAuthContext"
      ],
      "heading_text": "OAuthContext",
      "token_count": 184,
      "char_count": 816,
      "start_char": 7324,
      "end_char": 8140,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5347368421052632,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:04.804468",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 184,
      "document_id": "e5e48abff6e7",
      "document_name": "_modelcontextprotocol_python-sdk_3.3-client-authentication",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "hierarchy_path": "OAuthContext",
      "chunk_hash": "6e8f8c273ddb9a19",
      "content_digest": "6e8f8c273ddb9a19",
      "chunk_length": 816,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "client",
          "token",
          "metadata",
          "resource",
          "state",
          "oauthcontext",
          "the",
          "oauth",
          "and",
          "current",
          "tokens",
          "lock",
          "refresh",
          "parameter",
          "src",
          "mcp",
          "auth",
          "dataclass",
          "maintains",
          "all"
        ],
        "term_weights": [
          {
            "term": "client",
            "tf": 5,
            "weight": 0.051546
          },
          {
            "term": "token",
            "tf": 5,
            "weight": 0.051546
          },
          {
            "term": "metadata",
            "tf": 4,
            "weight": 0.041237
          },
          {
            "term": "resource",
            "tf": 4,
            "weight": 0.041237
          },
          {
            "term": "state",
            "tf": 3,
            "weight": 0.030928
          },
          {
            "term": "oauthcontext",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "oauth",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "and",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "current",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "tokens",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "lock",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "refresh",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "parameter",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "src",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "mcp",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "auth",
            "tf": 2,
            "weight": 0.020619
          },
          {
            "term": "dataclass",
            "tf": 1,
            "weight": 0.010309
          },
          {
            "term": "maintains",
            "tf": 1,
            "weight": 0.010309
          },
          {
            "term": "all",
            "tf": 1,
            "weight": 0.010309
          }
        ],
        "unique_terms": 69,
        "total_terms": 97
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "OAuthContext",
        "and",
        "client",
        "current",
        "metadata",
        "oauth",
        "oauthcontext",
        "resource",
        "state",
        "the",
        "token"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5347368421052632,
      "overall": 0.7449122807017542
    }
  },
  {
    "text": "### PKCEParameters  Implements PKCE (Proof Key for Code Exchange) parameter generation following RFC 7636 for enhanced security. **Generation Process:**  - **Code verifier**: 128-character random string using `[A-Za-z0-9-._~]` - **Code challenge**: SHA256 hash of verifier, base64url-encoded (no padding) - **Challenge method**: Always \"S256\" ``` ``` Sources: [src/mcp/client/auth.py49-62](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L49-L62) [tests/client/test\\_auth.py82-107](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/tests/client/test_auth.py#L82-L107)",
    "metadata": {
      "chunk_id": "e5e48abff6e7-0006",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "file_extension": ".md",
      "chunk_index": 6,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "PKCEParameters"
      ],
      "heading_text": "PKCEParameters",
      "token_count": 164,
      "char_count": 622,
      "start_char": 8143,
      "end_char": 8765,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5580851063829787,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:04.806456",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 164,
      "document_id": "e5e48abff6e7",
      "document_name": "_modelcontextprotocol_python-sdk_3.3-client-authentication",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "hierarchy_path": "PKCEParameters",
      "chunk_hash": "122d5b7c4ae451c0",
      "content_digest": "122d5b7c4ae451c0",
      "chunk_length": 622,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "client",
          "auth",
          "code",
          "for",
          "generation",
          "verifier",
          "challenge",
          "src",
          "mcp",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "tests",
          "test",
          "pkceparameters"
        ],
        "term_weights": [
          {
            "term": "client",
            "tf": 4,
            "weight": 0.051948
          },
          {
            "term": "auth",
            "tf": 4,
            "weight": 0.051948
          },
          {
            "term": "code",
            "tf": 3,
            "weight": 0.038961
          },
          {
            "term": "for",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "generation",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "verifier",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "challenge",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "src",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "mcp",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "modelcontextprotocol",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "python",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "sdk",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "146d7efb",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "tests",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "test",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "pkceparameters",
            "tf": 1,
            "weight": 0.012987
          }
        ],
        "unique_terms": 53,
        "total_terms": 77
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "PKCEParameters",
        "auth",
        "challenge",
        "client",
        "code",
        "for",
        "generation",
        "https",
        "mcp",
        "src",
        "verifier"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5580851063829787,
      "overall": 0.7193617021276596
    }
  },
  {
    "text": "### Complete OAuth Flow Sequence ``` ``` Sources: [src/mcp/client/auth.py485-552](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L485-L552) [tests/client/test\\_auth.py575-701](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/tests/client/test_auth.py#L575-L701)",
    "metadata": {
      "chunk_id": "e5e48abff6e7-0008",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "file_extension": ".md",
      "chunk_index": 8,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Complete OAuth Flow Sequence"
      ],
      "heading_text": "Complete OAuth Flow Sequence",
      "token_count": 86,
      "char_count": 318,
      "start_char": 8794,
      "end_char": 9112,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.56,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:04.807330",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 86,
      "document_id": "e5e48abff6e7",
      "document_name": "_modelcontextprotocol_python-sdk_3.3-client-authentication",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "hierarchy_path": "Complete OAuth Flow Sequence",
      "chunk_hash": "a0bd0e4369c98e24",
      "content_digest": "a0bd0e4369c98e24",
      "chunk_length": 318,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "client",
          "auth",
          "src",
          "mcp",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "tests",
          "test",
          "complete",
          "oauth",
          "flow",
          "sequence",
          "sources",
          "py485"
        ],
        "term_weights": [
          {
            "term": "client",
            "tf": 4,
            "weight": 0.088889
          },
          {
            "term": "auth",
            "tf": 4,
            "weight": 0.088889
          },
          {
            "term": "src",
            "tf": 2,
            "weight": 0.044444
          },
          {
            "term": "mcp",
            "tf": 2,
            "weight": 0.044444
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.044444
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.044444
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.044444
          },
          {
            "term": "modelcontextprotocol",
            "tf": 2,
            "weight": 0.044444
          },
          {
            "term": "python",
            "tf": 2,
            "weight": 0.044444
          },
          {
            "term": "sdk",
            "tf": 2,
            "weight": 0.044444
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.044444
          },
          {
            "term": "146d7efb",
            "tf": 2,
            "weight": 0.044444
          },
          {
            "term": "tests",
            "tf": 2,
            "weight": 0.044444
          },
          {
            "term": "test",
            "tf": 2,
            "weight": 0.044444
          },
          {
            "term": "complete",
            "tf": 1,
            "weight": 0.022222
          },
          {
            "term": "oauth",
            "tf": 1,
            "weight": 0.022222
          },
          {
            "term": "flow",
            "tf": 1,
            "weight": 0.022222
          },
          {
            "term": "sequence",
            "tf": 1,
            "weight": 0.022222
          },
          {
            "term": "sources",
            "tf": 1,
            "weight": 0.022222
          },
          {
            "term": "py485",
            "tf": 1,
            "weight": 0.022222
          }
        ],
        "unique_terms": 27,
        "total_terms": 45
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Complete OAuth Flow Sequence",
        "auth",
        "client",
        "com",
        "github",
        "https",
        "mcp",
        "modelcontextprotocol",
        "python",
        "sdk",
        "src"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.56,
      "overall": 0.6866666666666666
    }
  },
  {
    "text": "### Discovery Mechanisms  The client implements multiple discovery mechanisms for maximum compatibility:  **1. RFC 9728 Protected Resource Discovery**  - Extracts resource metadata URL from `WWW-Authenticate` header - Falls back to `/.well-known/oauth-protected-resource` - Discovers authorization server URLs  **2. OAuth Metadata Discovery with Fallback** The client tries multiple discovery URLs in order:  1. `/.well-known/oauth-authorization-server{path}` (RFC 8414 path-aware) 2. `/.well-known/oauth-authorization-server` (OAuth root) 3. `/.well-known/openid-configuration{path}` (OIDC path-aware) 4. `{server_url}/.well-known/openid-configuration` (OIDC fallback) ``` ``` Sources: [src/mcp/client/auth.py254-279](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L254-L279) [src/mcp/client/auth.py231-253](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L231-L253) [tests/client/test\\_auth.py252-365](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/tests/client/test_auth.py#L252-L365)",
    "metadata": {
      "chunk_id": "e5e48abff6e7-0009",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "file_extension": ".md",
      "chunk_index": 9,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Discovery Mechanisms"
      ],
      "heading_text": "Discovery Mechanisms",
      "token_count": 279,
      "char_count": 1086,
      "start_char": 9116,
      "end_char": 10202,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5283561643835616,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:04.809529",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 279,
      "document_id": "e5e48abff6e7",
      "document_name": "_modelcontextprotocol_python-sdk_3.3-client-authentication",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "hierarchy_path": "Discovery Mechanisms",
      "chunk_hash": "b4f5aea9cb6913a9",
      "content_digest": "b4f5aea9cb6913a9",
      "chunk_length": 1086,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "client",
          "auth",
          "discovery",
          "well",
          "known",
          "oauth",
          "server",
          "path",
          "src",
          "mcp",
          "resource",
          "authorization",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb"
        ],
        "term_weights": [
          {
            "term": "client",
            "tf": 8,
            "weight": 0.056738
          },
          {
            "term": "auth",
            "tf": 6,
            "weight": 0.042553
          },
          {
            "term": "discovery",
            "tf": 5,
            "weight": 0.035461
          },
          {
            "term": "well",
            "tf": 5,
            "weight": 0.035461
          },
          {
            "term": "known",
            "tf": 5,
            "weight": 0.035461
          },
          {
            "term": "oauth",
            "tf": 5,
            "weight": 0.035461
          },
          {
            "term": "server",
            "tf": 4,
            "weight": 0.028369
          },
          {
            "term": "path",
            "tf": 4,
            "weight": 0.028369
          },
          {
            "term": "src",
            "tf": 4,
            "weight": 0.028369
          },
          {
            "term": "mcp",
            "tf": 4,
            "weight": 0.028369
          },
          {
            "term": "resource",
            "tf": 3,
            "weight": 0.021277
          },
          {
            "term": "authorization",
            "tf": 3,
            "weight": 0.021277
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.021277
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.021277
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.021277
          },
          {
            "term": "modelcontextprotocol",
            "tf": 3,
            "weight": 0.021277
          },
          {
            "term": "python",
            "tf": 3,
            "weight": 0.021277
          },
          {
            "term": "sdk",
            "tf": 3,
            "weight": 0.021277
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.021277
          },
          {
            "term": "146d7efb",
            "tf": 3,
            "weight": 0.021277
          }
        ],
        "unique_terms": 66,
        "total_terms": 141
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Discovery Mechanisms",
        "auth",
        "client",
        "discovery",
        "known",
        "mcp",
        "oauth",
        "path",
        "server",
        "src",
        "well"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5283561643835616,
      "overall": 0.6761187214611871
    }
  },
  {
    "text": "### WWW-Authenticate Header Parsing  Supports RFC 9728 resource metadata discovery via `WWW-Authenticate` header parsing: ``` ``` **Supported Header Formats:**  - `Bearer resource_metadata=\"https://api.example.com/.well-known/oauth-protected-resource\"` - `Bearer resource_metadata=https://api.example.com/metadata` - `Bearer realm=\"api\", resource_metadata=\"https://api.example.com/metadata\", error=\"insufficient_scope\"`  Sources: [src/mcp/client/auth.py207-229](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L207-L229) [tests/client/test\\_auth.py782-900](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/tests/client/test_auth.py#L782-L900)",
    "metadata": {
      "chunk_id": "e5e48abff6e7-0010",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "file_extension": ".md",
      "chunk_index": 10,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "WWW-Authenticate Header Parsing"
      ],
      "heading_text": "WWW-Authenticate Header Parsing",
      "token_count": 168,
      "char_count": 698,
      "start_char": 10206,
      "end_char": 10904,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7263636363636363,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:04.810835",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 168,
      "document_id": "e5e48abff6e7",
      "document_name": "_modelcontextprotocol_python-sdk_3.3-client-authentication",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "hierarchy_path": "WWW-Authenticate Header Parsing",
      "chunk_hash": "dcac278fe9c3f628",
      "content_digest": "dcac278fe9c3f628",
      "chunk_length": 698,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "metadata",
          "resource",
          "https",
          "com",
          "api",
          "client",
          "auth",
          "header",
          "bearer",
          "example",
          "www",
          "authenticate",
          "parsing",
          "src",
          "mcp",
          "github",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob"
        ],
        "term_weights": [
          {
            "term": "metadata",
            "tf": 6,
            "weight": 0.065217
          },
          {
            "term": "resource",
            "tf": 5,
            "weight": 0.054348
          },
          {
            "term": "https",
            "tf": 5,
            "weight": 0.054348
          },
          {
            "term": "com",
            "tf": 5,
            "weight": 0.054348
          },
          {
            "term": "api",
            "tf": 4,
            "weight": 0.043478
          },
          {
            "term": "client",
            "tf": 4,
            "weight": 0.043478
          },
          {
            "term": "auth",
            "tf": 4,
            "weight": 0.043478
          },
          {
            "term": "header",
            "tf": 3,
            "weight": 0.032609
          },
          {
            "term": "bearer",
            "tf": 3,
            "weight": 0.032609
          },
          {
            "term": "example",
            "tf": 3,
            "weight": 0.032609
          },
          {
            "term": "www",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "authenticate",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "parsing",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "src",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "mcp",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "modelcontextprotocol",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "python",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "sdk",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.021739
          }
        ],
        "unique_terms": 47,
        "total_terms": 92
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "WWW-Authenticate Header Parsing",
        "api",
        "auth",
        "bearer",
        "client",
        "com",
        "example",
        "header",
        "https",
        "metadata",
        "resource"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7263636363636363,
      "overall": 0.7754545454545454
    }
  },
  {
    "text": "### Token Validation and Refresh  **Token Validity Checking:** ``` ``` **Automatic Refresh Logic:** The provider automatically attempts token refresh when:  1. Current token is expired but refresh token exists 2. Client information is available for authentication 3. Refresh fails trigger full re-authentication  Sources: [src/mcp/client/auth.py127-143](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L127-L143) [src/mcp/client/auth.py494-502](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L494-L502) [src/mcp/client/auth.py411-462](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L411-L462)",
    "metadata": {
      "chunk_id": "e5e48abff6e7-0013",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "file_extension": ".md",
      "chunk_index": 13,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Token Validation and Refresh"
      ],
      "heading_text": "Token Validation and Refresh",
      "token_count": 178,
      "char_count": 714,
      "start_char": 10959,
      "end_char": 11673,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5313043478260869,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:04.813016",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 178,
      "document_id": "e5e48abff6e7",
      "document_name": "_modelcontextprotocol_python-sdk_3.3-client-authentication",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "hierarchy_path": "Token Validation and Refresh",
      "chunk_hash": "a9a0316674a95baa",
      "content_digest": "a9a0316674a95baa",
      "chunk_length": 714,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "client",
          "src",
          "mcp",
          "auth",
          "token",
          "refresh",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "authentication",
          "validation",
          "and",
          "validity",
          "checking",
          "automatic"
        ],
        "term_weights": [
          {
            "term": "client",
            "tf": 7,
            "weight": 0.073684
          },
          {
            "term": "src",
            "tf": 6,
            "weight": 0.063158
          },
          {
            "term": "mcp",
            "tf": 6,
            "weight": 0.063158
          },
          {
            "term": "auth",
            "tf": 6,
            "weight": 0.063158
          },
          {
            "term": "token",
            "tf": 5,
            "weight": 0.052632
          },
          {
            "term": "refresh",
            "tf": 5,
            "weight": 0.052632
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.031579
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.031579
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.031579
          },
          {
            "term": "modelcontextprotocol",
            "tf": 3,
            "weight": 0.031579
          },
          {
            "term": "python",
            "tf": 3,
            "weight": 0.031579
          },
          {
            "term": "sdk",
            "tf": 3,
            "weight": 0.031579
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.031579
          },
          {
            "term": "146d7efb",
            "tf": 3,
            "weight": 0.031579
          },
          {
            "term": "authentication",
            "tf": 2,
            "weight": 0.021053
          },
          {
            "term": "validation",
            "tf": 1,
            "weight": 0.010526
          },
          {
            "term": "and",
            "tf": 1,
            "weight": 0.010526
          },
          {
            "term": "validity",
            "tf": 1,
            "weight": 0.010526
          },
          {
            "term": "checking",
            "tf": 1,
            "weight": 0.010526
          },
          {
            "term": "automatic",
            "tf": 1,
            "weight": 0.010526
          }
        ],
        "unique_terms": 49,
        "total_terms": 95
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Token Validation and Refresh",
        "auth",
        "client",
        "com",
        "github",
        "https",
        "mcp",
        "modelcontextprotocol",
        "refresh",
        "src",
        "token"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5313043478260869,
      "overall": 0.6771014492753623
    }
  },
  {
    "text": "### Resource Parameter Handling  Implements RFC 8707 resource parameter inclusion based on protocol version and protected resource metadata: ``` ``` **Resource URL Calculation:**  - Uses protected resource metadata if available and valid - Falls back to canonical server URL derived from MCP endpoint - Validates hierarchical resource relationships  Sources: [src/mcp/client/auth.py159-177](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L159-L177) [src/mcp/client/auth.py144-158](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L144-L158) [tests/client/test\\_auth.py459-534](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/tests/client/test_auth.py#L459-L534)",
    "metadata": {
      "chunk_id": "e5e48abff6e7-0014",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "file_extension": ".md",
      "chunk_index": 14,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Resource Parameter Handling"
      ],
      "heading_text": "Resource Parameter Handling",
      "token_count": 174,
      "char_count": 758,
      "start_char": 11677,
      "end_char": 12435,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5265384615384615,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:04.815533",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 174,
      "document_id": "e5e48abff6e7",
      "document_name": "_modelcontextprotocol_python-sdk_3.3-client-authentication",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "hierarchy_path": "Resource Parameter Handling",
      "chunk_hash": "9a256d6784b7a242",
      "content_digest": "9a256d6784b7a242",
      "chunk_length": 758,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "resource",
          "client",
          "auth",
          "mcp",
          "src",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "parameter",
          "and",
          "protected",
          "metadata",
          "url",
          "tests",
          "test"
        ],
        "term_weights": [
          {
            "term": "resource",
            "tf": 6,
            "weight": 0.06
          },
          {
            "term": "client",
            "tf": 6,
            "weight": 0.06
          },
          {
            "term": "auth",
            "tf": 6,
            "weight": 0.06
          },
          {
            "term": "mcp",
            "tf": 5,
            "weight": 0.05
          },
          {
            "term": "src",
            "tf": 4,
            "weight": 0.04
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.03
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.03
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.03
          },
          {
            "term": "modelcontextprotocol",
            "tf": 3,
            "weight": 0.03
          },
          {
            "term": "python",
            "tf": 3,
            "weight": 0.03
          },
          {
            "term": "sdk",
            "tf": 3,
            "weight": 0.03
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.03
          },
          {
            "term": "146d7efb",
            "tf": 3,
            "weight": 0.03
          },
          {
            "term": "parameter",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "and",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "protected",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "metadata",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "url",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "tests",
            "tf": 2,
            "weight": 0.02
          },
          {
            "term": "test",
            "tf": 2,
            "weight": 0.02
          }
        ],
        "unique_terms": 55,
        "total_terms": 100
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Resource Parameter Handling",
        "auth",
        "client",
        "com",
        "github",
        "https",
        "mcp",
        "modelcontextprotocol",
        "python",
        "resource",
        "src"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5265384615384615,
      "overall": 0.7088461538461538
    }
  },
  {
    "text": "### TokenStorage Protocol  The `TokenStorage` protocol defines the interface for persistent token storage: ``` ``` **Implementation Requirements:**  - **Persistence**: Tokens should survive application restarts - **Security**: Secure storage with appropriate encryption - **Concurrency**: Thread-safe access patterns - **Cleanup**: Automatic removal of expired tokens  **Example Storage Implementation:** ``` ``` Sources: [src/mcp/client/auth.py64-82](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L64-L82) [tests/client/test\\_auth.py17-35](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/tests/client/test_auth.py#L17-L35)",
    "metadata": {
      "chunk_id": "e5e48abff6e7-0016",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "file_extension": ".md",
      "chunk_index": 16,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "TokenStorage Protocol"
      ],
      "heading_text": "TokenStorage Protocol",
      "token_count": 149,
      "char_count": 682,
      "start_char": 12457,
      "end_char": 13139,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7311764705882352,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:04.818755",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 149,
      "document_id": "e5e48abff6e7",
      "document_name": "_modelcontextprotocol_python-sdk_3.3-client-authentication",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "hierarchy_path": "TokenStorage Protocol",
      "chunk_hash": "3319675d230f3b2e",
      "content_digest": "3319675d230f3b2e",
      "chunk_length": 682,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "client",
          "auth",
          "storage",
          "tokenstorage",
          "protocol",
          "the",
          "implementation",
          "tokens",
          "src",
          "mcp",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "tests",
          "test"
        ],
        "term_weights": [
          {
            "term": "client",
            "tf": 4,
            "weight": 0.051282
          },
          {
            "term": "auth",
            "tf": 4,
            "weight": 0.051282
          },
          {
            "term": "storage",
            "tf": 3,
            "weight": 0.038462
          },
          {
            "term": "tokenstorage",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "protocol",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "implementation",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "tokens",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "src",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "mcp",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "modelcontextprotocol",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "python",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "sdk",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "146d7efb",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "tests",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "test",
            "tf": 2,
            "weight": 0.025641
          }
        ],
        "unique_terms": 53,
        "total_terms": 78
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "TokenStorage Protocol",
        "auth",
        "client",
        "implementation",
        "mcp",
        "protocol",
        "src",
        "storage",
        "the",
        "tokens",
        "tokenstorage"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7311764705882352,
      "overall": 0.7770588235294117
    }
  },
  {
    "text": "## Integration Examples",
    "metadata": {
      "chunk_id": "e5e48abff6e7-0019",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "file_extension": ".md",
      "chunk_index": 19,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Integration Examples"
      ],
      "heading_text": "Integration Examples",
      "token_count": 3,
      "char_count": 23,
      "start_char": 14396,
      "end_char": 14419,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "chunking_strategy": "hybrid_adaptive_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:04.824252",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 3,
      "document_id": "e5e48abff6e7",
      "document_name": "_modelcontextprotocol_python-sdk_3.3-client-authentication",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "hierarchy_path": "Integration Examples",
      "chunk_hash": "12e5a3dfd851e10e",
      "content_digest": "12e5a3dfd851e10e",
      "chunk_length": 23,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "integration",
          "examples"
        ],
        "term_weights": [
          {
            "term": "integration",
            "tf": 1,
            "weight": 0.5
          },
          {
            "term": "examples",
            "tf": 1,
            "weight": 0.5
          }
        ],
        "unique_terms": 2,
        "total_terms": 2
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Integration Examples",
        "examples",
        "integration"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "overall": 0.7633333333333333
    }
  },
  {
    "text": "### Transport Integration  The authentication provider integrates seamlessly with all MCP transports:  - **StreamableHTTP**: Built-in OAuth support via `httpx.AsyncClient` - **SSE**: Authentication headers added to SSE connections - **WebSocket**: OAuth tokens passed in connection headers - **stdio**: Not applicable (local process communication)  Sources: [examples/clients/simple-auth-client/](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/examples/clients/simple-auth-client/) [src/mcp/client/auth.py485-552](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L485-L552)  Dismiss  Refresh this wiki  Enter email to refresh",
    "metadata": {
      "chunk_id": "e5e48abff6e7-0021",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "file_extension": ".md",
      "chunk_index": 21,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Transport Integration"
      ],
      "heading_text": "Transport Integration",
      "token_count": 150,
      "char_count": 682,
      "start_char": 14464,
      "end_char": 15146,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7447169811320754,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:04.825148",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 150,
      "document_id": "e5e48abff6e7",
      "document_name": "_modelcontextprotocol_python-sdk_3.3-client-authentication",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_filename": "_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_3.3-client-authentication.md",
      "hierarchy_path": "Transport Integration",
      "chunk_hash": "23e3263903d9752c",
      "content_digest": "23e3263903d9752c",
      "chunk_length": 682,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "auth",
          "client",
          "mcp",
          "authentication",
          "oauth",
          "sse",
          "headers",
          "examples",
          "clients",
          "simple",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "src",
          "refresh"
        ],
        "term_weights": [
          {
            "term": "auth",
            "tf": 4,
            "weight": 0.04878
          },
          {
            "term": "client",
            "tf": 4,
            "weight": 0.04878
          },
          {
            "term": "mcp",
            "tf": 3,
            "weight": 0.036585
          },
          {
            "term": "authentication",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "oauth",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "sse",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "headers",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "examples",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "clients",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "simple",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "modelcontextprotocol",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "python",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "sdk",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "146d7efb",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "src",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "refresh",
            "tf": 2,
            "weight": 0.02439
          }
        ],
        "unique_terms": 57,
        "total_terms": 82
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Transport Integration",
        "auth",
        "authentication",
        "client",
        "clients",
        "examples",
        "headers",
        "mcp",
        "oauth",
        "simple",
        "sse"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7447169811320754,
      "overall": 0.781572327044025
    }
  }
]