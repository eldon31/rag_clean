[
  {
    "text": "# Authentication & Security  Relevant source files  - [src/mcp/client/auth.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py) - [src/mcp/server/auth/handlers/register.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/handlers/register.py) - [src/mcp/server/auth/routes.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/routes.py) - [src/mcp/shared/auth.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/shared/auth.py) - [tests/client/test\\_auth.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/tests/client/test_auth.py) - [tests/shared/test\\_auth.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/tests/shared/test_auth.py)  This document covers the OAuth 2.0 authentication system implemented in the MCP Python SDK for securing communication between MCP clients and servers. The authentication system provides both client-side authentication (for MCP clients connecting to protected servers) and server-side authentication (for MCP servers that need to authenticate clients). The OAuth system integrates seamlessly with MCP's core components:  - **ClientSession**: Automatically handles OAuth authentication when connecting to protected MCP servers - **FastMCP servers**: Can optionally expose OAuth authorization server endpoints - **Transport layer**: OAuth authentication works across all transport mechanisms (stdio, SSE, StreamableHTTP)  For detailed OAuth implementation specifics, see [OAuth 2.0 System](modelcontextprotocol/python-sdk/7.1-oauth-2.0-system.md). For transport-level security features like DNS rebinding protection, see [Transport Security](modelcontextprotocol/python-sdk/5.4-transport-security.md). For the overall client framework, see [Client Framework](modelcontextprotocol/python-sdk/3-client-framework.md).",
    "metadata": {
      "chunk_id": "9fc9e9cb99f0-0000",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "file_extension": ".md",
      "chunk_index": 0,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Authentication & Security"
      ],
      "heading_text": "Authentication & Security",
      "token_count": 415,
      "char_count": 1924,
      "start_char": 3437,
      "end_char": 5361,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5288478260869565,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.243646",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 415,
      "document_id": "9fc9e9cb99f0",
      "document_name": "_modelcontextprotocol_python-sdk_7-authentication-and-security",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "hierarchy_path": "Authentication & Security",
      "chunk_hash": "ee912579a6af0863",
      "content_digest": "ee912579a6af0863",
      "chunk_length": 1924,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "mcp",
          "auth",
          "python",
          "sdk",
          "modelcontextprotocol",
          "src",
          "client",
          "oauth",
          "authentication",
          "https",
          "github",
          "com",
          "blob",
          "146d7efb",
          "server",
          "for",
          "the",
          "system",
          "servers",
          "transport"
        ],
        "term_weights": [
          {
            "term": "mcp",
            "tf": 14,
            "weight": 0.059574
          },
          {
            "term": "auth",
            "tf": 12,
            "weight": 0.051064
          },
          {
            "term": "python",
            "tf": 10,
            "weight": 0.042553
          },
          {
            "term": "sdk",
            "tf": 10,
            "weight": 0.042553
          },
          {
            "term": "modelcontextprotocol",
            "tf": 9,
            "weight": 0.038298
          },
          {
            "term": "src",
            "tf": 8,
            "weight": 0.034043
          },
          {
            "term": "client",
            "tf": 8,
            "weight": 0.034043
          },
          {
            "term": "oauth",
            "tf": 8,
            "weight": 0.034043
          },
          {
            "term": "authentication",
            "tf": 7,
            "weight": 0.029787
          },
          {
            "term": "https",
            "tf": 6,
            "weight": 0.025532
          },
          {
            "term": "github",
            "tf": 6,
            "weight": 0.025532
          },
          {
            "term": "com",
            "tf": 6,
            "weight": 0.025532
          },
          {
            "term": "blob",
            "tf": 6,
            "weight": 0.025532
          },
          {
            "term": "146d7efb",
            "tf": 6,
            "weight": 0.025532
          },
          {
            "term": "server",
            "tf": 6,
            "weight": 0.025532
          },
          {
            "term": "for",
            "tf": 6,
            "weight": 0.025532
          },
          {
            "term": "the",
            "tf": 5,
            "weight": 0.021277
          },
          {
            "term": "system",
            "tf": 5,
            "weight": 0.021277
          },
          {
            "term": "servers",
            "tf": 5,
            "weight": 0.021277
          },
          {
            "term": "transport",
            "tf": 5,
            "weight": 0.021277
          }
        ],
        "unique_terms": 82,
        "total_terms": 235
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Authentication & Security",
        "auth",
        "authentication",
        "client",
        "https",
        "mcp",
        "modelcontextprotocol",
        "oauth",
        "python",
        "sdk",
        "src"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5288478260869565,
      "overall": 0.6762826086956522
    }
  },
  {
    "text": "## MCP Authentication Integration ``` ``` **Sources:** [src/mcp/client/auth.py179-206](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L179-L206) [src/mcp/server/auth/routes.py68-146](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/routes.py#L68-L146) [src/mcp/client/session.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/session.py) [src/mcp/server/fastmcp/](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/fastmcp/)",
    "metadata": {
      "chunk_id": "9fc9e9cb99f0-0001",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "file_extension": ".md",
      "chunk_index": 1,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "MCP Authentication Integration"
      ],
      "heading_text": "MCP Authentication Integration",
      "token_count": 154,
      "char_count": 564,
      "start_char": 5364,
      "end_char": 5928,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5627272727272727,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.244908",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 154,
      "document_id": "9fc9e9cb99f0",
      "document_name": "_modelcontextprotocol_python-sdk_7-authentication-and-security",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "hierarchy_path": "MCP Authentication Integration",
      "chunk_hash": "079e632ceea7ab31",
      "content_digest": "079e632ceea7ab31",
      "chunk_length": 564,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "mcp",
          "src",
          "client",
          "auth",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "server",
          "routes",
          "session",
          "fastmcp",
          "authentication",
          "integration",
          "sources",
          "py179"
        ],
        "term_weights": [
          {
            "term": "mcp",
            "tf": 9,
            "weight": 0.115385
          },
          {
            "term": "src",
            "tf": 8,
            "weight": 0.102564
          },
          {
            "term": "client",
            "tf": 4,
            "weight": 0.051282
          },
          {
            "term": "auth",
            "tf": 4,
            "weight": 0.051282
          },
          {
            "term": "https",
            "tf": 4,
            "weight": 0.051282
          },
          {
            "term": "github",
            "tf": 4,
            "weight": 0.051282
          },
          {
            "term": "com",
            "tf": 4,
            "weight": 0.051282
          },
          {
            "term": "modelcontextprotocol",
            "tf": 4,
            "weight": 0.051282
          },
          {
            "term": "python",
            "tf": 4,
            "weight": 0.051282
          },
          {
            "term": "sdk",
            "tf": 4,
            "weight": 0.051282
          },
          {
            "term": "blob",
            "tf": 4,
            "weight": 0.051282
          },
          {
            "term": "146d7efb",
            "tf": 4,
            "weight": 0.051282
          },
          {
            "term": "server",
            "tf": 4,
            "weight": 0.051282
          },
          {
            "term": "routes",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "session",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "fastmcp",
            "tf": 2,
            "weight": 0.025641
          },
          {
            "term": "authentication",
            "tf": 1,
            "weight": 0.012821
          },
          {
            "term": "integration",
            "tf": 1,
            "weight": 0.012821
          },
          {
            "term": "sources",
            "tf": 1,
            "weight": 0.012821
          },
          {
            "term": "py179",
            "tf": 1,
            "weight": 0.012821
          }
        ],
        "unique_terms": 27,
        "total_terms": 78
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "MCP Authentication Integration",
        "auth",
        "client",
        "com",
        "github",
        "https",
        "mcp",
        "modelcontextprotocol",
        "python",
        "sdk",
        "src"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5627272727272727,
      "overall": 0.6875757575757575
    }
  },
  {
    "text": "## OAuth 2.0 Client Authentication  The MCP SDK provides a complete OAuth 2.0 client implementation centered around the `OAuthClientProvider` class, which integrates with httpx to provide transparent authentication for HTTP requests.",
    "metadata": {
      "chunk_id": "9fc9e9cb99f0-0002",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "file_extension": ".md",
      "chunk_index": 2,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "OAuth 2.0 Client Authentication"
      ],
      "heading_text": "OAuth 2.0 Client Authentication",
      "token_count": 45,
      "char_count": 233,
      "start_char": 5932,
      "end_char": 6165,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5416129032258065,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.246072",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 45,
      "document_id": "9fc9e9cb99f0",
      "document_name": "_modelcontextprotocol_python-sdk_7-authentication-and-security",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "hierarchy_path": "OAuth 2.0 Client Authentication",
      "chunk_hash": "d9fa51f7da717569",
      "content_digest": "d9fa51f7da717569",
      "chunk_length": 233,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "oauth",
          "client",
          "authentication",
          "the",
          "mcp",
          "sdk",
          "provides",
          "complete",
          "implementation",
          "centered",
          "around",
          "oauthclientprovider",
          "class",
          "which",
          "integrates",
          "with",
          "httpx",
          "provide",
          "transparent",
          "for"
        ],
        "term_weights": [
          {
            "term": "oauth",
            "tf": 2,
            "weight": 0.076923
          },
          {
            "term": "client",
            "tf": 2,
            "weight": 0.076923
          },
          {
            "term": "authentication",
            "tf": 2,
            "weight": 0.076923
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.076923
          },
          {
            "term": "mcp",
            "tf": 1,
            "weight": 0.038462
          },
          {
            "term": "sdk",
            "tf": 1,
            "weight": 0.038462
          },
          {
            "term": "provides",
            "tf": 1,
            "weight": 0.038462
          },
          {
            "term": "complete",
            "tf": 1,
            "weight": 0.038462
          },
          {
            "term": "implementation",
            "tf": 1,
            "weight": 0.038462
          },
          {
            "term": "centered",
            "tf": 1,
            "weight": 0.038462
          },
          {
            "term": "around",
            "tf": 1,
            "weight": 0.038462
          },
          {
            "term": "oauthclientprovider",
            "tf": 1,
            "weight": 0.038462
          },
          {
            "term": "class",
            "tf": 1,
            "weight": 0.038462
          },
          {
            "term": "which",
            "tf": 1,
            "weight": 0.038462
          },
          {
            "term": "integrates",
            "tf": 1,
            "weight": 0.038462
          },
          {
            "term": "with",
            "tf": 1,
            "weight": 0.038462
          },
          {
            "term": "httpx",
            "tf": 1,
            "weight": 0.038462
          },
          {
            "term": "provide",
            "tf": 1,
            "weight": 0.038462
          },
          {
            "term": "transparent",
            "tf": 1,
            "weight": 0.038462
          },
          {
            "term": "for",
            "tf": 1,
            "weight": 0.038462
          }
        ],
        "unique_terms": 22,
        "total_terms": 26
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "OAuth 2.0 Client Authentication",
        "authentication",
        "centered",
        "client",
        "complete",
        "implementation",
        "mcp",
        "oauth",
        "provides",
        "sdk",
        "the"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5416129032258065,
      "overall": 0.7138709677419355
    }
  },
  {
    "text": "### Core Client Components Architecture ``` ``` The `OAuthClientProvider` implements the `httpx.Auth` interface, allowing it to be used as an authentication handler for any HTTP client that supports httpx auth providers. The class is instantiated with server URL, client metadata, token storage, and callback handlers for user interaction. **Sources:** [src/mcp/client/auth.py179-206](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L179-L206) [src/mcp/shared/auth.py6-25](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/shared/auth.py#L6-L25) [src/mcp/shared/auth.py37-91](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/shared/auth.py#L37-L91) [src/mcp/shared/auth.py93-103](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/shared/auth.py#L93-L103)",
    "metadata": {
      "chunk_id": "9fc9e9cb99f0-0003",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "file_extension": ".md",
      "chunk_index": 3,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Core Client Components Architecture"
      ],
      "heading_text": "Core Client Components Architecture",
      "token_count": 222,
      "char_count": 864,
      "start_char": 6167,
      "end_char": 7031,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5560377358490566,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.248999",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 222,
      "document_id": "9fc9e9cb99f0",
      "document_name": "_modelcontextprotocol_python-sdk_7-authentication-and-security",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "hierarchy_path": "Core Client Components Architecture",
      "chunk_hash": "00f15aa7baba7d76",
      "content_digest": "00f15aa7baba7d76",
      "chunk_length": 864,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "auth",
          "src",
          "mcp",
          "shared",
          "client",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "the",
          "httpx",
          "for",
          "core",
          "components",
          "architecture",
          "oauthclientprovider"
        ],
        "term_weights": [
          {
            "term": "auth",
            "tf": 10,
            "weight": 0.084746
          },
          {
            "term": "src",
            "tf": 8,
            "weight": 0.067797
          },
          {
            "term": "mcp",
            "tf": 8,
            "weight": 0.067797
          },
          {
            "term": "shared",
            "tf": 6,
            "weight": 0.050847
          },
          {
            "term": "client",
            "tf": 5,
            "weight": 0.042373
          },
          {
            "term": "https",
            "tf": 4,
            "weight": 0.033898
          },
          {
            "term": "github",
            "tf": 4,
            "weight": 0.033898
          },
          {
            "term": "com",
            "tf": 4,
            "weight": 0.033898
          },
          {
            "term": "modelcontextprotocol",
            "tf": 4,
            "weight": 0.033898
          },
          {
            "term": "python",
            "tf": 4,
            "weight": 0.033898
          },
          {
            "term": "sdk",
            "tf": 4,
            "weight": 0.033898
          },
          {
            "term": "blob",
            "tf": 4,
            "weight": 0.033898
          },
          {
            "term": "146d7efb",
            "tf": 4,
            "weight": 0.033898
          },
          {
            "term": "the",
            "tf": 3,
            "weight": 0.025424
          },
          {
            "term": "httpx",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "for",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "core",
            "tf": 1,
            "weight": 0.008475
          },
          {
            "term": "components",
            "tf": 1,
            "weight": 0.008475
          },
          {
            "term": "architecture",
            "tf": 1,
            "weight": 0.008475
          },
          {
            "term": "oauthclientprovider",
            "tf": 1,
            "weight": 0.008475
          }
        ],
        "unique_terms": 58,
        "total_terms": 118
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Core Client Components Architecture",
        "auth",
        "client",
        "com",
        "github",
        "https",
        "mcp",
        "modelcontextprotocol",
        "python",
        "shared",
        "src"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5560377358490566,
      "overall": 0.6853459119496855
    }
  },
  {
    "text": "### Protected Resource Discovery  The client implements RFC 9728 for automatic discovery of authorization servers through several methods in `OAuthClientProvider`. The discovery process supports multiple fallback mechanisms:  1. **WWW-Authenticate Header**: `_extract_resource_metadata_from_www_auth()` extracts `resource_metadata` URL from 401 responses 2. **Well-known Resource Discovery**: `_discover_protected_resource()` falls back to `/.well-known/oauth-protected-resource` 3. **Authorization Server Discovery**: `_get_discovery_urls()` tries multiple OAuth metadata endpoints ``` ``` The discovery flow uses regex pattern matching in `_extract_resource_metadata_from_www_auth()` to parse the WWW-Authenticate header: `resource_metadata=(?:\"([^\"]+)\"|([^\\s,]+))`. If no resource\\_metadata is found, it constructs the well-known URL using `get_authorization_base_url()` and `urljoin()`. **Sources:** [src/mcp/client/auth.py207-240](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L207-L240) [src/mcp/client/auth.py254-279](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L254-L279) [src/mcp/client/auth.py517-530](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L517-L530) [src/mcp/client/auth.py242-252](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L242-L252)",
    "metadata": {
      "chunk_id": "9fc9e9cb99f0-0006",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "file_extension": ".md",
      "chunk_index": 6,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Protected Resource Discovery"
      ],
      "heading_text": "Protected Resource Discovery",
      "token_count": 342,
      "char_count": 1427,
      "start_char": 10110,
      "end_char": 11537,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5536869565217392,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.268246",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 342,
      "document_id": "9fc9e9cb99f0",
      "document_name": "_modelcontextprotocol_python-sdk_7-authentication-and-security",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "hierarchy_path": "Protected Resource Discovery",
      "chunk_hash": "9c982b6aec93f010",
      "content_digest": "9c982b6aec93f010",
      "chunk_length": 1427,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "auth",
          "resource",
          "client",
          "src",
          "mcp",
          "discovery",
          "metadata",
          "the",
          "www",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "protected",
          "authorization",
          "from"
        ],
        "term_weights": [
          {
            "term": "auth",
            "tf": 10,
            "weight": 0.055249
          },
          {
            "term": "resource",
            "tf": 9,
            "weight": 0.049724
          },
          {
            "term": "client",
            "tf": 9,
            "weight": 0.049724
          },
          {
            "term": "src",
            "tf": 8,
            "weight": 0.044199
          },
          {
            "term": "mcp",
            "tf": 8,
            "weight": 0.044199
          },
          {
            "term": "discovery",
            "tf": 7,
            "weight": 0.038674
          },
          {
            "term": "metadata",
            "tf": 6,
            "weight": 0.033149
          },
          {
            "term": "the",
            "tf": 5,
            "weight": 0.027624
          },
          {
            "term": "www",
            "tf": 4,
            "weight": 0.022099
          },
          {
            "term": "https",
            "tf": 4,
            "weight": 0.022099
          },
          {
            "term": "github",
            "tf": 4,
            "weight": 0.022099
          },
          {
            "term": "com",
            "tf": 4,
            "weight": 0.022099
          },
          {
            "term": "modelcontextprotocol",
            "tf": 4,
            "weight": 0.022099
          },
          {
            "term": "python",
            "tf": 4,
            "weight": 0.022099
          },
          {
            "term": "sdk",
            "tf": 4,
            "weight": 0.022099
          },
          {
            "term": "blob",
            "tf": 4,
            "weight": 0.022099
          },
          {
            "term": "146d7efb",
            "tf": 4,
            "weight": 0.022099
          },
          {
            "term": "protected",
            "tf": 3,
            "weight": 0.016575
          },
          {
            "term": "authorization",
            "tf": 3,
            "weight": 0.016575
          },
          {
            "term": "from",
            "tf": 3,
            "weight": 0.016575
          }
        ],
        "unique_terms": 82,
        "total_terms": 181
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Protected Resource Discovery",
        "auth",
        "client",
        "discovery",
        "https",
        "mcp",
        "metadata",
        "resource",
        "src",
        "the",
        "www"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5536869565217392,
      "overall": 0.717895652173913
    }
  },
  {
    "text": "## OAuth 2.0 Server Implementation  The server-side authentication system provides a complete OAuth 2.0 authorization server implementation that MCP servers can use to authenticate clients. The system is built around the `create_auth_routes()` function and handler classes.",
    "metadata": {
      "chunk_id": "9fc9e9cb99f0-0007",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "file_extension": ".md",
      "chunk_index": 7,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "OAuth 2.0 Server Implementation"
      ],
      "heading_text": "OAuth 2.0 Server Implementation",
      "token_count": 50,
      "char_count": 273,
      "start_char": 11542,
      "end_char": 11815,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5316666666666666,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.270626",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 50,
      "document_id": "9fc9e9cb99f0",
      "document_name": "_modelcontextprotocol_python-sdk_7-authentication-and-security",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "hierarchy_path": "OAuth 2.0 Server Implementation",
      "chunk_hash": "e325ce4909b1536d",
      "content_digest": "e325ce4909b1536d",
      "chunk_length": 273,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "server",
          "the",
          "oauth",
          "implementation",
          "system",
          "side",
          "authentication",
          "provides",
          "complete",
          "authorization",
          "that",
          "mcp",
          "servers",
          "can",
          "use",
          "authenticate",
          "clients",
          "built",
          "around",
          "create"
        ],
        "term_weights": [
          {
            "term": "server",
            "tf": 3,
            "weight": 0.090909
          },
          {
            "term": "the",
            "tf": 3,
            "weight": 0.090909
          },
          {
            "term": "oauth",
            "tf": 2,
            "weight": 0.060606
          },
          {
            "term": "implementation",
            "tf": 2,
            "weight": 0.060606
          },
          {
            "term": "system",
            "tf": 2,
            "weight": 0.060606
          },
          {
            "term": "side",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "authentication",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "provides",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "complete",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "authorization",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "that",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "mcp",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "servers",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "can",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "use",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "authenticate",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "clients",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "built",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "around",
            "tf": 1,
            "weight": 0.030303
          },
          {
            "term": "create",
            "tf": 1,
            "weight": 0.030303
          }
        ],
        "unique_terms": 26,
        "total_terms": 33
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "OAuth 2.0 Server Implementation",
        "authentication",
        "authorization",
        "complete",
        "implementation",
        "oauth",
        "provides",
        "server",
        "side",
        "system",
        "the"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5316666666666666,
      "overall": 0.7105555555555555
    }
  },
  {
    "text": "### Server Components Architecture ``` ``` **Sources:** [src/mcp/server/auth/routes.py68-146](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/routes.py#L68-L146) [src/mcp/server/auth/handlers/](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/handlers/) [src/mcp/server/auth/middleware/client\\_auth.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/middleware/client_auth.py) [src/mcp/server/auth/settings.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/settings.py)",
    "metadata": {
      "chunk_id": "9fc9e9cb99f0-0008",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "file_extension": ".md",
      "chunk_index": 8,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Server Components Architecture"
      ],
      "heading_text": "Server Components Architecture",
      "token_count": 159,
      "char_count": 619,
      "start_char": 11817,
      "end_char": 12436,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5627272727272727,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.271815",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 159,
      "document_id": "9fc9e9cb99f0",
      "document_name": "_modelcontextprotocol_python-sdk_7-authentication-and-security",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "hierarchy_path": "Server Components Architecture",
      "chunk_hash": "40031b678b56a8ce",
      "content_digest": "40031b678b56a8ce",
      "chunk_length": 619,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "auth",
          "server",
          "src",
          "mcp",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "routes",
          "handlers",
          "middleware",
          "client",
          "settings",
          "components",
          "architecture",
          "sources"
        ],
        "term_weights": [
          {
            "term": "auth",
            "tf": 10,
            "weight": 0.119048
          },
          {
            "term": "server",
            "tf": 9,
            "weight": 0.107143
          },
          {
            "term": "src",
            "tf": 8,
            "weight": 0.095238
          },
          {
            "term": "mcp",
            "tf": 8,
            "weight": 0.095238
          },
          {
            "term": "https",
            "tf": 4,
            "weight": 0.047619
          },
          {
            "term": "github",
            "tf": 4,
            "weight": 0.047619
          },
          {
            "term": "com",
            "tf": 4,
            "weight": 0.047619
          },
          {
            "term": "modelcontextprotocol",
            "tf": 4,
            "weight": 0.047619
          },
          {
            "term": "python",
            "tf": 4,
            "weight": 0.047619
          },
          {
            "term": "sdk",
            "tf": 4,
            "weight": 0.047619
          },
          {
            "term": "blob",
            "tf": 4,
            "weight": 0.047619
          },
          {
            "term": "146d7efb",
            "tf": 4,
            "weight": 0.047619
          },
          {
            "term": "routes",
            "tf": 2,
            "weight": 0.02381
          },
          {
            "term": "handlers",
            "tf": 2,
            "weight": 0.02381
          },
          {
            "term": "middleware",
            "tf": 2,
            "weight": 0.02381
          },
          {
            "term": "client",
            "tf": 2,
            "weight": 0.02381
          },
          {
            "term": "settings",
            "tf": 2,
            "weight": 0.02381
          },
          {
            "term": "components",
            "tf": 1,
            "weight": 0.011905
          },
          {
            "term": "architecture",
            "tf": 1,
            "weight": 0.011905
          },
          {
            "term": "sources",
            "tf": 1,
            "weight": 0.011905
          }
        ],
        "unique_terms": 24,
        "total_terms": 84
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Server Components Architecture",
        "auth",
        "com",
        "github",
        "https",
        "mcp",
        "modelcontextprotocol",
        "python",
        "sdk",
        "server",
        "src"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5627272727272727,
      "overall": 0.6875757575757575
    }
  },
  {
    "text": "### OAuth Metadata Generation  The server automatically generates RFC 8414 compliant OAuth metadata using the `build_metadata()` function based on configuration:  | Field                                   | Value                                     | Source                                    | | --------------------------------------- | ----------------------------------------- | ----------------------------------------- | | `issuer`                                | Server base URL                           | `issuer_url` parameter                    | | `authorization_endpoint`                | `{issuer}/authorize`                      | `AUTHORIZATION_PATH` constant             | | `token_endpoint`                        | `{issuer}/token`                          | `TOKEN_PATH` constant                     | | `registration_endpoint`                 | `{issuer}/register`                       | `REGISTRATION_PATH` constant (if enabled) | | `revocation_endpoint`                   | `{issuer}/revoke`                         | `REVOCATION_PATH` constant (if enabled)   | | `scopes_supported`                      | Valid scopes list                         | `ClientRegistrationOptions.valid_scopes`  | | `grant_types_supported`                 | `[\"authorization_code\", \"refresh_token\"]` | Fixed in `build_metadata()`               | | `token_endpoint_auth_methods_supported` | `[\"client_secret_post\"]`                  | Fixed in `build_metadata()`               | | `code_challenge_methods_supported`      | `[\"S256\"]`                                | Fixed in `build_metadata()`               |  The `build_metadata()` function constructs the complete `OAuthMetadata` object with proper URL validation through `validate_issuer_url()` and CORS support via `cors_middleware()`. The metadata is served by `MetadataHandler.handle()` at the well-known endpoint. **Sources:** [src/mcp/server/auth/routes.py149-186](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/routes.py#L149-L186) [src/mcp/server/auth/routes.py23-47](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/routes.py#L23-L47) [src/mcp/server/auth/routes.py49-52](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/routes.py#L49-L52) [src/mcp/server/auth/handlers/metadata.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/handlers/metadata.py)",
    "metadata": {
      "chunk_id": "9fc9e9cb99f0-0009",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "file_extension": ".md",
      "chunk_index": 9,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "OAuth Metadata Generation"
      ],
      "heading_text": "OAuth Metadata Generation",
      "token_count": 482,
      "char_count": 2466,
      "start_char": 12440,
      "end_char": 14906,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5095006622516556,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "table_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.273503",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 482,
      "document_id": "9fc9e9cb99f0",
      "document_name": "_modelcontextprotocol_python-sdk_7-authentication-and-security",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "hierarchy_path": "OAuth Metadata Generation",
      "chunk_hash": "736d6328b7ee263d",
      "content_digest": "736d6328b7ee263d",
      "chunk_length": 2466,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "metadata",
          "server",
          "auth",
          "src",
          "mcp",
          "issuer",
          "the",
          "endpoint",
          "routes",
          "build",
          "token",
          "url",
          "path",
          "constant",
          "supported",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python"
        ],
        "term_weights": [
          {
            "term": "metadata",
            "tf": 10,
            "weight": 0.046948
          },
          {
            "term": "server",
            "tf": 10,
            "weight": 0.046948
          },
          {
            "term": "auth",
            "tf": 9,
            "weight": 0.042254
          },
          {
            "term": "src",
            "tf": 8,
            "weight": 0.037559
          },
          {
            "term": "mcp",
            "tf": 8,
            "weight": 0.037559
          },
          {
            "term": "issuer",
            "tf": 7,
            "weight": 0.032864
          },
          {
            "term": "the",
            "tf": 6,
            "weight": 0.028169
          },
          {
            "term": "endpoint",
            "tf": 6,
            "weight": 0.028169
          },
          {
            "term": "routes",
            "tf": 6,
            "weight": 0.028169
          },
          {
            "term": "build",
            "tf": 5,
            "weight": 0.023474
          },
          {
            "term": "token",
            "tf": 5,
            "weight": 0.023474
          },
          {
            "term": "url",
            "tf": 4,
            "weight": 0.018779
          },
          {
            "term": "path",
            "tf": 4,
            "weight": 0.018779
          },
          {
            "term": "constant",
            "tf": 4,
            "weight": 0.018779
          },
          {
            "term": "supported",
            "tf": 4,
            "weight": 0.018779
          },
          {
            "term": "https",
            "tf": 4,
            "weight": 0.018779
          },
          {
            "term": "github",
            "tf": 4,
            "weight": 0.018779
          },
          {
            "term": "com",
            "tf": 4,
            "weight": 0.018779
          },
          {
            "term": "modelcontextprotocol",
            "tf": 4,
            "weight": 0.018779
          },
          {
            "term": "python",
            "tf": 4,
            "weight": 0.018779
          }
        ],
        "unique_terms": 92,
        "total_terms": 213
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "OAuth Metadata Generation",
        "auth",
        "build",
        "endpoint",
        "issuer",
        "mcp",
        "metadata",
        "routes",
        "server",
        "src",
        "the"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5095006622516556,
      "overall": 0.7365002207505519
    }
  },
  {
    "text": "### Dynamic Client Registration  The server supports RFC 7591 dynamic client registration through the `RegistrationHandler.handle()` method: ``` ``` Key registration features implemented in `RegistrationHandler.handle()`:  - **Automatic client ID generation**: Uses `uuid4()` for unique client identifiers - **Client secret generation**: Uses `secrets.token_hex(32)` for 32-byte cryptographically secure random hex string - **Scope validation**: Ensures requested scopes are within `ClientRegistrationOptions.valid_scopes` - **Grant type validation**: Only supports `authorization_code` and `refresh_token` grant types - **Client secret expiry**: Configurable via `ClientRegistrationOptions.client_secret_expiry_seconds`  **Sources:** [src/mcp/server/auth/handlers/register.py34-121](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/handlers/register.py#L34-L121) [src/mcp/server/auth/settings.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/settings.py) [src/mcp/server/auth/handlers/register.py51-85](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/handlers/register.py#L51-L85)",
    "metadata": {
      "chunk_id": "9fc9e9cb99f0-0010",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "file_extension": ".md",
      "chunk_index": 10,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Dynamic Client Registration"
      ],
      "heading_text": "Dynamic Client Registration",
      "token_count": 266,
      "char_count": 1194,
      "start_char": 14909,
      "end_char": 16103,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5178481012658228,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.277651",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 266,
      "document_id": "9fc9e9cb99f0",
      "document_name": "_modelcontextprotocol_python-sdk_7-authentication-and-security",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "hierarchy_path": "Dynamic Client Registration",
      "chunk_hash": "603876aa575b198f",
      "content_digest": "603876aa575b198f",
      "chunk_length": 1194,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "client",
          "server",
          "src",
          "mcp",
          "auth",
          "handlers",
          "register",
          "registration",
          "secret",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "dynamic",
          "the",
          "supports"
        ],
        "term_weights": [
          {
            "term": "client",
            "tf": 7,
            "weight": 0.048951
          },
          {
            "term": "server",
            "tf": 7,
            "weight": 0.048951
          },
          {
            "term": "src",
            "tf": 6,
            "weight": 0.041958
          },
          {
            "term": "mcp",
            "tf": 6,
            "weight": 0.041958
          },
          {
            "term": "auth",
            "tf": 6,
            "weight": 0.041958
          },
          {
            "term": "handlers",
            "tf": 4,
            "weight": 0.027972
          },
          {
            "term": "register",
            "tf": 4,
            "weight": 0.027972
          },
          {
            "term": "registration",
            "tf": 3,
            "weight": 0.020979
          },
          {
            "term": "secret",
            "tf": 3,
            "weight": 0.020979
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.020979
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.020979
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.020979
          },
          {
            "term": "modelcontextprotocol",
            "tf": 3,
            "weight": 0.020979
          },
          {
            "term": "python",
            "tf": 3,
            "weight": 0.020979
          },
          {
            "term": "sdk",
            "tf": 3,
            "weight": 0.020979
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.020979
          },
          {
            "term": "146d7efb",
            "tf": 3,
            "weight": 0.020979
          },
          {
            "term": "dynamic",
            "tf": 2,
            "weight": 0.013986
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.013986
          },
          {
            "term": "supports",
            "tf": 2,
            "weight": 0.013986
          }
        ],
        "unique_terms": 74,
        "total_terms": 143
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Dynamic Client Registration",
        "auth",
        "client",
        "handlers",
        "https",
        "mcp",
        "register",
        "registration",
        "secret",
        "server",
        "src"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5178481012658228,
      "overall": 0.7059493670886076
    }
  },
  {
    "text": "### Protected Resource Metadata  The server can also act as a protected resource by exposing RFC 9728 metadata through `create_protected_resource_routes()`: ``` ``` This enables automatic discovery by OAuth clients using `_discover_protected_resource()` and supports the separation of authorization servers from protected resources as defined in RFC 9728. **Sources:** [src/mcp/server/auth/routes.py189-227](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/routes.py#L189-L227) [src/mcp/shared/auth.py134-156](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/shared/auth.py#L134-L156) [src/mcp/server/auth/handlers/metadata.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/handlers/metadata.py)",
    "metadata": {
      "chunk_id": "9fc9e9cb99f0-0011",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "file_extension": ".md",
      "chunk_index": 11,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Protected Resource Metadata"
      ],
      "heading_text": "Protected Resource Metadata",
      "token_count": 188,
      "char_count": 794,
      "start_char": 16107,
      "end_char": 16901,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5359999999999999,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.280706",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 188,
      "document_id": "9fc9e9cb99f0",
      "document_name": "_modelcontextprotocol_python-sdk_7-authentication-and-security",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "hierarchy_path": "Protected Resource Metadata",
      "chunk_hash": "63afdbb09533010e",
      "content_digest": "63afdbb09533010e",
      "chunk_length": 794,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "src",
          "mcp",
          "auth",
          "protected",
          "server",
          "resource",
          "metadata",
          "routes",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "the",
          "rfc",
          "9728",
          "shared"
        ],
        "term_weights": [
          {
            "term": "src",
            "tf": 6,
            "weight": 0.057692
          },
          {
            "term": "mcp",
            "tf": 6,
            "weight": 0.057692
          },
          {
            "term": "auth",
            "tf": 6,
            "weight": 0.057692
          },
          {
            "term": "protected",
            "tf": 5,
            "weight": 0.048077
          },
          {
            "term": "server",
            "tf": 5,
            "weight": 0.048077
          },
          {
            "term": "resource",
            "tf": 4,
            "weight": 0.038462
          },
          {
            "term": "metadata",
            "tf": 4,
            "weight": 0.038462
          },
          {
            "term": "routes",
            "tf": 3,
            "weight": 0.028846
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.028846
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.028846
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.028846
          },
          {
            "term": "modelcontextprotocol",
            "tf": 3,
            "weight": 0.028846
          },
          {
            "term": "python",
            "tf": 3,
            "weight": 0.028846
          },
          {
            "term": "sdk",
            "tf": 3,
            "weight": 0.028846
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.028846
          },
          {
            "term": "146d7efb",
            "tf": 3,
            "weight": 0.028846
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.019231
          },
          {
            "term": "rfc",
            "tf": 2,
            "weight": 0.019231
          },
          {
            "term": "9728",
            "tf": 2,
            "weight": 0.019231
          },
          {
            "term": "shared",
            "tf": 2,
            "weight": 0.019231
          }
        ],
        "unique_terms": 52,
        "total_terms": 104
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Protected Resource Metadata",
        "auth",
        "github",
        "https",
        "mcp",
        "metadata",
        "protected",
        "resource",
        "routes",
        "server",
        "src"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5359999999999999,
      "overall": 0.7119999999999999
    }
  },
  {
    "text": "### PKCE Implementation  The SDK implements PKCE (Proof Key for Code Exchange) as defined in RFC 7636 through the `PKCEParameters` class to prevent authorization code interception attacks: ``` ``` PKCE parameters use cryptographically secure random generation in `PKCEParameters.generate()`:  - **Code verifier**: 128 characters from `secrets.choice(string.ascii_letters + string.digits + \"-._~\")` - **Code challenge**: SHA256 hash of verifier, Base64URL encoded with `rstrip(\"=\")` to remove padding - **Challenge method**: Always `S256` (SHA256) as specified in OAuth server metadata  **Sources:** [src/mcp/client/auth.py49-61](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L49-L61) [src/mcp/client/auth.py324-325](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L324-L325) [src/mcp/client/auth.py374](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L374-L374) [src/mcp/client/auth.py56-61](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L56-L61)",
    "metadata": {
      "chunk_id": "9fc9e9cb99f0-0013",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "file_extension": ".md",
      "chunk_index": 13,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "PKCE Implementation"
      ],
      "heading_text": "PKCE Implementation",
      "token_count": 286,
      "char_count": 1110,
      "start_char": 16928,
      "end_char": 18038,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.54125,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.284977",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 286,
      "document_id": "9fc9e9cb99f0",
      "document_name": "_modelcontextprotocol_python-sdk_7-authentication-and-security",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "hierarchy_path": "PKCE Implementation",
      "chunk_hash": "db39f6c244807fd9",
      "content_digest": "db39f6c244807fd9",
      "chunk_length": 1110,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "src",
          "mcp",
          "client",
          "auth",
          "sdk",
          "code",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "blob",
          "146d7efb",
          "pkce",
          "the",
          "pkceparameters",
          "verifier",
          "string",
          "challenge",
          "sha256"
        ],
        "term_weights": [
          {
            "term": "src",
            "tf": 8,
            "weight": 0.056338
          },
          {
            "term": "mcp",
            "tf": 8,
            "weight": 0.056338
          },
          {
            "term": "client",
            "tf": 8,
            "weight": 0.056338
          },
          {
            "term": "auth",
            "tf": 8,
            "weight": 0.056338
          },
          {
            "term": "sdk",
            "tf": 5,
            "weight": 0.035211
          },
          {
            "term": "code",
            "tf": 4,
            "weight": 0.028169
          },
          {
            "term": "https",
            "tf": 4,
            "weight": 0.028169
          },
          {
            "term": "github",
            "tf": 4,
            "weight": 0.028169
          },
          {
            "term": "com",
            "tf": 4,
            "weight": 0.028169
          },
          {
            "term": "modelcontextprotocol",
            "tf": 4,
            "weight": 0.028169
          },
          {
            "term": "python",
            "tf": 4,
            "weight": 0.028169
          },
          {
            "term": "blob",
            "tf": 4,
            "weight": 0.028169
          },
          {
            "term": "146d7efb",
            "tf": 4,
            "weight": 0.028169
          },
          {
            "term": "pkce",
            "tf": 3,
            "weight": 0.021127
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.014085
          },
          {
            "term": "pkceparameters",
            "tf": 2,
            "weight": 0.014085
          },
          {
            "term": "verifier",
            "tf": 2,
            "weight": 0.014085
          },
          {
            "term": "string",
            "tf": 2,
            "weight": 0.014085
          },
          {
            "term": "challenge",
            "tf": 2,
            "weight": 0.014085
          },
          {
            "term": "sha256",
            "tf": 2,
            "weight": 0.014085
          }
        ],
        "unique_terms": 76,
        "total_terms": 142
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "PKCE Implementation",
        "auth",
        "client",
        "code",
        "com",
        "github",
        "https",
        "mcp",
        "modelcontextprotocol",
        "sdk",
        "src"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.54125,
      "overall": 0.71375
    }
  },
  {
    "text": "### State Parameter Protection  The OAuth flow includes state parameter validation in `_perform_authorization()` to prevent CSRF attacks: ``` ``` The `secrets.compare_digest()` function provides constant-time comparison to prevent timing attacks. The state parameter is included in the authorization URL and validated when the authorization code is returned via the `callback_handler`. **Sources:** [src/mcp/client/auth.py325](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L325-L325) [src/mcp/client/auth.py349-350](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L349-L350) [src/mcp/client/auth.py347-353](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L347-L353)",
    "metadata": {
      "chunk_id": "9fc9e9cb99f0-0014",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "file_extension": ".md",
      "chunk_index": 14,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "State Parameter Protection"
      ],
      "heading_text": "State Parameter Protection",
      "token_count": 183,
      "char_count": 787,
      "start_char": 18042,
      "end_char": 18829,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5050943396226415,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.287695",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 183,
      "document_id": "9fc9e9cb99f0",
      "document_name": "_modelcontextprotocol_python-sdk_7-authentication-and-security",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "hierarchy_path": "State Parameter Protection",
      "chunk_hash": "03666d08dd6f7091",
      "content_digest": "03666d08dd6f7091",
      "chunk_length": 787,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "the",
          "src",
          "mcp",
          "client",
          "auth",
          "state",
          "parameter",
          "authorization",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "prevent",
          "attacks",
          "l325",
          "protection"
        ],
        "term_weights": [
          {
            "term": "the",
            "tf": 6,
            "weight": 0.057143
          },
          {
            "term": "src",
            "tf": 6,
            "weight": 0.057143
          },
          {
            "term": "mcp",
            "tf": 6,
            "weight": 0.057143
          },
          {
            "term": "client",
            "tf": 6,
            "weight": 0.057143
          },
          {
            "term": "auth",
            "tf": 6,
            "weight": 0.057143
          },
          {
            "term": "state",
            "tf": 3,
            "weight": 0.028571
          },
          {
            "term": "parameter",
            "tf": 3,
            "weight": 0.028571
          },
          {
            "term": "authorization",
            "tf": 3,
            "weight": 0.028571
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.028571
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.028571
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.028571
          },
          {
            "term": "modelcontextprotocol",
            "tf": 3,
            "weight": 0.028571
          },
          {
            "term": "python",
            "tf": 3,
            "weight": 0.028571
          },
          {
            "term": "sdk",
            "tf": 3,
            "weight": 0.028571
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.028571
          },
          {
            "term": "146d7efb",
            "tf": 3,
            "weight": 0.028571
          },
          {
            "term": "prevent",
            "tf": 2,
            "weight": 0.019048
          },
          {
            "term": "attacks",
            "tf": 2,
            "weight": 0.019048
          },
          {
            "term": "l325",
            "tf": 2,
            "weight": 0.019048
          },
          {
            "term": "protection",
            "tf": 1,
            "weight": 0.009524
          }
        ],
        "unique_terms": 55,
        "total_terms": 105
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "State Parameter Protection",
        "auth",
        "authorization",
        "client",
        "github",
        "https",
        "mcp",
        "parameter",
        "src",
        "state",
        "the"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5050943396226415,
      "overall": 0.6683647798742139
    }
  },
  {
    "text": "### Token Security  Token management includes several security measures implemented across multiple methods:  - **Secure storage**: Tokens are stored through the `TokenStorage` protocol interface via `storage.set_tokens()` - **Automatic expiry**: Tokens are validated in `is_token_valid()` against wall-clock expiry time from `update_token_expiry()` - **Scope validation**: `_handle_token_response()` validates returned token scopes against requested scopes - **Automatic refresh**: `_refresh_token()` and `_handle_refresh_response()` automatically refresh expired tokens when possible - **Secure transport**: `validate_issuer_url()` ensures all token exchanges occur over HTTPS (with localhost HTTP exception for development)  The scope validation logic in `_handle_token_response()` prevents privilege escalation: ``` ``` **Sources:** [src/mcp/client/auth.py398-403](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L398-L403) [src/mcp/client/auth.py120-133](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L120-L133) [src/mcp/server/auth/routes.py34-41](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/auth/routes.py#L34-L41) [src/mcp/client/auth.py388-409](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L388-L409)",
    "metadata": {
      "chunk_id": "9fc9e9cb99f0-0015",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "file_extension": ".md",
      "chunk_index": 15,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Token Security"
      ],
      "heading_text": "Token Security",
      "token_count": 305,
      "char_count": 1370,
      "start_char": 18834,
      "end_char": 20204,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5321250000000001,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.292500",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 305,
      "document_id": "9fc9e9cb99f0",
      "document_name": "_modelcontextprotocol_python-sdk_7-authentication-and-security",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "hierarchy_path": "Token Security",
      "chunk_hash": "4fc256789d0549f6",
      "content_digest": "4fc256789d0549f6",
      "chunk_length": 1370,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "token",
          "src",
          "mcp",
          "auth",
          "client",
          "https",
          "tokens",
          "refresh",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "expiry",
          "handle",
          "response",
          "security",
          "secure"
        ],
        "term_weights": [
          {
            "term": "token",
            "tf": 9,
            "weight": 0.050562
          },
          {
            "term": "src",
            "tf": 8,
            "weight": 0.044944
          },
          {
            "term": "mcp",
            "tf": 8,
            "weight": 0.044944
          },
          {
            "term": "auth",
            "tf": 8,
            "weight": 0.044944
          },
          {
            "term": "client",
            "tf": 6,
            "weight": 0.033708
          },
          {
            "term": "https",
            "tf": 5,
            "weight": 0.02809
          },
          {
            "term": "tokens",
            "tf": 4,
            "weight": 0.022472
          },
          {
            "term": "refresh",
            "tf": 4,
            "weight": 0.022472
          },
          {
            "term": "github",
            "tf": 4,
            "weight": 0.022472
          },
          {
            "term": "com",
            "tf": 4,
            "weight": 0.022472
          },
          {
            "term": "modelcontextprotocol",
            "tf": 4,
            "weight": 0.022472
          },
          {
            "term": "python",
            "tf": 4,
            "weight": 0.022472
          },
          {
            "term": "sdk",
            "tf": 4,
            "weight": 0.022472
          },
          {
            "term": "blob",
            "tf": 4,
            "weight": 0.022472
          },
          {
            "term": "146d7efb",
            "tf": 4,
            "weight": 0.022472
          },
          {
            "term": "expiry",
            "tf": 3,
            "weight": 0.016854
          },
          {
            "term": "handle",
            "tf": 3,
            "weight": 0.016854
          },
          {
            "term": "response",
            "tf": 3,
            "weight": 0.016854
          },
          {
            "term": "security",
            "tf": 2,
            "weight": 0.011236
          },
          {
            "term": "secure",
            "tf": 2,
            "weight": 0.011236
          }
        ],
        "unique_terms": 95,
        "total_terms": 178
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Token Security",
        "auth",
        "client",
        "com",
        "github",
        "https",
        "mcp",
        "refresh",
        "src",
        "token",
        "tokens"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5321250000000001,
      "overall": 0.7107083333333333
    }
  },
  {
    "text": "### Resource Parameter Support  The SDK implements RFC 8707 resource indicators for enhanced security: ``` ``` The resource parameter helps prevent token confusion attacks by explicitly identifying the intended resource server. **Sources:** [src/mcp/client/auth.py159-177](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L159-L177) [src/mcp/client/auth.py377-379](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L377-L379) [src/mcp/client/auth.py431-433](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/client/auth.py#L431-L433)  Dismiss  Refresh this wiki  Enter email to refresh",
    "metadata": {
      "chunk_id": "9fc9e9cb99f0-0016",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "file_extension": ".md",
      "chunk_index": 16,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Resource Parameter Support"
      ],
      "heading_text": "Resource Parameter Support",
      "token_count": 168,
      "char_count": 685,
      "start_char": 20208,
      "end_char": 20893,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5341860465116279,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.294844",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 168,
      "document_id": "9fc9e9cb99f0",
      "document_name": "_modelcontextprotocol_python-sdk_7-authentication-and-security",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_filename": "_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_7-authentication-and-security.md",
      "hierarchy_path": "Resource Parameter Support",
      "chunk_hash": "8a9095c8b3f009df",
      "content_digest": "8a9095c8b3f009df",
      "chunk_length": 685,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "src",
          "mcp",
          "client",
          "auth",
          "resource",
          "sdk",
          "the",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "blob",
          "146d7efb",
          "parameter",
          "refresh",
          "support",
          "implements",
          "rfc",
          "8707"
        ],
        "term_weights": [
          {
            "term": "src",
            "tf": 6,
            "weight": 0.063158
          },
          {
            "term": "mcp",
            "tf": 6,
            "weight": 0.063158
          },
          {
            "term": "client",
            "tf": 6,
            "weight": 0.063158
          },
          {
            "term": "auth",
            "tf": 6,
            "weight": 0.063158
          },
          {
            "term": "resource",
            "tf": 4,
            "weight": 0.042105
          },
          {
            "term": "sdk",
            "tf": 4,
            "weight": 0.042105
          },
          {
            "term": "the",
            "tf": 3,
            "weight": 0.031579
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.031579
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.031579
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.031579
          },
          {
            "term": "modelcontextprotocol",
            "tf": 3,
            "weight": 0.031579
          },
          {
            "term": "python",
            "tf": 3,
            "weight": 0.031579
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.031579
          },
          {
            "term": "146d7efb",
            "tf": 3,
            "weight": 0.031579
          },
          {
            "term": "parameter",
            "tf": 2,
            "weight": 0.021053
          },
          {
            "term": "refresh",
            "tf": 2,
            "weight": 0.021053
          },
          {
            "term": "support",
            "tf": 1,
            "weight": 0.010526
          },
          {
            "term": "implements",
            "tf": 1,
            "weight": 0.010526
          },
          {
            "term": "rfc",
            "tf": 1,
            "weight": 0.010526
          },
          {
            "term": "8707",
            "tf": 1,
            "weight": 0.010526
          }
        ],
        "unique_terms": 51,
        "total_terms": 95
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Resource Parameter Support",
        "auth",
        "client",
        "com",
        "github",
        "https",
        "mcp",
        "resource",
        "sdk",
        "src",
        "the"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5341860465116279,
      "overall": 0.7113953488372093
    }
  }
]