[
  {
    "text": "## Server Class Overview  The `Server` class in [src/mcp/server/lowlevel/server.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/lowlevel/server.py) provides a decorator-based framework for implementing MCP servers with direct control over protocol message handling. Unlike FastMCP's automatic introspection, the low-level server requires explicit handler registration and manual schema definition. ``` ``` Sources: [src/mcp/server/lowlevel/server.py133-158](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/lowlevel/server.py#L133-L158) [src/mcp/server/lowlevel/server.py152-155](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/lowlevel/server.py#L152-L155) [src/mcp/types.py82-103](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/types.py#L82-L103)  The `Server` class is generic over two type parameters: `LifespanResultT` for lifespan context data and `RequestT` for request-specific data. It maintains separate dictionaries for request handlers and notification handlers, automatically routing incoming messages based on their type.",
    "metadata": {
      "chunk_id": "b936b45e0ccd-0001",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "filename": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "file_extension": ".md",
      "chunk_index": 1,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Server Class Overview"
      ],
      "heading_text": "Server Class Overview",
      "token_count": 272,
      "char_count": 1160,
      "start_char": 4650,
      "end_char": 5810,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5424390243902439,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.084296",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 272,
      "document_id": "b936b45e0ccd",
      "document_name": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "source_filename": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "hierarchy_path": "Server Class Overview",
      "chunk_hash": "7e76965348fe96b8",
      "content_digest": "7e76965348fe96b8",
      "chunk_length": 1160,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "server",
          "mcp",
          "src",
          "lowlevel",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "for",
          "class",
          "the",
          "and",
          "based",
          "over",
          "types",
          "type"
        ],
        "term_weights": [
          {
            "term": "server",
            "tf": 16,
            "weight": 0.104575
          },
          {
            "term": "mcp",
            "tf": 9,
            "weight": 0.058824
          },
          {
            "term": "src",
            "tf": 8,
            "weight": 0.052288
          },
          {
            "term": "lowlevel",
            "tf": 6,
            "weight": 0.039216
          },
          {
            "term": "https",
            "tf": 4,
            "weight": 0.026144
          },
          {
            "term": "github",
            "tf": 4,
            "weight": 0.026144
          },
          {
            "term": "com",
            "tf": 4,
            "weight": 0.026144
          },
          {
            "term": "modelcontextprotocol",
            "tf": 4,
            "weight": 0.026144
          },
          {
            "term": "python",
            "tf": 4,
            "weight": 0.026144
          },
          {
            "term": "sdk",
            "tf": 4,
            "weight": 0.026144
          },
          {
            "term": "blob",
            "tf": 4,
            "weight": 0.026144
          },
          {
            "term": "146d7efb",
            "tf": 4,
            "weight": 0.026144
          },
          {
            "term": "for",
            "tf": 4,
            "weight": 0.026144
          },
          {
            "term": "class",
            "tf": 3,
            "weight": 0.019608
          },
          {
            "term": "the",
            "tf": 3,
            "weight": 0.019608
          },
          {
            "term": "and",
            "tf": 3,
            "weight": 0.019608
          },
          {
            "term": "based",
            "tf": 2,
            "weight": 0.013072
          },
          {
            "term": "over",
            "tf": 2,
            "weight": 0.013072
          },
          {
            "term": "types",
            "tf": 2,
            "weight": 0.013072
          },
          {
            "term": "type",
            "tf": 2,
            "weight": 0.013072
          }
        ],
        "unique_terms": 78,
        "total_terms": 153
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Server Class Overview",
        "com",
        "github",
        "https",
        "lowlevel",
        "mcp",
        "modelcontextprotocol",
        "python",
        "sdk",
        "server",
        "src"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5424390243902439,
      "overall": 0.7141463414634147
    }
  },
  {
    "text": "## Handler Registration System  Request and notification handlers are registered using decorator methods that map protocol message types to handler functions. Each decorator enforces specific function signatures while providing flexibility in implementation. ``` ``` Sources: [src/mcp/server/lowlevel/server.py409-438](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/lowlevel/server.py#L409-L438) [src/mcp/server/lowlevel/server.py245-255](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/lowlevel/server.py#L245-L255) [src/mcp/server/lowlevel/func\\_inspection.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/lowlevel/func_inspection.py)  Handler functions can return either the specific result type (e.g., `ListToolsResult`) or the legacy format (e.g., `list[Tool]`). The server automatically wraps legacy returns in the appropriate result container for backward compatibility.",
    "metadata": {
      "chunk_id": "b936b45e0ccd-0002",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "filename": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "file_extension": ".md",
      "chunk_index": 2,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Handler Registration System"
      ],
      "heading_text": "Handler Registration System",
      "token_count": 221,
      "char_count": 977,
      "start_char": 5814,
      "end_char": 6791,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5378260869565217,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.086110",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 221,
      "document_id": "b936b45e0ccd",
      "document_name": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "source_filename": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "hierarchy_path": "Handler Registration System",
      "chunk_hash": "89ac7332501e1aab",
      "content_digest": "89ac7332501e1aab",
      "chunk_length": 977,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "server",
          "src",
          "mcp",
          "lowlevel",
          "the",
          "handler",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "decorator",
          "functions",
          "specific",
          "func",
          "inspection",
          "result"
        ],
        "term_weights": [
          {
            "term": "server",
            "tf": 11,
            "weight": 0.090164
          },
          {
            "term": "src",
            "tf": 6,
            "weight": 0.04918
          },
          {
            "term": "mcp",
            "tf": 6,
            "weight": 0.04918
          },
          {
            "term": "lowlevel",
            "tf": 6,
            "weight": 0.04918
          },
          {
            "term": "the",
            "tf": 4,
            "weight": 0.032787
          },
          {
            "term": "handler",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "modelcontextprotocol",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "python",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "sdk",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "146d7efb",
            "tf": 3,
            "weight": 0.02459
          },
          {
            "term": "decorator",
            "tf": 2,
            "weight": 0.016393
          },
          {
            "term": "functions",
            "tf": 2,
            "weight": 0.016393
          },
          {
            "term": "specific",
            "tf": 2,
            "weight": 0.016393
          },
          {
            "term": "func",
            "tf": 2,
            "weight": 0.016393
          },
          {
            "term": "inspection",
            "tf": 2,
            "weight": 0.016393
          },
          {
            "term": "result",
            "tf": 2,
            "weight": 0.016393
          }
        ],
        "unique_terms": 69,
        "total_terms": 122
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Handler Registration System",
        "com",
        "github",
        "handler",
        "https",
        "lowlevel",
        "mcp",
        "modelcontextprotocol",
        "server",
        "src",
        "the"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5378260869565217,
      "overall": 0.7126086956521739
    }
  },
  {
    "text": "## Request Context System  The server uses Python's `contextvars` module to provide request-scoped context accessible throughout the handler call stack. This context includes session information, lifespan data, and request metadata. ``` ``` Sources: [src/mcp/server/lowlevel/server.py105](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/lowlevel/server.py#L105-L105) [src/mcp/server/lowlevel/server.py232-236](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/lowlevel/server.py#L232-L236) [src/mcp/server/lowlevel/server.py677-685](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/lowlevel/server.py#L677-L685) [src/mcp/shared/context.py](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/shared/context.py)",
    "metadata": {
      "chunk_id": "b936b45e0ccd-0004",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "filename": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "file_extension": ".md",
      "chunk_index": 4,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Request Context System"
      ],
      "heading_text": "Request Context System",
      "token_count": 209,
      "char_count": 824,
      "start_char": 8404,
      "end_char": 9228,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5494594594594595,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.092078",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 209,
      "document_id": "b936b45e0ccd",
      "document_name": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "source_filename": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "hierarchy_path": "Request Context System",
      "chunk_hash": "6645005c804e7c29",
      "content_digest": "6645005c804e7c29",
      "chunk_length": 824,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "server",
          "src",
          "mcp",
          "lowlevel",
          "context",
          "python",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "sdk",
          "blob",
          "146d7efb",
          "request",
          "the",
          "l105",
          "shared",
          "system",
          "uses",
          "contextvars"
        ],
        "term_weights": [
          {
            "term": "server",
            "tf": 13,
            "weight": 0.117117
          },
          {
            "term": "src",
            "tf": 8,
            "weight": 0.072072
          },
          {
            "term": "mcp",
            "tf": 8,
            "weight": 0.072072
          },
          {
            "term": "lowlevel",
            "tf": 6,
            "weight": 0.054054
          },
          {
            "term": "context",
            "tf": 5,
            "weight": 0.045045
          },
          {
            "term": "python",
            "tf": 5,
            "weight": 0.045045
          },
          {
            "term": "https",
            "tf": 4,
            "weight": 0.036036
          },
          {
            "term": "github",
            "tf": 4,
            "weight": 0.036036
          },
          {
            "term": "com",
            "tf": 4,
            "weight": 0.036036
          },
          {
            "term": "modelcontextprotocol",
            "tf": 4,
            "weight": 0.036036
          },
          {
            "term": "sdk",
            "tf": 4,
            "weight": 0.036036
          },
          {
            "term": "blob",
            "tf": 4,
            "weight": 0.036036
          },
          {
            "term": "146d7efb",
            "tf": 4,
            "weight": 0.036036
          },
          {
            "term": "request",
            "tf": 3,
            "weight": 0.027027
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.018018
          },
          {
            "term": "l105",
            "tf": 2,
            "weight": 0.018018
          },
          {
            "term": "shared",
            "tf": 2,
            "weight": 0.018018
          },
          {
            "term": "system",
            "tf": 1,
            "weight": 0.009009
          },
          {
            "term": "uses",
            "tf": 1,
            "weight": 0.009009
          },
          {
            "term": "contextvars",
            "tf": 1,
            "weight": 0.009009
          }
        ],
        "unique_terms": 46,
        "total_terms": 111
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Request Context System",
        "com",
        "context",
        "github",
        "https",
        "lowlevel",
        "mcp",
        "modelcontextprotocol",
        "python",
        "server",
        "src"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5494594594594595,
      "overall": 0.6831531531531532
    }
  },
  {
    "text": "## Message Processing Architecture  The server's main `run()` method establishes a session and processes incoming messages through a task group, ensuring proper error handling and response delivery. ``` ``` Sources: [src/mcp/server/lowlevel/server.py598-636](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/lowlevel/server.py#L598-L636) [src/mcp/server/lowlevel/server.py637-655](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/lowlevel/server.py#L637-L655) [src/mcp/server/lowlevel/server.py656-713](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/lowlevel/server.py#L656-L713)",
    "metadata": {
      "chunk_id": "b936b45e0ccd-0005",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "filename": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "file_extension": ".md",
      "chunk_index": 5,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Message Processing Architecture"
      ],
      "heading_text": "Message Processing Architecture",
      "token_count": 172,
      "char_count": 674,
      "start_char": 9232,
      "end_char": 9906,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5627272727272727,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.093260",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 172,
      "document_id": "b936b45e0ccd",
      "document_name": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "source_filename": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "hierarchy_path": "Message Processing Architecture",
      "chunk_hash": "60a88bbdcd0ccfd1",
      "content_digest": "60a88bbdcd0ccfd1",
      "chunk_length": 674,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "server",
          "src",
          "mcp",
          "lowlevel",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "and",
          "message",
          "processing",
          "architecture",
          "the",
          "main",
          "run",
          "method"
        ],
        "term_weights": [
          {
            "term": "server",
            "tf": 13,
            "weight": 0.142857
          },
          {
            "term": "src",
            "tf": 6,
            "weight": 0.065934
          },
          {
            "term": "mcp",
            "tf": 6,
            "weight": 0.065934
          },
          {
            "term": "lowlevel",
            "tf": 6,
            "weight": 0.065934
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.032967
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.032967
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.032967
          },
          {
            "term": "modelcontextprotocol",
            "tf": 3,
            "weight": 0.032967
          },
          {
            "term": "python",
            "tf": 3,
            "weight": 0.032967
          },
          {
            "term": "sdk",
            "tf": 3,
            "weight": 0.032967
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.032967
          },
          {
            "term": "146d7efb",
            "tf": 3,
            "weight": 0.032967
          },
          {
            "term": "and",
            "tf": 2,
            "weight": 0.021978
          },
          {
            "term": "message",
            "tf": 1,
            "weight": 0.010989
          },
          {
            "term": "processing",
            "tf": 1,
            "weight": 0.010989
          },
          {
            "term": "architecture",
            "tf": 1,
            "weight": 0.010989
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.010989
          },
          {
            "term": "main",
            "tf": 1,
            "weight": 0.010989
          },
          {
            "term": "run",
            "tf": 1,
            "weight": 0.010989
          },
          {
            "term": "method",
            "tf": 1,
            "weight": 0.010989
          }
        ],
        "unique_terms": 47,
        "total_terms": 91
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Message Processing Architecture",
        "com",
        "github",
        "https",
        "lowlevel",
        "mcp",
        "modelcontextprotocol",
        "python",
        "sdk",
        "server",
        "src"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5627272727272727,
      "overall": 0.7209090909090908
    }
  },
  {
    "text": "## Capabilities Discovery  The server automatically generates `ServerCapabilities` based on registered handlers, allowing clients to discover available functionality without manual configuration. ``` ``` Sources: [src/mcp/server/lowlevel/server.py188-229](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/lowlevel/server.py#L188-L229) [src/mcp/types.py317-332](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/types.py#L317-L332) [src/mcp/server/lowlevel/server.py159-186](https://github.com/modelcontextprotocol/python-sdk/blob/146d7efb/src/mcp/server/lowlevel/server.py#L159-L186)  The `NotificationOptions` class controls whether the server supports change notifications for prompts, resources, and tools, which are reflected in the generated capabilities. Dismiss  Refresh this wiki  Enter email to refresh",
    "metadata": {
      "chunk_id": "b936b45e0ccd-0006",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "filename": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "file_extension": ".md",
      "chunk_index": 6,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Capabilities Discovery"
      ],
      "heading_text": "Capabilities Discovery",
      "token_count": 200,
      "char_count": 865,
      "start_char": 9910,
      "end_char": 10775,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5531578947368421,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.094950",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 200,
      "document_id": "b936b45e0ccd",
      "document_name": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "source_filename": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "hierarchy_path": "Capabilities Discovery",
      "chunk_hash": "f2f540b0b2b0881a",
      "content_digest": "f2f540b0b2b0881a",
      "chunk_length": 865,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "server",
          "src",
          "mcp",
          "the",
          "lowlevel",
          "https",
          "github",
          "com",
          "modelcontextprotocol",
          "python",
          "sdk",
          "blob",
          "146d7efb",
          "capabilities",
          "types",
          "refresh",
          "discovery",
          "automatically",
          "generates",
          "servercapabilities"
        ],
        "term_weights": [
          {
            "term": "server",
            "tf": 10,
            "weight": 0.091743
          },
          {
            "term": "src",
            "tf": 6,
            "weight": 0.055046
          },
          {
            "term": "mcp",
            "tf": 6,
            "weight": 0.055046
          },
          {
            "term": "the",
            "tf": 4,
            "weight": 0.036697
          },
          {
            "term": "lowlevel",
            "tf": 4,
            "weight": 0.036697
          },
          {
            "term": "https",
            "tf": 3,
            "weight": 0.027523
          },
          {
            "term": "github",
            "tf": 3,
            "weight": 0.027523
          },
          {
            "term": "com",
            "tf": 3,
            "weight": 0.027523
          },
          {
            "term": "modelcontextprotocol",
            "tf": 3,
            "weight": 0.027523
          },
          {
            "term": "python",
            "tf": 3,
            "weight": 0.027523
          },
          {
            "term": "sdk",
            "tf": 3,
            "weight": 0.027523
          },
          {
            "term": "blob",
            "tf": 3,
            "weight": 0.027523
          },
          {
            "term": "146d7efb",
            "tf": 3,
            "weight": 0.027523
          },
          {
            "term": "capabilities",
            "tf": 2,
            "weight": 0.018349
          },
          {
            "term": "types",
            "tf": 2,
            "weight": 0.018349
          },
          {
            "term": "refresh",
            "tf": 2,
            "weight": 0.018349
          },
          {
            "term": "discovery",
            "tf": 1,
            "weight": 0.009174
          },
          {
            "term": "automatically",
            "tf": 1,
            "weight": 0.009174
          },
          {
            "term": "generates",
            "tf": 1,
            "weight": 0.009174
          },
          {
            "term": "servercapabilities",
            "tf": 1,
            "weight": 0.009174
          }
        ],
        "unique_terms": 65,
        "total_terms": 109
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Capabilities Discovery",
        "com",
        "github",
        "https",
        "lowlevel",
        "mcp",
        "modelcontextprotocol",
        "python",
        "server",
        "src",
        "the"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5531578947368421,
      "overall": 0.7177192982456141
    }
  },
  {
    "text": "### On this page  - [Low-Level Server Implementation](#low-level-server-implementation.md) - [Server Class Overview](#server-class-overview.md) - [Handler Registration System](#handler-registration-system.md) - [Tool Management and Validation](#tool-management-and-validation.md) - [Request Context System](#request-context-system.md) - [Message Processing Architecture](#message-processing-architecture.md) - [Capabilities Discovery](#capabilities-discovery.md)",
    "metadata": {
      "chunk_id": "b936b45e0ccd-0007",
      "source_file": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "filename": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "file_extension": ".md",
      "chunk_index": 7,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "On this page"
      ],
      "heading_text": "On this page",
      "token_count": 95,
      "char_count": 462,
      "start_char": 10780,
      "end_char": 11242,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.53375,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:11.095721",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 95,
      "document_id": "b936b45e0ccd",
      "document_name": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation",
      "source_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "source_filename": "_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "source_directory": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk",
      "relative_path": "Docs\\FAST_DOCS\\modelcontextprotocol_python-sdk\\_modelcontextprotocol_python-sdk_6-low-level-server-implementation.md",
      "hierarchy_path": "On this page",
      "chunk_hash": "2bea43c408450673",
      "content_digest": "2bea43c408450673",
      "chunk_length": 462,
      "payload_version": "1.3",
      "collection_hints": [
        "fast_docs"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "server",
          "system",
          "low",
          "level",
          "implementation",
          "class",
          "overview",
          "handler",
          "registration",
          "tool",
          "management",
          "and",
          "validation",
          "request",
          "context",
          "message",
          "processing",
          "architecture",
          "capabilities",
          "discovery"
        ],
        "term_weights": [
          {
            "term": "server",
            "tf": 4,
            "weight": 0.086957
          },
          {
            "term": "system",
            "tf": 4,
            "weight": 0.086957
          },
          {
            "term": "low",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "level",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "implementation",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "class",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "overview",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "handler",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "registration",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "tool",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "management",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "and",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "validation",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "request",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "context",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "message",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "processing",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "architecture",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "capabilities",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "discovery",
            "tf": 2,
            "weight": 0.043478
          }
        ],
        "unique_terms": 22,
        "total_terms": 46
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "On this page",
        "class",
        "handler",
        "implementation",
        "level",
        "low",
        "overview",
        "registration",
        "server",
        "system",
        "tool"
      ],
      "collection_name": "FAST_DOCS"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.53375,
      "overall": 0.71125
    }
  }
]