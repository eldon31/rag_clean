[
  {
    "text": "## Shard Transfer Lifecycle",
    "metadata": {
      "chunk_id": "b3ee392c17f6-0005",
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "filename": "_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "file_extension": ".md",
      "chunk_index": 5,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Shard Transfer Lifecycle"
      ],
      "heading_text": "Shard Transfer Lifecycle",
      "token_count": 4,
      "char_count": 27,
      "start_char": 0,
      "end_char": 27,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.39,
      "chunking_strategy": "hierarchical_balanced",
      "content_type": "hierarchical_section",
      "embedding_model": "nomic-ai/CodeRankEmbed",
      "processing_timestamp": "2025-10-19T15:44:44.621483",
      "document_id": "b3ee392c17f6",
      "document_name": "_qdrant_qdrant_7.2-shard-transfers-and-resharding",
      "source_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "source_filename": "_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "source_directory": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant",
      "relative_path": "Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "hierarchy_path": "Shard Transfer Lifecycle",
      "chunk_hash": "18e6a763731102a4",
      "content_digest": "18e6a763731102a4",
      "chunk_length": 27,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant_ecosystem"
      ],
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "shard",
          "transfer",
          "lifecycle"
        ],
        "term_weights": [
          {
            "term": "shard",
            "tf": 1,
            "weight": 0.333333
          },
          {
            "term": "transfer",
            "tf": 1,
            "weight": 0.333333
          },
          {
            "term": "lifecycle",
            "tf": 1,
            "weight": 0.333333
          }
        ],
        "unique_terms": 3,
        "total_terms": 3
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Shard Transfer Lifecycle",
        "lifecycle",
        "shard",
        "transfer"
      ],
      "quality_fallback": true,
      "quality_notes": "Promoted via relaxed thresholds"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.39,
      "overall": 0.6966666666666667
    }
  },
  {
    "text": "## Transfer Task Management",
    "metadata": {
      "chunk_id": "b3ee392c17f6-0015",
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "filename": "_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "file_extension": ".md",
      "chunk_index": 15,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Transfer Task Management"
      ],
      "heading_text": "Transfer Task Management",
      "token_count": 4,
      "char_count": 27,
      "start_char": 0,
      "end_char": 27,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.39,
      "chunking_strategy": "hierarchical_balanced",
      "content_type": "hierarchical_section",
      "embedding_model": "nomic-ai/CodeRankEmbed",
      "processing_timestamp": "2025-10-19T15:44:44.628748",
      "document_id": "b3ee392c17f6",
      "document_name": "_qdrant_qdrant_7.2-shard-transfers-and-resharding",
      "source_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "source_filename": "_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "source_directory": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant",
      "relative_path": "Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "hierarchy_path": "Transfer Task Management",
      "chunk_hash": "71ee0c6a3fc3ccc4",
      "content_digest": "71ee0c6a3fc3ccc4",
      "chunk_length": 27,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant_ecosystem"
      ],
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "transfer",
          "task",
          "management"
        ],
        "term_weights": [
          {
            "term": "transfer",
            "tf": 1,
            "weight": 0.333333
          },
          {
            "term": "task",
            "tf": 1,
            "weight": 0.333333
          },
          {
            "term": "management",
            "tf": 1,
            "weight": 0.333333
          }
        ],
        "unique_terms": 3,
        "total_terms": 3
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Transfer Task Management",
        "management",
        "task",
        "transfer"
      ],
      "quality_fallback": true,
      "quality_notes": "Promoted via relaxed thresholds"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.39,
      "overall": 0.6966666666666667
    }
  },
  {
    "text": "## Consensus Integration  Shard transfers integrate tightly with Raft consensus:",
    "metadata": {
      "chunk_id": "b3ee392c17f6-0017",
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "filename": "_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "file_extension": ".md",
      "chunk_index": 17,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Consensus Integration"
      ],
      "heading_text": "Consensus Integration",
      "token_count": 14,
      "char_count": 80,
      "start_char": 0,
      "end_char": 80,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.39,
      "chunking_strategy": "hierarchical_balanced",
      "content_type": "hierarchical_section",
      "embedding_model": "nomic-ai/CodeRankEmbed",
      "processing_timestamp": "2025-10-19T15:44:44.629798",
      "document_id": "b3ee392c17f6",
      "document_name": "_qdrant_qdrant_7.2-shard-transfers-and-resharding",
      "source_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "source_filename": "_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "source_directory": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant",
      "relative_path": "Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "hierarchy_path": "Consensus Integration",
      "chunk_hash": "803e5026d0d07f08",
      "content_digest": "803e5026d0d07f08",
      "chunk_length": 80,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant_ecosystem"
      ],
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "consensus",
          "integration",
          "shard",
          "transfers",
          "integrate",
          "tightly",
          "with",
          "raft"
        ],
        "term_weights": [
          {
            "term": "consensus",
            "tf": 2,
            "weight": 0.222222
          },
          {
            "term": "integration",
            "tf": 1,
            "weight": 0.111111
          },
          {
            "term": "shard",
            "tf": 1,
            "weight": 0.111111
          },
          {
            "term": "transfers",
            "tf": 1,
            "weight": 0.111111
          },
          {
            "term": "integrate",
            "tf": 1,
            "weight": 0.111111
          },
          {
            "term": "tightly",
            "tf": 1,
            "weight": 0.111111
          },
          {
            "term": "with",
            "tf": 1,
            "weight": 0.111111
          },
          {
            "term": "raft",
            "tf": 1,
            "weight": 0.111111
          }
        ],
        "unique_terms": 8,
        "total_terms": 9
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Consensus Integration",
        "consensus",
        "integrate",
        "integration",
        "raft",
        "shard",
        "tightly",
        "transfers",
        "with"
      ],
      "quality_fallback": true,
      "quality_notes": "Promoted via relaxed thresholds"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.39,
      "overall": 0.6966666666666667
    }
  },
  {
    "text": "### Resharding State ``` ```",
    "metadata": {
      "chunk_id": "b3ee392c17f6-0012",
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "filename": "_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "file_extension": ".md",
      "chunk_index": 12,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Resharding State"
      ],
      "heading_text": "Resharding State",
      "token_count": 7,
      "char_count": 28,
      "start_char": 0,
      "end_char": 28,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.32999999999999996,
      "chunking_strategy": "hierarchical_balanced",
      "content_type": "hierarchical_section",
      "embedding_model": "nomic-ai/CodeRankEmbed",
      "processing_timestamp": "2025-10-19T15:44:44.626162",
      "document_id": "b3ee392c17f6",
      "document_name": "_qdrant_qdrant_7.2-shard-transfers-and-resharding",
      "source_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "source_filename": "_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "source_directory": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant",
      "relative_path": "Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "hierarchy_path": "Resharding State",
      "chunk_hash": "6f8850218c29e47f",
      "content_digest": "6f8850218c29e47f",
      "chunk_length": 28,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant_ecosystem"
      ],
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "resharding",
          "state"
        ],
        "term_weights": [
          {
            "term": "resharding",
            "tf": 1,
            "weight": 0.5
          },
          {
            "term": "state",
            "tf": 1,
            "weight": 0.5
          }
        ],
        "unique_terms": 2,
        "total_terms": 2
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Resharding State",
        "resharding",
        "state"
      ],
      "quality_fallback": true,
      "quality_notes": "Promoted via relaxed thresholds"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.32999999999999996,
      "overall": 0.6766666666666666
    }
  },
  {
    "text": "### Resharding Lifecycle ``` ``` **Resharding Steps:**  1. **Start**:     - Create new target shards (scale-up) or identify source shard (scale-down)    - Mark relevant replicas as `Resharding` or `ReshardingScaleDown`    - Start transfers using `ReshardingStreamRecords` method  2. **MigratingPoints**: Transfer tasks execute in background, moving data  3. **CommitRead**: Switch read operations to new hash ring while writes still use old ring  4. **CommitWrite**: Switch write operations to new hash ring  5. **Finish**:     - Promote resharding replicas to `Active`    - Remove old shards (scale-down) or update routing    - Clean up resharding state  6. **Abort**: Roll back any changes, remove temporary shards  **Sources:** [lib/storage/src/content\\_manager/toc/collection\\_meta\\_ops.rs306-376](https://github.com/qdrant/qdrant/blob/48203e41/lib/storage/src/content_manager/toc/collection_meta_ops.rs#L306-L376) [lib/collection/src/collection/resharding.rs](https://github.com/qdrant/qdrant/blob/48203e41/lib/collection/src/collection/resharding.rs) (referenced but not in provided files)",
    "metadata": {
      "chunk_id": "b3ee392c17f6-0013",
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "filename": "_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "file_extension": ".md",
      "chunk_index": 13,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Resharding Lifecycle"
      ],
      "heading_text": "Resharding Lifecycle",
      "token_count": 284,
      "char_count": 1095,
      "start_char": 0,
      "end_char": 1095,
      "semantic_score": 0.2768458127975464,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7164150943396227,
      "chunking_strategy": "hierarchical_balanced",
      "content_type": "hierarchical_section",
      "embedding_model": "nomic-ai/CodeRankEmbed",
      "processing_timestamp": "2025-10-19T15:44:44.627154",
      "document_id": "b3ee392c17f6",
      "document_name": "_qdrant_qdrant_7.2-shard-transfers-and-resharding",
      "source_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "source_filename": "_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "source_directory": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant",
      "relative_path": "Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_7.2-shard-transfers-and-resharding.md",
      "hierarchy_path": "Resharding Lifecycle",
      "chunk_hash": "ee3193a981ed2f96",
      "content_digest": "ee3193a981ed2f96",
      "chunk_length": 1095,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant_ecosystem"
      ],
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "resharding",
          "collection",
          "lib",
          "src",
          "qdrant",
          "new",
          "shards",
          "scale",
          "ring",
          "start",
          "down",
          "replicas",
          "switch",
          "operations",
          "hash",
          "old",
          "remove",
          "storage",
          "content",
          "manager"
        ],
        "term_weights": [
          {
            "term": "resharding",
            "tf": 7,
            "weight": 0.055118
          },
          {
            "term": "collection",
            "tf": 6,
            "weight": 0.047244
          },
          {
            "term": "lib",
            "tf": 4,
            "weight": 0.031496
          },
          {
            "term": "src",
            "tf": 4,
            "weight": 0.031496
          },
          {
            "term": "qdrant",
            "tf": 4,
            "weight": 0.031496
          },
          {
            "term": "new",
            "tf": 3,
            "weight": 0.023622
          },
          {
            "term": "shards",
            "tf": 3,
            "weight": 0.023622
          },
          {
            "term": "scale",
            "tf": 3,
            "weight": 0.023622
          },
          {
            "term": "ring",
            "tf": 3,
            "weight": 0.023622
          },
          {
            "term": "start",
            "tf": 2,
            "weight": 0.015748
          },
          {
            "term": "down",
            "tf": 2,
            "weight": 0.015748
          },
          {
            "term": "replicas",
            "tf": 2,
            "weight": 0.015748
          },
          {
            "term": "switch",
            "tf": 2,
            "weight": 0.015748
          },
          {
            "term": "operations",
            "tf": 2,
            "weight": 0.015748
          },
          {
            "term": "hash",
            "tf": 2,
            "weight": 0.015748
          },
          {
            "term": "old",
            "tf": 2,
            "weight": 0.015748
          },
          {
            "term": "remove",
            "tf": 2,
            "weight": 0.015748
          },
          {
            "term": "storage",
            "tf": 2,
            "weight": 0.015748
          },
          {
            "term": "content",
            "tf": 2,
            "weight": 0.015748
          },
          {
            "term": "manager",
            "tf": 2,
            "weight": 0.015748
          }
        ],
        "unique_terms": 80,
        "total_terms": 127
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Resharding Lifecycle",
        "collection",
        "lib",
        "new",
        "qdrant",
        "resharding",
        "ring",
        "scale",
        "shards",
        "src",
        "start"
      ],
      "quality_fallback": true,
      "quality_notes": "Promoted via relaxed thresholds"
    },
    "advanced_scores": {
      "semantic": 0.2768458127975464,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7164150943396227,
      "overall": 0.631086969045723
    }
  }
]