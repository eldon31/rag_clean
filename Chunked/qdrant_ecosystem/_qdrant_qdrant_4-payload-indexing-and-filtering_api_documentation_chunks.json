[
  {
    "text": "## Purpose and Scope\n\nThis document explains Qdrant's payload indexing and filtering system, which enables efficient filtering of vector search results based on structured metadata (JSON payloads) attached to points. Payload indices accelerate filter evaluation by building specialized data structures for different field types, allowing queries to skip vector similarity computation for points that don't match filter criteria.\n\nFor information about vector indexing (HNSW, quantization), see [Vector Storage and Indexing](qdrant/qdrant/3-vector-storage-and-indexing.md). For the complete search flow including filter application during vector search, see [Search and Query Processing](qdrant/qdrant/5-search-and-query-processing.md).",
    "metadata": {
      "chunk_id": "0cc9c032360a-0001",
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "filename": "_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "file_extension": ".md",
      "chunk_index": 1,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Purpose and Scope"
      ],
      "heading_text": "Purpose and Scope",
      "token_count": 138,
      "char_count": 735,
      "start_char": 4048,
      "end_char": 4783,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5306976744186046,
      "chunking_strategy": "hierarchical_precise_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "processing_timestamp": "2025-10-20T04:38:46.076549",
      "document_id": "0cc9c032360a",
      "document_name": "_qdrant_qdrant_4-payload-indexing-and-filtering",
      "source_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "source_filename": "_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "source_directory": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant",
      "relative_path": "Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "hierarchy_path": "Purpose and Scope",
      "chunk_hash": "91933b4077ea57d6",
      "content_digest": "91933b4077ea57d6",
      "chunk_length": 735,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant_ecosystem"
      ],
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "and",
          "vector",
          "qdrant",
          "search",
          "indexing",
          "for",
          "filter",
          "payload",
          "filtering",
          "points",
          "see",
          "storage",
          "query",
          "processing",
          "purpose",
          "scope",
          "this",
          "document",
          "explains",
          "system"
        ],
        "term_weights": [
          {
            "term": "and",
            "tf": 6,
            "weight": 0.065217
          },
          {
            "term": "vector",
            "tf": 6,
            "weight": 0.065217
          },
          {
            "term": "qdrant",
            "tf": 5,
            "weight": 0.054348
          },
          {
            "term": "search",
            "tf": 5,
            "weight": 0.054348
          },
          {
            "term": "indexing",
            "tf": 4,
            "weight": 0.043478
          },
          {
            "term": "for",
            "tf": 4,
            "weight": 0.043478
          },
          {
            "term": "filter",
            "tf": 3,
            "weight": 0.032609
          },
          {
            "term": "payload",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "filtering",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "points",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "see",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "storage",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "query",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "processing",
            "tf": 2,
            "weight": 0.021739
          },
          {
            "term": "purpose",
            "tf": 1,
            "weight": 0.01087
          },
          {
            "term": "scope",
            "tf": 1,
            "weight": 0.01087
          },
          {
            "term": "this",
            "tf": 1,
            "weight": 0.01087
          },
          {
            "term": "document",
            "tf": 1,
            "weight": 0.01087
          },
          {
            "term": "explains",
            "tf": 1,
            "weight": 0.01087
          },
          {
            "term": "system",
            "tf": 1,
            "weight": 0.01087
          }
        ],
        "unique_terms": 59,
        "total_terms": 92
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Purpose and Scope",
        "and",
        "filter",
        "filtering",
        "for",
        "indexing",
        "payload",
        "points",
        "qdrant",
        "search",
        "vector"
      ]
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5306976744186046,
      "overall": 0.7435658914728681
    }
  },
  {
    "text": "## Core Components and Architecture\n\nQdrant implements two payload index strategies at the segment level:\n\n- **`StructPayloadIndex`**: Full-featured implementation that builds and maintains field-specific indices for accelerated filtering\n- **`PlainPayloadIndex`**: Minimal implementation that performs full scans without indices, used for small segments where index overhead outweighs benefits\n\nBoth implement the `PayloadIndex` trait, which defines the interface for filter evaluation, cardinality estimation, and index management.\n\n```\n```\n\n**Sources:** [lib/segment/src/index/struct\\_payload\\_index.rs78-98](https://github.com/qdrant/qdrant/blob/48203e41/lib/segment/src/index/struct_payload_index.rs#L78-L98) [lib/segment/src/index/plain\\_payload\\_index.rs27-32](https://github.com/qdrant/qdrant/blob/48203e41/lib/segment/src/index/plain_payload_index.rs#L27-L32)",
    "metadata": {
      "chunk_id": "0cc9c032360a-0002",
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "filename": "_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "file_extension": ".md",
      "chunk_index": 2,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Core Components and Architecture"
      ],
      "heading_text": "Core Components and Architecture",
      "token_count": 198,
      "char_count": 868,
      "start_char": 4785,
      "end_char": 5653,
      "semantic_score": 0.7,
      "structural_score": 0.7999999999999998,
      "retrieval_quality": 0.5378260869565217,
      "chunking_strategy": "hierarchical_precise_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "processing_timestamp": "2025-10-20T04:38:46.077654",
      "document_id": "0cc9c032360a",
      "document_name": "_qdrant_qdrant_4-payload-indexing-and-filtering",
      "source_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "source_filename": "_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "source_directory": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant",
      "relative_path": "Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "hierarchy_path": "Core Components and Architecture",
      "chunk_hash": "7f0f6c0a35789db0",
      "content_digest": "7f0f6c0a35789db0",
      "chunk_length": 868,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant_ecosystem"
      ],
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "index",
          "qdrant",
          "payload",
          "segment",
          "lib",
          "src",
          "and",
          "the",
          "for",
          "full",
          "implementation",
          "that",
          "indices",
          "struct",
          "https",
          "github",
          "com",
          "blob",
          "48203e41",
          "plain"
        ],
        "term_weights": [
          {
            "term": "index",
            "tf": 11,
            "weight": 0.099099
          },
          {
            "term": "qdrant",
            "tf": 5,
            "weight": 0.045045
          },
          {
            "term": "payload",
            "tf": 5,
            "weight": 0.045045
          },
          {
            "term": "segment",
            "tf": 5,
            "weight": 0.045045
          },
          {
            "term": "lib",
            "tf": 4,
            "weight": 0.036036
          },
          {
            "term": "src",
            "tf": 4,
            "weight": 0.036036
          },
          {
            "term": "and",
            "tf": 3,
            "weight": 0.027027
          },
          {
            "term": "the",
            "tf": 3,
            "weight": 0.027027
          },
          {
            "term": "for",
            "tf": 3,
            "weight": 0.027027
          },
          {
            "term": "full",
            "tf": 2,
            "weight": 0.018018
          },
          {
            "term": "implementation",
            "tf": 2,
            "weight": 0.018018
          },
          {
            "term": "that",
            "tf": 2,
            "weight": 0.018018
          },
          {
            "term": "indices",
            "tf": 2,
            "weight": 0.018018
          },
          {
            "term": "struct",
            "tf": 2,
            "weight": 0.018018
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.018018
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.018018
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.018018
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.018018
          },
          {
            "term": "48203e41",
            "tf": 2,
            "weight": 0.018018
          },
          {
            "term": "plain",
            "tf": 2,
            "weight": 0.018018
          }
        ],
        "unique_terms": 66,
        "total_terms": 111
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": true,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Core Components and Architecture",
        "and",
        "for",
        "full",
        "index",
        "lib",
        "payload",
        "qdrant",
        "segment",
        "src",
        "the"
      ]
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.7999999999999998,
      "retrieval_quality": 0.5378260869565217,
      "overall": 0.6792753623188404
    }
  },
  {
    "text": "### Index Selection Strategy\n\nThe `IndexSelector` enum encapsulates storage backend selection logic:\n\n```\n```\n\nSelection is based on:\n\n1. **Segment mutability**: Appendable segments prefer Gridstore/RocksDB\n2. **Configuration flags**: `skip_rocksdb` forces non-RocksDB backends\n3. **Field schema**: `is_on_disk` flag influences Mmap usage\n4. **Migration state**: Active migration from RocksDB to Gridstore\n\n**Sources:** [lib/segment/src/index/field\\_index/index\\_selector.rs31-148](https://github.com/qdrant/qdrant/blob/48203e41/lib/segment/src/index/field_index/index_selector.rs#L31-L148)",
    "metadata": {
      "chunk_id": "0cc9c032360a-0011",
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "filename": "_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "file_extension": ".md",
      "chunk_index": 11,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Index Selection Strategy"
      ],
      "heading_text": "Index Selection Strategy",
      "token_count": 150,
      "char_count": 590,
      "start_char": 10839,
      "end_char": 11429,
      "semantic_score": 0.7,
      "structural_score": 0.7999999999999998,
      "retrieval_quality": 0.5723529411764706,
      "chunking_strategy": "hierarchical_precise_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "processing_timestamp": "2025-10-20T04:38:46.077654",
      "document_id": "0cc9c032360a",
      "document_name": "_qdrant_qdrant_4-payload-indexing-and-filtering",
      "source_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "source_filename": "_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "source_directory": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant",
      "relative_path": "Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "hierarchy_path": "Index Selection Strategy",
      "chunk_hash": "67dc57fd3b55ec13",
      "content_digest": "67dc57fd3b55ec13",
      "chunk_length": 590,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant_ecosystem"
      ],
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "index",
          "rocksdb",
          "selection",
          "segment",
          "field",
          "gridstore",
          "migration",
          "lib",
          "src",
          "selector",
          "qdrant",
          "strategy",
          "the",
          "indexselector",
          "enum",
          "encapsulates",
          "storage",
          "backend",
          "logic",
          "based"
        ],
        "term_weights": [
          {
            "term": "index",
            "tf": 7,
            "weight": 0.1
          },
          {
            "term": "rocksdb",
            "tf": 4,
            "weight": 0.057143
          },
          {
            "term": "selection",
            "tf": 3,
            "weight": 0.042857
          },
          {
            "term": "segment",
            "tf": 3,
            "weight": 0.042857
          },
          {
            "term": "field",
            "tf": 3,
            "weight": 0.042857
          },
          {
            "term": "gridstore",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "migration",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "lib",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "src",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "selector",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "qdrant",
            "tf": 2,
            "weight": 0.028571
          },
          {
            "term": "strategy",
            "tf": 1,
            "weight": 0.014286
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.014286
          },
          {
            "term": "indexselector",
            "tf": 1,
            "weight": 0.014286
          },
          {
            "term": "enum",
            "tf": 1,
            "weight": 0.014286
          },
          {
            "term": "encapsulates",
            "tf": 1,
            "weight": 0.014286
          },
          {
            "term": "storage",
            "tf": 1,
            "weight": 0.014286
          },
          {
            "term": "backend",
            "tf": 1,
            "weight": 0.014286
          },
          {
            "term": "logic",
            "tf": 1,
            "weight": 0.014286
          },
          {
            "term": "based",
            "tf": 1,
            "weight": 0.014286
          }
        ],
        "unique_terms": 49,
        "total_terms": 70
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Index Selection Strategy",
        "field",
        "gridstore",
        "index",
        "lib",
        "migration",
        "rocksdb",
        "segment",
        "selection",
        "selector",
        "src"
      ]
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.7999999999999998,
      "retrieval_quality": 0.5723529411764706,
      "overall": 0.6907843137254902
    }
  },
  {
    "text": "### Primary Clauses and Filter Optimization  Primary clauses are filter conditions that can be evaluated entirely by index iteration, avoiding payload access:  | Clause Type                   | When Used           | Example                               | | ----------------------------- | ------------------- | ------------------------------------- | | `PrimaryCondition::Condition` | Field has index     | `age > 25` with indexed integer field | | `PrimaryCondition::Ids`       | Has ID filter       | `id in [1, 2, 3]`                     | | `PrimaryCondition::HasVector` | Vector exists check | `has_vector(\"image\")`                 |  The optimizer selects primary clauses during estimation ([line 635-639](<https://github.com/qdrant/qdrant/blob/48203e41/line 635-639>)), enabling efficient iteration strategies. **Sources:** [lib/segment/src/index/struct\\_payload\\_index.rs614-680](https://github.com/qdrant/qdrant/blob/48203e41/lib/segment/src/index/struct_payload_index.rs#L614-L680)",
    "metadata": {
      "chunk_id": "0cc9c032360a-0015",
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "filename": "_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "file_extension": ".md",
      "chunk_index": 15,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Primary Clauses and Filter Optimization"
      ],
      "heading_text": "Primary Clauses and Filter Optimization",
      "token_count": 221,
      "char_count": 992,
      "start_char": 12921,
      "end_char": 13913,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.6976923076923077,
      "chunking_strategy": "hierarchical_precise_structural",
      "content_type": "table_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "processing_timestamp": "2025-10-20T04:38:46.082294",
      "document_id": "0cc9c032360a",
      "document_name": "_qdrant_qdrant_4-payload-indexing-and-filtering",
      "source_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "source_filename": "_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "source_directory": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant",
      "relative_path": "Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "hierarchy_path": "Primary Clauses and Filter Optimization",
      "chunk_hash": "92cfeeb8e5ee0fe9",
      "content_digest": "92cfeeb8e5ee0fe9",
      "chunk_length": 992,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant_ecosystem"
      ],
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "index",
          "qdrant",
          "primary",
          "clauses",
          "filter",
          "payload",
          "primarycondition",
          "has",
          "iteration",
          "field",
          "vector",
          "line",
          "635",
          "639",
          "https",
          "github",
          "com",
          "blob",
          "48203e41",
          "lib"
        ],
        "term_weights": [
          {
            "term": "index",
            "tf": 6,
            "weight": 0.0625
          },
          {
            "term": "qdrant",
            "tf": 4,
            "weight": 0.041667
          },
          {
            "term": "primary",
            "tf": 3,
            "weight": 0.03125
          },
          {
            "term": "clauses",
            "tf": 3,
            "weight": 0.03125
          },
          {
            "term": "filter",
            "tf": 3,
            "weight": 0.03125
          },
          {
            "term": "payload",
            "tf": 3,
            "weight": 0.03125
          },
          {
            "term": "primarycondition",
            "tf": 3,
            "weight": 0.03125
          },
          {
            "term": "has",
            "tf": 3,
            "weight": 0.03125
          },
          {
            "term": "iteration",
            "tf": 2,
            "weight": 0.020833
          },
          {
            "term": "field",
            "tf": 2,
            "weight": 0.020833
          },
          {
            "term": "vector",
            "tf": 2,
            "weight": 0.020833
          },
          {
            "term": "line",
            "tf": 2,
            "weight": 0.020833
          },
          {
            "term": "635",
            "tf": 2,
            "weight": 0.020833
          },
          {
            "term": "639",
            "tf": 2,
            "weight": 0.020833
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.020833
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.020833
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.020833
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.020833
          },
          {
            "term": "48203e41",
            "tf": 2,
            "weight": 0.020833
          },
          {
            "term": "lib",
            "tf": 2,
            "weight": 0.020833
          }
        ],
        "unique_terms": 61,
        "total_terms": 96
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Primary Clauses and Filter Optimization",
        "clauses",
        "field",
        "filter",
        "has",
        "index",
        "iteration",
        "payload",
        "primary",
        "primarycondition",
        "qdrant"
      ]
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.6976923076923077,
      "overall": 0.7992307692307691
    }
  },
  {
    "text": "### Index Updates and Maintenance\n\nFor mutable segments, indices support incremental updates:\n\n```\n```\n\nThe `add_point()` method internally calls `remove_point()` first to handle value changes correctly.\n\n**Sources:** [lib/segment/src/index/field\\_index/field\\_index\\_base.rs274-331](https://github.com/qdrant/qdrant/blob/48203e41/lib/segment/src/index/field_index/field_index_base.rs#L274-L331)",
    "metadata": {
      "chunk_id": "0cc9c032360a-0021",
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "filename": "_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "file_extension": ".md",
      "chunk_index": 21,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Index Updates and Maintenance"
      ],
      "heading_text": "Index Updates and Maintenance",
      "token_count": 97,
      "char_count": 395,
      "start_char": 15726,
      "end_char": 16121,
      "semantic_score": 0.7,
      "structural_score": 0.7999999999999998,
      "retrieval_quality": 0.5792857142857143,
      "chunking_strategy": "hierarchical_precise_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "processing_timestamp": "2025-10-20T04:38:46.082294",
      "document_id": "0cc9c032360a",
      "document_name": "_qdrant_qdrant_4-payload-indexing-and-filtering",
      "source_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "source_filename": "_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "source_directory": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant",
      "relative_path": "Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "hierarchy_path": "Index Updates and Maintenance",
      "chunk_hash": "b93f7a9ec4c12077",
      "content_digest": "b93f7a9ec4c12077",
      "chunk_length": 395,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant_ecosystem"
      ],
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "index",
          "field",
          "updates",
          "point",
          "lib",
          "segment",
          "src",
          "base",
          "qdrant",
          "and",
          "maintenance",
          "for",
          "mutable",
          "segments",
          "indices",
          "support",
          "incremental",
          "the",
          "add",
          "method"
        ],
        "term_weights": [
          {
            "term": "index",
            "tf": 7,
            "weight": 0.12963
          },
          {
            "term": "field",
            "tf": 4,
            "weight": 0.074074
          },
          {
            "term": "updates",
            "tf": 2,
            "weight": 0.037037
          },
          {
            "term": "point",
            "tf": 2,
            "weight": 0.037037
          },
          {
            "term": "lib",
            "tf": 2,
            "weight": 0.037037
          },
          {
            "term": "segment",
            "tf": 2,
            "weight": 0.037037
          },
          {
            "term": "src",
            "tf": 2,
            "weight": 0.037037
          },
          {
            "term": "base",
            "tf": 2,
            "weight": 0.037037
          },
          {
            "term": "qdrant",
            "tf": 2,
            "weight": 0.037037
          },
          {
            "term": "and",
            "tf": 1,
            "weight": 0.018519
          },
          {
            "term": "maintenance",
            "tf": 1,
            "weight": 0.018519
          },
          {
            "term": "for",
            "tf": 1,
            "weight": 0.018519
          },
          {
            "term": "mutable",
            "tf": 1,
            "weight": 0.018519
          },
          {
            "term": "segments",
            "tf": 1,
            "weight": 0.018519
          },
          {
            "term": "indices",
            "tf": 1,
            "weight": 0.018519
          },
          {
            "term": "support",
            "tf": 1,
            "weight": 0.018519
          },
          {
            "term": "incremental",
            "tf": 1,
            "weight": 0.018519
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.018519
          },
          {
            "term": "add",
            "tf": 1,
            "weight": 0.018519
          },
          {
            "term": "method",
            "tf": 1,
            "weight": 0.018519
          }
        ],
        "unique_terms": 38,
        "total_terms": 54
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Index Updates and Maintenance",
        "and",
        "base",
        "field",
        "index",
        "lib",
        "point",
        "qdrant",
        "segment",
        "src",
        "updates"
      ]
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.7999999999999998,
      "retrieval_quality": 0.5792857142857143,
      "overall": 0.6930952380952381
    }
  },
  {
    "text": "### Index Persistence\n\nIndex configuration is persisted in `PayloadConfig`:\n\n```\n```\n\nEach indexed field stores:\n\n- **schema**: Field type and indexing parameters\n- **types**: Exact index implementation types (for reload)\n\nThis allows loading indices with the correct backend on segment reopening.\n\n**Sources:** [lib/segment/src/index/struct\\_payload\\_index.rs141-172](https://github.com/qdrant/qdrant/blob/48203e41/lib/segment/src/index/struct_payload_index.rs#L141-L172)",
    "metadata": {
      "chunk_id": "0cc9c032360a-0022",
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "filename": "_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "file_extension": ".md",
      "chunk_index": 22,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Index Persistence"
      ],
      "heading_text": "Index Persistence",
      "token_count": 109,
      "char_count": 472,
      "start_char": 16123,
      "end_char": 16595,
      "semantic_score": 0.7,
      "structural_score": 0.7999999999999998,
      "retrieval_quality": 0.5551162790697675,
      "chunking_strategy": "hierarchical_precise_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "processing_timestamp": "2025-10-20T04:38:46.082294",
      "document_id": "0cc9c032360a",
      "document_name": "_qdrant_qdrant_4-payload-indexing-and-filtering",
      "source_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "source_filename": "_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "source_directory": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant",
      "relative_path": "Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "hierarchy_path": "Index Persistence",
      "chunk_hash": "c0eb7d49c8e2a666",
      "content_digest": "c0eb7d49c8e2a666",
      "chunk_length": 472,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant_ecosystem"
      ],
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "index",
          "segment",
          "field",
          "types",
          "lib",
          "src",
          "struct",
          "payload",
          "qdrant",
          "persistence",
          "configuration",
          "persisted",
          "payloadconfig",
          "each",
          "indexed",
          "stores",
          "schema",
          "type",
          "and",
          "indexing"
        ],
        "term_weights": [
          {
            "term": "index",
            "tf": 7,
            "weight": 0.118644
          },
          {
            "term": "segment",
            "tf": 3,
            "weight": 0.050847
          },
          {
            "term": "field",
            "tf": 2,
            "weight": 0.033898
          },
          {
            "term": "types",
            "tf": 2,
            "weight": 0.033898
          },
          {
            "term": "lib",
            "tf": 2,
            "weight": 0.033898
          },
          {
            "term": "src",
            "tf": 2,
            "weight": 0.033898
          },
          {
            "term": "struct",
            "tf": 2,
            "weight": 0.033898
          },
          {
            "term": "payload",
            "tf": 2,
            "weight": 0.033898
          },
          {
            "term": "qdrant",
            "tf": 2,
            "weight": 0.033898
          },
          {
            "term": "persistence",
            "tf": 1,
            "weight": 0.016949
          },
          {
            "term": "configuration",
            "tf": 1,
            "weight": 0.016949
          },
          {
            "term": "persisted",
            "tf": 1,
            "weight": 0.016949
          },
          {
            "term": "payloadconfig",
            "tf": 1,
            "weight": 0.016949
          },
          {
            "term": "each",
            "tf": 1,
            "weight": 0.016949
          },
          {
            "term": "indexed",
            "tf": 1,
            "weight": 0.016949
          },
          {
            "term": "stores",
            "tf": 1,
            "weight": 0.016949
          },
          {
            "term": "schema",
            "tf": 1,
            "weight": 0.016949
          },
          {
            "term": "type",
            "tf": 1,
            "weight": 0.016949
          },
          {
            "term": "and",
            "tf": 1,
            "weight": 0.016949
          },
          {
            "term": "indexing",
            "tf": 1,
            "weight": 0.016949
          }
        ],
        "unique_terms": 44,
        "total_terms": 59
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": true,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Index Persistence",
        "field",
        "index",
        "lib",
        "payload",
        "persistence",
        "qdrant",
        "segment",
        "src",
        "struct",
        "types"
      ]
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.7999999999999998,
      "retrieval_quality": 0.5551162790697675,
      "overall": 0.6850387596899224
    }
  },
  {
    "text": "## Integration with Search Pipeline\n\nDuring vector search, payload filtering occurs in two places:\n\n1. **Pre-filtering**: `estimate_cardinality()` + `iter_filtered_points()` narrows candidates before vector computation\n2. **Post-filtering**: `filter_context().check(id)` verifies individual points during result collection\n\nThe search flow (from Diagram 3) shows this integration:\n\n```\n```\n\n**Sources:** Referenced in high-level Diagram 3 from system architecture",
    "metadata": {
      "chunk_id": "0cc9c032360a-0026",
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "filename": "_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "file_extension": ".md",
      "chunk_index": 26,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Integration with Search Pipeline"
      ],
      "heading_text": "Integration with Search Pipeline",
      "token_count": 94,
      "char_count": 463,
      "start_char": 17649,
      "end_char": 18112,
      "semantic_score": 0.7,
      "structural_score": 0.7999999999999998,
      "retrieval_quality": 0.5560377358490566,
      "chunking_strategy": "hierarchical_precise_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "processing_timestamp": "2025-10-20T04:38:46.082294",
      "document_id": "0cc9c032360a",
      "document_name": "_qdrant_qdrant_4-payload-indexing-and-filtering",
      "source_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "source_filename": "_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "source_directory": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant",
      "relative_path": "Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "hierarchy_path": "Integration with Search Pipeline",
      "chunk_hash": "1828449e14129fc3",
      "content_digest": "1828449e14129fc3",
      "chunk_length": 463,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant_ecosystem"
      ],
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "search",
          "filtering",
          "integration",
          "during",
          "vector",
          "points",
          "from",
          "diagram",
          "with",
          "pipeline",
          "payload",
          "occurs",
          "two",
          "places",
          "pre",
          "estimate",
          "cardinality",
          "iter",
          "filtered",
          "narrows"
        ],
        "term_weights": [
          {
            "term": "search",
            "tf": 3,
            "weight": 0.058824
          },
          {
            "term": "filtering",
            "tf": 3,
            "weight": 0.058824
          },
          {
            "term": "integration",
            "tf": 2,
            "weight": 0.039216
          },
          {
            "term": "during",
            "tf": 2,
            "weight": 0.039216
          },
          {
            "term": "vector",
            "tf": 2,
            "weight": 0.039216
          },
          {
            "term": "points",
            "tf": 2,
            "weight": 0.039216
          },
          {
            "term": "from",
            "tf": 2,
            "weight": 0.039216
          },
          {
            "term": "diagram",
            "tf": 2,
            "weight": 0.039216
          },
          {
            "term": "with",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "pipeline",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "payload",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "occurs",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "two",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "places",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "pre",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "estimate",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "cardinality",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "iter",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "filtered",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "narrows",
            "tf": 1,
            "weight": 0.019608
          }
        ],
        "unique_terms": 41,
        "total_terms": 51
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Integration with Search Pipeline",
        "diagram",
        "during",
        "filtering",
        "from",
        "integration",
        "pipeline",
        "points",
        "search",
        "vector",
        "with"
      ]
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.7999999999999998,
      "retrieval_quality": 0.5560377358490566,
      "overall": 0.6853459119496854
    }
  },
  {
    "text": "### On this page  - [Payload Indexing and Filtering](#payload-indexing-and-filtering.md) - [Purpose and Scope](#purpose-and-scope.md) - [Core Components and Architecture](#core-components-and-architecture.md) - [StructPayloadIndex Implementation](#structpayloadindex-implementation.md) - [Field Index Types](#field-index-types.md) - [Numeric Indices](#numeric-indices.md) - [Map Indices (Hash-Based)](#map-indices-hash-based.md) - [Full-Text Index](#full-text-index.md) - [Geo, Bool, and Null Indices](#geo-bool-and-null-indices.md) - [Storage Backends and Index Selection](#storage-backends-and-index-selection.md) - [Storage Backend Types](#storage-backend-types.md) - [Index Selection Strategy](#index-selection-strategy.md) - [RocksDB Migration](#rocksdb-migration.md) - [Filter Evaluation and Cardinality Estimation](#filter-evaluation-and-cardinality-estimation.md) - [Cardinality Estimation](#cardinality-estimation.md) - [Primary Clauses and Filter Optimization](#primary-clauses-and-filter-optimization.md) - [Filter Execution Strategies](#filter-execution-strategies.md) - [StructFilterContext](#structfiltercontext.md) - [Index Building and Lifecycle](#index-building-and-lifecycle.md) - [Index Creation Flow](#index-creation-flow.md) - [Builder Pattern](#builder-pattern.md) - [Index Updates and Maintenance](#index-updates-and-maintenance.md) - [Index Persistence](#index-persistence.md) - [Index Cleanup and Memory Management](#index-cleanup-and-memory-management.md) - [Cleanup Operations](#cleanup-operations.md) - [Cache Management](#cache-management.md) - [Integration with Search Pipeline](#integration-with-search-pipeline.md) - [PlainPayloadIndex for Small Segments](#plainpayloadindex-for-small-segments.md)",
    "metadata": {
      "chunk_id": "0cc9c032360a-0028",
      "source_file": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "filename": "_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "file_extension": ".md",
      "chunk_index": 28,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "On this page"
      ],
      "heading_text": "On this page",
      "token_count": 416,
      "char_count": 1729,
      "start_char": 19160,
      "end_char": 20889,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5157090909090909,
      "chunking_strategy": "hierarchical_precise_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "processing_timestamp": "2025-10-20T04:38:46.082294",
      "document_id": "0cc9c032360a",
      "document_name": "_qdrant_qdrant_4-payload-indexing-and-filtering",
      "source_path": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "source_filename": "_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "source_directory": "C:\\Users\\raze0\\Documents\\LLM_KNOWLEDGE_CREATOR\\RAG\\RAG_CLEAN\\Docs\\qdrant_ecosystem\\qdrant_qdrant",
      "relative_path": "Docs\\qdrant_ecosystem\\qdrant_qdrant\\_qdrant_qdrant_4-payload-indexing-and-filtering.md",
      "hierarchy_path": "On this page",
      "chunk_hash": "d3ed763fe0117bbb",
      "content_digest": "d3ed763fe0117bbb",
      "chunk_length": 1729,
      "payload_version": "1.3",
      "collection_hints": [
        "qdrant_ecosystem"
      ],
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "and",
          "index",
          "indices",
          "filter",
          "types",
          "storage",
          "selection",
          "cardinality",
          "estimation",
          "cleanup",
          "management",
          "payload",
          "indexing",
          "filtering",
          "purpose",
          "scope",
          "core",
          "components",
          "architecture",
          "structpayloadindex"
        ],
        "term_weights": [
          {
            "term": "and",
            "tf": 20,
            "weight": 0.108696
          },
          {
            "term": "index",
            "tf": 18,
            "weight": 0.097826
          },
          {
            "term": "indices",
            "tf": 6,
            "weight": 0.032609
          },
          {
            "term": "filter",
            "tf": 6,
            "weight": 0.032609
          },
          {
            "term": "types",
            "tf": 4,
            "weight": 0.021739
          },
          {
            "term": "storage",
            "tf": 4,
            "weight": 0.021739
          },
          {
            "term": "selection",
            "tf": 4,
            "weight": 0.021739
          },
          {
            "term": "cardinality",
            "tf": 4,
            "weight": 0.021739
          },
          {
            "term": "estimation",
            "tf": 4,
            "weight": 0.021739
          },
          {
            "term": "cleanup",
            "tf": 4,
            "weight": 0.021739
          },
          {
            "term": "management",
            "tf": 4,
            "weight": 0.021739
          },
          {
            "term": "payload",
            "tf": 2,
            "weight": 0.01087
          },
          {
            "term": "indexing",
            "tf": 2,
            "weight": 0.01087
          },
          {
            "term": "filtering",
            "tf": 2,
            "weight": 0.01087
          },
          {
            "term": "purpose",
            "tf": 2,
            "weight": 0.01087
          },
          {
            "term": "scope",
            "tf": 2,
            "weight": 0.01087
          },
          {
            "term": "core",
            "tf": 2,
            "weight": 0.01087
          },
          {
            "term": "components",
            "tf": 2,
            "weight": 0.01087
          },
          {
            "term": "architecture",
            "tf": 2,
            "weight": 0.01087
          },
          {
            "term": "structpayloadindex",
            "tf": 2,
            "weight": 0.01087
          }
        ],
        "unique_terms": 65,
        "total_terms": 184
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "On this page",
        "and",
        "cardinality",
        "cleanup",
        "estimation",
        "filter",
        "index",
        "indices",
        "selection",
        "storage",
        "types"
      ]
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5157090909090909,
      "overall": 0.7052363636363636
    }
  }
]