[
  {
    "text": "## Overview\n\nThe document conversion flow orchestrates multiple components to transform raw documents (PDF, DOCX, HTML, etc.) into structured `DoclingDocument` objects. The process follows these stages:\n\n1. **Input Processing**: Format detection and `InputDocument` creation\n2. **Routing**: Backend and pipeline selection based on format\n3. **Pipeline Execution**: Three-phase processing (build, assemble, enrich)\n4. **Output Generation**: `ConversionResult` with embedded `DoclingDocument`\n\nThe central orchestrator is `DocumentConverter`, which manages format-to-pipeline mappings, pipeline caching, and execution.\n\n---",
    "metadata": {
      "chunk_id": "b030c1430e50-0001",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 1,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Overview"
      ],
      "heading_text": "Overview",
      "token_count": 125,
      "char_count": 621,
      "start_char": 6581,
      "end_char": 7202,
      "semantic_score": 0.7,
      "structural_score": 0.7999999999999998,
      "retrieval_quality": 0.5608333333333333,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.648309",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 125,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "Overview",
      "chunk_hash": "9698f89aaea994aa",
      "content_digest": "9698f89aaea994aa",
      "chunk_length": 621,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "pipeline",
          "the",
          "format",
          "and",
          "doclingdocument",
          "processing",
          "execution",
          "overview",
          "document",
          "conversion",
          "flow",
          "orchestrates",
          "multiple",
          "components",
          "transform",
          "raw",
          "documents",
          "pdf",
          "docx",
          "html"
        ],
        "term_weights": [
          {
            "term": "pipeline",
            "tf": 4,
            "weight": 0.061538
          },
          {
            "term": "the",
            "tf": 3,
            "weight": 0.046154
          },
          {
            "term": "format",
            "tf": 3,
            "weight": 0.046154
          },
          {
            "term": "and",
            "tf": 3,
            "weight": 0.046154
          },
          {
            "term": "doclingdocument",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "processing",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "execution",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "overview",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "document",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "conversion",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "flow",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "orchestrates",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "multiple",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "components",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "transform",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "raw",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "documents",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "pdf",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "docx",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "html",
            "tf": 1,
            "weight": 0.015385
          }
        ],
        "unique_terms": 53,
        "total_terms": 65
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Overview",
        "and",
        "conversion",
        "doclingdocument",
        "document",
        "execution",
        "format",
        "overview",
        "pipeline",
        "processing",
        "the"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.7999999999999998,
      "retrieval_quality": 0.5608333333333333,
      "overall": 0.6869444444444444
    }
  },
  {
    "text": "### DocumentConverter Initialization  The `DocumentConverter` class serves as the primary entry point for document conversion: ``` ``` **Key responsibilities:**  - Maintain `format_to_options` mapping: `Dict[InputFormat, FormatOption]` - Cache initialized pipelines: `Dict[Tuple[Type[BasePipeline], str], BasePipeline]` - Coordinate batch processing with concurrency control  **Entry Point Diagram** ``` ``` **Sources:** [docling/document\\_converter.py184-205](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L184-L205) [docling/cli/main.py299-816](https://github.com/docling-project/docling/blob/f7244a43/docling/cli/main.py#L299-L816)",
    "metadata": {
      "chunk_id": "b030c1430e50-0003",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 3,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "DocumentConverter Initialization"
      ],
      "heading_text": "DocumentConverter Initialization",
      "token_count": 159,
      "char_count": 675,
      "start_char": 7240,
      "end_char": 7915,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5453191489361702,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.653278",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 159,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "DocumentConverter Initialization",
      "chunk_hash": "72fcc8e10781bdcd",
      "content_digest": "72fcc8e10781bdcd",
      "chunk_length": 675,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "docling",
          "document",
          "documentconverter",
          "the",
          "entry",
          "point",
          "dict",
          "basepipeline",
          "converter",
          "https",
          "github",
          "com",
          "project",
          "blob",
          "f7244a43",
          "cli",
          "main",
          "initialization",
          "class",
          "serves"
        ],
        "term_weights": [
          {
            "term": "docling",
            "tf": 8,
            "weight": 0.103896
          },
          {
            "term": "document",
            "tf": 3,
            "weight": 0.038961
          },
          {
            "term": "documentconverter",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "entry",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "point",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "dict",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "basepipeline",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "converter",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "project",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "f7244a43",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "cli",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "main",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "initialization",
            "tf": 1,
            "weight": 0.012987
          },
          {
            "term": "class",
            "tf": 1,
            "weight": 0.012987
          },
          {
            "term": "serves",
            "tf": 1,
            "weight": 0.012987
          }
        ],
        "unique_terms": 53,
        "total_terms": 77
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "DocumentConverter Initialization",
        "basepipeline",
        "converter",
        "dict",
        "docling",
        "document",
        "documentconverter",
        "entry",
        "https",
        "point",
        "the"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5453191489361702,
      "overall": 0.7151063829787233
    }
  },
  {
    "text": "### Conversion Methods  The API provides two methods:  | Method                | Description                | Return Type                  | | --------------------- | -------------------------- | ---------------------------- | | `convert(source)`     | Convert single document    | `ConversionResult`           | | `convert_all(source)` | Convert multiple documents | `Iterator[ConversionResult]` |  Both methods accept:  - `source`: `Path`, `str` (URL), or `DocumentStream` (BytesIO) - `headers`: Optional HTTP headers for URL sources - `raises_on_error`: Control error propagation - `max_num_pages`, `max_file_size`: Document limits - `page_range`: Tuple of (start\\_page, end\\_page)  **Sources:** [docling/document\\_converter.py228-283](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L228-L283)  ---",
    "metadata": {
      "chunk_id": "b030c1430e50-0004",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 4,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Conversion Methods"
      ],
      "heading_text": "Conversion Methods",
      "token_count": 188,
      "char_count": 841,
      "start_char": 7921,
      "end_char": 8762,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5064556962025316,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "table_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.653941",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 188,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "Conversion Methods",
      "chunk_hash": "d890ad33adbd783c",
      "content_digest": "d890ad33adbd783c",
      "chunk_length": 841,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "convert",
          "document",
          "docling",
          "methods",
          "source",
          "page",
          "conversionresult",
          "url",
          "headers",
          "sources",
          "error",
          "max",
          "converter",
          "conversion",
          "the",
          "api",
          "provides",
          "two",
          "method",
          "description"
        ],
        "term_weights": [
          {
            "term": "convert",
            "tf": 4,
            "weight": 0.05
          },
          {
            "term": "document",
            "tf": 4,
            "weight": 0.05
          },
          {
            "term": "docling",
            "tf": 4,
            "weight": 0.05
          },
          {
            "term": "methods",
            "tf": 3,
            "weight": 0.0375
          },
          {
            "term": "source",
            "tf": 3,
            "weight": 0.0375
          },
          {
            "term": "page",
            "tf": 3,
            "weight": 0.0375
          },
          {
            "term": "conversionresult",
            "tf": 2,
            "weight": 0.025
          },
          {
            "term": "url",
            "tf": 2,
            "weight": 0.025
          },
          {
            "term": "headers",
            "tf": 2,
            "weight": 0.025
          },
          {
            "term": "sources",
            "tf": 2,
            "weight": 0.025
          },
          {
            "term": "error",
            "tf": 2,
            "weight": 0.025
          },
          {
            "term": "max",
            "tf": 2,
            "weight": 0.025
          },
          {
            "term": "converter",
            "tf": 2,
            "weight": 0.025
          },
          {
            "term": "conversion",
            "tf": 1,
            "weight": 0.0125
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.0125
          },
          {
            "term": "api",
            "tf": 1,
            "weight": 0.0125
          },
          {
            "term": "provides",
            "tf": 1,
            "weight": 0.0125
          },
          {
            "term": "two",
            "tf": 1,
            "weight": 0.0125
          },
          {
            "term": "method",
            "tf": 1,
            "weight": 0.0125
          },
          {
            "term": "description",
            "tf": 1,
            "weight": 0.0125
          }
        ],
        "unique_terms": 58,
        "total_terms": 80
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Conversion Methods",
        "conversionresult",
        "convert",
        "docling",
        "document",
        "headers",
        "methods",
        "page",
        "source",
        "sources",
        "url"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5064556962025316,
      "overall": 0.7354852320675104
    }
  },
  {
    "text": "## Format Detection and Input Processing",
    "metadata": {
      "chunk_id": "b030c1430e50-0005",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 5,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Format Detection and Input Processing"
      ],
      "heading_text": "Format Detection and Input Processing",
      "token_count": 6,
      "char_count": 40,
      "start_char": 8764,
      "end_char": 8804,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.654233",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 6,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "Format Detection and Input Processing",
      "chunk_hash": "cc8cf126bf70187f",
      "content_digest": "cc8cf126bf70187f",
      "chunk_length": 40,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "format",
          "detection",
          "and",
          "input",
          "processing"
        ],
        "term_weights": [
          {
            "term": "format",
            "tf": 1,
            "weight": 0.2
          },
          {
            "term": "detection",
            "tf": 1,
            "weight": 0.2
          },
          {
            "term": "and",
            "tf": 1,
            "weight": 0.2
          },
          {
            "term": "input",
            "tf": 1,
            "weight": 0.2
          },
          {
            "term": "processing",
            "tf": 1,
            "weight": 0.2
          }
        ],
        "unique_terms": 5,
        "total_terms": 5
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Format Detection and Input Processing",
        "and",
        "detection",
        "format",
        "input",
        "processing"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "overall": 0.7633333333333333
    }
  },
  {
    "text": "#### Format Detection Strategy ``` ``` **Sources:** [docling/datamodel/document.py280-489](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py#L280-L489)",
    "metadata": {
      "chunk_id": "b030c1430e50-0007",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 7,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Format Detection Strategy"
      ],
      "heading_text": "Format Detection Strategy",
      "token_count": 47,
      "char_count": 188,
      "start_char": 8948,
      "end_char": 9136,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5525,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.654826",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 47,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "Format Detection Strategy",
      "chunk_hash": "0de3b97fdf523d1f",
      "content_digest": "0de3b97fdf523d1f",
      "chunk_length": 188,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "docling",
          "datamodel",
          "document",
          "format",
          "detection",
          "strategy",
          "sources",
          "py280",
          "489",
          "https",
          "github",
          "com",
          "project",
          "blob",
          "f7244a43",
          "l280",
          "l489"
        ],
        "term_weights": [
          {
            "term": "docling",
            "tf": 4,
            "weight": 0.181818
          },
          {
            "term": "datamodel",
            "tf": 2,
            "weight": 0.090909
          },
          {
            "term": "document",
            "tf": 2,
            "weight": 0.090909
          },
          {
            "term": "format",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "detection",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "strategy",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "sources",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "py280",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "489",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "https",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "github",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "com",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "project",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "blob",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "f7244a43",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "l280",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "l489",
            "tf": 1,
            "weight": 0.045455
          }
        ],
        "unique_terms": 17,
        "total_terms": 22
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "489",
        "Format Detection Strategy",
        "datamodel",
        "detection",
        "docling",
        "document",
        "format",
        "https",
        "py280",
        "sources",
        "strategy"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5525,
      "overall": 0.6841666666666667
    }
  },
  {
    "text": "#### Tier 1: MIME Type Detection  Uses `filetype.guess_mime()` on file path or first 8KB of stream:  - For `Path`: Reads file signature - For `DocumentStream`: Reads first 8KB, seeks back to 0  Special cases:  - `application/zip` → Infer DOCX/XLSX/PPTX from file extension - `application/gzip` → Check for METS metadata via `_detect_mets_gbs()`  **Sources:** [docling/datamodel/document.py285-323](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py#L285-L323)",
    "metadata": {
      "chunk_id": "b030c1430e50-0008",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 8,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Tier 1: MIME Type Detection"
      ],
      "heading_text": "Tier 1: MIME Type Detection",
      "token_count": 140,
      "char_count": 495,
      "start_char": 9140,
      "end_char": 9635,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5333962264150943,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.656175",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 140,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "Tier 1: MIME Type Detection",
      "chunk_hash": "86f2358e2a1044ab",
      "content_digest": "86f2358e2a1044ab",
      "chunk_length": 495,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "docling",
          "file",
          "for",
          "mime",
          "path",
          "first",
          "8kb",
          "reads",
          "application",
          "mets",
          "datamodel",
          "document",
          "tier",
          "type",
          "detection",
          "uses",
          "filetype",
          "guess",
          "stream",
          "signature"
        ],
        "term_weights": [
          {
            "term": "docling",
            "tf": 4,
            "weight": 0.061538
          },
          {
            "term": "file",
            "tf": 3,
            "weight": 0.046154
          },
          {
            "term": "for",
            "tf": 3,
            "weight": 0.046154
          },
          {
            "term": "mime",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "path",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "first",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "8kb",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "reads",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "application",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "mets",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "datamodel",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "document",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "tier",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "type",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "detection",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "uses",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "filetype",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "guess",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "stream",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "signature",
            "tf": 1,
            "weight": 0.015385
          }
        ],
        "unique_terms": 49,
        "total_terms": 65
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "8kb",
        "Tier 1: MIME Type Detection",
        "application",
        "docling",
        "file",
        "first",
        "for",
        "mets",
        "mime",
        "path",
        "reads"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5333962264150943,
      "overall": 0.711132075471698
    }
  },
  {
    "text": "#### Tier 2: Extension Mapping  If MIME detection fails, use extension-based lookup: ``` ``` Mappings defined in `FormatToMimeType` dictionary. **Sources:** [docling/datamodel/document.py376-400](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py#L376-L400) [docling/datamodel/base\\_models.py101-133](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/base_models.py#L101-L133)",
    "metadata": {
      "chunk_id": "b030c1430e50-0009",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 9,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Tier 2: Extension Mapping"
      ],
      "heading_text": "Tier 2: Extension Mapping",
      "token_count": 113,
      "char_count": 437,
      "start_char": 9637,
      "end_char": 10074,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5763636363636364,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.657119",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 113,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "Tier 2: Extension Mapping",
      "chunk_hash": "9a3c08ba837e186e",
      "content_digest": "9a3c08ba837e186e",
      "chunk_length": 437,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "docling",
          "datamodel",
          "extension",
          "document",
          "https",
          "github",
          "com",
          "project",
          "blob",
          "f7244a43",
          "base",
          "models",
          "tier",
          "mapping",
          "mime",
          "detection",
          "fails",
          "use",
          "based",
          "lookup"
        ],
        "term_weights": [
          {
            "term": "docling",
            "tf": 8,
            "weight": 0.150943
          },
          {
            "term": "datamodel",
            "tf": 4,
            "weight": 0.075472
          },
          {
            "term": "extension",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "document",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "project",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "f7244a43",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "base",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "models",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "tier",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "mapping",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "mime",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "detection",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "fails",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "use",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "based",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "lookup",
            "tf": 1,
            "weight": 0.018868
          }
        ],
        "unique_terms": 33,
        "total_terms": 53
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Tier 2: Extension Mapping",
        "blob",
        "com",
        "datamodel",
        "docling",
        "document",
        "extension",
        "f7244a43",
        "github",
        "https",
        "project"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5763636363636364,
      "overall": 0.692121212121212
    }
  },
  {
    "text": "### InputDocument Creation  Once format is detected, `_DocumentConversionInput.docs()` creates `InputDocument` instances:  **InputDocument Creation Flow** ``` ``` **Key validation checks:**  - File size ≤ `limits.max_file_size` - Page count ≤ `limits.max_num_pages` - Page range within bounds: `limits.page_range` - Backend validity: `backend.is_valid()`  If any check fails, `InputDocument.valid = False`. **Sources:** [docling/datamodel/document.py104-191](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py#L104-L191) [docling/datamodel/document.py236-278](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/document.py#L236-L278)  ---",
    "metadata": {
      "chunk_id": "b030c1430e50-0011",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 11,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "InputDocument Creation"
      ],
      "heading_text": "InputDocument Creation",
      "token_count": 172,
      "char_count": 698,
      "start_char": 10705,
      "end_char": 11403,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.548,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.659126",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 172,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "InputDocument Creation",
      "chunk_hash": "a492aba4aaf419b5",
      "content_digest": "a492aba4aaf419b5",
      "chunk_length": 698,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "docling",
          "inputdocument",
          "datamodel",
          "document",
          "limits",
          "page",
          "creation",
          "file",
          "size",
          "max",
          "range",
          "backend",
          "valid",
          "https",
          "github",
          "com",
          "project",
          "blob",
          "f7244a43",
          "once"
        ],
        "term_weights": [
          {
            "term": "docling",
            "tf": 8,
            "weight": 0.097561
          },
          {
            "term": "inputdocument",
            "tf": 4,
            "weight": 0.04878
          },
          {
            "term": "datamodel",
            "tf": 4,
            "weight": 0.04878
          },
          {
            "term": "document",
            "tf": 4,
            "weight": 0.04878
          },
          {
            "term": "limits",
            "tf": 3,
            "weight": 0.036585
          },
          {
            "term": "page",
            "tf": 3,
            "weight": 0.036585
          },
          {
            "term": "creation",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "file",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "size",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "max",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "range",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "backend",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "valid",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "project",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "f7244a43",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "once",
            "tf": 1,
            "weight": 0.012195
          }
        ],
        "unique_terms": 49,
        "total_terms": 82
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "InputDocument Creation",
        "creation",
        "datamodel",
        "docling",
        "document",
        "file",
        "inputdocument",
        "limits",
        "max",
        "page",
        "size"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.548,
      "overall": 0.6826666666666666
    }
  },
  {
    "text": "### Pipeline Selection and Caching  Pipelines are cached by `(pipeline_class, options_hash)` to avoid redundant initialization:  **Pipeline Caching Flow** ``` ``` **Cache key construction:**  1. Serialize `pipeline_options.model_dump()` to string 2. Compute MD5 hash: `hashlib.md5(options_str.encode(\"utf-8\"))` 3. Create tuple: `(pipeline_class, options_hash)`  This ensures:  - Same pipeline class + options → Same pipeline instance - Thread-safe via `_PIPELINE_CACHE_LOCK` - Models loaded only once per unique configuration  **Sources:** [docling/document\\_converter.py207-378](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L207-L378)  ---",
    "metadata": {
      "chunk_id": "b030c1430e50-0015",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 15,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Pipeline Selection and Caching"
      ],
      "heading_text": "Pipeline Selection and Caching",
      "token_count": 162,
      "char_count": 682,
      "start_char": 12731,
      "end_char": 13413,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5438461538461539,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.662911",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 162,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "Pipeline Selection and Caching",
      "chunk_hash": "b8128b82b5753728",
      "content_digest": "b8128b82b5753728",
      "chunk_length": 682,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "pipeline",
          "options",
          "docling",
          "class",
          "hash",
          "caching",
          "cache",
          "md5",
          "same",
          "document",
          "converter",
          "selection",
          "and",
          "pipelines",
          "are",
          "cached",
          "avoid",
          "redundant",
          "initialization",
          "flow"
        ],
        "term_weights": [
          {
            "term": "pipeline",
            "tf": 8,
            "weight": 0.097561
          },
          {
            "term": "options",
            "tf": 5,
            "weight": 0.060976
          },
          {
            "term": "docling",
            "tf": 4,
            "weight": 0.04878
          },
          {
            "term": "class",
            "tf": 3,
            "weight": 0.036585
          },
          {
            "term": "hash",
            "tf": 3,
            "weight": 0.036585
          },
          {
            "term": "caching",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "cache",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "md5",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "same",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "document",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "converter",
            "tf": 2,
            "weight": 0.02439
          },
          {
            "term": "selection",
            "tf": 1,
            "weight": 0.012195
          },
          {
            "term": "and",
            "tf": 1,
            "weight": 0.012195
          },
          {
            "term": "pipelines",
            "tf": 1,
            "weight": 0.012195
          },
          {
            "term": "are",
            "tf": 1,
            "weight": 0.012195
          },
          {
            "term": "cached",
            "tf": 1,
            "weight": 0.012195
          },
          {
            "term": "avoid",
            "tf": 1,
            "weight": 0.012195
          },
          {
            "term": "redundant",
            "tf": 1,
            "weight": 0.012195
          },
          {
            "term": "initialization",
            "tf": 1,
            "weight": 0.012195
          },
          {
            "term": "flow",
            "tf": 1,
            "weight": 0.012195
          }
        ],
        "unique_terms": 58,
        "total_terms": 82
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Pipeline Selection and Caching",
        "cache",
        "caching",
        "class",
        "docling",
        "document",
        "hash",
        "md5",
        "options",
        "pipeline",
        "same"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5438461538461539,
      "overall": 0.7146153846153845
    }
  },
  {
    "text": "## Pipeline Execution Phases  All pipelines inherit from `BasePipeline` and implement a three-phase execution model:  **Three-Phase Execution Model** ``` ``` **Sources:** [docling/pipeline/base\\_pipeline.py62-123](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L62-L123)",
    "metadata": {
      "chunk_id": "b030c1430e50-0016",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 16,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Pipeline Execution Phases"
      ],
      "heading_text": "Pipeline Execution Phases",
      "token_count": 76,
      "char_count": 314,
      "start_char": 13417,
      "end_char": 13731,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5490909090909091,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.663976",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 76,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "Pipeline Execution Phases",
      "chunk_hash": "f402538e0a35b634",
      "content_digest": "f402538e0a35b634",
      "chunk_length": 314,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "pipeline",
          "docling",
          "execution",
          "three",
          "phase",
          "model",
          "base",
          "phases",
          "all",
          "pipelines",
          "inherit",
          "from",
          "basepipeline",
          "and",
          "implement",
          "sources",
          "py62",
          "123",
          "https",
          "github"
        ],
        "term_weights": [
          {
            "term": "pipeline",
            "tf": 5,
            "weight": 0.128205
          },
          {
            "term": "docling",
            "tf": 4,
            "weight": 0.102564
          },
          {
            "term": "execution",
            "tf": 3,
            "weight": 0.076923
          },
          {
            "term": "three",
            "tf": 2,
            "weight": 0.051282
          },
          {
            "term": "phase",
            "tf": 2,
            "weight": 0.051282
          },
          {
            "term": "model",
            "tf": 2,
            "weight": 0.051282
          },
          {
            "term": "base",
            "tf": 2,
            "weight": 0.051282
          },
          {
            "term": "phases",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "all",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "pipelines",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "inherit",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "from",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "basepipeline",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "and",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "implement",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "sources",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "py62",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "123",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "https",
            "tf": 1,
            "weight": 0.025641
          },
          {
            "term": "github",
            "tf": 1,
            "weight": 0.025641
          }
        ],
        "unique_terms": 26,
        "total_terms": 39
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Pipeline Execution Phases",
        "all",
        "base",
        "docling",
        "execution",
        "model",
        "phase",
        "phases",
        "pipeline",
        "pipelines",
        "three"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5490909090909091,
      "overall": 0.7163636363636363
    }
  },
  {
    "text": "### Phase 1: Build Document (\\_build\\_document)  Abstract method implemented by each pipeline. Responsibilities:  - Load document pages/content from backend - Apply models (OCR, layout, tables) to extract structure - Populate `ConversionResult.pages` with predictions  **Examples:**  - **PaginatedPipeline**: Iterate pages, apply sequential models via `build_pipe` - **SimplePipeline**: Call `backend.convert()` directly to get `DoclingDocument` - **VlmPipeline**: Generate page images, run VLM model for predictions - **AsrPipeline**: Transcribe audio, create text-based document  **Sources:** [docling/pipeline/base\\_pipeline.py86-88](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L86-L88) [docling/pipeline/simple\\_pipeline.py26-41](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/simple_pipeline.py#L26-L41)",
    "metadata": {
      "chunk_id": "b030c1430e50-0017",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 17,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Phase 1: Build Document (\\_build\\_document)"
      ],
      "heading_text": "Phase 1: Build Document (\\_build\\_document)",
      "token_count": 209,
      "char_count": 882,
      "start_char": 13735,
      "end_char": 14617,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7392957746478873,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.664532",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 209,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "Phase 1: Build Document (\\_build\\_document)",
      "chunk_hash": "76a321852d4b2629",
      "content_digest": "76a321852d4b2629",
      "chunk_length": 882,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "pipeline",
          "docling",
          "document",
          "build",
          "pages",
          "backend",
          "apply",
          "models",
          "predictions",
          "base",
          "https",
          "github",
          "com",
          "project",
          "blob",
          "f7244a43",
          "simple",
          "phase",
          "abstract",
          "method"
        ],
        "term_weights": [
          {
            "term": "pipeline",
            "tf": 9,
            "weight": 0.089109
          },
          {
            "term": "docling",
            "tf": 8,
            "weight": 0.079208
          },
          {
            "term": "document",
            "tf": 4,
            "weight": 0.039604
          },
          {
            "term": "build",
            "tf": 3,
            "weight": 0.029703
          },
          {
            "term": "pages",
            "tf": 3,
            "weight": 0.029703
          },
          {
            "term": "backend",
            "tf": 2,
            "weight": 0.019802
          },
          {
            "term": "apply",
            "tf": 2,
            "weight": 0.019802
          },
          {
            "term": "models",
            "tf": 2,
            "weight": 0.019802
          },
          {
            "term": "predictions",
            "tf": 2,
            "weight": 0.019802
          },
          {
            "term": "base",
            "tf": 2,
            "weight": 0.019802
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.019802
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.019802
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.019802
          },
          {
            "term": "project",
            "tf": 2,
            "weight": 0.019802
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.019802
          },
          {
            "term": "f7244a43",
            "tf": 2,
            "weight": 0.019802
          },
          {
            "term": "simple",
            "tf": 2,
            "weight": 0.019802
          },
          {
            "term": "phase",
            "tf": 1,
            "weight": 0.009901
          },
          {
            "term": "abstract",
            "tf": 1,
            "weight": 0.009901
          },
          {
            "term": "method",
            "tf": 1,
            "weight": 0.009901
          }
        ],
        "unique_terms": 67,
        "total_terms": 101
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Phase 1: Build Document (\\_build\\_document)",
        "apply",
        "backend",
        "base",
        "build",
        "docling",
        "document",
        "models",
        "pages",
        "pipeline",
        "predictions"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7392957746478873,
      "overall": 0.7797652582159623
    }
  },
  {
    "text": "### Phase 2: Assemble Document (\\_assemble\\_document)  Constructs the hierarchical `DoclingDocument` from page-level predictions:  **Assembly Process (PaginatedPipeline Example)** ``` ``` **Key operations:**  - Convert page-level `Cluster`, `Table`, `FigureElement` to `DocItem` hierarchy - Assign provenance metadata (page numbers, bounding boxes) - Generate cropped images for `PictureItem`, `TableItem` if requested - Clear page backends/caches if not needed downstream  **Sources:** [docling/pipeline/base\\_pipeline.py90-91](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L90-L91)",
    "metadata": {
      "chunk_id": "b030c1430e50-0018",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 18,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Phase 2: Assemble Document (\\_assemble\\_document)"
      ],
      "heading_text": "Phase 2: Assemble Document (\\_assemble\\_document)",
      "token_count": 148,
      "char_count": 628,
      "start_char": 14619,
      "end_char": 15247,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.758421052631579,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.666810",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 148,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "Phase 2: Assemble Document (\\_assemble\\_document)",
      "chunk_hash": "4780222ae2a36862",
      "content_digest": "4780222ae2a36862",
      "chunk_length": 628,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "page",
          "docling",
          "pipeline",
          "assemble",
          "document",
          "level",
          "base",
          "phase",
          "constructs",
          "the",
          "hierarchical",
          "doclingdocument",
          "from",
          "predictions",
          "assembly",
          "process",
          "paginatedpipeline",
          "example",
          "key",
          "operations"
        ],
        "term_weights": [
          {
            "term": "page",
            "tf": 4,
            "weight": 0.058824
          },
          {
            "term": "docling",
            "tf": 4,
            "weight": 0.058824
          },
          {
            "term": "pipeline",
            "tf": 4,
            "weight": 0.058824
          },
          {
            "term": "assemble",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "document",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "level",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "base",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "phase",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "constructs",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "hierarchical",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "doclingdocument",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "from",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "predictions",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "assembly",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "process",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "paginatedpipeline",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "example",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "key",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "operations",
            "tf": 1,
            "weight": 0.014706
          }
        ],
        "unique_terms": 55,
        "total_terms": 68
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Phase 2: Assemble Document (\\_assemble\\_document)",
        "assemble",
        "base",
        "constructs",
        "docling",
        "document",
        "level",
        "page",
        "phase",
        "pipeline",
        "the"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.758421052631579,
      "overall": 0.8194736842105262
    }
  },
  {
    "text": "### Phase 3: Enrich Document (\\_enrich\\_document)  Applies enrichment models to individual `NodeItem` elements in the `DoclingDocument`:  **Enrichment Pipeline Flow** ``` ``` **Common enrichment models:**  - `CodeFormulaModel`: Extract LaTeX from code/formula images - `DocumentPictureClassifier`: Classify picture types - `PictureDescriptionVlmModel`: Generate image captions  **Sources:** [docling/pipeline/base\\_pipeline.py93-115](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L93-L115) [docling/pipeline/base\\_pipeline.py135-177](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L135-L177)  ---",
    "metadata": {
      "chunk_id": "b030c1430e50-0019",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 19,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Phase 3: Enrich Document (\\_enrich\\_document)"
      ],
      "heading_text": "Phase 3: Enrich Document (\\_enrich\\_document)",
      "token_count": 171,
      "char_count": 685,
      "start_char": 15251,
      "end_char": 15936,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5633333333333334,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.669291",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 171,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "Phase 3: Enrich Document (\\_enrich\\_document)",
      "chunk_hash": "0f8961ffcd0fe59c",
      "content_digest": "0f8961ffcd0fe59c",
      "chunk_length": 685,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "pipeline",
          "docling",
          "base",
          "enrichment",
          "enrich",
          "document",
          "models",
          "https",
          "github",
          "com",
          "project",
          "blob",
          "f7244a43",
          "phase",
          "applies",
          "individual",
          "nodeitem",
          "elements",
          "the",
          "doclingdocument"
        ],
        "term_weights": [
          {
            "term": "pipeline",
            "tf": 9,
            "weight": 0.12
          },
          {
            "term": "docling",
            "tf": 8,
            "weight": 0.106667
          },
          {
            "term": "base",
            "tf": 4,
            "weight": 0.053333
          },
          {
            "term": "enrichment",
            "tf": 3,
            "weight": 0.04
          },
          {
            "term": "enrich",
            "tf": 2,
            "weight": 0.026667
          },
          {
            "term": "document",
            "tf": 2,
            "weight": 0.026667
          },
          {
            "term": "models",
            "tf": 2,
            "weight": 0.026667
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.026667
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.026667
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.026667
          },
          {
            "term": "project",
            "tf": 2,
            "weight": 0.026667
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.026667
          },
          {
            "term": "f7244a43",
            "tf": 2,
            "weight": 0.026667
          },
          {
            "term": "phase",
            "tf": 1,
            "weight": 0.013333
          },
          {
            "term": "applies",
            "tf": 1,
            "weight": 0.013333
          },
          {
            "term": "individual",
            "tf": 1,
            "weight": 0.013333
          },
          {
            "term": "nodeitem",
            "tf": 1,
            "weight": 0.013333
          },
          {
            "term": "elements",
            "tf": 1,
            "weight": 0.013333
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.013333
          },
          {
            "term": "doclingdocument",
            "tf": 1,
            "weight": 0.013333
          }
        ],
        "unique_terms": 46,
        "total_terms": 75
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Phase 3: Enrich Document (\\_enrich\\_document)",
        "base",
        "com",
        "docling",
        "document",
        "enrich",
        "enrichment",
        "github",
        "https",
        "models",
        "pipeline"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5633333333333334,
      "overall": 0.721111111111111
    }
  },
  {
    "text": "### Export Formats  The `DoclingDocument` can be exported to multiple formats:  **Export Method Overview** ``` ``` **Export options:**  - `image_mode`: `PLACEHOLDER`, `EMBEDDED` (base64), `REFERENCED` (separate PNG files) - `strict_text`: Strip all formatting (for Markdown) - `split_page_view`: Separate HTML page per document page  **Sources:** [docling/cli/main.py191-289](https://github.com/docling-project/docling/blob/f7244a43/docling/cli/main.py#L191-L289)",
    "metadata": {
      "chunk_id": "b030c1430e50-0023",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 23,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Export Formats"
      ],
      "heading_text": "Export Formats",
      "token_count": 122,
      "char_count": 463,
      "start_char": 17550,
      "end_char": 18013,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5559090909090909,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.674533",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 122,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "Export Formats",
      "chunk_hash": "be17c8697e9a6ee3",
      "content_digest": "be17c8697e9a6ee3",
      "chunk_length": 463,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "docling",
          "export",
          "page",
          "formats",
          "separate",
          "cli",
          "main",
          "the",
          "doclingdocument",
          "can",
          "exported",
          "multiple",
          "method",
          "overview",
          "options",
          "image",
          "mode",
          "placeholder",
          "embedded",
          "base64"
        ],
        "term_weights": [
          {
            "term": "docling",
            "tf": 4,
            "weight": 0.070175
          },
          {
            "term": "export",
            "tf": 3,
            "weight": 0.052632
          },
          {
            "term": "page",
            "tf": 3,
            "weight": 0.052632
          },
          {
            "term": "formats",
            "tf": 2,
            "weight": 0.035088
          },
          {
            "term": "separate",
            "tf": 2,
            "weight": 0.035088
          },
          {
            "term": "cli",
            "tf": 2,
            "weight": 0.035088
          },
          {
            "term": "main",
            "tf": 2,
            "weight": 0.035088
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.017544
          },
          {
            "term": "doclingdocument",
            "tf": 1,
            "weight": 0.017544
          },
          {
            "term": "can",
            "tf": 1,
            "weight": 0.017544
          },
          {
            "term": "exported",
            "tf": 1,
            "weight": 0.017544
          },
          {
            "term": "multiple",
            "tf": 1,
            "weight": 0.017544
          },
          {
            "term": "method",
            "tf": 1,
            "weight": 0.017544
          },
          {
            "term": "overview",
            "tf": 1,
            "weight": 0.017544
          },
          {
            "term": "options",
            "tf": 1,
            "weight": 0.017544
          },
          {
            "term": "image",
            "tf": 1,
            "weight": 0.017544
          },
          {
            "term": "mode",
            "tf": 1,
            "weight": 0.017544
          },
          {
            "term": "placeholder",
            "tf": 1,
            "weight": 0.017544
          },
          {
            "term": "embedded",
            "tf": 1,
            "weight": 0.017544
          },
          {
            "term": "base64",
            "tf": 1,
            "weight": 0.017544
          }
        ],
        "unique_terms": 46,
        "total_terms": 57
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Export Formats",
        "can",
        "cli",
        "docling",
        "doclingdocument",
        "export",
        "formats",
        "main",
        "page",
        "separate",
        "the"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5559090909090909,
      "overall": 0.7186363636363636
    }
  },
  {
    "text": "### Status Determination  The `_determine_status()` method evaluates conversion success:  **Status Resolution Logic** ``` ``` **Implementation varies by pipeline:**  - **PaginatedPipeline**: Check each page backend validity - **SimplePipeline**: Return `SUCCESS` if no exceptions raised - **AsrPipeline**: Check transcription success  **Sources:** [docling/pipeline/base\\_pipeline.py118-119](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L118-L119) [docling/pipeline/base\\_pipeline.py295-314](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L295-L314)  ---",
    "metadata": {
      "chunk_id": "b030c1430e50-0024",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 24,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Status Determination"
      ],
      "heading_text": "Status Determination",
      "token_count": 152,
      "char_count": 644,
      "start_char": 18017,
      "end_char": 18661,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5614285714285714,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.676779",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 152,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "Status Determination",
      "chunk_hash": "2e932895fae44488",
      "content_digest": "2e932895fae44488",
      "chunk_length": 644,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "pipeline",
          "docling",
          "base",
          "status",
          "success",
          "check",
          "https",
          "github",
          "com",
          "project",
          "blob",
          "f7244a43",
          "determination",
          "the",
          "determine",
          "method",
          "evaluates",
          "conversion",
          "resolution",
          "logic"
        ],
        "term_weights": [
          {
            "term": "pipeline",
            "tf": 9,
            "weight": 0.126761
          },
          {
            "term": "docling",
            "tf": 8,
            "weight": 0.112676
          },
          {
            "term": "base",
            "tf": 4,
            "weight": 0.056338
          },
          {
            "term": "status",
            "tf": 3,
            "weight": 0.042254
          },
          {
            "term": "success",
            "tf": 3,
            "weight": 0.042254
          },
          {
            "term": "check",
            "tf": 2,
            "weight": 0.028169
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.028169
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.028169
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.028169
          },
          {
            "term": "project",
            "tf": 2,
            "weight": 0.028169
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.028169
          },
          {
            "term": "f7244a43",
            "tf": 2,
            "weight": 0.028169
          },
          {
            "term": "determination",
            "tf": 1,
            "weight": 0.014085
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.014085
          },
          {
            "term": "determine",
            "tf": 1,
            "weight": 0.014085
          },
          {
            "term": "method",
            "tf": 1,
            "weight": 0.014085
          },
          {
            "term": "evaluates",
            "tf": 1,
            "weight": 0.014085
          },
          {
            "term": "conversion",
            "tf": 1,
            "weight": 0.014085
          },
          {
            "term": "resolution",
            "tf": 1,
            "weight": 0.014085
          },
          {
            "term": "logic",
            "tf": 1,
            "weight": 0.014085
          }
        ],
        "unique_terms": 42,
        "total_terms": 71
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Status Determination",
        "base",
        "check",
        "com",
        "docling",
        "github",
        "https",
        "pipeline",
        "project",
        "status",
        "success"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5614285714285714,
      "overall": 0.7204761904761904
    }
  },
  {
    "text": "### Error Capture  Errors are captured at multiple levels and stored in `ConversionResult.errors`:  | Component Type     | Module Examples                      | Typical Errors                 | | ------------------ | ------------------------------------ | ------------------------------ | | `DOCUMENT_BACKEND` | `DoclingParseV4DocumentBackend`      | Corrupt PDF, invalid format    | | `MODEL`            | `LayoutModel`, `TableStructureModel` | Model inference failure        | | `DOC_ASSEMBLER`    | `PageAssembleModel`                  | Hierarchy construction error   | | `USER_INPUT`       | `DocumentConverter`                  | Invalid format, file not found |  **Error Item Structure:** ``` ``` **Sources:** [docling/datamodel/base\\_models.py147-158](https://github.com/docling-project/docling/blob/f7244a43/docling/datamodel/base_models.py#L147-L158)",
    "metadata": {
      "chunk_id": "b030c1430e50-0027",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 27,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Error Capture"
      ],
      "heading_text": "Error Capture",
      "token_count": 183,
      "char_count": 861,
      "start_char": 19932,
      "end_char": 20793,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.6848051948051949,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.685396",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 183,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "Error Capture",
      "chunk_hash": "3ea5dcb031046941",
      "content_digest": "3ea5dcb031046941",
      "chunk_length": 861,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "docling",
          "error",
          "errors",
          "invalid",
          "format",
          "model",
          "datamodel",
          "base",
          "models",
          "capture",
          "are",
          "captured",
          "multiple",
          "levels",
          "and",
          "stored",
          "conversionresult",
          "component",
          "type",
          "module"
        ],
        "term_weights": [
          {
            "term": "docling",
            "tf": 4,
            "weight": 0.058824
          },
          {
            "term": "error",
            "tf": 3,
            "weight": 0.044118
          },
          {
            "term": "errors",
            "tf": 3,
            "weight": 0.044118
          },
          {
            "term": "invalid",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "format",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "model",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "datamodel",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "base",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "models",
            "tf": 2,
            "weight": 0.029412
          },
          {
            "term": "capture",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "are",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "captured",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "multiple",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "levels",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "and",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "stored",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "conversionresult",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "component",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "type",
            "tf": 1,
            "weight": 0.014706
          },
          {
            "term": "module",
            "tf": 1,
            "weight": 0.014706
          }
        ],
        "unique_terms": 55,
        "total_terms": 68
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Error Capture",
        "base",
        "capture",
        "datamodel",
        "docling",
        "error",
        "errors",
        "format",
        "invalid",
        "model",
        "models"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.6848051948051949,
      "overall": 0.7949350649350649
    }
  },
  {
    "text": "### Raises vs Non-Raises Mode  Conversion behavior controlled by `raises_on_error` parameter:  **Error Handling Modes** ``` ``` **Non-raises mode allows:**  - Processing multiple documents even if some fail - Collecting all errors for batch analysis - Partial success scenarios (some pages succeed)  **Sources:** [docling/document\\_converter.py380-432](https://github.com/docling-project/docling/blob/f7244a43/docling/document_converter.py#L380-L432) [docling/pipeline/base\\_pipeline.py62-84](https://github.com/docling-project/docling/blob/f7244a43/docling/pipeline/base_pipeline.py#L62-L84)  ---",
    "metadata": {
      "chunk_id": "b030c1430e50-0028",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 28,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Raises vs Non-Raises Mode"
      ],
      "heading_text": "Raises vs Non-Raises Mode",
      "token_count": 144,
      "char_count": 597,
      "start_char": 20797,
      "end_char": 21394,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5633333333333334,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.687473",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 144,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "Raises vs Non-Raises Mode",
      "chunk_hash": "f11002d141442c4a",
      "content_digest": "f11002d141442c4a",
      "chunk_length": 597,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "docling",
          "raises",
          "pipeline",
          "non",
          "mode",
          "error",
          "some",
          "document",
          "converter",
          "https",
          "github",
          "com",
          "project",
          "blob",
          "f7244a43",
          "base",
          "conversion",
          "behavior",
          "controlled",
          "parameter"
        ],
        "term_weights": [
          {
            "term": "docling",
            "tf": 8,
            "weight": 0.109589
          },
          {
            "term": "raises",
            "tf": 4,
            "weight": 0.054795
          },
          {
            "term": "pipeline",
            "tf": 4,
            "weight": 0.054795
          },
          {
            "term": "non",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "mode",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "error",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "some",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "document",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "converter",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "https",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "github",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "com",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "project",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "blob",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "f7244a43",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "base",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "conversion",
            "tf": 1,
            "weight": 0.013699
          },
          {
            "term": "behavior",
            "tf": 1,
            "weight": 0.013699
          },
          {
            "term": "controlled",
            "tf": 1,
            "weight": 0.013699
          },
          {
            "term": "parameter",
            "tf": 1,
            "weight": 0.013699
          }
        ],
        "unique_terms": 47,
        "total_terms": 73
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Raises vs Non-Raises Mode",
        "converter",
        "docling",
        "document",
        "error",
        "https",
        "mode",
        "non",
        "pipeline",
        "raises",
        "some"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5633333333333334,
      "overall": 0.721111111111111
    }
  },
  {
    "text": "## Summary  The document conversion flow implements a clean separation of concerns:  1. **Format Detection**: Multi-tier strategy (MIME → Extension → Content) 2. **Routing**: `FormatOption` maps formats to pipeline/backend pairs 3. **Caching**: Pipelines reused via `(class, options_hash)` keys 4. **Execution**: Three-phase model (build → assemble → enrich) 5. **Output**: Unified `DoclingDocument` with multiple export formats  The architecture enables:  - **Extensibility**: New formats add backend + pipeline + `FormatOption` - **Performance**: Pipeline/model caching, batch processing, concurrency - **Reliability**: Isolated execution, comprehensive error capture - **Flexibility**: Per-format configuration, multiple output formats  **Key Code Entities:**  | Entity                     | Location                                                                                                                  | Role                              | | -------------------------- | ------------------------------------------------------------------------------------------------------------------------- | --------------------------------- | | `DocumentConverter`        | [document\\_converter.py184-433](https://github.com/docling-project/docling/blob/f7244a43/document_converter.py#L184-L433) | Orchestrator                      | | `_DocumentConversionInput` | [document.py236-489](https://github.com/docling-project/docling/blob/f7244a43/document.py#L236-L489)                      | Format detection, input parsing   | | `InputDocument`            | [document.py104-191](https://github.com/docling-project/docling/blob/f7244a43/document.py#L104-L191)                      | Document metadata + backend       | | `FormatOption`             | [document\\_converter.py62-130](https://github.com/docling-project/docling/blob/f7244a43/document_converter.py#L62-L130)   | Format → pipeline/backend mapping | | `BasePipeline`             | [base\\_pipeline.py43-133](https://github.com/docling-project/docling/blob/f7244a43/base_pipeline.py#L43-L133)             | Three-phase execution model       | | `ConversionResult`         | [document.py198-215](https://github.com/docling-project/docling/blob/f7244a43/document.py#L198-L215)                      | Output container                  |  Dismiss  Refresh this wiki  This wiki was recently refreshed. Please wait 4 days to refresh again.",
    "metadata": {
      "chunk_id": "b030c1430e50-0029",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 29,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Summary"
      ],
      "heading_text": "Summary",
      "token_count": 485,
      "char_count": 2391,
      "start_char": 21398,
      "end_char": 23789,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5466363636363636,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "table_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.689657",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 485,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "Summary",
      "chunk_hash": "d04979665370b5ee",
      "content_digest": "d04979665370b5ee",
      "chunk_length": 2391,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "document",
          "docling",
          "pipeline",
          "https",
          "github",
          "com",
          "project",
          "blob",
          "f7244a43",
          "format",
          "formats",
          "backend",
          "converter",
          "formatoption",
          "execution",
          "model",
          "output",
          "the",
          "detection",
          "caching"
        ],
        "term_weights": [
          {
            "term": "document",
            "tf": 12,
            "weight": 0.057143
          },
          {
            "term": "docling",
            "tf": 12,
            "weight": 0.057143
          },
          {
            "term": "pipeline",
            "tf": 6,
            "weight": 0.028571
          },
          {
            "term": "https",
            "tf": 6,
            "weight": 0.028571
          },
          {
            "term": "github",
            "tf": 6,
            "weight": 0.028571
          },
          {
            "term": "com",
            "tf": 6,
            "weight": 0.028571
          },
          {
            "term": "project",
            "tf": 6,
            "weight": 0.028571
          },
          {
            "term": "blob",
            "tf": 6,
            "weight": 0.028571
          },
          {
            "term": "f7244a43",
            "tf": 6,
            "weight": 0.028571
          },
          {
            "term": "format",
            "tf": 4,
            "weight": 0.019048
          },
          {
            "term": "formats",
            "tf": 4,
            "weight": 0.019048
          },
          {
            "term": "backend",
            "tf": 4,
            "weight": 0.019048
          },
          {
            "term": "converter",
            "tf": 4,
            "weight": 0.019048
          },
          {
            "term": "formatoption",
            "tf": 3,
            "weight": 0.014286
          },
          {
            "term": "execution",
            "tf": 3,
            "weight": 0.014286
          },
          {
            "term": "model",
            "tf": 3,
            "weight": 0.014286
          },
          {
            "term": "output",
            "tf": 3,
            "weight": 0.014286
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.009524
          },
          {
            "term": "detection",
            "tf": 2,
            "weight": 0.009524
          },
          {
            "term": "caching",
            "tf": 2,
            "weight": 0.009524
          }
        ],
        "unique_terms": 123,
        "total_terms": 210
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Summary",
        "blob",
        "com",
        "docling",
        "document",
        "f7244a43",
        "format",
        "github",
        "https",
        "pipeline",
        "project"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5466363636363636,
      "overall": 0.7155454545454546
    }
  },
  {
    "text": "### On this page  - [Document Conversion Flow](#document-conversion-flow.md) - [Overview](#overview.md) - [Entry Points and Initialization](#entry-points-and-initialization.md) - [DocumentConverter Initialization](#documentconverter-initialization.md) - [Conversion Methods](#conversion-methods.md) - [Format Detection and Input Processing](#format-detection-and-input-processing.md) - [Format Detection Mechanism](#format-detection-mechanism.md) - [Format Detection Strategy](#format-detection-strategy.md) - [Tier 1: MIME Type Detection](#tier-1-mime-type-detection.md) - [Tier 2: Extension Mapping](#tier-2-extension-mapping.md) - [Tier 3: Content Analysis](#tier-3-content-analysis.md) - [InputDocument Creation](#inputdocument-creation.md) - [Backend and Pipeline Routing](#backend-and-pipeline-routing.md) - [FormatOption Mapping](#formatoption-mapping.md) - [Default Format Options](#default-format-options.md) - [Pipeline Selection and Caching](#pipeline-selection-and-caching.md) - [Pipeline Execution Phases](#pipeline-execution-phases.md) - [Phase 1: Build Document (\\_build\\_document)](#phase-1-build-document-_build_document.md) - [Phase 2: Assemble Document (\\_assemble\\_document)](#phase-2-assemble-document-_assemble_document.md) - [Phase 3: Enrich Document (\\_enrich\\_document)](#phase-3-enrich-document-_enrich_document.md) - [Complete Conversion Flow Sequence](#complete-conversion-flow-sequence.md) - [Output Generation](#output-generation.md) - [ConversionResult Structure](#conversionresult-structure.md) - [Export Formats](#export-formats.md) - [Status Determination](#status-determination.md) - [Batch Processing and Concurrency](#batch-processing-and-concurrency.md) - [Error Handling and Recovery](#error-handling-and-recovery.md) - [Error Capture](#error-capture.md) - [Raises vs Non-Raises Mode](#raises-vs-non-raises-mode.md) - [Summary](#summary.md)",
    "metadata": {
      "chunk_id": "b030c1430e50-0030",
      "source_file": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "file_extension": ".md",
      "chunk_index": 30,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "On this page"
      ],
      "heading_text": "On this page",
      "token_count": 464,
      "char_count": 1879,
      "start_char": 23791,
      "end_char": 25670,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5238153846153846,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:05.693167",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 464,
      "document_id": "b030c1430e50",
      "document_name": "_docling-project_docling_2.1-document-conversion-flow",
      "source_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "source_filename": "_docling-project_docling_2.1-document-conversion-flow.md",
      "source_directory": "Docs\\Docling",
      "relative_path": "Docs\\Docling\\_docling-project_docling_2.1-document-conversion-flow.md",
      "hierarchy_path": "On this page",
      "chunk_hash": "1dd5fb3e404a67cb",
      "content_digest": "1dd5fb3e404a67cb",
      "chunk_length": 1879,
      "payload_version": "1.3",
      "collection_hints": [
        "docling"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "document",
          "and",
          "format",
          "detection",
          "conversion",
          "tier",
          "pipeline",
          "phase",
          "flow",
          "initialization",
          "processing",
          "mapping",
          "build",
          "assemble",
          "enrich",
          "error",
          "raises",
          "overview",
          "entry",
          "points"
        ],
        "term_weights": [
          {
            "term": "document",
            "tf": 14,
            "weight": 0.074468
          },
          {
            "term": "and",
            "tf": 12,
            "weight": 0.06383
          },
          {
            "term": "format",
            "tf": 8,
            "weight": 0.042553
          },
          {
            "term": "detection",
            "tf": 8,
            "weight": 0.042553
          },
          {
            "term": "conversion",
            "tf": 6,
            "weight": 0.031915
          },
          {
            "term": "tier",
            "tf": 6,
            "weight": 0.031915
          },
          {
            "term": "pipeline",
            "tf": 6,
            "weight": 0.031915
          },
          {
            "term": "phase",
            "tf": 6,
            "weight": 0.031915
          },
          {
            "term": "flow",
            "tf": 4,
            "weight": 0.021277
          },
          {
            "term": "initialization",
            "tf": 4,
            "weight": 0.021277
          },
          {
            "term": "processing",
            "tf": 4,
            "weight": 0.021277
          },
          {
            "term": "mapping",
            "tf": 4,
            "weight": 0.021277
          },
          {
            "term": "build",
            "tf": 4,
            "weight": 0.021277
          },
          {
            "term": "assemble",
            "tf": 4,
            "weight": 0.021277
          },
          {
            "term": "enrich",
            "tf": 4,
            "weight": 0.021277
          },
          {
            "term": "error",
            "tf": 4,
            "weight": 0.021277
          },
          {
            "term": "raises",
            "tf": 4,
            "weight": 0.021277
          },
          {
            "term": "overview",
            "tf": 2,
            "weight": 0.010638
          },
          {
            "term": "entry",
            "tf": 2,
            "weight": 0.010638
          },
          {
            "term": "points",
            "tf": 2,
            "weight": 0.010638
          }
        ],
        "unique_terms": 61,
        "total_terms": 188
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "On this page",
        "and",
        "conversion",
        "detection",
        "document",
        "flow",
        "format",
        "initialization",
        "phase",
        "pipeline",
        "tier"
      ],
      "collection_name": "Docling"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5238153846153846,
      "overall": 0.7079384615384615
    }
  }
]