[
  {
    "text": "## Performance Considerations",
    "metadata": {
      "chunk_id": "c0995f8ea55e-0000",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "filename": "Router_module_validation_in_trainer.md",
      "file_extension": ".md",
      "chunk_index": 0,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Performance Considerations"
      ],
      "heading_text": "Performance Considerations",
      "token_count": 4,
      "char_count": 29,
      "start_char": 736,
      "end_char": 765,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "chunking_strategy": "hybrid_adaptive_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:50.066290",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 4,
      "document_id": "c0995f8ea55e",
      "document_name": "Router_module_validation_in_trainer",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "source_filename": "Router_module_validation_in_trainer.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "hierarchy_path": "Performance Considerations",
      "chunk_hash": "f0c6f691b1d6938e",
      "content_digest": "f0c6f691b1d6938e",
      "chunk_length": 29,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "performance",
          "considerations"
        ],
        "term_weights": [
          {
            "term": "performance",
            "tf": 1,
            "weight": 0.5
          },
          {
            "term": "considerations",
            "tf": 1,
            "weight": 0.5
          }
        ],
        "unique_terms": 2,
        "total_terms": 2
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Performance Considerations",
        "considerations",
        "performance"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "overall": 0.7633333333333333
    }
  },
  {
    "text": "### Optimal Configuration Guidelines\n\n1. **Cached losses**: Use `mini_batch_size` as large as your GPU memory allows\n2. **Matryoshka**: Set `n_dims_per_step=1` for memory efficiency, `-1` for speed\n3. **Router**: Use lightweight query encoders with powerful document encoders\n4. **Gradient accumulation**: Generally unnecessary with cached losses\n\n**Sources:** [sentence_transformers/losses/CachedMultipleNegativesRankingLoss.py:88-92](), [sentence_transformers/losses/MatryoshkaLoss.py:140-144]()",
    "metadata": {
      "chunk_id": "c0995f8ea55e-0002",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "filename": "Router_module_validation_in_trainer.md",
      "file_extension": ".md",
      "chunk_index": 2,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Optimal Configuration Guidelines"
      ],
      "heading_text": "Optimal Configuration Guidelines",
      "token_count": 125,
      "char_count": 497,
      "start_char": 1169,
      "end_char": 1666,
      "semantic_score": 0.7,
      "structural_score": 0.7999999999999998,
      "retrieval_quality": 0.7517021276595744,
      "chunking_strategy": "hybrid_adaptive_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:50.067064",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 125,
      "document_id": "c0995f8ea55e",
      "document_name": "Router_module_validation_in_trainer",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "source_filename": "Router_module_validation_in_trainer.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "hierarchy_path": "Optimal Configuration Guidelines",
      "chunk_hash": "0ce859499eae76af",
      "content_digest": "0ce859499eae76af",
      "chunk_length": 497,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "losses",
          "cached",
          "use",
          "memory",
          "for",
          "encoders",
          "with",
          "sentence",
          "transformers",
          "optimal",
          "configuration",
          "guidelines",
          "mini",
          "batch",
          "size",
          "large",
          "your",
          "gpu",
          "allows",
          "matryoshka"
        ],
        "term_weights": [
          {
            "term": "losses",
            "tf": 4,
            "weight": 0.078431
          },
          {
            "term": "cached",
            "tf": 2,
            "weight": 0.039216
          },
          {
            "term": "use",
            "tf": 2,
            "weight": 0.039216
          },
          {
            "term": "memory",
            "tf": 2,
            "weight": 0.039216
          },
          {
            "term": "for",
            "tf": 2,
            "weight": 0.039216
          },
          {
            "term": "encoders",
            "tf": 2,
            "weight": 0.039216
          },
          {
            "term": "with",
            "tf": 2,
            "weight": 0.039216
          },
          {
            "term": "sentence",
            "tf": 2,
            "weight": 0.039216
          },
          {
            "term": "transformers",
            "tf": 2,
            "weight": 0.039216
          },
          {
            "term": "optimal",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "configuration",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "guidelines",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "mini",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "batch",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "size",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "large",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "your",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "gpu",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "allows",
            "tf": 1,
            "weight": 0.019608
          },
          {
            "term": "matryoshka",
            "tf": 1,
            "weight": 0.019608
          }
        ],
        "unique_terms": 40,
        "total_terms": 51
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Optimal Configuration Guidelines",
        "cached",
        "encoders",
        "for",
        "losses",
        "memory",
        "optimal",
        "sentence",
        "transformers",
        "use",
        "with"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.7999999999999998,
      "retrieval_quality": 0.7517021276595744,
      "overall": 0.7505673758865248
    }
  },
  {
    "text": "# Evaluation\n\n\n\n\nThe evaluation system in sentence-transformers provides comprehensive metrics and benchmarking capabilities for assessing model performance across diverse tasks. This system supports evaluation during training for model selection, standalone evaluation for benchmarking, and integration with various downstream applications.\n\nFor training-specific guidance including how evaluators integrate with the training loop, see [Training](#3). For task-specific evaluator details, see [SentenceTransformer Evaluators](#4.1), [SparseEncoder Evaluators](#4.2), and [CrossEncoder Evaluators](#4.3).",
    "metadata": {
      "chunk_id": "c0995f8ea55e-0003",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "filename": "Router_module_validation_in_trainer.md",
      "file_extension": ".md",
      "chunk_index": 3,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Evaluation"
      ],
      "heading_text": "Evaluation",
      "token_count": 110,
      "char_count": 604,
      "start_char": 1668,
      "end_char": 2272,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5196875,
      "chunking_strategy": "hybrid_adaptive_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:50.067387",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 110,
      "document_id": "c0995f8ea55e",
      "document_name": "Router_module_validation_in_trainer",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "source_filename": "Router_module_validation_in_trainer.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "hierarchy_path": "Evaluation",
      "chunk_hash": "79a3efab1e793541",
      "content_digest": "79a3efab1e793541",
      "chunk_length": 604,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "for",
          "evaluation",
          "training",
          "evaluators",
          "and",
          "the",
          "system",
          "benchmarking",
          "model",
          "with",
          "specific",
          "see",
          "sentence",
          "transformers",
          "provides",
          "comprehensive",
          "metrics",
          "capabilities",
          "assessing",
          "performance"
        ],
        "term_weights": [
          {
            "term": "for",
            "tf": 5,
            "weight": 0.076923
          },
          {
            "term": "evaluation",
            "tf": 4,
            "weight": 0.061538
          },
          {
            "term": "training",
            "tf": 4,
            "weight": 0.061538
          },
          {
            "term": "evaluators",
            "tf": 4,
            "weight": 0.061538
          },
          {
            "term": "and",
            "tf": 3,
            "weight": 0.046154
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "system",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "benchmarking",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "model",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "with",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "specific",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "see",
            "tf": 2,
            "weight": 0.030769
          },
          {
            "term": "sentence",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "transformers",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "provides",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "comprehensive",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "metrics",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "capabilities",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "assessing",
            "tf": 1,
            "weight": 0.015385
          },
          {
            "term": "performance",
            "tf": 1,
            "weight": 0.015385
          }
        ],
        "unique_terms": 43,
        "total_terms": 65
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Evaluation",
        "and",
        "benchmarking",
        "evaluation",
        "evaluators",
        "for",
        "model",
        "system",
        "the",
        "training",
        "with"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5196875,
      "overall": 0.7065625
    }
  },
  {
    "text": "## Evaluation Architecture  The evaluation system is built around a modular architecture where all evaluators inherit from the `SentenceEvaluator` base class. This design provides consistent interfaces while allowing specialized implementations for different task types.",
    "metadata": {
      "chunk_id": "c0995f8ea55e-0004",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "filename": "Router_module_validation_in_trainer.md",
      "file_extension": ".md",
      "chunk_index": 4,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Evaluation Architecture"
      ],
      "heading_text": "Evaluation Architecture",
      "token_count": 41,
      "char_count": 270,
      "start_char": 2274,
      "end_char": 2544,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5635294117647058,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:50.068123",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 41,
      "document_id": "c0995f8ea55e",
      "document_name": "Router_module_validation_in_trainer",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "source_filename": "Router_module_validation_in_trainer.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "hierarchy_path": "Evaluation Architecture",
      "chunk_hash": "607fac24f85a0a59",
      "content_digest": "607fac24f85a0a59",
      "chunk_length": 270,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "evaluation",
          "architecture",
          "the",
          "system",
          "built",
          "around",
          "modular",
          "where",
          "all",
          "evaluators",
          "inherit",
          "from",
          "sentenceevaluator",
          "base",
          "class",
          "this",
          "design",
          "provides",
          "consistent",
          "interfaces"
        ],
        "term_weights": [
          {
            "term": "evaluation",
            "tf": 2,
            "weight": 0.064516
          },
          {
            "term": "architecture",
            "tf": 2,
            "weight": 0.064516
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.064516
          },
          {
            "term": "system",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "built",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "around",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "modular",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "where",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "all",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "evaluators",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "inherit",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "from",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "sentenceevaluator",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "base",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "class",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "this",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "design",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "provides",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "consistent",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "interfaces",
            "tf": 1,
            "weight": 0.032258
          }
        ],
        "unique_terms": 28,
        "total_terms": 31
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Evaluation Architecture",
        "all",
        "architecture",
        "around",
        "built",
        "evaluation",
        "evaluators",
        "modular",
        "system",
        "the",
        "where"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5635294117647058,
      "overall": 0.7545098039215685
    }
  },
  {
    "text": "### Core Evaluation Flow ```mermaid graph TD     Model[\"SentenceTransformer\"] --> Evaluator[\"SentenceEvaluator\"]     Evaluator --> EmbedInputs[\"embed_inputs()\"]     Evaluator --> ComputeMetrics[\"compute_metrics()\"]     ComputeMetrics --> Metrics[\"Primary & Secondary Metrics\"]     Metrics --> CSV[\"CSV Results\"]     Metrics --> ModelCard[\"Model Card Data\"]     Metrics --> Selection[\"Model Selection\"]          EmbedInputs --> Encode[\"model.encode()\"]     Encode --> Embeddings[\"Text Embeddings\"]     Embeddings --> ComputeMetrics ``` **Evaluation Flow in sentence-transformers**  The base `SentenceEvaluator` class defines the evaluation interface and common functionality shared across all evaluators. Every evaluator implements the `__call__` method to perform evaluation and return metrics. Sources: [sentence_transformers/evaluation/SentenceEvaluator.py:13-121]()",
    "metadata": {
      "chunk_id": "c0995f8ea55e-0005",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "filename": "Router_module_validation_in_trainer.md",
      "file_extension": ".md",
      "chunk_index": 5,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Core Evaluation Flow"
      ],
      "heading_text": "Core Evaluation Flow",
      "token_count": 171,
      "char_count": 868,
      "start_char": 2546,
      "end_char": 3414,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5140506329113924,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:50.070233",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 171,
      "document_id": "c0995f8ea55e",
      "document_name": "Router_module_validation_in_trainer",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "source_filename": "Router_module_validation_in_trainer.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "hierarchy_path": "Core Evaluation Flow",
      "chunk_hash": "f27de0e9cee4fab0",
      "content_digest": "f27de0e9cee4fab0",
      "chunk_length": 868,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "metrics",
          "evaluation",
          "model",
          "evaluator",
          "sentenceevaluator",
          "computemetrics",
          "encode",
          "embeddings",
          "the",
          "flow",
          "embedinputs",
          "csv",
          "selection",
          "sentence",
          "transformers",
          "and",
          "core",
          "mermaid",
          "graph",
          "sentencetransformer"
        ],
        "term_weights": [
          {
            "term": "metrics",
            "tf": 7,
            "weight": 0.08642
          },
          {
            "term": "evaluation",
            "tf": 5,
            "weight": 0.061728
          },
          {
            "term": "model",
            "tf": 4,
            "weight": 0.049383
          },
          {
            "term": "evaluator",
            "tf": 4,
            "weight": 0.049383
          },
          {
            "term": "sentenceevaluator",
            "tf": 3,
            "weight": 0.037037
          },
          {
            "term": "computemetrics",
            "tf": 3,
            "weight": 0.037037
          },
          {
            "term": "encode",
            "tf": 3,
            "weight": 0.037037
          },
          {
            "term": "embeddings",
            "tf": 3,
            "weight": 0.037037
          },
          {
            "term": "the",
            "tf": 3,
            "weight": 0.037037
          },
          {
            "term": "flow",
            "tf": 2,
            "weight": 0.024691
          },
          {
            "term": "embedinputs",
            "tf": 2,
            "weight": 0.024691
          },
          {
            "term": "csv",
            "tf": 2,
            "weight": 0.024691
          },
          {
            "term": "selection",
            "tf": 2,
            "weight": 0.024691
          },
          {
            "term": "sentence",
            "tf": 2,
            "weight": 0.024691
          },
          {
            "term": "transformers",
            "tf": 2,
            "weight": 0.024691
          },
          {
            "term": "and",
            "tf": 2,
            "weight": 0.024691
          },
          {
            "term": "core",
            "tf": 1,
            "weight": 0.012346
          },
          {
            "term": "mermaid",
            "tf": 1,
            "weight": 0.012346
          },
          {
            "term": "graph",
            "tf": 1,
            "weight": 0.012346
          },
          {
            "term": "sentencetransformer",
            "tf": 1,
            "weight": 0.012346
          }
        ],
        "unique_terms": 48,
        "total_terms": 81
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Core Evaluation Flow",
        "computemetrics",
        "embeddings",
        "encode",
        "evaluation",
        "evaluator",
        "flow",
        "metrics",
        "model",
        "sentenceevaluator",
        "the"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5140506329113924,
      "overall": 0.7380168776371306
    }
  },
  {
    "text": "### Key Evaluation Concepts  | Concept | Description | Implementation | |---------|-------------|----------------| | **Primary Metric** | Main metric used for model selection | `evaluator.primary_metric` attribute | | **Greater is Better** | Whether higher scores indicate better performance | `evaluator.greater_is_better` boolean | | **CSV Logging** | Track metrics over training epochs/steps | `write_csv` parameter across evaluators | | **Model Card Integration** | Store evaluation results in model metadata | `store_metrics_in_model_card_data()` method | ```mermaid graph LR     subgraph \"Base Class\"         SentenceEvaluator[\"SentenceEvaluator\"]     end          subgraph \"Task-Specific Evaluators\"         IRE[\"InformationRetrievalEvaluator\"]         BCE[\"BinaryClassificationEvaluator\"]         ESE[\"EmbeddingSimilarityEvaluator\"]         RE[\"RerankingEvaluator\"]         TE[\"TripletEvaluator\"]         PME[\"ParaphraseMiningEvaluator\"]         TRE[\"TranslationEvaluator\"]         MSE[\"MSEEvaluator\"]         LAE[\"LabelAccuracyEvaluator\"]     end          SentenceEvaluator --> IRE     SentenceEvaluator --> BCE     SentenceEvaluator --> ESE     SentenceEvaluator --> RE     SentenceEvaluator --> TE     SentenceEvaluator --> PME     SentenceEvaluator --> TRE     SentenceEvaluator --> MSE     SentenceEvaluator --> LAE ``` **Evaluator Class Hierarchy**  Sources: [sentence_transformers/evaluation/SentenceEvaluator.py:13-121](), [sentence_transformers/evaluation/InformationRetrievalEvaluator.py:23-568](), [sentence_transformers/evaluation/BinaryClassificationEvaluator.py:27-379]()",
    "metadata": {
      "chunk_id": "c0995f8ea55e-0006",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "filename": "Router_module_validation_in_trainer.md",
      "file_extension": ".md",
      "chunk_index": 6,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Key Evaluation Concepts"
      ],
      "heading_text": "Key Evaluation Concepts",
      "token_count": 328,
      "char_count": 1593,
      "start_char": 3419,
      "end_char": 5012,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7062740157480316,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:50.074265",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 328,
      "document_id": "c0995f8ea55e",
      "document_name": "Router_module_validation_in_trainer",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "source_filename": "Router_module_validation_in_trainer.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "hierarchy_path": "Key Evaluation Concepts",
      "chunk_hash": "f4ec976ff52e4181",
      "content_digest": "f4ec976ff52e4181",
      "chunk_length": 1593,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "sentenceevaluator",
          "evaluation",
          "model",
          "metric",
          "evaluator",
          "better",
          "sentence",
          "transformers",
          "primary",
          "greater",
          "csv",
          "metrics",
          "evaluators",
          "card",
          "store",
          "subgraph",
          "class",
          "end",
          "ire",
          "informationretrievalevaluator"
        ],
        "term_weights": [
          {
            "term": "sentenceevaluator",
            "tf": 12,
            "weight": 0.099174
          },
          {
            "term": "evaluation",
            "tf": 5,
            "weight": 0.041322
          },
          {
            "term": "model",
            "tf": 4,
            "weight": 0.033058
          },
          {
            "term": "metric",
            "tf": 3,
            "weight": 0.024793
          },
          {
            "term": "evaluator",
            "tf": 3,
            "weight": 0.024793
          },
          {
            "term": "better",
            "tf": 3,
            "weight": 0.024793
          },
          {
            "term": "sentence",
            "tf": 3,
            "weight": 0.024793
          },
          {
            "term": "transformers",
            "tf": 3,
            "weight": 0.024793
          },
          {
            "term": "primary",
            "tf": 2,
            "weight": 0.016529
          },
          {
            "term": "greater",
            "tf": 2,
            "weight": 0.016529
          },
          {
            "term": "csv",
            "tf": 2,
            "weight": 0.016529
          },
          {
            "term": "metrics",
            "tf": 2,
            "weight": 0.016529
          },
          {
            "term": "evaluators",
            "tf": 2,
            "weight": 0.016529
          },
          {
            "term": "card",
            "tf": 2,
            "weight": 0.016529
          },
          {
            "term": "store",
            "tf": 2,
            "weight": 0.016529
          },
          {
            "term": "subgraph",
            "tf": 2,
            "weight": 0.016529
          },
          {
            "term": "class",
            "tf": 2,
            "weight": 0.016529
          },
          {
            "term": "end",
            "tf": 2,
            "weight": 0.016529
          },
          {
            "term": "ire",
            "tf": 2,
            "weight": 0.016529
          },
          {
            "term": "informationretrievalevaluator",
            "tf": 2,
            "weight": 0.016529
          }
        ],
        "unique_terms": 74,
        "total_terms": 121
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Key Evaluation Concepts",
        "better",
        "evaluation",
        "evaluator",
        "greater",
        "metric",
        "model",
        "primary",
        "sentence",
        "sentenceevaluator",
        "transformers"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7062740157480316,
      "overall": 0.802091338582677
    }
  },
  {
    "text": "### Information Retrieval Evaluation  The `InformationRetrievalEvaluator` is the most comprehensive evaluator, designed for search and retrieval tasks. It computes standard IR metrics including Mean Reciprocal Rank (MRR), Normalized Discounted Cumulative Gain (NDCG), Mean Average Precision (MAP), precision, recall, and accuracy at various k values. ```mermaid graph TD     Queries[\"queries: Dict[str, str]\"] --> IRE[\"InformationRetrievalEvaluator\"]     Corpus[\"corpus: Dict[str, str]\"] --> IRE     RelevantDocs[\"relevant_docs: Dict[str, Set[str]]\"] --> IRE          IRE --> QueryEmb[\"Query Embeddings\"]     IRE --> CorpusEmb[\"Corpus Embeddings\"]          QueryEmb --> SimilarityScores[\"Similarity Computation\"]     CorpusEmb --> SimilarityScores          SimilarityScores --> TopK[\"Top-k Retrieval\"]     TopK --> IRMetrics[\"IR Metrics Computation\"]          IRMetrics --> MRR[\"MRR@k\"]     IRMetrics --> NDCG[\"NDCG@k\"]     IRMetrics --> MAP[\"MAP@k\"]     IRMetrics --> Accuracy[\"Accuracy@k\"]     IRMetrics --> PrecisionRecall[\"Precision/Recall@k\"] ``` **Information Retrieval Evaluation Pipeline**  Key parameters for IR evaluation: - `corpus_chunk_size`: Controls memory usage during large corpus evaluation - `score_functions`: Multiple similarity functions can be evaluated simultaneously - `write_predictions`: Enable writing retrieval results for downstream analysis  Sources: [sentence_transformers/evaluation/InformationRetrievalEvaluator.py:23-568]()",
    "metadata": {
      "chunk_id": "c0995f8ea55e-0008",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "filename": "Router_module_validation_in_trainer.md",
      "file_extension": ".md",
      "chunk_index": 8,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Information Retrieval Evaluation"
      ],
      "heading_text": "Information Retrieval Evaluation",
      "token_count": 332,
      "char_count": 1458,
      "start_char": 5042,
      "end_char": 6500,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5138857142857143,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:50.077482",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 332,
      "document_id": "c0995f8ea55e",
      "document_name": "Router_module_validation_in_trainer",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "source_filename": "Router_module_validation_in_trainer.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "hierarchy_path": "Information Retrieval Evaluation",
      "chunk_hash": "18e3e7bfc5b75b51",
      "content_digest": "18e3e7bfc5b75b51",
      "chunk_length": 1458,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "str",
          "irmetrics",
          "retrieval",
          "evaluation",
          "ire",
          "corpus",
          "informationretrievalevaluator",
          "for",
          "mrr",
          "ndcg",
          "precision",
          "map",
          "accuracy",
          "dict",
          "similarityscores",
          "information",
          "the",
          "and",
          "metrics",
          "mean"
        ],
        "term_weights": [
          {
            "term": "str",
            "tf": 6,
            "weight": 0.042857
          },
          {
            "term": "irmetrics",
            "tf": 6,
            "weight": 0.042857
          },
          {
            "term": "retrieval",
            "tf": 5,
            "weight": 0.035714
          },
          {
            "term": "evaluation",
            "tf": 5,
            "weight": 0.035714
          },
          {
            "term": "ire",
            "tf": 5,
            "weight": 0.035714
          },
          {
            "term": "corpus",
            "tf": 5,
            "weight": 0.035714
          },
          {
            "term": "informationretrievalevaluator",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "for",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "mrr",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "ndcg",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "precision",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "map",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "accuracy",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "dict",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "similarityscores",
            "tf": 3,
            "weight": 0.021429
          },
          {
            "term": "information",
            "tf": 2,
            "weight": 0.014286
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.014286
          },
          {
            "term": "and",
            "tf": 2,
            "weight": 0.014286
          },
          {
            "term": "metrics",
            "tf": 2,
            "weight": 0.014286
          },
          {
            "term": "mean",
            "tf": 2,
            "weight": 0.014286
          }
        ],
        "unique_terms": 82,
        "total_terms": 140
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Information Retrieval Evaluation",
        "corpus",
        "evaluation",
        "for",
        "informationretrievalevaluator",
        "ire",
        "irmetrics",
        "mrr",
        "ndcg",
        "retrieval",
        "str"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5138857142857143,
      "overall": 0.7379619047619047
    }
  },
  {
    "text": "### Specialized Task Evaluation\n\nSeveral evaluators target specific applications:\n\n**Reranking Evaluation**: The `RerankingEvaluator` assesses models on reranking tasks where queries are paired with positive and negative documents. It computes MAP, MRR@k, and NDCG@k metrics.\n\n**Paraphrase Mining**: The `ParaphraseMiningEvaluator` evaluates paraphrase detection by mining similar sentence pairs from a corpus and comparing against gold standard duplicates.\n\n**Translation/Multilingual**: The `TranslationEvaluator` tests cross-lingual sentence alignment by checking if translated sentence pairs have the highest mutual similarity.\n\n**Knowledge Distillation**: The `MSEEvaluator` measures mean squared error between teacher and student model embeddings for distillation tasks.\n\nSources: [sentence_transformers/evaluation/RerankingEvaluator.py:25-372](), [sentence_transformers/evaluation/ParaphraseMiningEvaluator.py:18-279](), [sentence_transformers/evaluation/TranslationEvaluator.py:22-192](), [sentence_transformers/evaluation/MSEEvaluator.py:18-158]()",
    "metadata": {
      "chunk_id": "c0995f8ea55e-0010",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "filename": "Router_module_validation_in_trainer.md",
      "file_extension": ".md",
      "chunk_index": 10,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Specialized Task Evaluation"
      ],
      "heading_text": "Specialized Task Evaluation",
      "token_count": 218,
      "char_count": 1056,
      "start_char": 8103,
      "end_char": 9159,
      "semantic_score": 0.7,
      "structural_score": 0.7999999999999998,
      "retrieval_quality": 0.5552631578947368,
      "chunking_strategy": "hybrid_adaptive_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:50.084667",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 218,
      "document_id": "c0995f8ea55e",
      "document_name": "Router_module_validation_in_trainer",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "source_filename": "Router_module_validation_in_trainer.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "hierarchy_path": "Specialized Task Evaluation",
      "chunk_hash": "020ae3306e711eff",
      "content_digest": "020ae3306e711eff",
      "chunk_length": 1056,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "sentence",
          "evaluation",
          "the",
          "and",
          "transformers",
          "reranking",
          "rerankingevaluator",
          "tasks",
          "paraphrase",
          "mining",
          "paraphraseminingevaluator",
          "pairs",
          "translationevaluator",
          "distillation",
          "mseevaluator",
          "specialized",
          "task",
          "several",
          "evaluators",
          "target"
        ],
        "term_weights": [
          {
            "term": "sentence",
            "tf": 7,
            "weight": 0.066038
          },
          {
            "term": "evaluation",
            "tf": 6,
            "weight": 0.056604
          },
          {
            "term": "the",
            "tf": 5,
            "weight": 0.04717
          },
          {
            "term": "and",
            "tf": 4,
            "weight": 0.037736
          },
          {
            "term": "transformers",
            "tf": 4,
            "weight": 0.037736
          },
          {
            "term": "reranking",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "rerankingevaluator",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "tasks",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "paraphrase",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "mining",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "paraphraseminingevaluator",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "pairs",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "translationevaluator",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "distillation",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "mseevaluator",
            "tf": 2,
            "weight": 0.018868
          },
          {
            "term": "specialized",
            "tf": 1,
            "weight": 0.009434
          },
          {
            "term": "task",
            "tf": 1,
            "weight": 0.009434
          },
          {
            "term": "several",
            "tf": 1,
            "weight": 0.009434
          },
          {
            "term": "evaluators",
            "tf": 1,
            "weight": 0.009434
          },
          {
            "term": "target",
            "tf": 1,
            "weight": 0.009434
          }
        ],
        "unique_terms": 75,
        "total_terms": 106
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Specialized Task Evaluation",
        "and",
        "evaluation",
        "mining",
        "paraphrase",
        "reranking",
        "rerankingevaluator",
        "sentence",
        "tasks",
        "the",
        "transformers"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.7999999999999998,
      "retrieval_quality": 0.5552631578947368,
      "overall": 0.6850877192982455
    }
  },
  {
    "text": "## Integration with Training  Evaluators integrate seamlessly with the training pipeline for model selection and progress tracking. During training, evaluators are called at specified intervals to assess model performance. ```mermaid graph TD     TrainingLoop[\"Training Loop\"] --> EvalInterval[\"Evaluation Interval\"]     EvalInterval --> CallEvaluator[\"evaluator(model, output_path, epoch, steps)\"]          CallEvaluator --> ComputeMetrics[\"Compute Evaluation Metrics\"]     ComputeMetrics --> LogResults[\"Log Results\"]     ComputeMetrics --> SaveCSV[\"Save CSV Results\"]     ComputeMetrics --> UpdateModelCard[\"Update Model Card\"]          LogResults --> BestModelSelection[\"Best Model Selection\"]     BestModelSelection --> LoadBestModel[\"load_best_model_at_end\"]          SaveCSV --> TrackingFile[\"evaluation_results.csv\"]     UpdateModelCard --> ModelCardData[\"model.model_card_data\"] ``` **Evaluation Integration in Training Pipeline**",
    "metadata": {
      "chunk_id": "c0995f8ea55e-0011",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "filename": "Router_module_validation_in_trainer.md",
      "file_extension": ".md",
      "chunk_index": 11,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Integration with Training"
      ],
      "heading_text": "Integration with Training",
      "token_count": 177,
      "char_count": 939,
      "start_char": 9161,
      "end_char": 10100,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7168292682926829,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:50.086884",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 177,
      "document_id": "c0995f8ea55e",
      "document_name": "Router_module_validation_in_trainer",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "source_filename": "Router_module_validation_in_trainer.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "hierarchy_path": "Integration with Training",
      "chunk_hash": "7835936a3c4b404f",
      "content_digest": "7835936a3c4b404f",
      "chunk_length": 939,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "model",
          "training",
          "evaluation",
          "computemetrics",
          "results",
          "integration",
          "with",
          "evaluators",
          "pipeline",
          "selection",
          "evalinterval",
          "callevaluator",
          "logresults",
          "savecsv",
          "csv",
          "updatemodelcard",
          "card",
          "bestmodelselection",
          "best",
          "integrate"
        ],
        "term_weights": [
          {
            "term": "model",
            "tf": 8,
            "weight": 0.091954
          },
          {
            "term": "training",
            "tf": 5,
            "weight": 0.057471
          },
          {
            "term": "evaluation",
            "tf": 4,
            "weight": 0.045977
          },
          {
            "term": "computemetrics",
            "tf": 4,
            "weight": 0.045977
          },
          {
            "term": "results",
            "tf": 3,
            "weight": 0.034483
          },
          {
            "term": "integration",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "with",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "evaluators",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "pipeline",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "selection",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "evalinterval",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "callevaluator",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "logresults",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "savecsv",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "csv",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "updatemodelcard",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "card",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "bestmodelselection",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "best",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "integrate",
            "tf": 1,
            "weight": 0.011494
          }
        ],
        "unique_terms": 54,
        "total_terms": 87
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Integration with Training",
        "computemetrics",
        "evaluation",
        "evaluators",
        "integration",
        "model",
        "pipeline",
        "results",
        "selection",
        "training",
        "with"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7168292682926829,
      "overall": 0.8056097560975609
    }
  },
  {
    "text": "### Model Selection Mechanism  The training system uses the `primary_metric` and `greater_is_better` attributes to determine the best performing checkpoint:  - Each evaluator defines a `primary_metric` (e.g., `\"ndcg@10\"`, `\"spearman_cosine\"`) - The `greater_is_better` boolean indicates optimization direction - Best model loading occurs when `load_best_model_at_end=True` in training arguments",
    "metadata": {
      "chunk_id": "c0995f8ea55e-0012",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "filename": "Router_module_validation_in_trainer.md",
      "file_extension": ".md",
      "chunk_index": 12,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Model Selection Mechanism"
      ],
      "heading_text": "Model Selection Mechanism",
      "token_count": 88,
      "char_count": 394,
      "start_char": 10104,
      "end_char": 10498,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5233333333333333,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:50.087321",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 88,
      "document_id": "c0995f8ea55e",
      "document_name": "Router_module_validation_in_trainer",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "source_filename": "Router_module_validation_in_trainer.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "hierarchy_path": "Model Selection Mechanism",
      "chunk_hash": "e20eaf7ce76a31eb",
      "content_digest": "e20eaf7ce76a31eb",
      "chunk_length": 394,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "the",
          "model",
          "best",
          "training",
          "primary",
          "metric",
          "greater",
          "better",
          "selection",
          "mechanism",
          "system",
          "uses",
          "and",
          "attributes",
          "determine",
          "performing",
          "checkpoint",
          "each",
          "evaluator",
          "defines"
        ],
        "term_weights": [
          {
            "term": "the",
            "tf": 4,
            "weight": 0.086957
          },
          {
            "term": "model",
            "tf": 3,
            "weight": 0.065217
          },
          {
            "term": "best",
            "tf": 3,
            "weight": 0.065217
          },
          {
            "term": "training",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "primary",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "metric",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "greater",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "better",
            "tf": 2,
            "weight": 0.043478
          },
          {
            "term": "selection",
            "tf": 1,
            "weight": 0.021739
          },
          {
            "term": "mechanism",
            "tf": 1,
            "weight": 0.021739
          },
          {
            "term": "system",
            "tf": 1,
            "weight": 0.021739
          },
          {
            "term": "uses",
            "tf": 1,
            "weight": 0.021739
          },
          {
            "term": "and",
            "tf": 1,
            "weight": 0.021739
          },
          {
            "term": "attributes",
            "tf": 1,
            "weight": 0.021739
          },
          {
            "term": "determine",
            "tf": 1,
            "weight": 0.021739
          },
          {
            "term": "performing",
            "tf": 1,
            "weight": 0.021739
          },
          {
            "term": "checkpoint",
            "tf": 1,
            "weight": 0.021739
          },
          {
            "term": "each",
            "tf": 1,
            "weight": 0.021739
          },
          {
            "term": "evaluator",
            "tf": 1,
            "weight": 0.021739
          },
          {
            "term": "defines",
            "tf": 1,
            "weight": 0.021739
          }
        ],
        "unique_terms": 34,
        "total_terms": 46
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Model Selection Mechanism",
        "best",
        "better",
        "greater",
        "mechanism",
        "metric",
        "model",
        "primary",
        "selection",
        "the",
        "training"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5233333333333333,
      "overall": 0.741111111111111
    }
  },
  {
    "text": "### Multi-Function Evaluation  Many evaluators support multiple similarity functions simultaneously, enabling comprehensive comparison: ```python",
    "metadata": {
      "chunk_id": "c0995f8ea55e-0015",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "filename": "Router_module_validation_in_trainer.md",
      "file_extension": ".md",
      "chunk_index": 15,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Multi-Function Evaluation"
      ],
      "heading_text": "Multi-Function Evaluation",
      "token_count": 21,
      "char_count": 145,
      "start_char": 11132,
      "end_char": 11277,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "chunking_strategy": "hybrid_adaptive_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:50.088377",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 21,
      "document_id": "c0995f8ea55e",
      "document_name": "Router_module_validation_in_trainer",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "source_filename": "Router_module_validation_in_trainer.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Router_module_validation_in_trainer.md",
      "hierarchy_path": "Multi-Function Evaluation",
      "chunk_hash": "336d08d2e9fb1081",
      "content_digest": "336d08d2e9fb1081",
      "chunk_length": 145,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "multi",
          "function",
          "evaluation",
          "many",
          "evaluators",
          "support",
          "multiple",
          "similarity",
          "functions",
          "simultaneously",
          "enabling",
          "comprehensive",
          "comparison",
          "python"
        ],
        "term_weights": [
          {
            "term": "multi",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "function",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "evaluation",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "many",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "evaluators",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "support",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "multiple",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "similarity",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "functions",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "simultaneously",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "enabling",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "comprehensive",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "comparison",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "python",
            "tf": 1,
            "weight": 0.071429
          }
        ],
        "unique_terms": 14,
        "total_terms": 14
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Multi-Function Evaluation",
        "evaluation",
        "evaluators",
        "function",
        "functions",
        "many",
        "multi",
        "multiple",
        "similarity",
        "simultaneously",
        "support"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "overall": 0.7633333333333333
    }
  }
]