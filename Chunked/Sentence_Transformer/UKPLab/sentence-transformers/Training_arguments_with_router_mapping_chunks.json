[
  {
    "text": "### Data Collator Integration  The data collator uses `router_mapping` to pass task information to the `Router.tokenize()` method:  Sources: [sentence_transformers/data_collator.py:55-68](), [sentence_transformers/data_collator.py:92-94](), [sentence_transformers/models/Router.py:287-324]()",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0000",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 0,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Data Collator Integration"
      ],
      "heading_text": "Data Collator Integration",
      "token_count": 71,
      "char_count": 291,
      "start_char": 172,
      "end_char": 463,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5328571428571428,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.849868",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 71,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Data Collator Integration",
      "chunk_hash": "1b8600d3fd8d65e2",
      "content_digest": "1b8600d3fd8d65e2",
      "chunk_length": 291,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "data",
          "collator",
          "router",
          "sentence",
          "transformers",
          "the",
          "integration",
          "uses",
          "mapping",
          "pass",
          "task",
          "information",
          "tokenize",
          "method",
          "sources",
          "models",
          "287",
          "324"
        ],
        "term_weights": [
          {
            "term": "data",
            "tf": 4,
            "weight": 0.129032
          },
          {
            "term": "collator",
            "tf": 4,
            "weight": 0.129032
          },
          {
            "term": "router",
            "tf": 3,
            "weight": 0.096774
          },
          {
            "term": "sentence",
            "tf": 3,
            "weight": 0.096774
          },
          {
            "term": "transformers",
            "tf": 3,
            "weight": 0.096774
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.064516
          },
          {
            "term": "integration",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "uses",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "mapping",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "pass",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "task",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "information",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "tokenize",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "method",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "sources",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "models",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "287",
            "tf": 1,
            "weight": 0.032258
          },
          {
            "term": "324",
            "tf": 1,
            "weight": 0.032258
          }
        ],
        "unique_terms": 18,
        "total_terms": 31
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Data Collator Integration",
        "collator",
        "data",
        "integration",
        "mapping",
        "pass",
        "router",
        "sentence",
        "the",
        "transformers",
        "uses"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5328571428571428,
      "overall": 0.6776190476190477
    }
  },
  {
    "text": "### Validation  The trainer validates that models using `Router` modules have proper `router_mapping` configured:  Sources: [sentence_transformers/trainer.py:206-212]()",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0001",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 1,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Validation"
      ],
      "heading_text": "Validation",
      "token_count": 36,
      "char_count": 168,
      "start_char": 465,
      "end_char": 633,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.850778",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 36,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Validation",
      "chunk_hash": "6cc3a4fd64cd2e05",
      "content_digest": "6cc3a4fd64cd2e05",
      "chunk_length": 168,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "trainer",
          "router",
          "validation",
          "the",
          "validates",
          "that",
          "models",
          "using",
          "modules",
          "have",
          "proper",
          "mapping",
          "configured",
          "sources",
          "sentence",
          "transformers",
          "206",
          "212"
        ],
        "term_weights": [
          {
            "term": "trainer",
            "tf": 2,
            "weight": 0.1
          },
          {
            "term": "router",
            "tf": 2,
            "weight": 0.1
          },
          {
            "term": "validation",
            "tf": 1,
            "weight": 0.05
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.05
          },
          {
            "term": "validates",
            "tf": 1,
            "weight": 0.05
          },
          {
            "term": "that",
            "tf": 1,
            "weight": 0.05
          },
          {
            "term": "models",
            "tf": 1,
            "weight": 0.05
          },
          {
            "term": "using",
            "tf": 1,
            "weight": 0.05
          },
          {
            "term": "modules",
            "tf": 1,
            "weight": 0.05
          },
          {
            "term": "have",
            "tf": 1,
            "weight": 0.05
          },
          {
            "term": "proper",
            "tf": 1,
            "weight": 0.05
          },
          {
            "term": "mapping",
            "tf": 1,
            "weight": 0.05
          },
          {
            "term": "configured",
            "tf": 1,
            "weight": 0.05
          },
          {
            "term": "sources",
            "tf": 1,
            "weight": 0.05
          },
          {
            "term": "sentence",
            "tf": 1,
            "weight": 0.05
          },
          {
            "term": "transformers",
            "tf": 1,
            "weight": 0.05
          },
          {
            "term": "206",
            "tf": 1,
            "weight": 0.05
          },
          {
            "term": "212",
            "tf": 1,
            "weight": 0.05
          }
        ],
        "unique_terms": 18,
        "total_terms": 20
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Validation",
        "have",
        "models",
        "modules",
        "router",
        "that",
        "the",
        "trainer",
        "using",
        "validates",
        "validation"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "overall": 0.73
    }
  },
  {
    "text": "## Next Steps  For detailed training guides specific to each model type: - [SentenceTransformer Training](#3.1) - Dense embedding model training - [SparseEncoder Training](#3.2) - Sparse embedding model training   - [CrossEncoder Training](#3.3) - Cross-encoder reranking model training - [Memory-Efficient Training](#3.7) - Advanced memory optimization techniques",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0003",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 3,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Next Steps"
      ],
      "heading_text": "Next Steps",
      "token_count": 84,
      "char_count": 364,
      "start_char": 1306,
      "end_char": 1670,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.6945454545454545,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.852124",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 84,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Next Steps",
      "chunk_hash": "bd50c50629842fba",
      "content_digest": "bd50c50629842fba",
      "chunk_length": 364,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "training",
          "model",
          "embedding",
          "memory",
          "next",
          "steps",
          "for",
          "detailed",
          "guides",
          "specific",
          "each",
          "type",
          "sentencetransformer",
          "dense",
          "sparseencoder",
          "sparse",
          "crossencoder",
          "cross",
          "encoder",
          "reranking"
        ],
        "term_weights": [
          {
            "term": "training",
            "tf": 8,
            "weight": 0.222222
          },
          {
            "term": "model",
            "tf": 4,
            "weight": 0.111111
          },
          {
            "term": "embedding",
            "tf": 2,
            "weight": 0.055556
          },
          {
            "term": "memory",
            "tf": 2,
            "weight": 0.055556
          },
          {
            "term": "next",
            "tf": 1,
            "weight": 0.027778
          },
          {
            "term": "steps",
            "tf": 1,
            "weight": 0.027778
          },
          {
            "term": "for",
            "tf": 1,
            "weight": 0.027778
          },
          {
            "term": "detailed",
            "tf": 1,
            "weight": 0.027778
          },
          {
            "term": "guides",
            "tf": 1,
            "weight": 0.027778
          },
          {
            "term": "specific",
            "tf": 1,
            "weight": 0.027778
          },
          {
            "term": "each",
            "tf": 1,
            "weight": 0.027778
          },
          {
            "term": "type",
            "tf": 1,
            "weight": 0.027778
          },
          {
            "term": "sentencetransformer",
            "tf": 1,
            "weight": 0.027778
          },
          {
            "term": "dense",
            "tf": 1,
            "weight": 0.027778
          },
          {
            "term": "sparseencoder",
            "tf": 1,
            "weight": 0.027778
          },
          {
            "term": "sparse",
            "tf": 1,
            "weight": 0.027778
          },
          {
            "term": "crossencoder",
            "tf": 1,
            "weight": 0.027778
          },
          {
            "term": "cross",
            "tf": 1,
            "weight": 0.027778
          },
          {
            "term": "encoder",
            "tf": 1,
            "weight": 0.027778
          },
          {
            "term": "reranking",
            "tf": 1,
            "weight": 0.027778
          }
        ],
        "unique_terms": 24,
        "total_terms": 36
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Next Steps",
        "detailed",
        "embedding",
        "for",
        "guides",
        "memory",
        "model",
        "next",
        "specific",
        "steps",
        "training"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.6945454545454545,
      "overall": 0.7648484848484848
    }
  },
  {
    "text": "## Core Training Flow  The training process follows a structured pipeline from data input to model optimization: ```mermaid graph TD     Input[\"Input Dataset\"] --> Validate[\"validate_column_names()\"]     Validate --> Preprocess[\"preprocess_dataset()\"]     Preprocess --> DC[\"SentenceTransformerDataCollator\"]          subgraph \"Data Collation\"         DC --> ExtractLabels[\"Extract Labels\"]         DC --> ApplyPrompts[\"Apply Prompts\"]         DC --> Tokenize[\"tokenize_fn()\"]         DC --> RouterMap[\"Apply Router Mapping\"]     end          Tokenize --> Features[\"Tokenized Features\"]     Features --> ComputeLoss[\"compute_loss()\"]          subgraph \"Loss Computation\"         ComputeLoss --> CollectFeatures[\"collect_features()\"]         CollectFeatures --> LossForward[\"loss.forward()\"]         LossForward --> TrackComponents[\"track_loss_components()\"]     end          TrackComponents --> Optimizer[\"Optimizer Step\"]     Optimizer --> Evaluate[\"evaluation_loop()\"]          subgraph \"Evaluation\"         Evaluate --> EvalDataset[\"Eval Dataset Loss\"]         Evaluate --> Evaluator[\"evaluator()\"]         Evaluator --> Metrics[\"Evaluation Metrics\"]     end          Metrics --> Log[\"log()\"]     Log --> SaveModel[\"Save Model/Checkpoint\"] ``` **Sources:** [sentence_transformers/trainer.py:391-441](), [sentence_transformers/trainer.py:531-592](), [sentence_transformers/data_collator.py:35-119]()",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0006",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 6,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Core Training Flow"
      ],
      "heading_text": "Core Training Flow",
      "token_count": 295,
      "char_count": 1401,
      "start_char": 3855,
      "end_char": 5256,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5121153846153846,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.866494",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 295,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Core Training Flow",
      "chunk_hash": "f07cba4c3b3aa3b4",
      "content_digest": "f07cba4c3b3aa3b4",
      "chunk_length": 1401,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "loss",
          "features",
          "data",
          "input",
          "dataset",
          "validate",
          "preprocess",
          "subgraph",
          "tokenize",
          "end",
          "optimizer",
          "evaluate",
          "evaluation",
          "evaluator",
          "metrics",
          "log",
          "sentence",
          "transformers",
          "training",
          "model"
        ],
        "term_weights": [
          {
            "term": "loss",
            "tf": 5,
            "weight": 0.042735
          },
          {
            "term": "features",
            "tf": 4,
            "weight": 0.034188
          },
          {
            "term": "data",
            "tf": 3,
            "weight": 0.025641
          },
          {
            "term": "input",
            "tf": 3,
            "weight": 0.025641
          },
          {
            "term": "dataset",
            "tf": 3,
            "weight": 0.025641
          },
          {
            "term": "validate",
            "tf": 3,
            "weight": 0.025641
          },
          {
            "term": "preprocess",
            "tf": 3,
            "weight": 0.025641
          },
          {
            "term": "subgraph",
            "tf": 3,
            "weight": 0.025641
          },
          {
            "term": "tokenize",
            "tf": 3,
            "weight": 0.025641
          },
          {
            "term": "end",
            "tf": 3,
            "weight": 0.025641
          },
          {
            "term": "optimizer",
            "tf": 3,
            "weight": 0.025641
          },
          {
            "term": "evaluate",
            "tf": 3,
            "weight": 0.025641
          },
          {
            "term": "evaluation",
            "tf": 3,
            "weight": 0.025641
          },
          {
            "term": "evaluator",
            "tf": 3,
            "weight": 0.025641
          },
          {
            "term": "metrics",
            "tf": 3,
            "weight": 0.025641
          },
          {
            "term": "log",
            "tf": 3,
            "weight": 0.025641
          },
          {
            "term": "sentence",
            "tf": 3,
            "weight": 0.025641
          },
          {
            "term": "transformers",
            "tf": 3,
            "weight": 0.025641
          },
          {
            "term": "training",
            "tf": 2,
            "weight": 0.017094
          },
          {
            "term": "model",
            "tf": 2,
            "weight": 0.017094
          }
        ],
        "unique_terms": 70,
        "total_terms": 117
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Core Training Flow",
        "data",
        "dataset",
        "end",
        "features",
        "input",
        "loss",
        "preprocess",
        "subgraph",
        "tokenize",
        "validate"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5121153846153846,
      "overall": 0.7373717948717947
    }
  },
  {
    "text": "## SentenceTransformerTrainer  The `SentenceTransformerTrainer` class is the central component that orchestrates the entire training process. It extends the Hugging Face `Trainer` with specialized functionality for embedding models.",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0007",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 7,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "SentenceTransformerTrainer"
      ],
      "heading_text": "SentenceTransformerTrainer",
      "token_count": 43,
      "char_count": 232,
      "start_char": 5260,
      "end_char": 5492,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5566666666666666,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.868455",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 43,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "SentenceTransformerTrainer",
      "chunk_hash": "1d219fdfa109780e",
      "content_digest": "1d219fdfa109780e",
      "chunk_length": 232,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "the",
          "sentencetransformertrainer",
          "class",
          "central",
          "component",
          "that",
          "orchestrates",
          "entire",
          "training",
          "process",
          "extends",
          "hugging",
          "face",
          "trainer",
          "with",
          "specialized",
          "functionality",
          "for",
          "embedding",
          "models"
        ],
        "term_weights": [
          {
            "term": "the",
            "tf": 4,
            "weight": 0.166667
          },
          {
            "term": "sentencetransformertrainer",
            "tf": 2,
            "weight": 0.083333
          },
          {
            "term": "class",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "central",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "component",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "that",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "orchestrates",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "entire",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "training",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "process",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "extends",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "hugging",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "face",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "trainer",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "with",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "specialized",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "functionality",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "for",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "embedding",
            "tf": 1,
            "weight": 0.041667
          },
          {
            "term": "models",
            "tf": 1,
            "weight": 0.041667
          }
        ],
        "unique_terms": 20,
        "total_terms": 24
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "SentenceTransformerTrainer",
        "central",
        "class",
        "component",
        "entire",
        "orchestrates",
        "process",
        "sentencetransformertrainer",
        "that",
        "the",
        "training"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5566666666666666,
      "overall": 0.7188888888888888
    }
  },
  {
    "text": "### Key Features  - **Multi-dataset training support** through `DatasetDict` - **Loss component tracking** for complex loss functions that return dictionaries - **Router module integration** for asymmetric training architectures - **Prompt system support** for instruction-based training - **Automatic model card generation** during training",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0008",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 8,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Key Features"
      ],
      "heading_text": "Key Features",
      "token_count": 59,
      "char_count": 341,
      "start_char": 5494,
      "end_char": 5835,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5185714285714286,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.868899",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 59,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Key Features",
      "chunk_hash": "e0bfdc3e0444b810",
      "content_digest": "e0bfdc3e0444b810",
      "chunk_length": 341,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "training",
          "for",
          "support",
          "loss",
          "key",
          "features",
          "multi",
          "dataset",
          "through",
          "datasetdict",
          "component",
          "tracking",
          "complex",
          "functions",
          "that",
          "return",
          "dictionaries",
          "router",
          "module",
          "integration"
        ],
        "term_weights": [
          {
            "term": "training",
            "tf": 4,
            "weight": 0.105263
          },
          {
            "term": "for",
            "tf": 3,
            "weight": 0.078947
          },
          {
            "term": "support",
            "tf": 2,
            "weight": 0.052632
          },
          {
            "term": "loss",
            "tf": 2,
            "weight": 0.052632
          },
          {
            "term": "key",
            "tf": 1,
            "weight": 0.026316
          },
          {
            "term": "features",
            "tf": 1,
            "weight": 0.026316
          },
          {
            "term": "multi",
            "tf": 1,
            "weight": 0.026316
          },
          {
            "term": "dataset",
            "tf": 1,
            "weight": 0.026316
          },
          {
            "term": "through",
            "tf": 1,
            "weight": 0.026316
          },
          {
            "term": "datasetdict",
            "tf": 1,
            "weight": 0.026316
          },
          {
            "term": "component",
            "tf": 1,
            "weight": 0.026316
          },
          {
            "term": "tracking",
            "tf": 1,
            "weight": 0.026316
          },
          {
            "term": "complex",
            "tf": 1,
            "weight": 0.026316
          },
          {
            "term": "functions",
            "tf": 1,
            "weight": 0.026316
          },
          {
            "term": "that",
            "tf": 1,
            "weight": 0.026316
          },
          {
            "term": "return",
            "tf": 1,
            "weight": 0.026316
          },
          {
            "term": "dictionaries",
            "tf": 1,
            "weight": 0.026316
          },
          {
            "term": "router",
            "tf": 1,
            "weight": 0.026316
          },
          {
            "term": "module",
            "tf": 1,
            "weight": 0.026316
          },
          {
            "term": "integration",
            "tf": 1,
            "weight": 0.026316
          }
        ],
        "unique_terms": 31,
        "total_terms": 38
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Key Features",
        "dataset",
        "datasetdict",
        "features",
        "for",
        "key",
        "loss",
        "multi",
        "support",
        "through",
        "training"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5185714285714286,
      "overall": 0.7395238095238095
    }
  },
  {
    "text": "### Initialization and Configuration  The trainer accepts several key parameters: ```python",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0009",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 9,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Initialization and Configuration"
      ],
      "heading_text": "Initialization and Configuration",
      "token_count": 14,
      "char_count": 91,
      "start_char": 5837,
      "end_char": 5928,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.869739",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 14,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Initialization and Configuration",
      "chunk_hash": "ab11b8337a7b2bc7",
      "content_digest": "ab11b8337a7b2bc7",
      "chunk_length": 91,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "initialization",
          "and",
          "configuration",
          "the",
          "trainer",
          "accepts",
          "several",
          "key",
          "parameters",
          "python"
        ],
        "term_weights": [
          {
            "term": "initialization",
            "tf": 1,
            "weight": 0.1
          },
          {
            "term": "and",
            "tf": 1,
            "weight": 0.1
          },
          {
            "term": "configuration",
            "tf": 1,
            "weight": 0.1
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.1
          },
          {
            "term": "trainer",
            "tf": 1,
            "weight": 0.1
          },
          {
            "term": "accepts",
            "tf": 1,
            "weight": 0.1
          },
          {
            "term": "several",
            "tf": 1,
            "weight": 0.1
          },
          {
            "term": "key",
            "tf": 1,
            "weight": 0.1
          },
          {
            "term": "parameters",
            "tf": 1,
            "weight": 0.1
          },
          {
            "term": "python",
            "tf": 1,
            "weight": 0.1
          }
        ],
        "unique_terms": 10,
        "total_terms": 10
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Initialization and Configuration",
        "accepts",
        "and",
        "configuration",
        "initialization",
        "key",
        "parameters",
        "python",
        "several",
        "the",
        "trainer"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "overall": 0.7633333333333333
    }
  },
  {
    "text": "### Loss Computation Pipeline  The trainer implements a sophisticated loss computation system that supports both single and multi-dataset training: ```mermaid graph TD     ComputeLoss[\"compute_loss()\"] --> ExtractDataset[\"Extract dataset_name\"]     ExtractDataset --> CollectFeatures[\"collect_features()\"]     CollectFeatures --> SelectLoss[\"Select Loss Function\"]          subgraph \"Feature Collection\"         CollectFeatures --> ParseColumns[\"Parse Input Columns\"]         ParseColumns --> ExtractLabels[\"Extract Labels\"]         ParseColumns --> GroupFeatures[\"Group by Prefix\"]     end          subgraph \"Loss Selection\"         SelectLoss --> SingleLoss[\"Single Loss\"]         SelectLoss --> DictLoss[\"Dictionary Loss\"]         DictLoss --> DatasetMapping[\"Map dataset_name to loss\"]     end          GroupFeatures --> LossForward[\"loss.forward(features, labels)\"]     DatasetMapping --> LossForward     SingleLoss --> LossForward          LossForward --> CheckDict[\"Loss is dict?\"]     CheckDict -->|Yes| TrackComponents[\"track_loss_components()\"]     CheckDict -->|No| ReturnLoss[\"Return Loss\"]     TrackComponents --> SumComponents[\"Sum Loss Components\"]     SumComponents --> ReturnLoss ``` **Sources:** [sentence_transformers/trainer.py:391-441](), [sentence_transformers/trainer.py:496-529](), [sentence_transformers/trainer.py:443-462]()",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0011",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 11,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Loss Computation Pipeline"
      ],
      "heading_text": "Loss Computation Pipeline",
      "token_count": 275,
      "char_count": 1350,
      "start_char": 6536,
      "end_char": 7886,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5071428571428571,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.875701",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 275,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Loss Computation Pipeline",
      "chunk_hash": "52dd912c7c6c8ae4",
      "content_digest": "52dd912c7c6c8ae4",
      "chunk_length": 1350,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "loss",
          "trainer",
          "lossforward",
          "dataset",
          "collectfeatures",
          "selectloss",
          "parsecolumns",
          "checkdict",
          "sentence",
          "transformers",
          "computation",
          "single",
          "extractdataset",
          "extract",
          "name",
          "features",
          "subgraph",
          "labels",
          "groupfeatures",
          "end"
        ],
        "term_weights": [
          {
            "term": "loss",
            "tf": 13,
            "weight": 0.110169
          },
          {
            "term": "trainer",
            "tf": 4,
            "weight": 0.033898
          },
          {
            "term": "lossforward",
            "tf": 4,
            "weight": 0.033898
          },
          {
            "term": "dataset",
            "tf": 3,
            "weight": 0.025424
          },
          {
            "term": "collectfeatures",
            "tf": 3,
            "weight": 0.025424
          },
          {
            "term": "selectloss",
            "tf": 3,
            "weight": 0.025424
          },
          {
            "term": "parsecolumns",
            "tf": 3,
            "weight": 0.025424
          },
          {
            "term": "checkdict",
            "tf": 3,
            "weight": 0.025424
          },
          {
            "term": "sentence",
            "tf": 3,
            "weight": 0.025424
          },
          {
            "term": "transformers",
            "tf": 3,
            "weight": 0.025424
          },
          {
            "term": "computation",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "single",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "extractdataset",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "extract",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "name",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "features",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "subgraph",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "labels",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "groupfeatures",
            "tf": 2,
            "weight": 0.016949
          },
          {
            "term": "end",
            "tf": 2,
            "weight": 0.016949
          }
        ],
        "unique_terms": 69,
        "total_terms": 118
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Loss Computation Pipeline",
        "checkdict",
        "collectfeatures",
        "dataset",
        "loss",
        "lossforward",
        "parsecolumns",
        "selectloss",
        "sentence",
        "trainer",
        "transformers"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5071428571428571,
      "overall": 0.7357142857142857
    }
  },
  {
    "text": "## Training Arguments  The `SentenceTransformerTrainingArguments` class extends Hugging Face's `TrainingArguments` with additional parameters specific to embedding model training.",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0012",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 12,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Training Arguments"
      ],
      "heading_text": "Training Arguments",
      "token_count": 30,
      "char_count": 179,
      "start_char": 7890,
      "end_char": 8069,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.877216",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 30,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Training Arguments",
      "chunk_hash": "cc79c4205752094c",
      "content_digest": "cc79c4205752094c",
      "chunk_length": 179,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "training",
          "arguments",
          "the",
          "sentencetransformertrainingarguments",
          "class",
          "extends",
          "hugging",
          "face",
          "trainingarguments",
          "with",
          "additional",
          "parameters",
          "specific",
          "embedding",
          "model"
        ],
        "term_weights": [
          {
            "term": "training",
            "tf": 2,
            "weight": 0.125
          },
          {
            "term": "arguments",
            "tf": 1,
            "weight": 0.0625
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.0625
          },
          {
            "term": "sentencetransformertrainingarguments",
            "tf": 1,
            "weight": 0.0625
          },
          {
            "term": "class",
            "tf": 1,
            "weight": 0.0625
          },
          {
            "term": "extends",
            "tf": 1,
            "weight": 0.0625
          },
          {
            "term": "hugging",
            "tf": 1,
            "weight": 0.0625
          },
          {
            "term": "face",
            "tf": 1,
            "weight": 0.0625
          },
          {
            "term": "trainingarguments",
            "tf": 1,
            "weight": 0.0625
          },
          {
            "term": "with",
            "tf": 1,
            "weight": 0.0625
          },
          {
            "term": "additional",
            "tf": 1,
            "weight": 0.0625
          },
          {
            "term": "parameters",
            "tf": 1,
            "weight": 0.0625
          },
          {
            "term": "specific",
            "tf": 1,
            "weight": 0.0625
          },
          {
            "term": "embedding",
            "tf": 1,
            "weight": 0.0625
          },
          {
            "term": "model",
            "tf": 1,
            "weight": 0.0625
          }
        ],
        "unique_terms": 15,
        "total_terms": 16
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Training Arguments",
        "arguments",
        "class",
        "extends",
        "face",
        "hugging",
        "sentencetransformertrainingarguments",
        "the",
        "training",
        "trainingarguments",
        "with"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "overall": 0.7633333333333333
    }
  },
  {
    "text": "### Key SentenceTransformer-Specific Arguments  - **`batch_sampler`**: Controls how batches are constructed (e.g., `NO_DUPLICATES`, `GROUP_BY_LABEL`) - **`multi_dataset_batch_sampler`**: Strategy for sampling from multiple datasets - **`prompts`**: System for adding prompts to input text - **`router_mapping`**: Maps dataset columns to Router module routes - **`learning_rate_mapping`**: Allows different learning rates for different model components  **Sources:** [sentence_transformers/training_args.py](), [sentence_transformers/trainer.py:156-163]()",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0013",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 13,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Key SentenceTransformer-Specific Arguments"
      ],
      "heading_text": "Key SentenceTransformer-Specific Arguments",
      "token_count": 120,
      "char_count": 554,
      "start_char": 8071,
      "end_char": 8625,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5447169811320755,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.877943",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 120,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Key SentenceTransformer-Specific Arguments",
      "chunk_hash": "51509c81e688dbca",
      "content_digest": "51509c81e688dbca",
      "chunk_length": 554,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "for",
          "batch",
          "sampler",
          "dataset",
          "prompts",
          "router",
          "mapping",
          "learning",
          "different",
          "sentence",
          "transformers",
          "key",
          "sentencetransformer",
          "specific",
          "arguments",
          "controls",
          "how",
          "batches",
          "are",
          "constructed"
        ],
        "term_weights": [
          {
            "term": "for",
            "tf": 3,
            "weight": 0.05
          },
          {
            "term": "batch",
            "tf": 2,
            "weight": 0.033333
          },
          {
            "term": "sampler",
            "tf": 2,
            "weight": 0.033333
          },
          {
            "term": "dataset",
            "tf": 2,
            "weight": 0.033333
          },
          {
            "term": "prompts",
            "tf": 2,
            "weight": 0.033333
          },
          {
            "term": "router",
            "tf": 2,
            "weight": 0.033333
          },
          {
            "term": "mapping",
            "tf": 2,
            "weight": 0.033333
          },
          {
            "term": "learning",
            "tf": 2,
            "weight": 0.033333
          },
          {
            "term": "different",
            "tf": 2,
            "weight": 0.033333
          },
          {
            "term": "sentence",
            "tf": 2,
            "weight": 0.033333
          },
          {
            "term": "transformers",
            "tf": 2,
            "weight": 0.033333
          },
          {
            "term": "key",
            "tf": 1,
            "weight": 0.016667
          },
          {
            "term": "sentencetransformer",
            "tf": 1,
            "weight": 0.016667
          },
          {
            "term": "specific",
            "tf": 1,
            "weight": 0.016667
          },
          {
            "term": "arguments",
            "tf": 1,
            "weight": 0.016667
          },
          {
            "term": "controls",
            "tf": 1,
            "weight": 0.016667
          },
          {
            "term": "how",
            "tf": 1,
            "weight": 0.016667
          },
          {
            "term": "batches",
            "tf": 1,
            "weight": 0.016667
          },
          {
            "term": "are",
            "tf": 1,
            "weight": 0.016667
          },
          {
            "term": "constructed",
            "tf": 1,
            "weight": 0.016667
          }
        ],
        "unique_terms": 48,
        "total_terms": 60
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Key SentenceTransformer-Specific Arguments",
        "batch",
        "dataset",
        "different",
        "for",
        "learning",
        "mapping",
        "prompts",
        "router",
        "sampler",
        "sentence"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5447169811320755,
      "overall": 0.7482389937106917
    }
  },
  {
    "text": "## Data Processing System",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0014",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 14,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Data Processing System"
      ],
      "heading_text": "Data Processing System",
      "token_count": 4,
      "char_count": 25,
      "start_char": 8627,
      "end_char": 8652,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.878412",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 4,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Data Processing System",
      "chunk_hash": "527ace2daf5549d2",
      "content_digest": "527ace2daf5549d2",
      "chunk_length": 25,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "data",
          "processing",
          "system"
        ],
        "term_weights": [
          {
            "term": "data",
            "tf": 1,
            "weight": 0.333333
          },
          {
            "term": "processing",
            "tf": 1,
            "weight": 0.333333
          },
          {
            "term": "system",
            "tf": 1,
            "weight": 0.333333
          }
        ],
        "unique_terms": 3,
        "total_terms": 3
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Data Processing System",
        "data",
        "processing",
        "system"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "overall": 0.7633333333333333
    }
  },
  {
    "text": "### SentenceTransformerDataCollator  The data collator handles the conversion from raw dataset samples to tokenized model inputs: ```mermaid graph TD     DataCollator[\"SentenceTransformerDataCollator\"] --> ProcessFeatures[\"Process Features\"]          subgraph \"Feature Processing\"         ProcessFeatures --> ExtractDatasetName[\"Extract dataset_name\"]         ProcessFeatures --> ExtractLabels[\"Extract Labels\"]         ProcessFeatures --> ProcessColumns[\"Process Text Columns\"]     end          subgraph \"Column Processing\"         ProcessColumns --> GetTask[\"Get Router Task\"]         ProcessColumns --> GetPrompt[\"Get Column Prompt\"]         ProcessColumns --> ApplyPrompt[\"Apply Prompt Prefix\"]         ProcessColumns --> TokenizeColumn[\"tokenize_fn(texts, task)\"]     end          subgraph \"Prompt System\"         GetPrompt --> SinglePrompt[\"Single String Prompt\"]         GetPrompt --> DatasetPrompts[\"Dataset-specific Prompts\"]         GetPrompt --> ColumnPrompts[\"Column-specific Prompts\"]     end          TokenizeColumn --> PrefixKeys[\"Prefix with column_name\"]     PrefixKeys --> BatchOutput[\"Final Batch Dict\"] ``` **Sources:** [sentence_transformers/data_collator.py:35-119](), [sentence_transformers/data_collator.py:90-118]()",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0015",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 15,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "SentenceTransformerDataCollator"
      ],
      "heading_text": "SentenceTransformerDataCollator",
      "token_count": 249,
      "char_count": 1240,
      "start_char": 8654,
      "end_char": 9894,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5038297872340425,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.881972",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 249,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "SentenceTransformerDataCollator",
      "chunk_hash": "2746e2c06b39bc09",
      "content_digest": "2746e2c06b39bc09",
      "chunk_length": 1240,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "processcolumns",
          "processfeatures",
          "column",
          "getprompt",
          "prompt",
          "data",
          "collator",
          "dataset",
          "subgraph",
          "end",
          "sentencetransformerdatacollator",
          "the",
          "process",
          "processing",
          "extract",
          "name",
          "get",
          "task",
          "prefix",
          "tokenizecolumn"
        ],
        "term_weights": [
          {
            "term": "processcolumns",
            "tf": 5,
            "weight": 0.048077
          },
          {
            "term": "processfeatures",
            "tf": 4,
            "weight": 0.038462
          },
          {
            "term": "column",
            "tf": 4,
            "weight": 0.038462
          },
          {
            "term": "getprompt",
            "tf": 4,
            "weight": 0.038462
          },
          {
            "term": "prompt",
            "tf": 4,
            "weight": 0.038462
          },
          {
            "term": "data",
            "tf": 3,
            "weight": 0.028846
          },
          {
            "term": "collator",
            "tf": 3,
            "weight": 0.028846
          },
          {
            "term": "dataset",
            "tf": 3,
            "weight": 0.028846
          },
          {
            "term": "subgraph",
            "tf": 3,
            "weight": 0.028846
          },
          {
            "term": "end",
            "tf": 3,
            "weight": 0.028846
          },
          {
            "term": "sentencetransformerdatacollator",
            "tf": 2,
            "weight": 0.019231
          },
          {
            "term": "the",
            "tf": 2,
            "weight": 0.019231
          },
          {
            "term": "process",
            "tf": 2,
            "weight": 0.019231
          },
          {
            "term": "processing",
            "tf": 2,
            "weight": 0.019231
          },
          {
            "term": "extract",
            "tf": 2,
            "weight": 0.019231
          },
          {
            "term": "name",
            "tf": 2,
            "weight": 0.019231
          },
          {
            "term": "get",
            "tf": 2,
            "weight": 0.019231
          },
          {
            "term": "task",
            "tf": 2,
            "weight": 0.019231
          },
          {
            "term": "prefix",
            "tf": 2,
            "weight": 0.019231
          },
          {
            "term": "tokenizecolumn",
            "tf": 2,
            "weight": 0.019231
          }
        ],
        "unique_terms": 63,
        "total_terms": 104
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "SentenceTransformerDataCollator",
        "collator",
        "column",
        "data",
        "dataset",
        "end",
        "getprompt",
        "processcolumns",
        "processfeatures",
        "prompt",
        "subgraph"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5038297872340425,
      "overall": 0.734609929078014
    }
  },
  {
    "text": "### Prompt System  The training system supports a flexible prompting mechanism:  - **Single prompt**: Applied to all columns and datasets - **Column-specific prompts**: Different prompts for different input columns - **Dataset-specific prompts**: Different prompts for different datasets in multi-dataset training - **Combined prompts**: Dataset and column-specific combinations  **Sources:** [sentence_transformers/data_collator.py:69-89](), [sentence_transformers/data_collator.py:96-101]()",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0016",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 16,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Prompt System"
      ],
      "heading_text": "Prompt System",
      "token_count": 94,
      "char_count": 492,
      "start_char": 9898,
      "end_char": 10390,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "list_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.883076",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 94,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Prompt System",
      "chunk_hash": "500674ff340ecd5d",
      "content_digest": "500674ff340ecd5d",
      "chunk_length": 492,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "prompts",
          "different",
          "specific",
          "dataset",
          "prompt",
          "system",
          "training",
          "columns",
          "and",
          "datasets",
          "column",
          "for",
          "sentence",
          "transformers",
          "data",
          "collator",
          "the",
          "supports",
          "flexible",
          "prompting"
        ],
        "term_weights": [
          {
            "term": "prompts",
            "tf": 5,
            "weight": 0.09434
          },
          {
            "term": "different",
            "tf": 4,
            "weight": 0.075472
          },
          {
            "term": "specific",
            "tf": 3,
            "weight": 0.056604
          },
          {
            "term": "dataset",
            "tf": 3,
            "weight": 0.056604
          },
          {
            "term": "prompt",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "system",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "training",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "columns",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "and",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "datasets",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "column",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "for",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "sentence",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "transformers",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "data",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "collator",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "supports",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "flexible",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "prompting",
            "tf": 1,
            "weight": 0.018868
          }
        ],
        "unique_terms": 30,
        "total_terms": 53
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Prompt System",
        "and",
        "columns",
        "dataset",
        "datasets",
        "different",
        "prompt",
        "prompts",
        "specific",
        "system",
        "training"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5,
      "overall": 0.7333333333333333
    }
  },
  {
    "text": "## Router Module Integration\n\nThe Router module enables asymmetric training architectures where different input types (e.g., queries vs documents) are processed through different model paths.",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0017",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 17,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Router Module Integration"
      ],
      "heading_text": "Router Module Integration",
      "token_count": 31,
      "char_count": 191,
      "start_char": 10392,
      "end_char": 10583,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.554,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.883573",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 31,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Router Module Integration",
      "chunk_hash": "7ccf39b5ec88871b",
      "content_digest": "7ccf39b5ec88871b",
      "chunk_length": 191,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "router",
          "module",
          "different",
          "integration",
          "the",
          "enables",
          "asymmetric",
          "training",
          "architectures",
          "where",
          "input",
          "types",
          "queries",
          "documents",
          "are",
          "processed",
          "through",
          "model",
          "paths"
        ],
        "term_weights": [
          {
            "term": "router",
            "tf": 2,
            "weight": 0.090909
          },
          {
            "term": "module",
            "tf": 2,
            "weight": 0.090909
          },
          {
            "term": "different",
            "tf": 2,
            "weight": 0.090909
          },
          {
            "term": "integration",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "enables",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "asymmetric",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "training",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "architectures",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "where",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "input",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "types",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "queries",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "documents",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "are",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "processed",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "through",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "model",
            "tf": 1,
            "weight": 0.045455
          },
          {
            "term": "paths",
            "tf": 1,
            "weight": 0.045455
          }
        ],
        "unique_terms": 19,
        "total_terms": 22
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Router Module Integration",
        "architectures",
        "asymmetric",
        "different",
        "enables",
        "integration",
        "module",
        "router",
        "the",
        "training",
        "where"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.554,
      "overall": 0.718
    }
  },
  {
    "text": "### Router Training Requirements  When using a Router module, specific training arguments are required: ```mermaid graph TD     RouterModel[\"Model with Router\"] --> CheckMapping[\"Check router_mapping\"]     CheckMapping -->|Missing| Error[\"ValueError: router_mapping required\"]     CheckMapping -->|Present| ValidateMapping[\"Validate Mapping\"]          subgraph \"Router Mapping\"         ValidateMapping --> ColumnMapping[\"Column  Route Mapping\"]         ColumnMapping --> QueryRoute[\"'query' route\"]         ColumnMapping --> DocumentRoute[\"'document' route\"]     end          subgraph \"Data Collation\"         ColumnMapping --> DataCollator[\"SentenceTransformerDataCollator\"]         DataCollator --> ApplyRouting[\"Apply router_mapping\"]         ApplyRouting --> TokenizeWithTask[\"tokenize_fn(texts, task)\"]     end          TokenizeWithTask --> RouterForward[\"router.forward(features, task)\"] ``` **Sources:** [sentence_transformers/trainer.py:206-212](), [sentence_transformers/models/Router.py:217-245](), [sentence_transformers/data_collator.py:92-94]()",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0018",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 18,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Router Training Requirements"
      ],
      "heading_text": "Router Training Requirements",
      "token_count": 226,
      "char_count": 1058,
      "start_char": 10585,
      "end_char": 11643,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5170270270270271,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.915357",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 226,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Router Training Requirements",
      "chunk_hash": "468cbb234a75a94d",
      "content_digest": "468cbb234a75a94d",
      "chunk_length": 1058,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "router",
          "mapping",
          "columnmapping",
          "checkmapping",
          "route",
          "sentence",
          "transformers",
          "training",
          "required",
          "validatemapping",
          "subgraph",
          "end",
          "data",
          "datacollator",
          "applyrouting",
          "tokenizewithtask",
          "task",
          "requirements",
          "when",
          "using"
        ],
        "term_weights": [
          {
            "term": "router",
            "tf": 9,
            "weight": 0.1
          },
          {
            "term": "mapping",
            "tf": 6,
            "weight": 0.066667
          },
          {
            "term": "columnmapping",
            "tf": 4,
            "weight": 0.044444
          },
          {
            "term": "checkmapping",
            "tf": 3,
            "weight": 0.033333
          },
          {
            "term": "route",
            "tf": 3,
            "weight": 0.033333
          },
          {
            "term": "sentence",
            "tf": 3,
            "weight": 0.033333
          },
          {
            "term": "transformers",
            "tf": 3,
            "weight": 0.033333
          },
          {
            "term": "training",
            "tf": 2,
            "weight": 0.022222
          },
          {
            "term": "required",
            "tf": 2,
            "weight": 0.022222
          },
          {
            "term": "validatemapping",
            "tf": 2,
            "weight": 0.022222
          },
          {
            "term": "subgraph",
            "tf": 2,
            "weight": 0.022222
          },
          {
            "term": "end",
            "tf": 2,
            "weight": 0.022222
          },
          {
            "term": "data",
            "tf": 2,
            "weight": 0.022222
          },
          {
            "term": "datacollator",
            "tf": 2,
            "weight": 0.022222
          },
          {
            "term": "applyrouting",
            "tf": 2,
            "weight": 0.022222
          },
          {
            "term": "tokenizewithtask",
            "tf": 2,
            "weight": 0.022222
          },
          {
            "term": "task",
            "tf": 2,
            "weight": 0.022222
          },
          {
            "term": "requirements",
            "tf": 1,
            "weight": 0.011111
          },
          {
            "term": "when",
            "tf": 1,
            "weight": 0.011111
          },
          {
            "term": "using",
            "tf": 1,
            "weight": 0.011111
          }
        ],
        "unique_terms": 56,
        "total_terms": 90
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Router Training Requirements",
        "checkmapping",
        "columnmapping",
        "mapping",
        "required",
        "route",
        "router",
        "sentence",
        "training",
        "transformers",
        "validatemapping"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5170270270270271,
      "overall": 0.7390090090090089
    }
  },
  {
    "text": "### Router Configuration Example ```python",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0019",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 19,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Router Configuration Example"
      ],
      "heading_text": "Router Configuration Example",
      "token_count": 6,
      "char_count": 42,
      "start_char": 11647,
      "end_char": 11689,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7899999999999999,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.916301",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 6,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Router Configuration Example",
      "chunk_hash": "3898a77c3a962012",
      "content_digest": "3898a77c3a962012",
      "chunk_length": 42,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "router",
          "configuration",
          "example",
          "python"
        ],
        "term_weights": [
          {
            "term": "router",
            "tf": 1,
            "weight": 0.25
          },
          {
            "term": "configuration",
            "tf": 1,
            "weight": 0.25
          },
          {
            "term": "example",
            "tf": 1,
            "weight": 0.25
          },
          {
            "term": "python",
            "tf": 1,
            "weight": 0.25
          }
        ],
        "unique_terms": 4,
        "total_terms": 4
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Router Configuration Example",
        "configuration",
        "example",
        "python",
        "router"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7899999999999999,
      "overall": 0.83
    }
  },
  {
    "text": "# Router mapping example from training arguments router_mapping = {     \"question\": \"query\",     \"positive\": \"document\",      \"negative\": \"document\" } ``` **Sources:** [sentence_transformers/models/Router.py:45-54](), [tests/models/test_router.py:432-433]()",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0020",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 20,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Router mapping example from training arguments"
      ],
      "heading_text": "Router mapping example from training arguments",
      "token_count": 62,
      "char_count": 257,
      "start_char": 11691,
      "end_char": 11948,
      "semantic_score": 0.7,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7899999999999999,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.917395",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 62,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Router mapping example from training arguments",
      "chunk_hash": "5cce0bcb51bd4806",
      "content_digest": "5cce0bcb51bd4806",
      "chunk_length": 257,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "router",
          "mapping",
          "document",
          "models",
          "example",
          "from",
          "training",
          "arguments",
          "question",
          "query",
          "positive",
          "negative",
          "sources",
          "sentence",
          "transformers",
          "tests",
          "test",
          "432",
          "433"
        ],
        "term_weights": [
          {
            "term": "router",
            "tf": 4,
            "weight": 0.16
          },
          {
            "term": "mapping",
            "tf": 2,
            "weight": 0.08
          },
          {
            "term": "document",
            "tf": 2,
            "weight": 0.08
          },
          {
            "term": "models",
            "tf": 2,
            "weight": 0.08
          },
          {
            "term": "example",
            "tf": 1,
            "weight": 0.04
          },
          {
            "term": "from",
            "tf": 1,
            "weight": 0.04
          },
          {
            "term": "training",
            "tf": 1,
            "weight": 0.04
          },
          {
            "term": "arguments",
            "tf": 1,
            "weight": 0.04
          },
          {
            "term": "question",
            "tf": 1,
            "weight": 0.04
          },
          {
            "term": "query",
            "tf": 1,
            "weight": 0.04
          },
          {
            "term": "positive",
            "tf": 1,
            "weight": 0.04
          },
          {
            "term": "negative",
            "tf": 1,
            "weight": 0.04
          },
          {
            "term": "sources",
            "tf": 1,
            "weight": 0.04
          },
          {
            "term": "sentence",
            "tf": 1,
            "weight": 0.04
          },
          {
            "term": "transformers",
            "tf": 1,
            "weight": 0.04
          },
          {
            "term": "tests",
            "tf": 1,
            "weight": 0.04
          },
          {
            "term": "test",
            "tf": 1,
            "weight": 0.04
          },
          {
            "term": "432",
            "tf": 1,
            "weight": 0.04
          },
          {
            "term": "433",
            "tf": 1,
            "weight": 0.04
          }
        ],
        "unique_terms": 19,
        "total_terms": 25
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Router mapping example from training arguments",
        "arguments",
        "document",
        "example",
        "from",
        "mapping",
        "models",
        "query",
        "question",
        "router",
        "training"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7899999999999999,
      "overall": 0.7966666666666665
    }
  },
  {
    "text": "## Evaluation System\n\nThe training system supports evaluation through both dataset-based metrics and custom evaluators.",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0021",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 21,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Evaluation System"
      ],
      "heading_text": "Evaluation System",
      "token_count": 19,
      "char_count": 119,
      "start_char": 11951,
      "end_char": 12070,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.55,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.917913",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 19,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Evaluation System",
      "chunk_hash": "e5beb5ec776b9ac8",
      "content_digest": "e5beb5ec776b9ac8",
      "chunk_length": 119,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "evaluation",
          "system",
          "the",
          "training",
          "supports",
          "through",
          "both",
          "dataset",
          "based",
          "metrics",
          "and",
          "custom",
          "evaluators"
        ],
        "term_weights": [
          {
            "term": "evaluation",
            "tf": 2,
            "weight": 0.133333
          },
          {
            "term": "system",
            "tf": 2,
            "weight": 0.133333
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "training",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "supports",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "through",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "both",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "dataset",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "based",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "metrics",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "and",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "custom",
            "tf": 1,
            "weight": 0.066667
          },
          {
            "term": "evaluators",
            "tf": 1,
            "weight": 0.066667
          }
        ],
        "unique_terms": 13,
        "total_terms": 15
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Evaluation System",
        "based",
        "both",
        "dataset",
        "evaluation",
        "metrics",
        "supports",
        "system",
        "the",
        "through",
        "training"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.55,
      "overall": 0.75
    }
  },
  {
    "text": "### Evaluation Pipeline ```mermaid graph TD     EvaluationLoop[\"evaluation_loop()\"] --> EvalDataset[\"Eval Dataset Loss\"]     EvaluationLoop --> CheckEvaluator[\"evaluator exists?\"]          CheckEvaluator -->|No| ReturnMetrics[\"Return Dataset Metrics\"]     CheckEvaluator -->|Yes| RunEvaluator[\"evaluator(model, output_path, epoch, steps)\"]          subgraph \"Evaluator Execution\"         RunEvaluator --> SingleEvaluator[\"Single Evaluator\"]         RunEvaluator --> SequentialEvaluator[\"SequentialEvaluator\"]         SequentialEvaluator --> MultipleEvaluators[\"Multiple Evaluators\"]     end          SingleEvaluator --> EvaluatorMetrics[\"Evaluator Metrics\"]     MultipleEvaluators --> EvaluatorMetrics          EvaluatorMetrics --> PrefixMetrics[\"Prefix with eval_\"]     PrefixMetrics --> MergeMetrics[\"Merge with Dataset Metrics\"]     MergeMetrics --> FinalMetrics[\"Final Evaluation Output\"] ``` **Sources:** [sentence_transformers/trainer.py:545-592](), [sentence_transformers/trainer.py:312-315]()",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0022",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 22,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Evaluation Pipeline"
      ],
      "heading_text": "Evaluation Pipeline",
      "token_count": 200,
      "char_count": 1000,
      "start_char": 12072,
      "end_char": 13072,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.7105882352941176,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.921081",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 200,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Evaluation Pipeline",
      "chunk_hash": "d34eb9b14b065f59",
      "content_digest": "d34eb9b14b065f59",
      "chunk_length": 1000,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "evaluator",
          "evaluation",
          "dataset",
          "checkevaluator",
          "metrics",
          "runevaluator",
          "sequentialevaluator",
          "evaluatormetrics",
          "evaluationloop",
          "eval",
          "output",
          "singleevaluator",
          "multipleevaluators",
          "prefixmetrics",
          "with",
          "mergemetrics",
          "sentence",
          "transformers",
          "trainer",
          "pipeline"
        ],
        "term_weights": [
          {
            "term": "evaluator",
            "tf": 5,
            "weight": 0.064935
          },
          {
            "term": "evaluation",
            "tf": 3,
            "weight": 0.038961
          },
          {
            "term": "dataset",
            "tf": 3,
            "weight": 0.038961
          },
          {
            "term": "checkevaluator",
            "tf": 3,
            "weight": 0.038961
          },
          {
            "term": "metrics",
            "tf": 3,
            "weight": 0.038961
          },
          {
            "term": "runevaluator",
            "tf": 3,
            "weight": 0.038961
          },
          {
            "term": "sequentialevaluator",
            "tf": 3,
            "weight": 0.038961
          },
          {
            "term": "evaluatormetrics",
            "tf": 3,
            "weight": 0.038961
          },
          {
            "term": "evaluationloop",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "eval",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "output",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "singleevaluator",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "multipleevaluators",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "prefixmetrics",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "with",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "mergemetrics",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "sentence",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "transformers",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "trainer",
            "tf": 2,
            "weight": 0.025974
          },
          {
            "term": "pipeline",
            "tf": 1,
            "weight": 0.012987
          }
        ],
        "unique_terms": 48,
        "total_terms": 77
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Evaluation Pipeline",
        "checkevaluator",
        "dataset",
        "eval",
        "evaluation",
        "evaluationloop",
        "evaluator",
        "evaluatormetrics",
        "metrics",
        "runevaluator",
        "sequentialevaluator"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.7105882352941176,
      "overall": 0.8035294117647057
    }
  },
  {
    "text": "## Batch Sampling Strategies\n\nThe training system provides several batch sampling strategies to optimize training performance:",
    "metadata": {
      "chunk_id": "26fe74fcf57d-0023",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "filename": "Training_arguments_with_router_mapping.md",
      "file_extension": ".md",
      "chunk_index": 23,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Batch Sampling Strategies"
      ],
      "heading_text": "Batch Sampling Strategies",
      "token_count": 18,
      "char_count": 126,
      "start_char": 13076,
      "end_char": 13202,
      "semantic_score": 0.8,
      "structural_score": 0.7,
      "retrieval_quality": 0.515,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1536,
      "processing_timestamp": "2025-10-20T16:07:46.921880",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 18,
      "document_id": "26fe74fcf57d",
      "document_name": "Training_arguments_with_router_mapping",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "source_filename": "Training_arguments_with_router_mapping.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Training_arguments_with_router_mapping.md",
      "hierarchy_path": "Batch Sampling Strategies",
      "chunk_hash": "8f6fe181a88523a0",
      "content_digest": "8f6fe181a88523a0",
      "chunk_length": 126,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1536,
      "matryoshka_dimension": 1536,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "batch",
          "sampling",
          "strategies",
          "training",
          "the",
          "system",
          "provides",
          "several",
          "optimize",
          "performance"
        ],
        "term_weights": [
          {
            "term": "batch",
            "tf": 2,
            "weight": 0.142857
          },
          {
            "term": "sampling",
            "tf": 2,
            "weight": 0.142857
          },
          {
            "term": "strategies",
            "tf": 2,
            "weight": 0.142857
          },
          {
            "term": "training",
            "tf": 2,
            "weight": 0.142857
          },
          {
            "term": "the",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "system",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "provides",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "several",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "optimize",
            "tf": 1,
            "weight": 0.071429
          },
          {
            "term": "performance",
            "tf": 1,
            "weight": 0.071429
          }
        ],
        "unique_terms": 10,
        "total_terms": 14
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Batch Sampling Strategies",
        "batch",
        "optimize",
        "performance",
        "provides",
        "sampling",
        "several",
        "strategies",
        "system",
        "the",
        "training"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.7,
      "retrieval_quality": 0.515,
      "overall": 0.6716666666666667
    }
  }
]