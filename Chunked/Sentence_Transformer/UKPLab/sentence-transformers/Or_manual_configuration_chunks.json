[
  {
    "text": "## Module Composition Examples",
    "metadata": {
      "chunk_id": "3d2b49663eb1-0000",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "filename": "Or_manual_configuration.md",
      "file_extension": ".md",
      "chunk_index": 0,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Module Composition Examples"
      ],
      "heading_text": "Module Composition Examples",
      "token_count": 4,
      "char_count": 30,
      "start_char": 638,
      "end_char": 668,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:49.879826",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 4,
      "document_id": "3d2b49663eb1",
      "document_name": "Or_manual_configuration",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "source_filename": "Or_manual_configuration.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "hierarchy_path": "Module Composition Examples",
      "chunk_hash": "367496969f82d6fd",
      "content_digest": "367496969f82d6fd",
      "chunk_length": 30,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "module",
          "composition",
          "examples"
        ],
        "term_weights": [
          {
            "term": "module",
            "tf": 1,
            "weight": 0.333333
          },
          {
            "term": "composition",
            "tf": 1,
            "weight": 0.333333
          },
          {
            "term": "examples",
            "tf": 1,
            "weight": 0.333333
          }
        ],
        "unique_terms": 3,
        "total_terms": 3
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Module Composition Examples",
        "composition",
        "examples",
        "module"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "overall": 0.7633333333333333
    }
  },
  {
    "text": "### Dense Embedding Model (SentenceTransformer) ```mermaid graph LR     Text[\"Input Text\"] --> Transformer[\"Transformer<br/>(bert-base-uncased)\"]     Transformer --> Pooling[\"Pooling<br/>(mean pooling)\"]     Pooling --> Normalize[\"Normalize<br/>(L2 normalization)\"]     Normalize --> Embedding[\"Dense Embedding<br/>(768-dim vector)\"]          subgraph \"modules[0]\"         Transformer     end     subgraph \"modules[1]\"         Pooling     end     subgraph \"modules[2]\"         Normalize     end ```",
    "metadata": {
      "chunk_id": "3d2b49663eb1-0001",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "filename": "Or_manual_configuration.md",
      "file_extension": ".md",
      "chunk_index": 1,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Dense Embedding Model (SentenceTransformer)"
      ],
      "heading_text": "Dense Embedding Model (SentenceTransformer)",
      "token_count": 120,
      "char_count": 498,
      "start_char": 670,
      "end_char": 1168,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5110526315789473,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:49.880782",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 120,
      "document_id": "3d2b49663eb1",
      "document_name": "Or_manual_configuration",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "source_filename": "Or_manual_configuration.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "hierarchy_path": "Dense Embedding Model (SentenceTransformer)",
      "chunk_hash": "5fe3d85ccf0dc5d7",
      "content_digest": "5fe3d85ccf0dc5d7",
      "chunk_length": 498,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "pooling",
          "transformer",
          "normalize",
          "embedding",
          "subgraph",
          "modules",
          "end",
          "dense",
          "text",
          "model",
          "sentencetransformer",
          "mermaid",
          "graph",
          "input",
          "bert",
          "base",
          "uncased",
          "mean",
          "normalization",
          "768"
        ],
        "term_weights": [
          {
            "term": "pooling",
            "tf": 5,
            "weight": 0.119048
          },
          {
            "term": "transformer",
            "tf": 4,
            "weight": 0.095238
          },
          {
            "term": "normalize",
            "tf": 4,
            "weight": 0.095238
          },
          {
            "term": "embedding",
            "tf": 3,
            "weight": 0.071429
          },
          {
            "term": "subgraph",
            "tf": 3,
            "weight": 0.071429
          },
          {
            "term": "modules",
            "tf": 3,
            "weight": 0.071429
          },
          {
            "term": "end",
            "tf": 3,
            "weight": 0.071429
          },
          {
            "term": "dense",
            "tf": 2,
            "weight": 0.047619
          },
          {
            "term": "text",
            "tf": 2,
            "weight": 0.047619
          },
          {
            "term": "model",
            "tf": 1,
            "weight": 0.02381
          },
          {
            "term": "sentencetransformer",
            "tf": 1,
            "weight": 0.02381
          },
          {
            "term": "mermaid",
            "tf": 1,
            "weight": 0.02381
          },
          {
            "term": "graph",
            "tf": 1,
            "weight": 0.02381
          },
          {
            "term": "input",
            "tf": 1,
            "weight": 0.02381
          },
          {
            "term": "bert",
            "tf": 1,
            "weight": 0.02381
          },
          {
            "term": "base",
            "tf": 1,
            "weight": 0.02381
          },
          {
            "term": "uncased",
            "tf": 1,
            "weight": 0.02381
          },
          {
            "term": "mean",
            "tf": 1,
            "weight": 0.02381
          },
          {
            "term": "normalization",
            "tf": 1,
            "weight": 0.02381
          },
          {
            "term": "768",
            "tf": 1,
            "weight": 0.02381
          }
        ],
        "unique_terms": 22,
        "total_terms": 42
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Dense Embedding Model (SentenceTransformer)",
        "dense",
        "embedding",
        "end",
        "model",
        "modules",
        "normalize",
        "pooling",
        "subgraph",
        "text",
        "transformer"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5110526315789473,
      "overall": 0.7370175438596491
    }
  },
  {
    "text": "### Asymmetric Model with Router",
    "metadata": {
      "chunk_id": "3d2b49663eb1-0002",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "filename": "Or_manual_configuration.md",
      "file_extension": ".md",
      "chunk_index": 2,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Asymmetric Model with Router"
      ],
      "heading_text": "Asymmetric Model with Router",
      "token_count": 6,
      "char_count": 32,
      "start_char": 1171,
      "end_char": 1203,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "chunking_strategy": "hierarchical_balanced_semchunk",
      "content_type": "prose_section",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:49.881058",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 6,
      "document_id": "3d2b49663eb1",
      "document_name": "Or_manual_configuration",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "source_filename": "Or_manual_configuration.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "hierarchy_path": "Asymmetric Model with Router",
      "chunk_hash": "1ccfb7ba4e56c014",
      "content_digest": "1ccfb7ba4e56c014",
      "chunk_length": 32,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "asymmetric",
          "model",
          "with",
          "router"
        ],
        "term_weights": [
          {
            "term": "asymmetric",
            "tf": 1,
            "weight": 0.25
          },
          {
            "term": "model",
            "tf": 1,
            "weight": 0.25
          },
          {
            "term": "with",
            "tf": 1,
            "weight": 0.25
          },
          {
            "term": "router",
            "tf": 1,
            "weight": 0.25
          }
        ],
        "unique_terms": 4,
        "total_terms": 4
      },
      "modal_hint": "prose",
      "content_flags": {
        "has_code_block": false,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Asymmetric Model with Router",
        "asymmetric",
        "model",
        "router",
        "with"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.59,
      "overall": 0.7633333333333333
    }
  },
  {
    "text": "#### Asymmetric SparseEncoder Architecture ```mermaid graph TD     EncodeQuery[\"model.encode_query()\"] --> RouterQuery[\"Router(task='query')\"]     EncodeDoc[\"model.encode_document()\"] --> RouterDoc[\"Router(task='document')\"]          RouterQuery --> QueryPath[\"sub_modules['query']\"]     RouterDoc --> DocPath[\"sub_modules['document']\"]          QueryPath --> StaticEmb[\"SparseStaticEmbedding<br/>Pre-computed static weights\"]     DocPath --> MLMTrans[\"MLMTransformer<br/>Contextual MLM head\"]          StaticEmb --> QueryEmb[\"Sparse Query Embedding<br/>(efficient)\"]     MLMTrans --> SpladePool[\"SpladePooling<br/>max + log1p_relu activation\"]     SpladePool --> DocEmb[\"Sparse Document Embedding<br/>(contextual)\"]          subgraph RouterModule[\"Router Module\"]         QueryPath         DocPath         StaticEmb         MLMTrans         SpladePool     end ```",
    "metadata": {
      "chunk_id": "3d2b49663eb1-0003",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "filename": "Or_manual_configuration.md",
      "file_extension": ".md",
      "chunk_index": 3,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Asymmetric SparseEncoder Architecture"
      ],
      "heading_text": "Asymmetric SparseEncoder Architecture",
      "token_count": 195,
      "char_count": 864,
      "start_char": 1205,
      "end_char": 2069,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.519090909090909,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:49.882315",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 195,
      "document_id": "3d2b49663eb1",
      "document_name": "Or_manual_configuration",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "source_filename": "Or_manual_configuration.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "hierarchy_path": "Asymmetric SparseEncoder Architecture",
      "chunk_hash": "c20cbe79a20d3b08",
      "content_digest": "c20cbe79a20d3b08",
      "chunk_length": 864,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "query",
          "document",
          "router",
          "querypath",
          "docpath",
          "staticemb",
          "mlmtrans",
          "spladepool",
          "model",
          "encode",
          "routerquery",
          "task",
          "routerdoc",
          "sub",
          "modules",
          "contextual",
          "sparse",
          "embedding",
          "asymmetric",
          "sparseencoder"
        ],
        "term_weights": [
          {
            "term": "query",
            "tf": 4,
            "weight": 0.054795
          },
          {
            "term": "document",
            "tf": 4,
            "weight": 0.054795
          },
          {
            "term": "router",
            "tf": 3,
            "weight": 0.041096
          },
          {
            "term": "querypath",
            "tf": 3,
            "weight": 0.041096
          },
          {
            "term": "docpath",
            "tf": 3,
            "weight": 0.041096
          },
          {
            "term": "staticemb",
            "tf": 3,
            "weight": 0.041096
          },
          {
            "term": "mlmtrans",
            "tf": 3,
            "weight": 0.041096
          },
          {
            "term": "spladepool",
            "tf": 3,
            "weight": 0.041096
          },
          {
            "term": "model",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "encode",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "routerquery",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "task",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "routerdoc",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "sub",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "modules",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "contextual",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "sparse",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "embedding",
            "tf": 2,
            "weight": 0.027397
          },
          {
            "term": "asymmetric",
            "tf": 1,
            "weight": 0.013699
          },
          {
            "term": "sparseencoder",
            "tf": 1,
            "weight": 0.013699
          }
        ],
        "unique_terms": 45,
        "total_terms": 73
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Asymmetric SparseEncoder Architecture",
        "docpath",
        "document",
        "encode",
        "mlmtrans",
        "model",
        "query",
        "querypath",
        "router",
        "spladepool",
        "staticemb"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.519090909090909,
      "overall": 0.7396969696969696
    }
  },
  {
    "text": "# Data collator uses mapping to set task in features collator = SparseEncoderDataCollator(     tokenize_fn=model.tokenize,     router_mapping=args.router_mapping ) ``` Sources: [sentence_transformers/models/Router.py:104-156](), [sentence_transformers/sparse_encoder/trainer.py:180-186](), [sentence_transformers/sparse_encoder/data_collator.py:55-68]()",
    "metadata": {
      "chunk_id": "3d2b49663eb1-0006",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "filename": "Or_manual_configuration.md",
      "file_extension": ".md",
      "chunk_index": 6,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Data collator uses mapping to set task in features"
      ],
      "heading_text": "Data collator uses mapping to set task in features",
      "token_count": 82,
      "char_count": 353,
      "start_char": 2360,
      "end_char": 2713,
      "semantic_score": 0.6,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5757142857142857,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:49.883941",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 82,
      "document_id": "3d2b49663eb1",
      "document_name": "Or_manual_configuration",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "source_filename": "Or_manual_configuration.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "hierarchy_path": "Data collator uses mapping to set task in features",
      "chunk_hash": "98b18f45e0ec5179",
      "content_digest": "98b18f45e0ec5179",
      "chunk_length": 353,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "collator",
          "mapping",
          "router",
          "sentence",
          "transformers",
          "data",
          "tokenize",
          "sparse",
          "encoder",
          "uses",
          "set",
          "task",
          "features",
          "sparseencoderdatacollator",
          "model",
          "args",
          "sources",
          "models",
          "104",
          "156"
        ],
        "term_weights": [
          {
            "term": "collator",
            "tf": 3,
            "weight": 0.081081
          },
          {
            "term": "mapping",
            "tf": 3,
            "weight": 0.081081
          },
          {
            "term": "router",
            "tf": 3,
            "weight": 0.081081
          },
          {
            "term": "sentence",
            "tf": 3,
            "weight": 0.081081
          },
          {
            "term": "transformers",
            "tf": 3,
            "weight": 0.081081
          },
          {
            "term": "data",
            "tf": 2,
            "weight": 0.054054
          },
          {
            "term": "tokenize",
            "tf": 2,
            "weight": 0.054054
          },
          {
            "term": "sparse",
            "tf": 2,
            "weight": 0.054054
          },
          {
            "term": "encoder",
            "tf": 2,
            "weight": 0.054054
          },
          {
            "term": "uses",
            "tf": 1,
            "weight": 0.027027
          },
          {
            "term": "set",
            "tf": 1,
            "weight": 0.027027
          },
          {
            "term": "task",
            "tf": 1,
            "weight": 0.027027
          },
          {
            "term": "features",
            "tf": 1,
            "weight": 0.027027
          },
          {
            "term": "sparseencoderdatacollator",
            "tf": 1,
            "weight": 0.027027
          },
          {
            "term": "model",
            "tf": 1,
            "weight": 0.027027
          },
          {
            "term": "args",
            "tf": 1,
            "weight": 0.027027
          },
          {
            "term": "sources",
            "tf": 1,
            "weight": 0.027027
          },
          {
            "term": "models",
            "tf": 1,
            "weight": 0.027027
          },
          {
            "term": "104",
            "tf": 1,
            "weight": 0.027027
          },
          {
            "term": "156",
            "tf": 1,
            "weight": 0.027027
          }
        ],
        "unique_terms": 23,
        "total_terms": 37
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Data collator uses mapping to set task in features",
        "collator",
        "data",
        "encoder",
        "mapping",
        "router",
        "sentence",
        "sparse",
        "tokenize",
        "transformers",
        "uses"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.6,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5757142857142857,
      "overall": 0.6919047619047619
    }
  },
  {
    "text": "### Training Pipeline Integration ```mermaid flowchart TD     Dataset[\"Training Dataset\"] --> Collator[\"SentenceTransformerDataCollator\"]     Collator --> RouterMap{router_mapping?}          RouterMap -->|Yes| TaskRoute[\"Add task to features<br/>based on column mapping\"]     RouterMap -->|No| DirectProcess[\"Process normally\"]          TaskRoute --> Model[\"Model.forward()\"]     DirectProcess --> Model          Model --> Features[\"Processed Features\"]     Features --> Loss[\"Loss Function<br/>(MultipleNegativesRankingLoss, etc.)\"] ``` Sources: [sentence_transformers/trainer.py:198-204](), [sentence_transformers/data_collator.py:55-68]()",
    "metadata": {
      "chunk_id": "3d2b49663eb1-0007",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "filename": "Or_manual_configuration.md",
      "file_extension": ".md",
      "chunk_index": 7,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Training Pipeline Integration"
      ],
      "heading_text": "Training Pipeline Integration",
      "token_count": 143,
      "char_count": 641,
      "start_char": 2716,
      "end_char": 3357,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5443478260869565,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:49.885434",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 143,
      "document_id": "3d2b49663eb1",
      "document_name": "Or_manual_configuration",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "source_filename": "Or_manual_configuration.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "hierarchy_path": "Training Pipeline Integration",
      "chunk_hash": "5d9d41b2cf509f37",
      "content_digest": "5d9d41b2cf509f37",
      "chunk_length": 641,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "features",
          "model",
          "collator",
          "routermap",
          "training",
          "dataset",
          "mapping",
          "taskroute",
          "directprocess",
          "loss",
          "sentence",
          "transformers",
          "pipeline",
          "integration",
          "mermaid",
          "flowchart",
          "sentencetransformerdatacollator",
          "router",
          "yes",
          "add"
        ],
        "term_weights": [
          {
            "term": "features",
            "tf": 4,
            "weight": 0.075472
          },
          {
            "term": "model",
            "tf": 4,
            "weight": 0.075472
          },
          {
            "term": "collator",
            "tf": 3,
            "weight": 0.056604
          },
          {
            "term": "routermap",
            "tf": 3,
            "weight": 0.056604
          },
          {
            "term": "training",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "dataset",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "mapping",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "taskroute",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "directprocess",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "loss",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "sentence",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "transformers",
            "tf": 2,
            "weight": 0.037736
          },
          {
            "term": "pipeline",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "integration",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "mermaid",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "flowchart",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "sentencetransformerdatacollator",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "router",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "yes",
            "tf": 1,
            "weight": 0.018868
          },
          {
            "term": "add",
            "tf": 1,
            "weight": 0.018868
          }
        ],
        "unique_terms": 35,
        "total_terms": 53
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Training Pipeline Integration",
        "collator",
        "dataset",
        "directprocess",
        "features",
        "loss",
        "mapping",
        "model",
        "routermap",
        "taskroute",
        "training"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5443478260869565,
      "overall": 0.7481159420289855
    }
  },
  {
    "text": "### Module Configuration System  Each module uses a configuration system for persistence: ```mermaid graph TD     Module[\"Module Instance\"] --> Config[\"get_config_dict()\"]     Config --> Keys[\"config_keys<br/>['param1', 'param2']\"]     Keys --> JSON[\"config.json<br/>{param1: value1, param2: value2}\"]          subgraph \"Save Process\"         Config         Keys         JSON     end          LoadJSON[\"config.json\"] --> LoadConfig[\"load_config()\"]     LoadConfig --> LoadModule[\"Module.load()\"]     LoadModule --> NewInstance[\"Module Instance\"]          subgraph \"Load Process\"         LoadJSON         LoadConfig         LoadModule         NewInstance     end ``` Key configuration attributes: - `config_keys`: List of attributes to save/load - `config_file_name`: Name of config file (usually `\"config.json\"`) - `save_in_root`: Whether to save in model root or subfolder",
    "metadata": {
      "chunk_id": "3d2b49663eb1-0009",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "filename": "Or_manual_configuration.md",
      "file_extension": ".md",
      "chunk_index": 9,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Module Configuration System"
      ],
      "heading_text": "Module Configuration System",
      "token_count": 194,
      "char_count": 873,
      "start_char": 3391,
      "end_char": 4264,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5104819277108433,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:49.888597",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 194,
      "document_id": "3d2b49663eb1",
      "document_name": "Or_manual_configuration",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "source_filename": "Or_manual_configuration.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "hierarchy_path": "Module Configuration System",
      "chunk_hash": "e1bca3bb5c5a4e9c",
      "content_digest": "e1bca3bb5c5a4e9c",
      "chunk_length": 873,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "config",
          "module",
          "keys",
          "json",
          "save",
          "load",
          "configuration",
          "loadconfig",
          "loadmodule",
          "system",
          "instance",
          "param1",
          "param2",
          "subgraph",
          "process",
          "end",
          "loadjson",
          "newinstance",
          "attributes",
          "file"
        ],
        "term_weights": [
          {
            "term": "config",
            "tf": 12,
            "weight": 0.137931
          },
          {
            "term": "module",
            "tf": 6,
            "weight": 0.068966
          },
          {
            "term": "keys",
            "tf": 5,
            "weight": 0.057471
          },
          {
            "term": "json",
            "tf": 5,
            "weight": 0.057471
          },
          {
            "term": "save",
            "tf": 4,
            "weight": 0.045977
          },
          {
            "term": "load",
            "tf": 4,
            "weight": 0.045977
          },
          {
            "term": "configuration",
            "tf": 3,
            "weight": 0.034483
          },
          {
            "term": "loadconfig",
            "tf": 3,
            "weight": 0.034483
          },
          {
            "term": "loadmodule",
            "tf": 3,
            "weight": 0.034483
          },
          {
            "term": "system",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "instance",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "param1",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "param2",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "subgraph",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "process",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "end",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "loadjson",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "newinstance",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "attributes",
            "tf": 2,
            "weight": 0.022989
          },
          {
            "term": "file",
            "tf": 2,
            "weight": 0.022989
          }
        ],
        "unique_terms": 38,
        "total_terms": 87
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Module Configuration System",
        "config",
        "configuration",
        "json",
        "keys",
        "load",
        "loadconfig",
        "loadmodule",
        "module",
        "save",
        "system"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5104819277108433,
      "overall": 0.7368273092369476
    }
  },
  {
    "text": "### Data Flow in Training ```mermaid sequenceDiagram     participant Dataset     participant Collator as SentenceTransformerDataCollator     participant Model as Model Pipeline     participant Loss as Loss Function          Dataset->>Collator: Raw text columns     Note over Collator: Apply prompts, router_mapping     Collator->>Model: Tokenized features + task info          loop For each module         Model->>Model: module.forward(features)         Note over Model: Update features dict     end          Model->>Loss: Final features     Loss->>Loss: Compute loss value ```",
    "metadata": {
      "chunk_id": "3d2b49663eb1-0012",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "filename": "Or_manual_configuration.md",
      "file_extension": ".md",
      "chunk_index": 12,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Data Flow in Training"
      ],
      "heading_text": "Data Flow in Training",
      "token_count": 112,
      "char_count": 577,
      "start_char": 5258,
      "end_char": 5835,
      "semantic_score": 0.7999999999999999,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.53,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:49.892719",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 112,
      "document_id": "3d2b49663eb1",
      "document_name": "Or_manual_configuration",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "source_filename": "Or_manual_configuration.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "hierarchy_path": "Data Flow in Training",
      "chunk_hash": "5dee0fcc53b1bd94",
      "content_digest": "5dee0fcc53b1bd94",
      "chunk_length": 577,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "model",
          "loss",
          "participant",
          "collator",
          "features",
          "dataset",
          "note",
          "over",
          "module",
          "data",
          "flow",
          "training",
          "mermaid",
          "sequencediagram",
          "sentencetransformerdatacollator",
          "pipeline",
          "function",
          "raw",
          "text",
          "columns"
        ],
        "term_weights": [
          {
            "term": "model",
            "tf": 7,
            "weight": 0.114754
          },
          {
            "term": "loss",
            "tf": 6,
            "weight": 0.098361
          },
          {
            "term": "participant",
            "tf": 4,
            "weight": 0.065574
          },
          {
            "term": "collator",
            "tf": 4,
            "weight": 0.065574
          },
          {
            "term": "features",
            "tf": 4,
            "weight": 0.065574
          },
          {
            "term": "dataset",
            "tf": 2,
            "weight": 0.032787
          },
          {
            "term": "note",
            "tf": 2,
            "weight": 0.032787
          },
          {
            "term": "over",
            "tf": 2,
            "weight": 0.032787
          },
          {
            "term": "module",
            "tf": 2,
            "weight": 0.032787
          },
          {
            "term": "data",
            "tf": 1,
            "weight": 0.016393
          },
          {
            "term": "flow",
            "tf": 1,
            "weight": 0.016393
          },
          {
            "term": "training",
            "tf": 1,
            "weight": 0.016393
          },
          {
            "term": "mermaid",
            "tf": 1,
            "weight": 0.016393
          },
          {
            "term": "sequencediagram",
            "tf": 1,
            "weight": 0.016393
          },
          {
            "term": "sentencetransformerdatacollator",
            "tf": 1,
            "weight": 0.016393
          },
          {
            "term": "pipeline",
            "tf": 1,
            "weight": 0.016393
          },
          {
            "term": "function",
            "tf": 1,
            "weight": 0.016393
          },
          {
            "term": "raw",
            "tf": 1,
            "weight": 0.016393
          },
          {
            "term": "text",
            "tf": 1,
            "weight": 0.016393
          },
          {
            "term": "columns",
            "tf": 1,
            "weight": 0.016393
          }
        ],
        "unique_terms": 37,
        "total_terms": 61
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Data Flow in Training",
        "collator",
        "data",
        "dataset",
        "features",
        "loss",
        "model",
        "module",
        "note",
        "over",
        "participant"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.7999999999999999,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.53,
      "overall": 0.7433333333333332
    }
  },
  {
    "text": "### Router Training Requirements  When using `Router` modules, additional training configuration is required: ```python",
    "metadata": {
      "chunk_id": "3d2b49663eb1-0013",
      "source_file": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "filename": "Or_manual_configuration.md",
      "file_extension": ".md",
      "chunk_index": 13,
      "document_level": 1,
      "parent_chunk_id": null,
      "child_chunk_ids": [],
      "section_path": [
        "Router Training Requirements"
      ],
      "heading_text": "Router Training Requirements",
      "token_count": 20,
      "char_count": 119,
      "start_char": 5838,
      "end_char": 5957,
      "semantic_score": 0.8,
      "structural_score": 0.8999999999999999,
      "retrieval_quality": 0.5685714285714286,
      "chunking_strategy": "hierarchical_balanced_structural",
      "content_type": "code_block",
      "embedding_model": "jina-code-embeddings-1.5b",
      "embedding_dimension": 1024,
      "processing_timestamp": "2025-10-20T18:30:49.893246",
      "model_aware_chunking": true,
      "within_token_limit": true,
      "estimated_tokens": 20,
      "document_id": "3d2b49663eb1",
      "document_name": "Or_manual_configuration",
      "source_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "source_filename": "Or_manual_configuration.md",
      "source_directory": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers",
      "relative_path": "Docs\\Sentence_Transformer\\UKPLab\\sentence-transformers\\Or_manual_configuration.md",
      "hierarchy_path": "Router Training Requirements",
      "chunk_hash": "d8bd5efbc1dd06ca",
      "content_digest": "d8bd5efbc1dd06ca",
      "chunk_length": 119,
      "payload_version": "1.3",
      "collection_hints": [
        "sentence_transformer"
      ],
      "target_model": "jina-code-embeddings-1.5b",
      "chunker_version": "v5_unified",
      "chunk_size_tokens": 26214,
      "chunk_overlap_tokens": 2621,
      "chunk_size_chars": 104856,
      "chunk_overlap_chars": 10484,
      "safety_margin": 0.8,
      "model_hf_id": "jinaai/jina-code-embeddings-1.5b",
      "model_max_tokens": 32768,
      "model_vector_dim": 1024,
      "recommended_batch_size": 16,
      "backend": "pytorch",
      "memory_efficient": true,
      "query_prefix": "Encode this code snippet for semantic retrieval: ",
      "sparse_features": {
        "version": "1.0",
        "weighting": "tf-normalized",
        "top_terms": [
          "router",
          "training",
          "requirements",
          "when",
          "using",
          "modules",
          "additional",
          "configuration",
          "required",
          "python"
        ],
        "term_weights": [
          {
            "term": "router",
            "tf": 2,
            "weight": 0.166667
          },
          {
            "term": "training",
            "tf": 2,
            "weight": 0.166667
          },
          {
            "term": "requirements",
            "tf": 1,
            "weight": 0.083333
          },
          {
            "term": "when",
            "tf": 1,
            "weight": 0.083333
          },
          {
            "term": "using",
            "tf": 1,
            "weight": 0.083333
          },
          {
            "term": "modules",
            "tf": 1,
            "weight": 0.083333
          },
          {
            "term": "additional",
            "tf": 1,
            "weight": 0.083333
          },
          {
            "term": "configuration",
            "tf": 1,
            "weight": 0.083333
          },
          {
            "term": "required",
            "tf": 1,
            "weight": 0.083333
          },
          {
            "term": "python",
            "tf": 1,
            "weight": 0.083333
          }
        ],
        "unique_terms": 10,
        "total_terms": 12
      },
      "modal_hint": "code",
      "content_flags": {
        "has_code_block": true,
        "has_table": false,
        "has_list": false,
        "has_json": false,
        "has_formula": false
      },
      "search_keywords": [
        "Router Training Requirements",
        "additional",
        "configuration",
        "modules",
        "python",
        "required",
        "requirements",
        "router",
        "training",
        "using",
        "when"
      ],
      "collection_name": "Sentence_Transformer"
    },
    "advanced_scores": {
      "semantic": 0.8,
      "structural": 0.8999999999999999,
      "retrieval_quality": 0.5685714285714286,
      "overall": 0.7561904761904762
    }
  }
]